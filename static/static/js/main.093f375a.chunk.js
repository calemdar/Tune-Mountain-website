(this["webpackJsonptune-mountain-client"]=this["webpackJsonptune-mountain-client"]||[]).push([[0],{208:function(e,t,n){},221:function(e,t){e.exports="data:image/png;base64,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"},222:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAQAAABpN6lAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkAgYVAzrpZhRiAAACH0lEQVR42u2dOU7DYBgFX5yC0LMVHIfAKUBwC8RFAFGwiDIsB4jSQEBCwBWIWJQAUY5gU1gI0WHH/obijWvrzT9ylPKXctZ0oZFSZRU+E/W0qaamoakt9TSp1CvVSOda/Rlp6bTSgd9PX4ulj7+k2xrNTjSTz9R5/EyZ7tUqdfxZPdZsdpx//PWOZMq0XSrAToBZW7oMmBmoUfj4DT0HmJ019K6F0r/Rv7Ost8JvvAR4jRLNBcyoROT5GK9ESchQ8ZUgr5iZf4wD0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtABNojRkp/hKkFeiz5Chj8JvBHklugmYGRS+c1Z61VOA2XWivYCZ3VJvHQSY7UvSSc2XG9+Vvnr7oWazw3xoptYEV1Nc7Lyofo1mR9+Xr0tSWx0NlVY6MFZX61P+0Ta1oa7GlXqlGqqjlXzgC6j1AcnsGbLmAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTAyLTA2VDIxOjAzOjU4KzAwOjAwh3nvzwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wMi0wNlQyMTowMzo1OCswMDowMPYkV3MAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},223:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAQAAABpN6lAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkAgYVAyFjA92OAAAERElEQVR42uWdT4hWVRjGfzVZmA4zpQsZ3UQGgqCFLSKiVFQU+kctLOkPLpJ0kYsINxFBGLUIdDkuJ3QxLhRBrURF0bTZiKHTJv+MWKNCTo7lODZ+b4u7iDK95/u+e8/z3nuesz13eJ/fvBfu893LeyBUnaxjPxcZ51cG+IqlTAq+tgZaxgXsP+sCH9GtLiyOlnLzDvvZusp6OtTlla0ert3FfraOM1ddYrnqu6d9wxjjQ+5Xl1mWpjGeC8AwvucJdanlaF2QfcMY5T3uU5dbvLYGAzCMb5ipLrhoDTYFwPiNN9QlF6vrTQIwjH6mq8suSh00WgBgXOJldenFqKsl+9naQqe6/PbV3QYA4zyL1Aa0AIwGvTysNqEEYBiDPK22oQVg/MUXPKi2ogRgGCeZrzajBWCMsaF60blIAIZxlNlqS1oAxihrqhSZigdgVCoylQPAGOFttTUtAMPoZ5ranhaAcYmX1Aa1AAyjz3dkKh+AcY6FaptaAK4jUxwAhnGaBWqzWgBZZHL3vjEmAMMYYI7ashZAFpkcvWWKD8AwjviJTBoAxjXWqK1rARjGXnrU9rUAjBHeShuAIY9MegDGsDIyeQBgGH1MTRuAcY4X0gZgNNjMQykDMIxTsSOTNwDRI5M/AIbxQ7zI5BNAxMjkFYBhHOHxtAFEiUy+ARjGnnIjk38AxhVeSxuAYfTzaNoAjGFebMWgo1/f2tQMdtFbfGSqTgdk6yzPN2ewPh2Q6TEO8EmRrqrWAdnaG34r1K0DMi1nH10pA4Bn2Bn2ZWJdAcBCPgvZlve9Vjcjaict6zbPMpC3qb4dAB1szN9UZwCwhHlpA4A3UweQ+1xYdwDJ3wJT894k1B0AWNoARrmVNoCTeRvqDuBw6gC2pQ1gD4MpA5jg4/xNdQbwOSfa/yPV/EnMMHbzQIjBunbAIVYykS6AHazgj7Ct9QMwwQZeZyx0e9B9UiGd4V2ONnNBnTrA2ML85uzXqQOGWM3B5i+rSwds56lW7OerCs8Bl3mlPLL+AWwvd2aRbwC/p/2R1LfMKtu+XwB/sj7OGAafACLOLvQHIPIoFm8AfuTJeOa9AZCMY/ID4Geei23eD4AGvUxR2PcB4DyLNeZ9AOjnEZ19NYBSY45/ACXHHN8AIsQczwCixByvAG7Eijk+Abgb0R4TwE2PEyfjAYgeczwBcDx1NgYAUczxAUAYczwAkMYcPQBxzNECuMyramtKAC5ijgqAm5ijAfCdn5gTH4CzmBMbgLuYExPALT71F3PiAXAac+IAcBxzYgA44znmhKmrZfMNNjFZXX77avWorSH/MSdUrR22VoGYE6qfmjQvHYBZhpo7cLFCMSdU4UduXmWVutgyFHroauViTri+zjV/nferF3PC1cPoPe0fjDHXT6u7H709zDt1/t//oyUM/c+D7geqcccKdbKWfVxknF84xpcsqmrA/bf+BrbynChoRDjLAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTAyLTA2VDIxOjAzOjMzKzAwOjAwQxGysgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wMi0wNlQyMTowMzozMyswMDowMDJMCg4AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},228:function(e,t,n){e.exports=n(594)},535:function(e,t,n){},536:function(e,t,n){},537:function(e,t,n){},538:function(e,t,n){},539:function(e,t,n){},540:function(e,t,n){},541:function(e,t,n){},542:function(e,t,n){},543:function(e,t,n){},544:function(e,t,n){},545:function(e,t,n){},546:function(e,t,n){},547:function(e,t,n){},548:function(e,t,n){},589:function(e,t,n){},593:function(e,t,n){},594:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(6),i=n(7),s=n(13),l=n(11),c=n(12),u=n(14),m=n(220),h=n.n(m),d=n(20),p=n.n(d),A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o={source:"SpotifyService",state:e,body:t,message:n};a?a.next(o):console.log(o)},g=function(){var e=new URLSearchParams(window.location.search),t=e.get("accessToken"),n=e.get("refreshToken");return window.history.replaceState(null,"","/"),{accessToken:t,refreshToken:n}},f=n(25),y=n.n(f),v="http://localhost:8080",S=function(){function e(t){var n=this;Object(r.a)(this,e);var a=new p.a.BehaviorSubject(!1),o=new p.a.BehaviorSubject(!1),i=new p.a.BehaviorSubject(!1),s=new p.a.ReplaySubject;a.combineLatest(o,i,(function(e,t,n){return e&&t&&n})).filter((function(e){return e})).subscribe((function(){A("LOGGED_IN",null,"User has logged in.",s),function(){if(!n.player){var e=window.Spotify.Player;n.player=new e({name:"tune mountain",getOAuthToken:function(e){return e(n.accessToken)},volume:.5}),n.player.connect(),n.player.addListener("ready",(function(e){var t=e.device_id;A("PLAYER_READY","Spotify player ready to stream songs on ".concat(t),s)})),n.player.addListener("player_state_changed",(function(e){return A("PLAYER_STATE_CHANGED",e,"Spotify player state changed!",s)}))}}()})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=g(),a=null,o=null;if(n.accessToken&&n.refreshToken)a=n.accessToken,o=n.refreshToken,A("ACCESS_TOKEN_ACQUIRED",{accessToken:a,refreshToken:o},"Using tokens from query returned from server!",t),localStorage.setItem("spotify-refresh-token",n.refreshToken);else{A("LOADING_TOKEN_FROM_LOCAL_STORAGE",null,"Spotify tokens not found in query. Looking in local storage...",t);var r=localStorage.getItem("spotify-refresh-token");r?(A("REFRESHING_TOKEN",null,"Spotify refresh token found in localStorage. Fetching new accessToken from server...",t),e(r).then((function(e){A("ACCESS_TOKEN_ACQUIRED",{accessToken:e.accessToken,refreshToken:r},"Spotify access token fetched.",t)}))):A("NO_ACCESS_TOKEN",null,"No tokens found or refreshed. User must log in.",t)}}(this.getNewAccessToken,s),s.filter((function(e){return"ACCESS_TOKEN_ACQUIRED"===e.state})).subscribe((function(e){var t=e.body,a=t.accessToken,o=t.refreshToken;n.accessToken=a,n.refreshToken=o,a&&o?i.next(!0):i.next(!1)})),this.name=t,this.player=null,this.spotifyStateNotifier=s,h()(["https://sdk.scdn.co/spotify-player.js"]).then((function(){a.next(!0)})),window.onSpotifyWebPlaybackSDKReady=function(){return o.next(!0)},this.spotifyStateNotifier=s,this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.toggle=this.toggle.bind(this)}return Object(i.a)(e,[{key:"activate",value:function(){return this.player?this.player.connect():null}},{key:"deactivate",value:function(){this.player&&this.player.disconnect()}},{key:"getNewAccessToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||this.refreshToken;return fetch("".concat(v,"/spotify-service/refresh-token/").concat(t)).then((function(e){return e.json()})).catch((function(e){console.error(e)}))}},{key:"pause",value:function(){return this.player?this.player.pause():null}},{key:"toggle",value:function(){return this.player?this.player.togglePlay():null}},{key:"resume",value:function(){return this.player?this.player.resume():null}},{key:"play",value:function(e){var t="spotify:track:".concat(e);if(!this.player)throw new Error("Player not initialized.");var n=function(e){var t=e.spotifyURI,n=e.playerInstance._options,a=n.getOAuthToken,o=n.id;a((function(e){var n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}};t&&(n.body=JSON.stringify({uris:[t]})),fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(o),n).then((function(){return console.log("Success: Playing uri: ".concat(t))}))}))};n({playerInstance:this.player,spotifyURI:t})}},{key:"login",value:function(){console.log("Redirecting to Spotify for authorization..."),window.location="".concat(v,"/spotify-service/login")}},{key:"search",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n="q=",a=0;a<(arguments.length<=1?0:arguments.length-1);a++)n+=a+1<1||arguments.length<=a+1?void 0:arguments[a+1],n+=a+1===(arguments.length<=1?0:arguments.length-1)?"":"&20";var o="type=track",r="limit=8",i="https://api.spotify.com/v1/search?".concat(n,"&").concat(o,"&").concat(r),s={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.accessToken)}};fetch(i,s).then((function(e){return e.json()})).then((function(n){A("TRACKS_FETCHED",n,"Choose any of these songs...",e.spotifyStateNotifier),t&&t(n)})).catch((function(e){throw new Error(e)}))}},{key:"getAudioAnalysisAndFeatures",value:function(e,t){var n=this,a="https://api.spotify.com/v1/audio-analysis/".concat(e),o="https://api.spotify.com/v1/audio-features/".concat(e),r={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.accessToken)}},i=null,s=null;fetch(a,r).then((function(e){return e.json()})).then((function(e){return i=e,fetch(o,r)})).then((function(e){return e.json()})).then((function(e){s=e,t&&t({features:s,analysis:i}),A("METADATA_FECHED",{audioFeatures:s,audioAnalysis:i},"Metadata available.",n.spotifyStateNotifier)})).catch((function(e){return console.error(e)}))}},{key:"getUserInfo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=function(n,a){var o=t?"https://api.spotify.com/v1/users/".concat(t):"https://api.spotify.com/v1/me",r={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)}};return fetch(o,r).then((function(e){return e.json()})).then((function(e){return n({spotifyID:e.id,displayName:e.display_name,imageUrl:e.images[0]?e.images[0].url:"http://icons.iconarchive.com/icons/papirus-team/papirus-status/128/avatar-default-icon.png"})})).catch((function(e){return a(e)}))};return new Promise(n)}},{key:"getSongInfo",value:function(e){var t=this;return new Promise((function(n,a){var o="https://api.spotify.com/v1/tracks/".concat(e),r={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t.accessToken)}};return fetch(o,r).then((function(e){return e.json()})).then((function(e){var t=e.id,a=e.name,o=y.a.get(e,"artists").map((function(e){return e.name})),r=y.a.get(e,"album.images")[0].url,i=y.a.get(e,"duration_ms");n(function(e,t,n,a,o){return{name:t,artist:n,img:a,id:e,duration:o}}(t,a,o,r,i))})).catch((function(e){return a(e)}))}))}},{key:"stateNotifier",get:function(){return this.spotifyStateNotifier}},{key:"playerState",get:function(){return this.player?this.player.getCurrentState():null}}]),e}(),E=n(83),b=n(50),k=n(35),O=n(221),C=n.n(O),w=(n(535),Object.freeze({SMALL:"SMALL",LARGE:"LARGE",RETURN:"RETURN",ENTER:"ENTER",SPOTIFY:"SPOTIFY"})),R=Object.freeze({SMALL:"hud-button-small",LARGE:"hud-button-large",RETURN:"hud-button-return",ENTER:"hud-button-enter",SPOTIFY:"hud-button-small spotify-button"}),j=Object.freeze({SMALL:"hud-button-small-pressed",RETURN:"hud-button-return-pressed",ENTER:"hud-button-enter-pressed",SPOTIFY:"hud-button-small-pressed"}),M=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={isHovering:!1},n.btnRef=o.a.createRef(),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.text,r=t.onClick,i=t.style,s=t.children,l=t.className,c=t.disabled,u=this.state.isHovering,m=Boolean(w[n])?R[n]:R.SMALL,h=function(){return e.setState({isHovering:!c&&!0})};return o.a.createElement("div",{onMouseEnter:h,onMouseOver:h,onMouseLeave:function(){return e.setState({isHovering:!1})},className:"button-wrapper ".concat(l),style:i},o.a.createElement("button",{ref:this.btnRef,className:"hud-button ".concat(m," ").concat(u?"".concat(j[n]," pressed"):""),disabled:c,onClick:function(t){e.btnRef.current.blur(),t.buttonType=m,r(t)}},n===w.RETURN?o.a.createElement("img",{src:C.a,alt:"return icon"}):a?String(a).toLowerCase():s))}}]),t}(a.Component);M.defaultProps={type:w.SMALL,text:"Button Text Not Set",onClick:function(){return console.error("Click handler not set for this button.")},onHover:function(){return console.error("Hover handler not set for this button.")},onHoverEnd:function(){return console.error("End Hover handler not set for this button.")},className:"",isHovering:!1,disabled:!1};var N=M,T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:26;if(e.length<=t)return e;var n=e.substring(0,t);return"".concat(n,"...")},I=(n(208),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={value:""},n.lastSubmittedValue=null,n.autoSearchTimer=null,n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.autoSearchTimer&&clearTimeout(this.autoSearchTimer),this.autoSearchTimer=setTimeout(this.handleSubmit,this.props.submissionTimeoutDelay),this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(){""!==this.state.value&&this.state.value!==this.lastSubmittedValue&&(this.props.searchSongsWithQuery(function(e){var t=e.trim().match(/[A-Za-z0-1 ]/g),n=[],a="";return t.forEach((function(e,o){" "===e?(a.length>0&&n.push(a),a=""):(a+=e,o+1===t.length&&n.push(a))})),n}(this.state.value)),this.lastSubmittedValue=this.state.value)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-bar-container",onKeyUp:function(t){13===t.keyCode&&e.handleSubmit()}},o.a.createElement("input",{className:"text-box",placeholder:this.props.placeholder,type:"text",value:this.state.value,onChange:this.handleChange}),o.a.createElement(N,{type:w.ENTER,text:"Search",onClick:this.handleSubmit}))}}]),t}(a.Component));I.defaultProps={searchSongsWithQuery:function(e){throw new Error("Unable to search song with query ".concat(e,". No handler passed."))},placeholder:"Type the name of a song...",submissionTimeoutDelay:2e3};var q=I,Q=(n(536),Object.freeze({small:"song-container-small",large:"song-container-large",mini:"song-container-mini"})),P=function(e){var t=e.name,n=e.id,a=e.imgURL,r=e.artist,i=e.duration,s=e.handleClick,l=e.size;return o.a.createElement("div",{className:"".concat(Q[l]," song-container"),onClick:function(){return s({name:t,id:n,imgURL:a,artist:r,duration:i})}},o.a.createElement("img",{className:"song-image",src:a,alt:"Album cover for song ".concat(t," by artist ").concat(r)}),o.a.createElement("div",{className:"song-data-container"},o.a.createElement("h1",{className:"song-name"},T(t,36)),o.a.createElement("h2",{className:"song-artist"},T(function(e){var t="";return e.forEach((function(n,a){t+=n,t+=a+1===e.length?"":", "})),t}(r)))))};P.defaultProps={name:"No Song Name Assigned",id:"No ID Passed",imgURL:"No image URL passed",artist:"No Artist",duration:-1,handleClick:function(){console.log("Song clicked!")},size:"small"};var L=P,B=function(e){function t(e){var n;if(Object(r.a)(this,t),n=Object(s.a)(this,Object(l.a)(t).call(this,e)),!e.spotifyService)throw new Error("HUDSearchMenu requires a reference to an instance of SpotifyService!");return n.spotifyService=e.spotifyService,n.state={songList:[],hasSearched:!1},n.filterReceivedJSON=n.filterReceivedJSON.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"filterReceivedJSON",value:function(e){var t=y.a.get(e,"tracks.items");if(!t)throw new Error("No items found in search response!");var n=t.map((function(e){return function(e,t,n,a,o){return{name:t,artist:n,img:a,id:e,duration:o}}(e.id,e.name,y.a.get(e,"artists").map((function(e){return e.name})),y.a.get(e,"album.images")[0].url,y.a.get(e,"duration_ms"))}));this.setState({songList:n})}},{key:"renderSongList",value:function(){var e=this,t=this.state,n=t.songList,a=t.hasSearched;return 0===n.length&&a?o.a.createElement("h3",{className:"message"},"No songs found. Try something else."):n.map((function(t){return o.a.createElement(L,{name:t.name,artist:t.artist,imgURL:t.img,duration:t.duration,id:t.id,key:t.id,handleClick:function(){return e.props.selectSong(t)}})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"hud-song-search-outer-container"},o.a.createElement("div",{className:"hud-song-search-inner-container"},o.a.createElement(q,{searchSongsWithQuery:function(t){return e.spotifyService.search(e.filterReceivedJSON,t)}}),o.a.createElement("div",{className:"song-list-container"},this.renderSongList()),o.a.createElement(N,{text:"<",type:w.RETURN,onClick:this.props.onReturn})))}}]),t}(a.Component);B.defaultProps={spotifyService:null,selectSong:function(e){console.error("Couldn't select song. No handler passed",e)},onReturn:function(){console.error("No return button handler passed.")}};var D=B,x=(n(537),function(e){var t=e.hasLoggedIn,n=e.onSongSelectRequest,a=e.onLoginRequest,r=e.onAboutPageRequest,i=e.onLeaderboardsPageRequest,s=o.a.createElement(N,{text:"Spotify Login",onClick:a,type:w.SPOTIFY}),l=o.a.createElement(N,{text:"Select Song",onClick:n,type:w.SPOTIFY}),c=o.a.createElement(N,{text:"About",onClick:r,disabled:!0}),u=o.a.createElement(N,{text:"Leaderboards",onClick:i}),m=t?l:s;return o.a.createElement("div",{className:"hud-main-menu-outer-container"},o.a.createElement("div",{className:"hud-main-menu-button-container"},m,u,c))});x.defaultProps={hasLoggedIn:!1,onSongSelectRequest:function(){throw new Error("No handler passed.")},onLoginRequest:function(){throw new Error("No handler passed.")},onAboutPageRequest:function(){throw new Error("No handler passed.")},onLeaderboardsPageRequest:function(){throw new Error("No handler passed.")}};var U=x,F=(n(538),n(539),function(e){return e.replayMode?o.a.createElement("div",{className:"score-container"},o.a.createElement("h2",null,"Replaying...")):o.a.createElement("div",{className:"score-container"},o.a.createElement("h2",null,"Score: "),o.a.createElement("h1",null,e.score),o.a.createElement("h1",null,"x",e.multiplier))}),G=function(e){var t=e.songObject,n=e.positionInMilliseconds,a=e.shouldDisplay,r=e.score,i=e.multiplier,s=e.replayMode;if(!t)return null;var l=t.name,c=t.id,u=t.img,m=t.artist,h=t.duration,d={width:"".concat(n/h*100,"%")},p={display:a?"block":"none"};return o.a.createElement("div",{className:"song-progress-bar-container",style:p},o.a.createElement("div",{id:"bar-wrapper"},o.a.createElement("div",{id:"progress-bar",style:d})),o.a.createElement("div",{className:"progress-bar-song-icon"},o.a.createElement(L,{name:l,artist:m,imgURL:u,id:c,size:"mini"}),o.a.createElement(F,{score:r||0,multiplier:i||1,replayMode:s})))},z="IN",V="OUT",J=function(e){e?e.next({position:z}):console.error("Invalid subject!")},Z=function(e){e?e.next({position:V}):console.error("Invalid subject!")},W=(n(540),function(e){function t(e){var n;Object(r.a)(this,t),n=Object(s.a)(this,Object(l.a)(t).call(this,e));var a=e.IN,o=e.OUT,i=e.transitionRequestObservable;return n.state={position:e.shouldMountIn?z:V,currentStyle:e.shouldMountIn?a:o},i.delay(250).subscribe((function(t){var a=t.position;a===z?(n.handleTransitionStart(a),n.setState({position:a,currentStyle:e.IN})):a===V?(console.log("request received"),n.handleTransitionStart(a),n.setState({position:a,currentStyle:e.OUT})):console.error("Invalid position request. Position passed: ",a)})),n.handleTransitionStart=n.handleTransitionStart.bind(Object(c.a)(n)),n.handleTransitionEnd=n.handleTransitionEnd.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.onMount;e&&e()}},{key:"handleTransitionStart",value:function(e){switch(e){case z:if(!this.props.onStartTransitionIn)break;this.props.onStartTransitionIn();break;case V:if(!this.props.onStartTransitionOut)break;this.props.onStartTransitionOut();break;default:console.error("'Position' state not appropriate: ",e)}}},{key:"handleTransitionEnd",value:function(){switch(this.state.position){case z:if(!this.props.onEndTransitionIn)break;this.props.onEndTransitionIn();break;case V:if(!this.props.onEndTransitionOut)break;this.props.onEndTransitionOut();break;default:console.error("'Position' state not appropriate: ",this.state.position)}}},{key:"render",value:function(){return o.a.createElement("div",{className:"transition-wrapper",style:Object(E.a)({},this.state.currentStyle,{zIndex:this.props.zIndex}),onTransitionEnd:this.handleTransitionEnd},this.props.children)}}]),t}(a.Component));W.defaultProps={onMount:function(){return console.log("Component mounted.")},onStartTransitionIn:null,onStartTransitionOut:null,onEndTransitionIn:null,onEndTransitionOut:null,shouldMountIn:!1,zIndex:0};var H=W,Y=function(e){var t=e.shouldMountIn,n=e.onStartTransitionIn,a=e.onStartTransitionOut,r=e.onEndTransitionIn,i=e.onEndTransitionOut,s=e.transitionRequestObservable,l=e.onMount,c=e.zIndex,u=l||function(){return J(s)};return o.a.createElement(H,{zIndex:c,OUT:{opacity:0},IN:{opacity:1},shouldMountIn:t,transitionRequestObservable:s,onMount:u,onEndTransitionIn:r,onEndTransitionOut:i,onStartTransitionIn:n,onStartTransitionOut:a},e.children)};Y.defaultProps={shouldMountIn:!1,zIndex:0};var K=Y,X=function(e){var t=e.shouldMountIn,n=e.onStartTransitionIn,a=e.onStartTransitionOut,r=e.onEndTransitionIn,i=e.onEndTransitionOut,s=e.transitionRequestObservable,l=e.onMount,c=e.zIndex,u=l||function(){return J(s)};return o.a.createElement(H,{zIndex:c,OUT:{left:"100%"},IN:{left:"0"},shouldMountIn:t,transitionRequestObservable:s,onMount:u,onEndTransitionIn:r,onEndTransitionOut:i,onStartTransitionIn:n,onStartTransitionOut:a},e.children)};X.defaultProps={shouldMountIn:!1};var _=X,$=(n(541),function(e){var t=e.songObject,n=e.onConfirmation,a=t.name,r=t.id,i=t.img,s=t.artist;return o.a.createElement("div",{className:"hud-song-select-outer-container"},o.a.createElement(L,{size:"large",name:a,id:r,imgURL:i,artist:s}),o.a.createElement(N,{text:"Generate Level",onClick:n,style:{width:"auto"}}),o.a.createElement(N,{text:"<",type:w.RETURN,onClick:e.onReturn}))}),ee=(n(542),["Very Poorly","Poorly","Somewhat Poorly","Somewhat Well","Well","Very Well"]),te=["Too Slow","Just Right","Too Fast"],ne="What elements did you particularly enjoy?",ae="What elements did you dislike/have problems with?",oe="Did you feel that this experience helped enhance the music you were listening to?",re="To what degree did you feel the elements in the level were in sync with the music you were listening to?",ie="To what extent did the moving background help create the feeling of going down a mountain?",se="How much did the moving background help give you a sense of speed as you went down the mountain? ",le="Did you feel like you were moving at an appropriate speed for the type of song you chose?",ce="To what extent did the background elements positively complement your visual experience?",ue="Did being able to choose your own song help enhance your experience over having to select a song from a given playlist?",me="Select all that describe your experience choosing a song",he="Would you like to see song recommendations based on what you listened to previously?",de="If there was one thing you could improve about this game what would it be?",pe="Do you have a Spotify Premium account?",Ae="Do you have any other comments about our game?",ge=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={btnText:"Submit!",showForm:!1,q1:{speed:!1,tricks:!1,movingBackground:!1,jump:!1,art:!1,character:!1,animations:!1,mountain:!1},q2:{speed:!1,tricks:!1,movingBackground:!1,jump:!1,art:!1,character:!1,animations:!1,mountain:!1},q3:!1,q4:1,q5:1,q6:1,q7:2,q8:1,q9:!1,q10:{easy:!1,overwhelming:!1,couldntChoose:!1,cateredToMe:!1,noChoiceAvailabe:!1,other:!1,otherValue:""},q11:!1,q12:"",q13:!1,q14:"",name:""},n.handleChange=n.handleChange.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e,t){var n={};n[e]=t,this.setState(n)}},{key:"renderQuestionContainer",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o.a.createElement("div",{className:"question-container",key:n},o.a.createElement("p",null,e),o.a.createElement("div",{className:"input-wrapper"},t,a?o.a.createElement("p",null,o.a.createElement("strong",null,a)):null))}},{key:"renderMultipleChoiceContainer",value:function(e,t,n,a){var r=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this.state[a],l=Object.keys(s);if(i){if(n.length!==l.length-1)return console.error("Labels not compatible with keys.",{labels:n.length,keys:l.length}),null}else if(n.length!==l.length)return console.error("Labels not compatible with keys.",{labels:n.length,keys:l.length}),null;var c=function(e){var t=e.target.value,n=s;n[t]=e.target.checked;var o={};o[a]=n,r.setState(o)},u=function(e){var t=s;t.otherValue=e.target.value;var n={};n[a]=t,r.setState(n)};return o.a.createElement("div",{className:"question-container",key:t},o.a.createElement("p",null,e),o.a.createElement("div",{className:"checkbox-array-container"},n.map((function(e,t){return o.a.createElement("div",{className:"checkbox-div",key:a+t},o.a.createElement("label",null,o.a.createElement("input",{type:"checkbox",checked:s[l[t]],value:l[t],onChange:c})," ",e))})),i?o.a.createElement("input",{type:"text",disabled:!s.other,value:s.otherValue,onChange:u,name:a,id:a}):null))}},{key:"render",value:function(){var e=this,t=new d.Subject,n=[],a=["The speed","The tricks","The moving backgrounds","The jumping","The Artwork","The player character","Animations","Procedurally generated mountain"];n.push(e.renderMultipleChoiceContainer(ne,n.length,a,"q1")),n.push(e.renderMultipleChoiceContainer(ae,n.length,a,"q2")),n.push(e.renderQuestionContainer(oe,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleChange("q3",t.target.checked)},checked:e.state.q3}),o.a.createElement("span",{className:"slider"})),n.length,e.state.q3?"Yes":"No")),n.push(e.renderQuestionContainer(re,o.a.createElement("input",{type:"range",step:"1",value:e.state.q4,onChange:function(t){return e.handleChange("q4",parseInt(t.target.value,10))},min:"1",max:"6",name:"q4",id:"q4"}),n.length,ee[e.state.q4-1])),n.push(e.renderQuestionContainer(ie,o.a.createElement("input",{type:"range",step:"1",value:e.state.q5,onChange:function(t){return e.handleChange("q5",parseInt(t.target.value,10))},min:"1",max:"6",name:"q5",id:"q5"}),n.length,ee[e.state.q5-1])),n.push(e.renderQuestionContainer(se,o.a.createElement("input",{type:"range",step:"1",value:e.state.q6,onChange:function(t){return e.handleChange("q6",parseInt(t.target.value,10))},min:"1",max:"6",name:"q6",id:"q6"}),n.length,ee[e.state.q6-1])),n.push(e.renderQuestionContainer(le,o.a.createElement("input",{style:{width:"20vw"},type:"range",step:"1",value:e.state.q7,onChange:function(t){return e.handleChange("q7",parseInt(t.target.value,10))},min:"1",max:"3",name:"q7",id:"q7"}),n.length,te[e.state.q7-1])),n.push(e.renderQuestionContainer(ce,o.a.createElement("input",{type:"range",step:"1",value:e.state.q8,onChange:function(t){return e.handleChange("q8",parseInt(t.target.value,10))},min:"1",max:"6",name:"q8",id:"q8"}),n.length,ee[e.state.q8-1])),n.push(e.renderQuestionContainer(ue,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleChange("q9",t.target.checked)},checked:e.state.q9}),o.a.createElement("span",{className:"slider"})),n.length,e.state.q9?"Yes":"No")),n.push(e.renderMultipleChoiceContainer(me,n.length,["Easy to use","Overwhelming","Couldn\u2019t think of a song","Catered to me","My choice wasn't there","Other"],"q10",!0)),n.push(e.renderQuestionContainer(he,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleChange("q11",t.target.checked)},checked:e.state.q11}),o.a.createElement("span",{className:"slider"})),n.length,e.state.q11?"Yes":"No")),n.push(e.renderQuestionContainer(de,o.a.createElement("input",{type:"text",value:e.state.q12,onChange:function(t){return e.handleChange("q12",t.target.value)},name:"q12",id:"q12"}),n.length,e.state.q12?"\u221a":"Field required")),n.push(e.renderQuestionContainer(pe,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleChange("q13",t.target.checked)},checked:e.state.q13}),o.a.createElement("span",{className:"slider"})),n.length,e.state.q13?"Yes":"No")),n.push(e.renderQuestionContainer(Ae,o.a.createElement("input",{type:"text",value:e.state.q14,onChange:function(t){return e.handleChange("q14",t.target.value)},name:"q14",id:"q14"}),n.length,""));var r=o.a.createElement("div",{className:"form-container"},o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.onSubmit(e.state)}},n,this.renderQuestionContainer("Please sign digitally (your name will not be associated with your responses)",o.a.createElement("input",{type:"text",value:this.state.name,onChange:function(t){return e.handleChange("name",t.target.value)},name:"name",id:"name"}),n.length),o.a.createElement(N,{onClick:function(){return e.setState({btnText:"Submitting..."})},type:w.SMALL,disabled:!this.state.name,text:this.state.name?this.state.btnText:"Please sign this form!"}))),i=o.a.createElement("div",{className:"confirmation-screen-container"},o.a.createElement("h1",null,"Thank you for playing! If you are a WPI student, please take our exit form."),o.a.createElement(N,{onClick:function(){return e.setState({showForm:!0})},text:"Show Form"}),o.a.createElement(N,{onClick:this.props.onCancel,text:"Main Menu"}));return o.a.createElement(_,{zIndex:this.props.zIndex,transitionRequestObservable:t,onMount:function(){return J(t)}},this.state.showForm?r:i)}}]),t}(a.Component);ge.defaultProps={zIndex:5};var fe=ge,ye=n(222),ve=n.n(ye),Se=n(223),Ee=n.n(Se),be=(n(543),function(e){var t=e.controlMap,n=e.highlight,a=e.hide;return o.a.createElement("div",{className:"control-display-wrapper ".concat(n?"highlight bounce animated":""," ").concat(a?"hide":"")},o.a.createElement("h1",null,"Controls:"),Object.keys(t).map((function(e,n){return o.a.createElement("h3",{key:e+n},o.a.createElement("strong",null,e)," \u27f6 ",t[e])})))});be.defaultProps={controlMap:{Spacebar:"Jump",W:"Tail Grab",A:"360",S:"Front Foot",D:"Back Foot"},highlight:!1};var ke=be,Oe=(n(544),function(e){var t=e.isPlaying,n=e.onPause,a=e.onResume;return o.a.createElement("div",{className:"pause-overlay-container ".concat(t?"":"cover-screen")},o.a.createElement(N,{className:"play-pause-btn ".concat(t?"playing":"paused"),onClick:function(){t&&n(),a()},text:""},o.a.createElement("img",{src:t?ve.a:Ee.a,alt:"Play/Pause Icon"})),o.a.createElement(ke,{highlight:!t,hide:t}))}),Ce=(n(545),function(e){var t=e.buttonText,n=e.onButtonClick,a=e.title,r=e.subtitle,i=e.paragraphs,s=e.children;if(s&&i)return console.error("You can pass either an array of paragraphs or children to be rendered."),null;var l=r?o.a.createElement("h2",null,r):null,c=a?o.a.createElement("h1",null,a):null,u=null;s?u=s:i&&Array.isArray(i)&&(u=i.map((function(e,t){return o.a.createElement("p",{key:t},e)})));var m=new d.Subject;return o.a.createElement(K,{transitionRequestObservable:m,shouldMountIn:!1,zIndex:3,onEndTransitionOut:n},o.a.createElement("div",{className:"message-overlay-outer-container"},o.a.createElement("div",{className:"message-overlay-body-container"},c,l,u,o.a.createElement("br",null),o.a.createElement(N,{type:w.SMALL,text:t,onClick:function(){return Z(m)}}))))});Ce.defaultProps={buttonText:"OK",onButtonClick:function(){return console.error("No button click handler.")},title:"Default message:",subtitle:"This is a message."};var we=Ce,Re=(n(546),function(e){var t=e.transitionObservable,n=e.onUnmount;return o.a.createElement(K,{transitionRequestObservable:t,shouldMountIn:!1,zIndex:3,onEndTransitionOut:n},o.a.createElement("div",{className:"loading-overlay-container"},o.a.createElement("div",{className:"lds-roller"},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null)),o.a.createElement("h2",{className:"loading-text"},"Generating mountain..."),o.a.createElement(ke,null)))}),je=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"checkInUser",value:function(e,t,n){return new Promise((function(a,o){fetch("/api/user/".concat(e)).then((function(e){return e.json()})).then((function(r){if("success"===r.status)a(!0);else{if("failure"===r.status&&1===r.errorCode)return function(){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spotifyID:e,displayName:t,imageUrl:n})};return fetch("/api/users",a)}();o()}})).then((function(e){return e.json()})).then((function(e){"success"===e.status?a(!1):o()})).catch((function(){return o()}))}))}},{key:"saveGameSession",value:function(e,t){var n=this;return new Promise((function(a,o){n.saveGameSessionOnly(e).then((function(e){return n.saveInputArrayOnly(t,e)})).then((function(e){return a(e)})).catch((function(e){return o(e)}))}))}},{key:"saveGameSessionOnly",value:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return new Promise((function(e,n){fetch("/api/sessions",t).then((function(e){return e.json()})).then((function(t){var a=y.a.get(t,"lastSessionID");return"success"===t.status?e(a):n(t)})).catch((function(e){return n(e)}))}))}},{key:"saveInputArrayOnly",value:function(e,t){var n=e.map((function(e){return{timestamp:String(e.timestamp),action:e.action,type:e.type,sessionID:t}})),a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inputs:n})};return new Promise((function(n,o){"number"!==typeof t&&o({status:"failure",reason:"something is wrong",thing:{inputArray:e,sessionID:t}}),fetch("/api/inputs",a).then((function(e){return e.json()})).then((function(e){return"success"===e.status?n():o(e)})).catch((function(e){return o(e)}))}))}},{key:"fetchLeaderboard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new Headers;t.append("Content-Type","application/json"),t.append("X-Game-Version",String("0.1.0"));var n="/api/leaderboard".concat(e?"/".concat(e):""),a={method:"GET",mode:"cors",headers:t},o=function(e,t){fetch(n,a).then((function(e){return e.json()})).then((function(n){return"success"===n.status?e(n):t(n)})).catch((function(e){return t(e)}))};return new Promise(o)}},{key:"fetchInputs",value:function(e){var t="/api/session/".concat(e);return new Promise((function(e,n){fetch(t).then((function(e){return e.json()})).then((function(t){return"success"===t.status?e(t):n(t)})).catch((function(e){return n(e)}))}))}},{key:"submitFeedback",value:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/submit-feedback",t).then((function(e){return e.json()}))}}]),e}(),Me=n(227),Ne=(n(547),function(e){var t=e.sessionObject,n=e.songObject,a=e.rank,r=e.header,i=e.onReplayRequest;if(!r&&(!n||!t))throw new Error("Missing ".concat(n?"session object":"song object","."));var s=a%2?"tr-dark":"tr-light";return r?o.a.createElement("tr",{className:s},o.a.createElement("th",{className:"header-rank"},"Rank"),o.a.createElement("th",{className:"header-score",colSpan:1},"Score"),o.a.createElement("th",{className:"header-display-name",colSpan:2},"Player"),o.a.createElement("th",{className:"header-song-name",colSpan:3},"Song")):o.a.createElement("tr",{className:s},o.a.createElement("td",{className:"session-rank"},a),o.a.createElement("td",{className:"session-score"},t.score),o.a.createElement("td",{className:"session-profile-picture"},o.a.createElement("img",{src:t.profilePicture,alt:"".concat(t.displayName,"'s profile picture")})),o.a.createElement("td",{className:"session-display-name"},t.displayName),o.a.createElement("td",{className:"session-album-cover"},o.a.createElement("img",{src:n.img,alt:"Album cover for song: ".concat(n.name)})),o.a.createElement("td",{className:"session-song-name"},n.name),o.a.createElement("td",{className:"session-replay-button"},o.a.createElement("button",{onClick:i},"View Replay")))});Ne.defaultProps={header:!1};var Te=Ne,Ie=(n(548),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={sessions:[]},n.makeComplexSession=n.makeComplexSession.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;je.fetchLeaderboard().then((function(t){return t.sessions.forEach((function(t,n){e.makeComplexSession(t,n)}))}))}},{key:"makeComplexSession",value:function(e,t){var n=this,a=this.props.spotifyService,o=e.sessionID,r=e.userID,i=e.score,s=e.songID,l=e.gameVersion,c=a.getUserInfo(r),u=a.getSongInfo(s);Promise.all([c,u]).then((function(e){var a=Object(Me.a)(e,2),r=a[0],s=a[1],c={rank:t+1,sessionObject:{sessionID:o,displayName:r.displayName,profilePicture:r.imageUrl,score:i,gameVersion:l},songObject:s};n.setState((function(e){return{sessions:[].concat(Object(b.a)(e.sessions),[c])}}))}))}},{key:"handleReplayRequest",value:function(e,t){var n=this;je.fetchInputs(t).then((function(t){var a=t.inputs;n.props.onReplayRequest(e,a)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"leaderboards-wrapper"},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement(Te,{header:!0}),this.state.sessions.filter((function(e){return e.rank})).map((function(t){return o.a.createElement(Te,{key:t.rank,rank:t.rank,sessionObject:t.sessionObject,songObject:t.songObject,onReplayRequest:function(){return e.handleReplayRequest(t.songObject,t.sessionObject.sessionID)}})}))))),o.a.createElement(N,{type:w.RETURN,text:"<",onClick:this.props.onReturn}))}}]),t}(a.Component)),qe=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={selectedSong:null,playing:!1,playbackPosition:0,score:0,multiplier:1,displayCompletionForm:!1,displayPauseOverlay:!1,displayLoadingOverlay:!1,mountLoadingOverlay:!1,displayWelcomeOverlay:!1,displayNewPlayerOverlay:!1,displayError:!1,replayMode:!1,menuStack:[]},n.mainMenuTransitionController=null,e.gameStateController.onNotificationOf(k.GameStateEnums.PLAY,(function(){n.state.selectedSong&&(n.state.replayMode?n.props.onReplayPlaybackStart():n.props.onGameStart(),n.props.spotifyService.play(n.state.selectedSong.id),n.setState({playing:!0,displayLoadingOverlay:!1,displayPauseOverlay:!0}))})),e.gameStateController.onNotificationOf(k.GameStateEnums.SCORE_CHANGED,(function(e){var t=e.body;return n.setState({score:t.score,multiplier:t.multiplier})})),e.spotifyService.stateNotifier.filter((function(e){return"PLAYER_STATE_CHANGED"===e.state})).subscribe((function(e){return n.readAndUpdateState(e.body)})),n.playerStateUpdaterIntervalID=null,n.mountSongSearchMenu=n.mountSongSearchMenu.bind(Object(c.a)(n)),n.mountSongSelectMenu=n.mountSongSelectMenu.bind(Object(c.a)(n)),n.popMenu=n.popMenu.bind(Object(c.a)(n)),n.mainMenu=n.mainMenu.bind(Object(c.a)(n)),n.updatePlaybackState=n.updatePlaybackState.bind(Object(c.a)(n)),n.renderOverlay=n.renderOverlay.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"readAndUpdateState",value:function(e){var t=y.a.get(e,"track_window.current_track.id"),n=y.a.get(this.state,"selectedSong.id"),a=y.a.get(e,"paused"),o=y.a.get(e,"position");t!==n?this.state.displayCompletionForm||(this.props.gameStateController.request(k.GameStateEnums.IDLE,{reason:"Outside forces changed the song."}),this.mainMenu(),this.state.replayMode?this.props.onReplayInterruptRequest():this.props.onGameInterrupted(),this.setState({playing:!1,displayPauseOverlay:!1,replayMode:!1}),J(this.mainMenuTransitionController),this.props.spotifyService.deactivate(),this.terminatePlaybackStateUpdater()):a?(this.state.replayMode?(this.props.onReplayInterruptRequest(),this.props.spotifyService.deactivate(),this.setState({playing:!1,displayPauseOverlay:!1,displayCompletionForm:!1}),this.mainMenu(!0)):0===o?(this.props.gameStateController.request(k.GameStateEnums.IDLE,{reason:"end"}),this.setState({playing:!1,displayPauseOverlay:!1,displayCompletionForm:!0}),this.props.spotifyService.deactivate(),this.props.onGameFinish(this.state.score,this.state.selectedSong.id)):(this.props.gameStateController.request(k.GameStateEnums.PAUSE,{reason:"paused"}),this.setState({playing:!1,playbackPosition:o}),this.props.onGamePause()),this.terminatePlaybackStateUpdater()):(this.state.playing||this.props.gameStateController.request(k.GameStateEnums.PLAY,{reason:"unpaused"}),this.initPlaybackStateUpdater(),this.setState({playing:!0,playbackPosition:o}))}},{key:"componentDidMount",value:function(){var e=this,t=new d.Subject;this.mainMenuTransitionController=t,this.setState({menuStack:[o.a.createElement(K,{transitionRequestObservable:t,key:0},o.a.createElement(U,{hasLoggedIn:!0,onSongSelectRequest:function(){Z(t),e.mountSongSearchMenu(t)},onLeaderboardsPageRequest:function(){Z(t),e.mountLeaderboardsPage(t)}}))]}),localStorage.getItem("welcome")||setTimeout((function(){e.setState({displayWelcomeOverlay:!0}),localStorage.setItem("welcome","true")}),1500)}},{key:"updatePlaybackState",value:function(){var e=this,t=this.props.spotifyService.playerState;t&&t.then((function(t){if(t){var n=t.position,a=t.paused;e.setState({playbackPosition:n,playing:!a})}else console.error("User is not playing music through the Web Playback SDK")}))}},{key:"initPlaybackStateUpdater",value:function(){this.terminatePlaybackStateUpdater(),this.playerStateUpdaterIntervalID=setInterval(this.updatePlaybackState,3e3)}},{key:"terminatePlaybackStateUpdater",value:function(){clearInterval(this.playerStateUpdaterIntervalID)}},{key:"mountLeaderboardsPage",value:function(e){var t=this,n=new d.Subject,a=o.a.createElement(_,{transitionRequestObservable:n,key:1},o.a.createElement(Ie,{spotifyService:this.props.spotifyService,onReturn:function(){t.popMenu(),J(e)},onReplayRequest:function(e,n){t.initPlaybackStateUpdater(),t.props.onReplayBeginRequest(n),t.setState({selectedSong:e,displayLoadingOverlay:!0,mountLoadingOverlay:!0,replayMode:!0}),t.props.spotifyService.getAudioAnalysisAndFeatures(e.id,(function(e){console.log("Features and analysis: ",e),t.props.gameStateController.request(k.GameStateEnums.GENERATE,e)})),t.props.spotifyService.activate(),t.mainMenu()}}));this.setState((function(e){return{menuStack:[].concat(Object(b.a)(e.menuStack),[a])}}))}},{key:"mountSongSearchMenu",value:function(e){var t=this,n=new d.Subject,a=o.a.createElement(_,{transitionRequestObservable:n,key:1},o.a.createElement(D,{spotifyService:this.props.spotifyService,selectSong:function(e){Z(n),t.mountSongSelectMenu(e,n)},onReturn:function(){t.popMenu(),J(e)}}));this.setState((function(e){return{menuStack:[].concat(Object(b.a)(e.menuStack),[a])}}))}},{key:"mountSongSelectMenu",value:function(e,t){var n=this;this.setState({selectedSong:e});var a=new d.Subject,r=o.a.createElement(_,{transitionRequestObservable:a,key:2},o.a.createElement($,{songObject:e,onConfirmation:function(){n.initPlaybackStateUpdater(),n.setState({displayLoadingOverlay:!0,mountLoadingOverlay:!0,replayMode:!1}),Z(a),n.props.spotifyService.getAudioAnalysisAndFeatures(e.id,(function(e){console.log("Features and analysis: ",e),n.props.gameStateController.request(k.GameStateEnums.GENERATE,e)})),n.props.spotifyService.activate(),n.mainMenu()},onReturn:function(){n.popMenu(),J(t)}}));this.setState((function(e){return{menuStack:[].concat(Object(b.a)(e.menuStack),[r])}}))}},{key:"popMenu",value:function(){this.setState((function(e){var t=e.menuStack;return t.pop(),{menuStack:Object(b.a)(t)}}))}},{key:"mainMenu",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&location.reload();e&&J(this.mainMenuTransitionController);this.setState((function(e){return{menuStack:[e.menuStack[0]]}}))}},{key:"renderOverlay",value:function(){var e=this,t=this.state,n=t.displayCompletionForm,a=t.displayPauseOverlay,r=t.displayError,i=t.displayWelcomeOverlay,s=t.replayMode,l=this.props.spotifyService,c=function(){l.toggle()};return r?null:!s&&n?o.a.createElement(fe,{zIndex:this.state.menuStack.length,onSubmit:function(t){je.submitFeedback(Object(E.a)({},t,{songID:y.a.get(e.state,"selectedSong.id")})).then((function(){e.mainMenu(!0),e.setState({displayCompletionForm:!1})})).catch((function(e){return console.error(e)}))},onCancel:function(){e.mainMenu(!0),e.setState({displayCompletionForm:!1})}}):!s&&a?o.a.createElement(Oe,{isPlaying:this.state.playing,onPause:function(){l.toggle().then((function(){return l.toggle()}))},onResume:c}):s&&a?o.a.createElement(N,{onClick:c,className:"play-pause-btn",text:"Cancel",style:{zIndex:10,top:"1vh",right:"2vh"}}):i?o.a.createElement(we,{buttonText:"Let's Go!",onButtonClick:function(){return e.setState({displayWelcomeOverlay:!1})},title:"Welcome to Tune Mountain!",subtitle:"An audio-visualizer by L\xe9o, Cem, Jarod, and Peter"},o.a.createElement("p",null,"Welcome to Tune Mountain. To play this game ",o.a.createElement("strong",null,"you need")," a Spotify premium account, so we could play the song of your choosing. After you log in click ",o.a.createElement("strong",null,"Select Song")," to choose any song from Spotify*, and the game will generate a unique mountain experience for you to snowboard down on. "),o.a.createElement("p",null,"Game controls can be viewed on the pause menu."),o.a.createElement("p",null,"*The song has to go through the spotify audio feature analysis, so not every song might be available.")):null}},{key:"renderLoadingOverlay",value:function(){var e=this,t=this.state,n=t.displayLoadingOverlay,a=t.mountLoadingOverlay,r=new d.Subject;return n&&a?o.a.createElement(Re,{transitionObservable:r,onUnmount:function(){return e.setState({mountLoadingOverlay:!1})}}):null}},{key:"render",value:function(){var e=this,t=o.a.createElement(G,{songObject:this.state.selectedSong,positionInMilliseconds:this.state.playbackPosition,shouldDisplay:this.state.playing,score:this.state.score,multiplier:this.state.multiplier,replayMode:this.state.replayMode});return o.a.createElement("div",null,t,this.state.errorComponent,this.renderLoadingOverlay(),this.renderOverlay(),function(){if(!e.props.hasLoggedIn){var t=new d.Subject;return o.a.createElement("div",null,o.a.createElement(K,{transitionRequestObservable:t,onMount:function(){return J(t)}},o.a.createElement(U,{onLoginRequest:e.props.spotifyService.login,hasLoggedIn:!1})))}return e.state.menuStack}())}}]),t}(a.Component);qe.defaultProps={hasLoggedIn:!1,user:{displayName:null,imageUrl:null,spotifyID:null}};var Qe=qe,Pe=n(224),Le=n.n(Pe),Be=(n(589),function(e){function t(e){var n;Object(r.a)(this,t),n=Object(s.a)(this,Object(l.a)(t).call(this,e));var a=new S("".concat("Tune Mountain"," Web Player"));return a.stateNotifier.subscribe((function(e){return console.log(e)})),a.stateNotifier.filter((function(e){return"LOGGED_IN"===e.state})).subscribe((function(){a.getUserInfo().then((function(e){je.checkInUser(e.spotifyID,e.displayName,e.imageUrl),n.setState({hasLoggedIn:!0,user:e})}))})),n.spotifyService=a,n.apiService=new je,n.canvasReference=o.a.createRef(),n.game=null,n.gameStateController=new k.GameStateController,n.inputManager=null,n.state={hasLoggedIn:!1,gameVersion:"0.1.0"},n.handleGameFinish=n.handleGameFinish.bind(Object(c.a)(n)),n.handleGameInterrupt=n.handleGameInterrupt.bind(Object(c.a)(n)),n.handleGamePause=n.handleGamePause.bind(Object(c.a)(n)),n.handleGameResume=n.handleGameResume.bind(Object(c.a)(n)),n.handleGameStart=n.handleGameStart.bind(Object(c.a)(n)),n.handleReplayBeginRequest=n.handleReplayBeginRequest.bind(Object(c.a)(n)),n.handleReplayInterruptRequest=n.handleReplayInterruptRequest.bind(Object(c.a)(n)),n.handleReplayPlaybackStart=n.handleReplayPlaybackStart.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.inputManager=new k.InputManager,this.game=new Le.a(this.gameStateController,this.canvasReference.current,this.inputManager)}},{key:"handleGameStart",value:function(){this.inputManager.startSession()}},{key:"handleGamePause",value:function(){this.inputManager.pauseSession()}},{key:"handleGameResume",value:function(){this.inputManager.resumeSession()}},{key:"handleGameFinish",value:function(e,t){var n=this.inputManager.terminateSession();if(n){var a={songID:t,score:e,userID:this.state.user.spotifyID,gameVersion:this.state.gameVersion};console.log(a,n),je.saveGameSession(a,n).then(console.log)}}},{key:"handleGameInterrupt",value:function(){console.log("Wrong termination",this.inputManager.terminateSession())}},{key:"handleReplayBeginRequest",value:function(e){this.inputManager.loadInputsForReplay(e)}},{key:"handleReplayInterruptRequest",value:function(){this.inputManager.terminateReplaySession()}},{key:"handleReplayPlaybackStart",value:function(){this.inputManager.beginReplaySession()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("canvas",{ref:this.canvasReference,className:"game-viewport",width:window.innerWidth,height:window.innerHeight}),o.a.createElement(Qe,{spotifyService:this.spotifyService,hasLoggedIn:this.state.hasLoggedIn,gameStateController:this.gameStateController,user:this.state.user,onGameFinish:this.handleGameFinish,onGameInterrupted:this.handleGameInterrupt,onGamePause:this.handleGamePause,onGameStart:this.handleGameStart,onGameResume:this.handleGameResume,onReplayBeginRequest:this.handleReplayBeginRequest,onReplayInterruptRequest:this.handleReplayInterruptRequest,onReplayPlaybackStart:this.handleReplayPlaybackStart}),o.a.createElement("p",{id:"version"},"Ver ",this.state.gameVersion))}}]),t}(a.Component)),De=n(226),xe=n.n(De);n(593);xe.a.render(o.a.createElement(Be,null),document.getElementById("root"))}},[[228,1,2]]]);
//# sourceMappingURL=main.093f375a.chunk.js.map