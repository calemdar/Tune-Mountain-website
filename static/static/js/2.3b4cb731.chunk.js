/*! For license information please see 2.3b4cb731.chunk.js.LICENSE.txt */
(this["webpackJsonptune-mountain-client"]=this["webpackJsonptune-mountain-client"]||[]).push([[2],[function(t,e,i){"use strict";var r=i(26),n=i(227),o=i(65),s=i(84),a=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var r=this.operator,o=n.toSubscriber(t,e,i);if(r?r.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var i=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e((function(e,r){var n;n=i.subscribe((function(e){if(n)try{t(e)}catch(i){r(i),n.unsubscribe()}else t(e)}),r,e)}))},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[o.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t((function(t,i){var r;e.subscribe((function(t){return r=t}),(function(t){return i(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();e.Observable=a},function(t,e,i){"use strict";t.exports=i(226)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(63),o=i(20),s=i(108),a=i(64),u=function(t){function e(e,i,r){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!e){this.destination=s.empty;break}if("object"===typeof e){if(h(e)){var n=e[a.rxSubscriber]();this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)}else this.syncErrorThrowable=!0,this.destination=new c(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new c(this,e,i,r)}}return r(e,t),e.prototype[a.rxSubscriber]=function(){return this},e.create=function(t,i,r){var n=new e(t,i,r);return n.syncErrorThrowable=!1,n},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.Subscription);e.Subscriber=u;var c=function(t){function e(e,i,r,o){var a;t.call(this),this._parentSubscriber=e;var u=this;n.isFunction(i)?a=i:i&&(a=i.next,r=i.error,o=i.complete,i!==s.empty&&(u=Object.create(i),n.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=a,this._error=r,this._complete=o}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(i){throw this.unsubscribe(),i}},e.prototype.__tryOrSetError=function(t,e,i){try{e.call(this._context,i)}catch(r){return t.syncErrorValue=r,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u);function h(t){return t instanceof u||"syncErrorThrowable"in t&&t[a.rxSubscriber]}},function(t,e,i){var r="undefined"!==typeof DEBUG&&DEBUG,n="undefined"!==typeof ASSERT&&ASSERT;t.exports=a;var o=i(7),s=i(4);function a(t,e){if(!(this instanceof a))return new a(t,e);"undefined"===typeof t?(this.x=0,this.y=0):"object"===typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),n&&a.assert(this)}a.prototype._serialize=function(){return{x:this.x,y:this.y}},a._deserialize=function(t){var e=Object.create(a.prototype);return e.x=t.x,e.y=t.y,e},a.zero=function(){var t=Object.create(a.prototype);return t.x=0,t.y=0,t},a.neo=function(t,e){var i=Object.create(a.prototype);return i.x=t,i.y=e,i},a.clone=function(t){return n&&a.assert(t),a.neo(t.x,t.y)},a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&s.isFinite(t.x)&&s.isFinite(t.y)},a.assert=function(t){if(n&&!a.isValid(t))throw r&&o.debug(t),new Error("Invalid Vec2!")},a.prototype.clone=function(){return a.clone(this)},a.prototype.setZero=function(){return this.x=0,this.y=0,this},a.prototype.set=function(t,e){return"object"===typeof t?(n&&a.assert(t),this.x=t.x,this.y=t.y):(n&&s.assert(t),n&&s.assert(e),this.x=t,this.y=e),this},a.prototype.wSet=function(t,e,i,r){return"undefined"!==typeof i||"undefined"!==typeof r?this.setCombine(t,e,i,r):this.setMul(t,e)},a.prototype.setCombine=function(t,e,i,r){n&&s.assert(t),n&&a.assert(e),n&&s.assert(i),n&&a.assert(r);var o=t*e.x+i*r.x,u=t*e.y+i*r.y;return this.x=o,this.y=u,this},a.prototype.setMul=function(t,e){n&&s.assert(t),n&&a.assert(e);var i=t*e.x,r=t*e.y;return this.x=i,this.y=r,this},a.prototype.add=function(t){return n&&a.assert(t),this.x+=t.x,this.y+=t.y,this},a.prototype.wAdd=function(t,e,i,r){return"undefined"!==typeof i||"undefined"!==typeof r?this.addCombine(t,e,i,r):this.addMul(t,e)},a.prototype.addCombine=function(t,e,i,r){n&&s.assert(t),n&&a.assert(e),n&&s.assert(i),n&&a.assert(r);var o=t*e.x+i*r.x,u=t*e.y+i*r.y;return this.x+=o,this.y+=u,this},a.prototype.addMul=function(t,e){n&&s.assert(t),n&&a.assert(e);var i=t*e.x,r=t*e.y;return this.x+=i,this.y+=r,this},a.prototype.wSub=function(t,e,i,r){return"undefined"!==typeof i||"undefined"!==typeof r?this.subCombine(t,e,i,r):this.subMul(t,e)},a.prototype.subCombine=function(t,e,i,r){n&&s.assert(t),n&&a.assert(e),n&&s.assert(i),n&&a.assert(r);var o=t*e.x+i*r.x,u=t*e.y+i*r.y;return this.x-=o,this.y-=u,this},a.prototype.subMul=function(t,e){n&&s.assert(t),n&&a.assert(e);var i=t*e.x,r=t*e.y;return this.x-=i,this.y-=r,this},a.prototype.sub=function(t){return n&&a.assert(t),this.x-=t.x,this.y-=t.y,this},a.prototype.mul=function(t){return n&&s.assert(t),this.x*=t,this.y*=t,this},a.prototype.length=function(){return a.lengthOf(this)},a.prototype.lengthSquared=function(){return a.lengthSquared(this)},a.prototype.normalize=function(){var t=this.length();if(t<s.EPSILON)return 0;var e=1/t;return this.x*=e,this.y*=e,t},a.lengthOf=function(t){return n&&a.assert(t),s.sqrt(t.x*t.x+t.y*t.y)},a.lengthSquared=function(t){return n&&a.assert(t),t.x*t.x+t.y*t.y},a.distance=function(t,e){n&&a.assert(t),n&&a.assert(e);var i=t.x-e.x,r=t.y-e.y;return s.sqrt(i*i+r*r)},a.distanceSquared=function(t,e){n&&a.assert(t),n&&a.assert(e);var i=t.x-e.x,r=t.y-e.y;return i*i+r*r},a.areEqual=function(t,e){return n&&a.assert(t),n&&a.assert(e),t==e||"object"===typeof e&&null!==e&&t.x===e.x&&t.y===e.y},a.skew=function(t){return n&&a.assert(t),a.neo(-t.y,t.x)},a.dot=function(t,e){return n&&a.assert(t),n&&a.assert(e),t.x*e.x+t.y*e.y},a.cross=function(t,e){return"number"===typeof e?(n&&a.assert(t),n&&s.assert(e),a.neo(e*t.y,-e*t.x)):"number"===typeof t?(n&&s.assert(t),n&&a.assert(e),a.neo(-t*e.y,t*e.x)):(n&&a.assert(t),n&&a.assert(e),t.x*e.y-t.y*e.x)},a.addCross=function(t,e,i){return"number"===typeof i?(n&&a.assert(e),n&&s.assert(i),a.neo(i*e.y+t.x,-i*e.x+t.y)):"number"===typeof e?(n&&s.assert(e),n&&a.assert(i),a.neo(-e*i.y+t.x,e*i.x+t.y)):void(n&&o.assert(!1))},a.add=function(t,e){return n&&a.assert(t),n&&a.assert(e),a.neo(t.x+e.x,t.y+e.y)},a.wAdd=function(t,e,i,r){return"undefined"!==typeof i||"undefined"!==typeof r?a.combine(t,e,i,r):a.mul(t,e)},a.combine=function(t,e,i,r){return a.zero().setCombine(t,e,i,r)},a.sub=function(t,e){return n&&a.assert(t),n&&a.assert(e),a.neo(t.x-e.x,t.y-e.y)},a.mul=function(t,e){return"object"===typeof t?(n&&a.assert(t),n&&s.assert(e),a.neo(t.x*e,t.y*e)):"object"===typeof e?(n&&s.assert(t),n&&a.assert(e),a.neo(t*e.x,t*e.y)):void 0},a.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},a.neg=function(t){return n&&a.assert(t),a.neo(-t.x,-t.y)},a.abs=function(t){return n&&a.assert(t),a.neo(s.abs(t.x),s.abs(t.y))},a.mid=function(t,e){return n&&a.assert(t),n&&a.assert(e),a.neo(.5*(t.x+e.x),.5*(t.y+e.y))},a.upper=function(t,e){return n&&a.assert(t),n&&a.assert(e),a.neo(s.max(t.x,e.x),s.max(t.y,e.y))},a.lower=function(t,e){return n&&a.assert(t),n&&a.assert(e),a.neo(s.min(t.x,e.x),s.min(t.y,e.y))},a.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var i=s.invSqrt(e);this.x*=i*t,this.y*=i*t}return this},a.clamp=function(t,e){return(t=a.neo(t.x,t.y)).clamp(e),t},a.scaleFn=function(t,e){return function(i){return a.neo(i.x*t,i.y*e)}},a.translateFn=function(t,e){return function(i){return a.neo(i.x+t,i.y+e)}}},function(t,e,i){var r="undefined"!==typeof DEBUG&&DEBUG,n="undefined"!==typeof ASSERT&&ASSERT,o=i(7),s=i(19),a=Math,u=t.exports=s(a);u.EPSILON=1e-9,u.isFinite=function(t){return"number"===typeof t&&isFinite(t)&&!isNaN(t)},u.assert=function(t){if(n&&!u.isFinite(t))throw r&&o.debug(t),new Error("Invalid Number!")},u.invSqrt=function(t){return 1/a.sqrt(t)},u.nextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},u.isPowerOfTwo=function(t){return t>0&&0==(t&t-1)},u.mod=function(t,e,i){return"undefined"===typeof e?(i=1,e=0):"undefined"===typeof i&&(i=e,e=0),i>e?(t=(t-e)%(i-e))+(t<0?i:e):(t=(t-i)%(e-i))+(t<=0?e:i)},u.clamp=function(t,e,i){return t<e?e:t>i?i:t},u.random=function(t,e){return"undefined"===typeof t?(e=1,t=0):"undefined"===typeof e&&(e=t,t=0),t==e?t:a.random()*(e-t)+t}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(i(2).Subscriber);e.OuterSubscriber=n},function(t,e,i){"use strict";var r=i(26),n=i(110),o=i(111),s=i(106),a=i(0),u=i(50),c=i(236),h=i(65);e.subscribeToResult=function(t,e,i,l){var p=new c.InnerSubscriber(t,i,l);if(p.closed)return null;if(e instanceof a.Observable)return e._isScalar?(p.next(e.value),p.complete(),null):(p.syncErrorThrowable=!0,e.subscribe(p));if(n.isArrayLike(e)){for(var f=0,d=e.length;f<d&&!p.closed;f++)p.next(e[f]);p.closed||p.complete()}else{if(o.isPromise(e))return e.then((function(t){p.closed||(p.next(t),p.complete())}),(function(t){return p.error(t)})).then(null,(function(t){r.root.setTimeout((function(){throw t}))})),p;if(e&&"function"===typeof e[u.iterator])for(var m=e[u.iterator]();;){var y=m.next();if(y.done){p.complete();break}if(p.next(y.value),p.closed)break}else if(e&&"function"===typeof e[h.observable]){var v=e[h.observable]();if("function"===typeof v.subscribe)return v.subscribe(new c.InnerSubscriber(t,i,l));p.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var _="You provided "+(s.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";p.error(new TypeError(_))}}return null}},function(t,e){var i="undefined"!==typeof DEBUG&&DEBUG,r="undefined"!==typeof ASSERT&&ASSERT;e.debug=function(){i&&console.log.apply(console,arguments)},e.assert=function(t,e,i){if(r&&!t)throw i&&console.log(i),new Error(e)}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",(function(){return r}))},function(t,e,i){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}i.d(e,"a",(function(){return r}))},function(t,e,i){"use strict";i.r(e);var r={};i.r(r),i.d(r,"isMobile",(function(){return x})),i.d(r,"EventEmitter",(function(){return L.a})),i.d(r,"earcut",(function(){return U.a})),i.d(r,"url",(function(){return V.a})),i.d(r,"BaseTextureCache",(function(){return _t})),i.d(r,"CanvasRenderTarget",(function(){return xt})),i.d(r,"DATA_URI",(function(){return Tt})),i.d(r,"ProgramCache",(function(){return yt})),i.d(r,"TextureCache",(function(){return vt})),i.d(r,"clearTextureCache",(function(){return gt})),i.d(r,"correctBlendMode",(function(){return $})),i.d(r,"createIndicesForQuads",(function(){return rt})),i.d(r,"decomposeDataUri",(function(){return At})),i.d(r,"deprecation",(function(){return mt})),i.d(r,"destroyTextureCache",(function(){return bt})),i.d(r,"determineCrossOrigin",(function(){return Et})),i.d(r,"getBufferType",(function(){return nt})),i.d(r,"getResolutionOfUrl",(function(){return It})),i.d(r,"hex2rgb",(function(){return Y})),i.d(r,"hex2string",(function(){return K})),i.d(r,"interleaveTypedArrays",(function(){return st})),i.d(r,"isPow2",(function(){return ut})),i.d(r,"isWebGLSupported",(function(){return q})),i.d(r,"log2",(function(){return ct})),i.d(r,"nextPow2",(function(){return at})),i.d(r,"premultiplyBlendMode",(function(){return Q})),i.d(r,"premultiplyRgba",(function(){return tt})),i.d(r,"premultiplyTint",(function(){return et})),i.d(r,"premultiplyTintToRgba",(function(){return it})),i.d(r,"removeItems",(function(){return ht})),i.d(r,"rgb2hex",(function(){return Z})),i.d(r,"sayHello",(function(){return G})),i.d(r,"sign",(function(){return lt})),i.d(r,"skipHello",(function(){return H})),i.d(r,"string2hex",(function(){return J})),i.d(r,"trimCanvas",(function(){return wt})),i.d(r,"uid",(function(){return ft}));var n={};i.r(n),i.d(n,"AccessibilityManager",(function(){return ee})),i.d(n,"accessibleTarget",(function(){return $t}));var o={};i.r(o),i.d(o,"InteractionData",(function(){return oe})),i.d(o,"InteractionEvent",(function(){return ae})),i.d(o,"InteractionManager",(function(){return fe})),i.d(o,"InteractionTrackingData",(function(){return ue})),i.d(o,"interactiveTarget",(function(){return le}));i(543);var s=/iPhone/i,a=/iPod/i,u=/iPad/i,c=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,l=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,p=/Silk/i,f=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,m=/BlackBerry/i,y=/BB10/i,v=/Opera Mini/i,_=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/Mobile(?:.+)Firefox\b/i;function g(t,e){return t.test(e)}var x=function(t){var e=(t=t||("undefined"!==typeof navigator?navigator.userAgent:"")).split("[FBAN");"undefined"!==typeof e[1]&&(t=e[0]),"undefined"!==typeof(e=t.split("Twitter"))[1]&&(t=e[0]);var i={apple:{phone:g(s,t)&&!g(f,t),ipod:g(a,t),tablet:!g(s,t)&&g(u,t)&&!g(f,t),device:(g(s,t)||g(a,t)||g(u,t))&&!g(f,t)},amazon:{phone:g(l,t),tablet:!g(l,t)&&g(p,t),device:g(l,t)||g(p,t)},android:{phone:!g(f,t)&&g(l,t)||!g(f,t)&&g(c,t),tablet:!g(f,t)&&!g(l,t)&&!g(c,t)&&(g(p,t)||g(h,t)),device:!g(f,t)&&(g(l,t)||g(p,t)||g(c,t)||g(h,t))||g(/\bokhttp\b/i,t)},windows:{phone:g(f,t),tablet:g(d,t),device:g(f,t)||g(d,t)},other:{blackberry:g(m,t),blackberry10:g(y,t),opera:g(v,t),firefox:g(b,t),chrome:g(_,t),device:g(m,t)||g(y,t)||g(v,t)||g(b,t)||g(_,t)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}();var w,S,T,A,E,I,O,C,P,B,M,k,R,D,F={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(x.tablet||x.phone){if(e=!1,x.apple.device){var i=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(i)parseInt(i[1],10)>=11&&(e=!0)}if(x.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r)parseInt(r[1],10)>=7&&(e=!0)}}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:x.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!x.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},N=i(209),L=i.n(N),j=i(210),U=i.n(j),z=i(82),V=i.n(z);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(w||(w={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(S||(S={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(T||(T={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(A||(A={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(E||(E={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(I||(I={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(O||(O={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(C||(C={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(P||(P={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(B||(B={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(M||(M={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(k||(k={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(R||(R={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(D||(D={})),F.RETINA_PREFIX=/@([0-9\.]+)x/,F.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var W,X=!1;function H(){X=!0}function G(t){var e;if(!X){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 5.2.1 - \u2730 "+t+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,i)}else window.console&&window.console.log("PixiJS 5.2.1 - "+t+" - http://www.pixijs.com/");X=!0}}function q(){return"undefined"===typeof W&&(W=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:F.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch(o){return!1}}()),W}function Y(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function K(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function J(t){return"string"===typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function Z(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var Q=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[T.NORMAL_NPM]=T.NORMAL,t[T.ADD_NPM]=T.ADD,t[T.SCREEN_NPM]=T.SCREEN,e[T.NORMAL]=T.NORMAL_NPM,e[T.ADD]=T.ADD_NPM,e[T.SCREEN]=T.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function $(t,e){return Q[e?1:0][t]}function tt(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function et(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n=n*e+.5|0)}function it(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function rt(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var r=0,n=0;r<i;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}function nt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var ot={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function st(t,e){for(var i=0,r=0,n={},o=0;o<t.length;o++)r+=e[o],i+=t[o].length;var s=new ArrayBuffer(4*i),a=null,u=0;for(o=0;o<t.length;o++){var c=e[o],h=t[o],l=nt(h);n[l]||(n[l]=new ot[l](s)),a=n[l];for(var p=0;p<h.length;p++){a[(p/c|0)*r+u+p%c]=h[p]}u+=c}return new Float32Array(s)}function at(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function ut(t){return!(t&t-1)&&!!t}function ct(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function ht(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var o=n-(i=e+i>n?n-e:i);for(r=e;r<o;++r)t[r]=t[r+i];t.length=o}}function lt(t){return 0===t?0:t<0?-1:1}var pt=0;function ft(){return++pt}var dt={};function mt(t,e,i){if(void 0===i&&(i=3),!dt[e]){var r=(new Error).stack;"undefined"===typeof r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),dt[e]=!0}}var yt={},vt=Object.create(null),_t=Object.create(null);function bt(){var t;for(t in vt)vt[t].destroy();for(t in _t)_t[t].destroy()}function gt(){var t;for(t in vt)delete vt[t];for(t in _t)delete _t[t]}var xt=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||F.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!0,configurable:!0}),t}();function wt(t){var e,i,r,n=t.width,o=t.height,s=t.getContext("2d"),a=s.getImageData(0,0,n,o).data,u=a.length,c={top:null,left:null,right:null,bottom:null},h=null;for(e=0;e<u;e+=4)0!==a[e+3]&&(i=e/4%n,r=~~(e/4/n),null===c.top&&(c.top=r),null===c.left?c.left=i:i<c.left&&(c.left=i),null===c.right?c.right=i+1:c.right<i&&(c.right=i+1),null===c.bottom?c.bottom=r:c.bottom<r&&(c.bottom=r));return null!==c.top&&(n=c.right-c.left,o=c.bottom-c.top+1,h=s.getImageData(c.left,c.top,n,o)),{height:o,width:n,data:h}}var St,Tt=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function At(t){var e=Tt.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function Et(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,St||(St=document.createElement("a")),St.href=t;var i=Object(z.parse)(St.href),r=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&r&&i.protocol===e.protocol?"":"anonymous"}function It(t,e){var i=F.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}var Ot,Ct=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t}(),Pt=function(){function t(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this._x=i,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),t}(),Bt=2*Math.PI,Mt=180/Math.PI,kt=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(Ot||(Ot={}));var Rt=function(){function t(t,e,i,r,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new Ct;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new Ct;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,o,s,a,u){return this.a=Math.cos(s+u)*n,this.b=Math.sin(s+u)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,o=-Math.atan2(-r,n),s=Math.atan2(i,e),a=Math.abs(o+s);return a<1e-5||Math.abs(Bt-a)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!0,configurable:!0}),t}(),Dt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ft=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Nt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Lt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],jt=[],Ut=[],zt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];jt.push(e);for(var i=0;i<16;i++)for(var r=zt(Dt[t]*Dt[i]+Nt[t]*Ft[i]),n=zt(Ft[t]*Dt[i]+Lt[t]*Ft[i]),o=zt(Dt[t]*Nt[i]+Nt[t]*Lt[i]),s=zt(Ft[t]*Nt[i]+Lt[t]*Lt[i]),a=0;a<16;a++)if(Dt[a]===r&&Ft[a]===n&&Nt[a]===o&&Lt[a]===s){e.push(a);break}}for(t=0;t<16;t++){var u=new Rt;u.set(Dt[t],Ft[t],Nt[t],Lt[t],0,0),Ut.push(u)}}();var Vt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Dt[t]},uY:function(t){return Ft[t]},vX:function(t){return Nt[t]},vY:function(t){return Lt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return jt[t][e]},sub:function(t,e){return jt[t][Vt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?Vt.S:Vt.N:2*Math.abs(e)<=Math.abs(t)?t>0?Vt.E:Vt.W:e>0?t>0?Vt.SE:Vt.SW:t>0?Vt.NE:Vt.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=Ut[Vt.inv(e)];n.tx=i,n.ty=r,t.append(n)}},Wt=function(){function t(){this.worldTransform=new Rt,this.localTransform=new Rt,this.position=new Pt(this.onChange,this,0,0),this.scale=new Pt(this.onChange,this,1,1),this.pivot=new Pt(this.onChange,this,0,0),this.skew=new Pt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!0,configurable:!0}),t.IDENTITY=new t,t}(),Xt=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=Ot.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this},t}(),Ht=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=Ot.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},t.prototype.getBounds=function(){return new Xt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),Gt=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r,this.type=Ot.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},t.prototype.getBounds=function(){return new Xt(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),qt=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(Array.isArray(e[0])&&(e=e[0]),e[0]instanceof Ct){for(var r=[],n=0,o=(e=e).length;n<o;n++)r.push(e[n].x,e[n].y);e=r}this.points=e,this.type=Ot.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,o=r-1;n<r;o=n++){var s=this.points[2*n],a=this.points[2*n+1],u=this.points[2*o],c=this.points[2*o+1];a>e!==c>e&&t<(e-a)/(c-a)*(u-s)+s&&(i=!i)}return i},t}(),Yt=function(){function t(t,e,i,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=20),this.x=t,this.y=e,this.width=i,this.height=r,this.radius=n,this.type=Ot.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),r=e-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=t-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(i*i+(r=e-(this.y+this.height-this.radius))*r<=n)return!0;if((i=t-(this.x+this.radius))*i+r*r<=n)return!0}return!1},t}();F.SORTABLE_CHILDREN=!1;var Kt=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};Kt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Kt.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Kt.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Xt.EMPTY:((t=t||new Xt(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},Kt.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},Kt.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[2])<e?o:e,i=(s=t[3])<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[4])<e?o:e,i=(s=t[5])<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[6])<e?o:e,i=(s=t[7])<i?s:i,r=o>r?o:r,n=s>n?s:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},Kt.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},Kt.prototype.addFrameMatrix=function(t,e,i,r,n){var o=t.a,s=t.b,a=t.c,u=t.d,c=t.tx,h=t.ty,l=this.minX,p=this.minY,f=this.maxX,d=this.maxY,m=o*e+a*i+c,y=s*e+u*i+h;l=m<l?m:l,p=y<p?y:p,f=m>f?m:f,d=y>d?y:d,l=(m=o*r+a*i+c)<l?m:l,p=(y=s*r+u*i+h)<p?y:p,f=m>f?m:f,d=y>d?y:d,l=(m=o*e+a*n+c)<l?m:l,p=(y=s*e+u*n+h)<p?y:p,f=m>f?m:f,d=y>d?y:d,l=(m=o*r+a*n+c)<l?m:l,p=(y=s*r+u*n+h)<p?y:p,f=m>f?m:f,d=y>d?y:d,this.minX=l,this.minY=p,this.maxX=f,this.maxY=d},Kt.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,o=this.maxX,s=this.maxY,a=e;a<i;a+=2){var u=t[a],c=t[a+1];r=u<r?u:r,n=c<n?c:n,o=u>o?u:o,s=c>s?c:s}this.minX=r,this.minY=n,this.maxX=o,this.maxY=s},Kt.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},Kt.prototype.addVerticesMatrix=function(t,e,i,r,n,o){var s=t.a,a=t.b,u=t.c,c=t.d,h=t.tx,l=t.ty;n=n||0,o=o||0;for(var p=this.minX,f=this.minY,d=this.maxX,m=this.maxY,y=i;y<r;y+=2){var v=e[y],_=e[y+1],b=s*v+u*_+h,g=c*_+a*v+l;p=Math.min(p,b-n),d=Math.max(d,b+n),f=Math.min(f,g-o),m=Math.max(m,g+o)}this.minX=p,this.minY=f,this.maxX=d,this.maxY=m},Kt.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},Kt.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=o){var s=this.minX,a=this.minY,u=this.maxX,c=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>u?n:u,this.maxY=o>c?o:c}},Kt.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},Kt.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=o){var s=this.minX,a=this.minY,u=this.maxX,c=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>u?n:u,this.maxY=o>c?o:c}},Kt.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},Kt.prototype.addFramePad=function(t,e,i,r,n,o){t-=n,e-=o,i+=n,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r};var Jt=function(t){function e(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new Wt,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Kt,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return e.mixin=function(t){for(var i=Object.keys(t),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},i._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.calculateBounds=function(){},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Xt),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new Xt),t=this._localBoundsRect);var r=this.getBounds(!1,t);return this.parent=i,this.transform=e,r},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.render=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,r,n,o,s,a,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i.x.get=function(){return this.position.x},i.x.set=function(t){this.transform.position.x=t},i.y.get=function(){return this.position.y},i.y.set=function(t){this.transform.position.y=t},i.worldTransform.get=function(){return this.transform.worldTransform},i.localTransform.get=function(){return this.transform.localTransform},i.position.get=function(){return this.transform.position},i.position.set=function(t){this.transform.position.copyFrom(t)},i.scale.get=function(){return this.transform.scale},i.scale.set=function(t){this.transform.scale.copyFrom(t)},i.pivot.get=function(){return this.transform.pivot},i.pivot.set=function(t){this.transform.pivot.copyFrom(t)},i.skew.get=function(){return this.transform.skew},i.skew.set=function(t){this.transform.skew.copyFrom(t)},i.rotation.get=function(){return this.transform.rotation},i.rotation.set=function(t){this.transform.rotation=t},i.angle.get=function(){return this.transform.rotation*Mt},i.angle.set=function(t){this.transform.rotation=t*kt},i.zIndex.get=function(){return this._zIndex},i.zIndex.set=function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},i.worldVisible.get=function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},i.mask.get=function(){return this._mask},i.mask.set=function(t){if(this._mask){var e=this._mask.maskObject||this._mask;e.renderable=!0,e.isMask=!1}if(this._mask=t,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},Object.defineProperties(e.prototype,i),e}(L.a);function Zt(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Jt.prototype.displayObjectUpdateTransform=Jt.prototype.updateTransform;var Qt=function(t){function e(){t.call(this),this.children=[],this.sortableChildren=F.SORTABLE_CHILDREN,this.sortDirty=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0}};return e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments,i=arguments.length;if(i>1)for(var r=0;r<i;r++)this.addChild(e[r]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);ht(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments,i=arguments.length;if(i>1)for(var r=0;r<i;r++)this.removeChild(e[r]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,ht(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,ht(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0);var i,r=t,n="number"===typeof e?e:this.children.length,o=n-r;if(o>0&&o<=n){i=this.children.splice(r,o);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<i.length;++a)i[a].emit("removed",this),this.emit("childRemoved",i[a],this,a);return i}if(0===o&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(Zt),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);for(var n=0,o=this.children.length;n<o;n++)this.children[n].render(t);t.batch.flush(),i&&t.mask.pop(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"===typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},i.width.get=function(){return this.scale.x*this.getLocalBounds().width},i.width.set=function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},i.height.get=function(){return this.scale.y*this.getLocalBounds().height},i.height.set=function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},Object.defineProperties(e.prototype,i),e}(Jt);Qt.prototype.containerUpdateTransform=Qt.prototype.updateTransform;var $t={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0};Jt.mixin($t);var te,ee=function(t){this._hookDiv=null,(x.tablet||x.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessibility=!1,window.addEventListener("keydown",this._onKeyDown,!1)};ee.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",(function(){t.isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},ee.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},ee.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},ee.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessibility&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},ee.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},ee.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,r=this.div;r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var n=0;n<this.children.length;n++){var o=this.children[n];if(o.renderId!==this.renderId)o._accessibleActive=!1,ht(this.children,n,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,n--,0===this.children.length&&this.deactivate();else{r=o._accessibleDiv;var s=o.hitArea,a=o.worldTransform;o.hitArea?(r.style.left=(a.tx+s.x*a.a)*e+"px",r.style.top=(a.ty+s.y*a.d)*i+"px",r.style.width=s.width*a.a*e+"px",r.style.height=s.height*a.d*i+"px"):(s=o.getBounds(),this.capHitArea(s),r.style.left=s.x*e+"px",r.style.top=s.y*i+"px",r.style.width=s.width*e+"px",r.style.height=s.height*i+"px",r.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(r.title=o.accessibleTitle),r.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&r.setAttribute("aria-label",o.accessibleHint)),o.accessibleTitle===r.title&&o.tabIndex===r.tabIndex||(r.title=o.accessibleTitle,r.tabIndex=o.tabIndex,this.debug&&this.updateDebugHTML(r))}}this.renderId++}},ee.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},ee.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},ee.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},ee.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},ee.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},ee.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},ee.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},ee.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},ee.prototype.destroy=function(){this.destroyTouchHook(),this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},F.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(te||(te={}));var ie=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.fn=t,this.context=e,this.priority=i,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),re=function(){function t(){var t=this;this._head=new ie(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/F.TARGET_FPMS,this.elapsedMS=1/F.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=te.NORMAL),this._addListener(new ie(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=te.NORMAL),this._addListener(new ie(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*F.TARGET_FPMS;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,F.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!0,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!0,configurable:!0}),t}(),ne=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,te.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?re.shared:new re,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}(),oe=function(){this.global=new Ct,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0},se={pointerId:{configurable:!0}};se.pointerId.get=function(){return this.identifier},oe.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},oe.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},oe.prototype.reset=function(){this.isPrimary=!1},Object.defineProperties(oe.prototype,se);var ae=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null};ae.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},ae.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null};var ue=function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE},ce={pointerId:{configurable:!0},flags:{configurable:!0},none:{configurable:!0},over:{configurable:!0},rightDown:{configurable:!0},leftDown:{configurable:!0}};ue.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},ce.pointerId.get=function(){return this._pointerId},ce.flags.get=function(){return this._flags},ce.flags.set=function(t){this._flags=t},ce.none.get=function(){return this._flags===this.constructor.FLAGS.NONE},ce.over.get=function(){return 0!==(this._flags&this.constructor.FLAGS.OVER)},ce.over.set=function(t){this._doSet(this.constructor.FLAGS.OVER,t)},ce.rightDown.get=function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},ce.rightDown.set=function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)},ce.leftDown.get=function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},ce.leftDown.set=function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)},Object.defineProperties(ue.prototype,ce),ue.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var he=function(){this._tempPoint=new Ct};he.prototype.recursiveFindHit=function(t,e,i,r,n){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=n=e.interactive||n,u=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(r=!1,u=!1)),a=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(r=!1)),u&&e.interactiveChildren&&e.children)for(var c=e.children,h=c.length-1;h>=0;h--){var l=c[h],p=this.recursiveFindHit(t,l,i,r,a);if(p){if(!l.parent)continue;a=!1,p&&(t.target&&(r=!1),s=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},he.prototype.findHit=function(t,e,i,r){this.recursiveFindHit(t,e,i,r,!1)};var le={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Jt.mixin(le);var pe={target:null,data:{global:null}},fe=function(t){function e(e,i){t.call(this),i=i||{},this.renderer=e,this.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,this.interactionFrequency=i.interactionFrequency||10,this.mouse=new oe,this.mouse.identifier=1,this.mouse.global.set(-999999),this.activeInteractionData={},this.activeInteractionData[1]=this.mouse,this.interactionDataPool=[],this.eventData=new ae,this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.tickerAdded=!1,this.mouseOverRenderer=!1,this.supportsTouchEvents="ontouchstart"in window,this.supportsPointerEvents=!!window.PointerEvent,this.onPointerUp=this.onPointerUp.bind(this),this.processPointerUp=this.processPointerUp.bind(this),this.onPointerCancel=this.onPointerCancel.bind(this),this.processPointerCancel=this.processPointerCancel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.processPointerDown=this.processPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.processPointerMove=this.processPointerMove.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.processPointerOverOut=this.processPointerOverOut.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.cursorStyles={default:"inherit",pointer:"pointer"},this.currentCursorMode=null,this.cursor=null,this.resolution=1,this.delayedEvents=[],this.search=new he,this._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,this.setTargetElement(this.renderer.view,this.renderer.resolution)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={useSystemTicker:{configurable:!0}};return i.useSystemTicker.get=function(){return this._useSystemTicker},i.useSystemTicker.set=function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},e.prototype.hitTest=function(t,e){return pe.target=null,pe.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(pe,e,null,!0),pe.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(re.system.add(this.tickerUpdate,this,te.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(re.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){!this.eventsAdded&&this.interactionDOMElement&&(window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.eventsAdded&&this.interactionDOMElement&&(window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this.didMove)this.didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!==typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r){var n=this.search.findHit(t,e,i,r),o=this.delayedEvents;if(!o.length)return n;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var u=o[a],c=u.displayObject,h=u.eventString,l=u.eventData;l.stopsPropagatingAt===c&&(l.stopPropagationHint=!0),this.dispatchEvent(c,h,l)}return n},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new ue(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a=r[s],u=this.getInteractionDataForPointerId(a),c=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(c.data.originalEvent=t,this.processInteractive(c,this.renderer._lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,c),"mouse"===a.pointerType||"pen"===a.pointerType){var h=2===a.button;this.emit(h?"rightup"+o:"mouseup"+o,c)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,c),this.releaseInteractionDataForPointerId(a.pointerId,u))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,o=e.trackedPointers[n],s="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType,u=!1;if(a){var c=2===r.button,h=ue.FLAGS,l=c?h.RIGHT_DOWN:h.LEFT_DOWN,p=void 0!==o&&o.flags&l;i?(this.dispatchEvent(e,c?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,c?"rightclick":"click",t),u=!0)):p&&this.dispatchEvent(e,c?"rightupoutside":"mouseupoutside",t),o&&(c?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!u||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=e.trackedPointers[n];i&&!s&&(s=e.trackedPointers[n]=new ue(n)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new oe).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];"undefined"===typeof n.button&&(n.button=t.touches.length?1:0),"undefined"===typeof n.buttons&&(n.buttons=t.touches.length?1:0),"undefined"===typeof n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),"undefined"===typeof n.width&&(n.width=n.radiusX||1),"undefined"===typeof n.height&&(n.height=n.radiusY||1),"undefined"===typeof n.tiltX&&(n.tiltX=0),"undefined"===typeof n.tiltY&&(n.tiltY=0),"undefined"===typeof n.pointerType&&(n.pointerType="touch"),"undefined"===typeof n.pointerId&&(n.pointerId=n.identifier||0),"undefined"===typeof n.pressure&&(n.pressure=n.force||.5),"undefined"===typeof n.twist&&(n.twist=0),"undefined"===typeof n.tangentialPressure&&(n.tangentialPressure=0),"undefined"===typeof n.layerX&&(n.layerX=n.offsetX=n.clientX),"undefined"===typeof n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):("undefined"===typeof t.isPrimary&&(t.isPrimary=!0),"undefined"===typeof t.width&&(t.width=1),"undefined"===typeof t.height&&(t.height=1),"undefined"===typeof t.tiltX&&(t.tiltX=0),"undefined"===typeof t.tiltY&&(t.tiltY=0),"undefined"===typeof t.pointerType&&(t.pointerType="mouse"),"undefined"===typeof t.pointerId&&(t.pointerId=1),"undefined"===typeof t.pressure&&(t.pressure=.5),"undefined"===typeof t.twist&&(t.twist=0),"undefined"===typeof t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},Object.defineProperties(e.prototype,i),e}(L.a),de=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,r,n,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,h=u.items;this._aliasCount++;for(var l=0,p=h.length;l<p;l++)h[l][c](t,e,i,r,n,o,s,a);return h===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t}();Object.defineProperties(de.prototype,{dispatch:{value:de.prototype.emit},run:{value:de.prototype.emit}});var me=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new de("setRealSize",2),this.onUpdate=new de("update"),this.onError=new de("onError",1)},ye={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};me.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.run(this._width,this._height)},me.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},me.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.run(t,e))},ye.valid.get=function(){return!!this._width&&!!this._height},me.prototype.update=function(){this.destroyed||this.onUpdate.run()},me.prototype.load=function(){return Promise.resolve()},ye.width.get=function(){return this._width},ye.height.get=function(){return this._height},me.prototype.upload=function(t,e,i){return!1},me.prototype.style=function(t,e,i){return!1},me.prototype.dispose=function(){},me.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(me.prototype,ye);var ve=function(t){function e(e){var i=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;t.call(this,i,r),this.source=e,this.noSubImage=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=Et(e):!1!==i&&(t.crossOrigin="string"===typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,r){var n=t.gl,o=e.realWidth,s=e.realHeight;return r=r||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===M.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||i.width!==o||i.height!==s?(i.width=o,i.height=s,n.texImage2D(e.target,0,e.format,e.format,e.type,r)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source.naturalWidth||this.source.videoWidth||this.source.width,i=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(e,i),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(me),_e=function(t){function e(e,i){if(i=i||{},!(e instanceof HTMLImageElement)){var r=new Image;t.crossOrigin(r,e,i.crossorigin),r.src=e,e=r}t.call(this,e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==i.createBitmap?i.createBitmap:F.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"===typeof i.alphaMode?i.alphaMode:null,void 0!==i.premultiplyAlpha&&(this.premultiplyAlpha=i.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==i.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(t){var e=this;return void 0!==t&&(this.createBitmap=t),this._load?this._load:(this._load=new Promise((function(t){e.url=e.source.src;var i=e.source,r=function(){e.destroyed||(i.onload=null,i.onerror=null,e.resize(i.width,i.height),e._load=null,e.createBitmap?t(e.process()):t(e))};i.complete&&i.src?r():(i.onload=r,i.onerror=function(t){return e.onError.run(t)})})),this._load)},e.prototype.process=function(){var t=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===M.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,i,r){if("number"===typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,r,this.bitmap),!this.preserveBitmap){var n=!0;for(var o in i._glTextures){var s=i._glTextures[o];if(s!==r&&s.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e}(ve),be=[];function ge(t,e){if(!t)return null;var i="";if("string"===typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(i=r[1].toLowerCase())}for(var n=be.length-1;n>=0;--n){var o=be[n];if(o.test&&o.test(t,i))return new o(t,e)}return new _e(t,e)}var xe=function(t){function e(e,i){var r=i||{},n=r.width,o=r.height;if(!n||!o)throw new Error("BufferResource width or height invalid");t.call(this,n,o),this.data=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,i){var r=t.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===M.UNPACK),i.width===e.width&&i.height===e.height?r.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,r.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(me),we={scaleMode:C.NEAREST,format:E.RGBA,alphaMode:M.NPM},Se=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null),t.call(this);var r=(i=i||{}).alphaMode,n=i.mipmap,o=i.anisotropicLevel,s=i.scaleMode,a=i.width,u=i.height,c=i.wrapMode,h=i.format,l=i.type,p=i.target,f=i.resolution,d=i.resourceOptions;!e||e instanceof me||((e=ge(e,d)).internal=!0),this.width=a||0,this.height=u||0,this.resolution=f||F.RESOLUTION,this.mipmap=void 0!==n?n:F.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==o?o:F.ANISOTROPIC_LEVEL,this.wrapMode=c||F.WRAP_MODE,this.scaleMode=void 0!==s?s:F.SCALE_MODE,this.format=h||E.RGBA,this.type=l||O.UNSIGNED_BYTE,this.target=p||I.TEXTURE_2D,this.alphaMode=void 0!==r?r:M.UNPACK,void 0!==i.premultiplyAlpha&&(this.premultiplyAlpha=i.premultiplyAlpha),this.uid=ft(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&u>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={realWidth:{configurable:!0},realHeight:{configurable:!0}};return i.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},i.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=ut(this.realWidth)&&ut(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete _t[this.cacheId],delete vt[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.from=function(t,i,r){void 0===r&&(r=F.STRICT_TEXTURE_CACHE);var n="string"===typeof t,o=null;n?o=t:(t._pixiId||(t._pixiId="pixiid_"+ft()),o=t._pixiId);var s=_t[o];if(n&&r&&!s)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return s||((s=new e(t,i)).cacheId=o,e.addToCache(s,o)),s},e.fromBuffer=function(t,i,r,n){t=t||new Float32Array(i*r*4);var o=new xe(t,{width:i,height:r}),s=t instanceof Float32Array?O.FLOAT:O.UNSIGNED_BYTE;return new e(o,Object.assign(we,n||{width:i,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),_t[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),_t[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=_t[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete _t[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete _t[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperties(e.prototype,i),e}(L.a);Se._globalBatch=0;var Te=function(t){function e(e,i){var r;i=i||{};var n=e;Array.isArray(e)&&(r=e,n=e.length),t.call(this,i.width,i.height),this.items=[],this.itemDirtyIds=[];for(var o=0;o<n;o++){var s=new Se;this.items.push(s),this.itemDirtyIds.push(-1)}if(this.length=n,this._load=null,r)for(var a=0;a<n;a++)this.addResourceAt(ge(r[a],i),a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=I.TEXTURE_2D_ARRAY;for(var i=0;i<this.length;i++)this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})),i=e.map((function(t){return t.load()}));return this._load=Promise.all(i).then((function(){var i=e[0],r=i.width,n=i.height;return t.resize(r,n),Promise.resolve(t)})),this._load},e.prototype.upload=function(t,e,i){var r=this.length,n=this.itemDirtyIds,o=this.items,s=t.gl;i.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,r,0,e.format,e.type,null);for(var a=0;a<r;a++){var u=o[a];n[a]<u.dirtyId&&(n[a]=u.dirtyId,u.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,u.resource.width,u.resource.height,1,e.format,e.type,u.resource.source))}return!0},e}(me),Ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(ve),Ee=function(t){function e(i,r){if(r=r||{},t.call(this,i,r),this.length!==e.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var n=0;n<e.SIDES;n++)this.items[n].target=I.TEXTURE_CUBE_MAP_POSITIVE_X+n;!1!==r.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=I.TEXTURE_CUBE_MAP},e.prototype.upload=function(t,i,r){for(var n=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];n[o]<s.dirtyId&&(n[o]=s.dirtyId,s.valid&&s.resource.upload(t,s,r))}return!0},e}(Te);Ee.SIDES=6;var Ie=function(t){function e(e,i){i=i||{},t.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=e,this.scale=i.scale||1,this._overrideWidth=i.width,this._overrideHeight=i.height,this._resolve=null,this._crossorigin=i.crossorigin,this._load=null,!1!==i.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load)},e.prototype._loadSvg=function(){var e=this,i=new Image;t.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(t){i.onerror=null,e.onError.run(t)},i.onload=function(){var t=i.width,r=i.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=t*e.scale,o=r*e.scale;(e._overrideWidth||e._overrideHeight)&&(n=e._overrideWidth||e._overrideHeight/r*t,o=e._overrideHeight||e._overrideWidth/t*r),n=Math.round(n),o=Math.round(o);var s=e.source;s.width=n,s.height=o,s._pixiId="canvas_"+ft(),s.getContext("2d").drawImage(i,0,0,t,r,0,0,n,o),e._resolve(),e._resolve=null}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),r={};return i&&(r[i[1]]=Math.round(parseFloat(i[3])),r[i[5]]=Math.round(parseFloat(i[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"===typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"===typeof t&&0===t.indexOf("<svg")},e}(ve);Ie.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Oe=function(t){function e(e,i){if(i=i||{},!(e instanceof HTMLVideoElement)){var r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),"string"===typeof e&&(e=[e]),t.crossOrigin(r,e[0].src||e[0],i.crossorigin);for(var n=0;n<e.length;++n){var o=document.createElement("source"),s=e[n],a=s.src,u=s.mime,c=(a=a||e[n]).split("?").shift().toLowerCase(),h=c.substr(c.lastIndexOf(".")+1);u=u||"video/"+h,o.src=a,o.type=u,r.appendChild(o)}e=r}t.call(this,e),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=i.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==i.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==i.autoLoad&&this.load()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var i=re.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this,e),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(re.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(re.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isAutoUpdating&&re.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),t.prototype.dispose.call(this)},i.autoUpdate.get=function(){return this._autoUpdate},i.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(re.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(re.shared.add(this.update,this),this._isAutoUpdating=!0))},i.updateFPS.get=function(){return this._updateFPS},i.updateFPS.set=function(t){t!==this._updateFPS&&(this._updateFPS=t)},e.test=function(t,i){return t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},Object.defineProperties(e.prototype,i),e}(ve);Oe.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var Ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(ve);be.push(_e,Ce,Ae,Oe,Ie,xe,Ee,Te);var Pe={INSTALLED:be,autoDetectResource:ge,ArrayResource:Te,BufferResource:xe,CanvasResource:Ae,CubeResource:Ee,ImageResource:_e,ImageBitmapResource:Ce,SVGResource:Ie,VideoResource:Oe,Resource:me,BaseImageResource:ve},Be=function(t){this.renderer=t};Be.prototype.destroy=function(){this.renderer=null};var Me=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,i){var r=t.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===M.UNPACK),i.width===e.width&&i.height===e.height?r.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,r.texImage2D(e.target,0,r.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(xe),ke=function(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new de("disposeFramebuffer",2)},Re={colorTexture:{configurable:!0}};Re.colorTexture.get=function(){return this.colorTextures[0]},ke.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new Se(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},ke.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Se(new Me(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:E.DEPTH_COMPONENT,type:O.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},ke.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},ke.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},ke.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,e/o)}}},ke.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(ke.prototype,Re);var De=function(t){function e(e){if("number"===typeof e){var i=arguments[0],r=arguments[1],n=arguments[2],o=arguments[3];e={width:i,height:r,scaleMode:n,resolution:o}}t.call(this,null,e);var s=e||{},a=s.width,u=s.height;this.mipmap=!1,this.width=Math.ceil(a)||100,this.height=Math.ceil(u)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new ke(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.framebuffer=null},e}(Se),Fe=function(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};Fe.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var o=t.width/2/r,s=t.height/2/n,a=t.x/r+o,u=t.y/n+s;i=Vt.add(i,Vt.NW),this.x0=a+o*Vt.uX(i),this.y0=u+s*Vt.uY(i),i=Vt.add(i,2),this.x1=a+o*Vt.uX(i),this.y1=u+s*Vt.uY(i),i=Vt.add(i,2),this.x2=a+o*Vt.uX(i),this.y2=u+s*Vt.uY(i),i=Vt.add(i,2),this.x3=a+o*Vt.uX(i),this.y3=u+s*Vt.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var Ne=new Fe,Le=function(t){function e(i,r,n,o,s,a){if(t.call(this),this.noFrame=!1,r||(this.noFrame=!0,r=new Xt(0,0,1,1)),i instanceof e&&(i=i.baseTexture),this.baseTexture=i,this._frame=r,this.trim=o,this.valid=!1,this.requiresUpdate=!1,this._uvs=Ne,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new Ct(a.x,a.y):new Ct(0,0),this._updateID=0,this.textureCacheIds=[],i.valid?this.noFrame?i.valid&&this.onBaseTextureUpdated(i):this.frame=r:i.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&i.on("update",this.onBaseTextureUpdated,this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&vt[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===Ne&&(this._uvs=new Fe),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,r){void 0===i&&(i={}),void 0===r&&(r=F.STRICT_TEXTURE_CACHE);var n="string"===typeof t,o=null;n?o=t:(t._pixiId||(t._pixiId="pixiid_"+ft()),o=t._pixiId);var s=vt[o];if(n&&r&&!s)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return s||(i.resolution||(i.resolution=It(t)),(s=new e(new Se(t,i))).baseTexture.cacheId=o,Se.addToCache(s.baseTexture,o),e.addToCache(s,o)),s},e.fromBuffer=function(t,i,r,n){return new e(Se.fromBuffer(t,i,r,n))},e.fromLoader=function(t,i,r){var n=new _e(t);n.url=i;var o=new e(new Se(n,{scaleMode:F.SCALE_MODE,resolution:It(i)}));return r||(r=i),Se.addToCache(o.baseTexture,r),e.addToCache(o,r),r!==i&&(Se.addToCache(o.baseTexture,i),e.addToCache(o,i)),o},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),vt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),vt[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=vt[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete vt[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)vt[t.textureCacheIds[r]]===t&&delete vt[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},i.resolution.get=function(){return this.baseTexture.resolution},i.frame.get=function(){return this._frame},i.frame.set=function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,o=e+r>this.baseTexture.width,s=i+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,c="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+a+" "+c)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},i.rotate.get=function(){return this._rotate},i.rotate.set=function(t){this._rotate=t,this.valid&&this.updateUvs()},i.width.get=function(){return this.orig.width},i.height.get=function(){return this.orig.height},Object.defineProperties(e.prototype,i),e}(L.a);function je(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Le.EMPTY=new Le(new Se),je(Le.EMPTY),je(Le.EMPTY.baseTexture),Le.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Le(new Se(new Ae(t)))}(),je(Le.WHITE),je(Le.WHITE.baseTexture);var Ue=function(t){function e(e,i){var r=null;if(!(e instanceof De)){var n=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4];console.warn("Please use RenderTexture.create("+n+", "+o+") instead of the ctor directly."),r=arguments[0],i=null,e=new De({width:n,height:o,scaleMode:s,resolution:a})}t.call(this,e,i),this.legacyRenderer=r,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"===typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new De(t))},e}(Le),ze=function(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};ze.prototype.createTexture=function(t,e){var i=new De(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Ue(i)},ze.prototype.getOptimalTexture=function(t,e,i){void 0===i&&(i=1);var r=ze.SCREEN_KEY;t*=i,e*=i,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(r=(65535&(t=at(t)))<<16|65535&(e=at(e))),this.texturePool[r]||(this.texturePool[r]=[]);var n=this.texturePool[r].pop();return n||(n=this.createTexture(t,e)),n.filterPoolKey=r,n.setResolution(i),n},ze.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},ze.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},ze.prototype.returnFilterTexture=function(t){this.returnTexture(t)},ze.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},ze.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=ze.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},ze.SCREEN_KEY="screen";var Ve=function(t,e,i,r,n,o,s){void 0===i&&(i=!1),void 0===r&&(r=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=n,this.start=o,this.instance=s};Ve.prototype.destroy=function(){this.buffer=null},Ve.from=function(t,e,i,r,n){return new Ve(t,e,i,r,n)};var We=0,Xe=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=We++,this.disposeRunner=new de("disposeBuffer",2)};function He(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}Xe.prototype.update=function(t){this.data=t||this.data,this._updateID++},Xe.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Xe.prototype.destroy=function(){this.dispose(),this.data=null},Xe.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new Xe(t)};var Ge={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var qe={5126:4,5123:2,5121:1},Ye=0,Ke={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Je=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Ye++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new de("disposeGeometry",2),this.refCount=0};Je.prototype.addAttribute=function(t,e,i,r,n,o,s,a){if(void 0===r&&(r=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new Xe(e));var u=t.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],e,i,r,n);return this}var h=this.buffers.indexOf(e);return-1===h&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new Ve(h,i,r,n,o,s,a),this.instanced=this.instanced||a,this},Je.prototype.getAttribute=function(t){return this.attributes[t]},Je.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Je.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new Xe(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Je.prototype.getIndex=function(){return this.indexBuffer},Je.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],r=new Xe;for(t in this.attributes){var n=this.attributes[t],o=this.buffers[n.buffer];e.push(o.data),i.push(n.size*qe[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},o=0;o<t.length;o++)r+=e[o],i+=t[o].length;for(var s=new ArrayBuffer(4*i),a=null,u=0,c=0;c<t.length;c++){var h=e[c],l=t[c],p=He(l);n[p]||(n[p]=new Ge[p](s)),a=n[p];for(var f=0;f<l.length;f++){a[(f/h|0)*r+u+f%h]=l[f]}u+=h}return new Float32Array(s)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Je.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},Je.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Je.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Je.prototype.clone=function(){for(var t=new Je,e=0;e<this.buffers.length;e++)t.buffers[e]=new Xe(this.buffers[e].data.slice());for(var i in this.attributes){var r=this.attributes[i];t.attributes[i]=new Ve(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Je.merge=function(t){for(var e,i=new Je,r=[],n=[],o=[],s=0;s<t.length;s++){e=t[s];for(var a=0;a<e.buffers.length;a++)n[a]=n[a]||0,n[a]+=e.buffers[a].data.length,o[a]=0}for(var u=0;u<e.buffers.length;u++)r[u]=new(Ke[He(e.buffers[u].data)])(n[u]),i.buffers[u]=new Xe(r[u]);for(var c=0;c<t.length;c++){e=t[c];for(var h=0;h<e.buffers.length;h++)r[h].set(e.buffers[h].data,o[h]),o[h]+=e.buffers[h].data.length}if(i.attributes=e.attributes,e.indexBuffer){i.indexBuffer=i.buffers[e.buffers.indexOf(e.indexBuffer)],i.indexBuffer.index=!0;for(var l=0,p=0,f=0,d=0,m=0;m<e.buffers.length;m++)if(e.buffers[m]!==e.indexBuffer){d=m;break}for(var y in e.attributes){var v=e.attributes[y];(0|v.buffer)===d&&(p+=v.size*qe[v.type]/4)}for(var _=0;_<t.length;_++){for(var b=t[_].indexBuffer.data,g=0;g<b.length;g++)i.indexBuffer.data[g+f]+=l;l+=e.buffers[d].data.length/p,f+=b.length}}return i};var Ze=function(t){function e(){t.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Je),Qe=function(t){function e(){t.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Xe(this.vertices),this.uvBuffer=new Xe(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Je),$e=0,ti=function(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=$e++,this.static=!!e};ti.prototype.update=function(){this.dirtyId++},ti.prototype.add=function(t,e,i){this.uniforms[t]=new ti(e,i)},ti.from=function(t,e){return new ti(t,e)};var ei=function(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Xt,this.destinationFrame=new Xt,this.filters=[]};ei.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var ii=function(t){function e(e){t.call(this,e),this.defaultFilterStack=[{}],this.texturePool=new ze,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new Ze,this.quadUv=new Qe,this.tempRect=new Xt,this.activeState={},this.globalUniforms=new ti({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=e.view.width,this._pixelsHeight=e.view.height}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e){for(var i=this.renderer,r=this.defaultFilterStack,n=this.statePool.pop()||new ei,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,u=e[0].legacy,c=1;c<e.length;c++){var h=e[c];o=Math.min(o,h.resolution),s=Math.max(s,h.padding),a=a||h.autoFit,u=u||h.legacy}1===r.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),r.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(s),a&&n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),n.sourceFrame.ceil(o),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height,n.renderTexture.filterFrame=n.sourceFrame,i.renderTexture.bind(n.renderTexture,n.sourceFrame),i.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var n=r.inputSize,o=r.inputPixel,s=r.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=n[0]*e.resolution,o[1]=n[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*n[2]-.5*o[2],s[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){var a=r.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(1===i.length)i[0].apply(this,e.renderTexture,u.renderTexture,!1,e),this.returnFilterTexture(e.renderTexture);else{var c=e.renderTexture,h=this.getOptimalFilterTexture(c.width,c.height,e.resolution);h.filterFrame=c.filterFrame;var l=0;for(l=0;l<i.length-1;++l){i[l].apply(this,c,h,!0,e);var p=c;c=h,h=p}i[l].apply(this,c,u.renderTexture,!1,e),this.returnFilterTexture(c),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},e.prototype.applyFilter=function(t,e,i,r){var n=this.renderer;n.renderTexture.bind(i,i?i.filterFrame:null),r&&n.renderTexture.clear(),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.state.set(t.state),n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(A.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(A.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,n=i.destinationFrame,o=e._texture.orig,s=t.set(n.width,0,0,n.height,r.x,r.y),a=e.worldTransform.copyTo(Rt.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},e.prototype.getFilterTexture=function(t,e){if("number"===typeof t){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(Be),ri=function(t){this.renderer=t};ri.prototype.flush=function(){},ri.prototype.destroy=function(){this.renderer=null},ri.prototype.start=function(){},ri.prototype.stop=function(){this.flush()},ri.prototype.render=function(t){};var ni=function(t){function e(e){t.call(this,e),this.emptyRenderer=new ri(e),this.currentRenderer=this.emptyRenderer}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},e.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,o=t.ids,s=t.count,a=0,u=0;u<s;u++){var c=n[u],h=c._batchLocation;if(h>=0&&h<r&&e[h]===c)o[u]=h;else for(;a<r;){var l=e[a];if(!l||l._batchEnabled!==i||l._batchLocation!==a){o[u]=a,c._batchLocation=a,e[a]=c;break}a++}}},e}(Be);F.PREFER_ENV=x.any?w.WEBGL:w.WEBGL2,F.STRICT_TEXTURE_CACHE=!1;var oi=0,si=function(t){function e(e){t.call(this,e),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isLost:{configurable:!0}};return i.isLost.get=function(){return!this.gl||this.gl.isContextLost()},e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=oi++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=oi++,this.renderer.runners.contextChange.run(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var i;if(F.PREFER_ENV>=w.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),i},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(e.prototype,i),e}(Be),ai=function(t){function e(e){t.call(this,e),this.managedFramebuffers=[],this.unknownFramebuffer=new ke(10,10)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0}};return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Xt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;F.PREFER_ENV===w.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}},e.prototype.bind=function(t,e){var i=this.gl;if(t){var r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,r.framebuffer)),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++)t.colorTextures[n].texturePart?this.renderer.texture.unbind(t.colorTextures[n].texture):this.renderer.texture.unbind(t.colorTextures[n]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,i,r){var n=this.viewport;n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},i.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},e.prototype.clear=function(t,e,i,r){var n=this.gl;n.clearColor(t,e,i,r),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},e.prototype.initFramebuffer=function(t){var e={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},e.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var r=t.colorTextures,n=0;n<r.length;n++)this.renderer.texture.bind(r[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures.length;e.drawBuffers||(r=Math.min(r,1));for(var n=[],o=0;o<r;o++){var s=t.colorTextures[o];s.texturePart?(this.renderer.texture.bind(s.texture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_CUBE_MAP_NEGATIVE_X+s.side,s.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D,s._glTextures[this.CONTEXT_UID].texture,0)),n.push(e.COLOR_ATTACHMENT0+o)}if((n.length>1&&e.drawBuffers(n),t.depthTexture)&&this.writeDepthTexture){var a=t.depthTexture;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},e.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.stencil&&r.deleteRenderbuffer(i.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,r=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),e.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Xt},Object.defineProperties(e.prototype,i),e}(Be),ui=function(t){this.buffer=t,this.updateID=-1,this.byteLength=-1,this.refCount=0},ci={5126:4,5123:2,5121:1},hi=function(t){function e(e){t.call(this,e),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!t.createVertexArray){var i=this.renderer.context.extensions.vertexArrayObject;F.PREFER_ENV===w.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){},t.bindVertexArray=function(){},t.deleteVertexArray=function(){})}if(!t.vertexAttribDivisor){var r=t.getExtension("ANGLE_instanced_arrays");r?(t.vertexAttribDivisor=function(t,e){return r.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,n,o){return r.drawElementsInstancedANGLE(t,e,i,n,o)},t.drawArraysInstanced=function(t,e,i,n){return r.drawArraysInstancedANGLE(t,e,i,n)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID];r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={});var n=r[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?i.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var r=t.buffers[i],n=r._glBuffers[this.CONTEXT_UID];if(r._updateID!==n.updateID){n.updateID=r._updateID;var o=r.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(o,n.buffer),this._boundBuffer=n,n.byteLength>=r.data.byteLength)e.bufferSubData(o,0,r.data);else{var s=r.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=r.data.byteLength,e.bufferData(o,r.data,s)}}}},e.prototype.checkCompatibility=function(t,e){var i=t.attributes,r=e.attributeData;for(var n in r)if(!i[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},e.prototype.getSignature=function(t,e){var i=t.attributes,r=e.attributeData,n=["g",t.id];for(var o in i)r[o]&&n.push(o);return n.join("-")},e.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var i=this.gl,r=this.CONTEXT_UID,n=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],s=o[n];if(s)return o[e.id]=s,s;var a=t.buffers,u=t.attributes,c={},h={};for(var l in a)c[l]=0,h[l]=0;for(var p in u)!u[p].size&&e.attributeData[p]?u[p].size=e.attributeData[p].size:u[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[u[p].buffer]+=u[p].size*ci[u[p].type];for(var f in u){var d=u[f],m=d.size;void 0===d.stride&&(c[d.buffer]===m*ci[d.type]?d.stride=0:d.stride=c[d.buffer]),void 0===d.start&&(d.start=h[d.buffer],h[d.buffer]+=m*ci[d.type])}s=i.createVertexArray(),i.bindVertexArray(s);for(var y=0;y<a.length;y++){var v=a[y];v._glBuffers[r]||(v._glBuffers[r]=new ui(i.createBuffer()),this.managedBuffers[v.id]=v,v.disposeRunner.add(this)),v._glBuffers[r].refCount++}return this.activateVao(t,e),this._activeVao=s,o[e.id]=s,o[n]=s,s},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),i){for(var o=0;o<n.length;o++){var s=n[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(n[o],e)}if(!e)for(var a in i)if("g"===a[0]){var u=i[a];this._activeVao===u&&this.unbind(),r.deleteVertexArray(u)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);e=Object.keys(this.managedBuffers);for(var r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},e.prototype.activateVao=function(t,e){var i=this.gl,r=this.CONTEXT_UID,n=t.buffers,o=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[r].buffer);var s=null;for(var a in o){var u=o[a],c=n[u.buffer]._glBuffers[r];if(e.attributeData[a]){s!==c&&(i.bindBuffer(i.ARRAY_BUFFER,c.buffer),s=c);var h=e.attributeData[a].location;if(i.enableVertexAttribArray(h),i.vertexAttribPointer(h,u.size,u.type||i.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(h,1)}}}},e.prototype.draw=function(t,e,i,r){var n=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(i||0)*s,r||1):n.drawElements(t,e||o.indexBuffer.data.length,a,(i||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,e||o.getSize(),r||1):n.drawArrays(t,i,e||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(Be),li=function(t){this.type=D.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null};function pi(t,e,i,r){var n=fi(t,t.VERTEX_SHADER,e),o=fi(t,t.FRAGMENT_SHADER,i),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,o),r)for(var a in r)t.bindAttribLocation(s,r[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(o,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(n),t.deleteShader(o),s}function fi(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}function di(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return mi(2*e);case"bvec3":return mi(3*e);case"bvec4":return mi(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function mi(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}li.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=D.NONE,this.autoDetect=!0),this._target=null},li.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var yi,vi={},_i=vi;function bi(){if(_i===vi||_i&&_i.isContextLost()){var t,e=document.createElement("canvas");F.PREFER_ENV>=w.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),_i=t}return _i}function gi(t,e,i){if("precision"!==t.substring(0,9)){var r=e;return e===R.HIGH&&i!==R.HIGH&&(r=R.MEDIUM),"precision "+r+" float;\n"+t}return i!==R.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var xi={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function wi(t){return xi[t]}var Si=null,Ti={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function Ai(t,e){if(!Si){var i=Object.keys(Ti);Si={};for(var r=0;r<i.length;++r){var n=i[r];Si[t[n]]=Ti[n]}}return Si[e]}var Ei={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Ii={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Oi,Ci=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Pi(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=Ci.replace(/%forloop%/gi,Bi(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}function Bi(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}var Mi=0,ki={},Ri=function t(e,i,r){void 0===r&&(r="pixi-shader"),this.id=Mi++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),ki[r]?(ki[r]++,r+="-"+ki[r]):ki[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=gi(this.vertexSrc,F.PRECISION_VERTEX,R.HIGH),this.fragmentSrc=gi(this.fragmentSrc,F.PRECISION_FRAGMENT,function(){if(!yi){yi=R.MEDIUM;var t=bi();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);yi=e.precision?R.HIGH:R.MEDIUM}}return yi}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},Di={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};Ri.prototype.extractData=function(t,e){var i=bi();if(i){var r=pi(i,t,e);this.attributeData=this.getAttributeData(r,i),this.uniformData=this.getUniformData(r,i),i.deleteProgram(r)}else this.uniformData={},this.attributeData={}},Ri.prototype.getAttributeData=function(t,e){for(var i={},r=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<n;o++){var s=e.getActiveAttrib(t,o),a=Ai(e,s.type),u={type:a,name:s.name,size:wi(a),location:0};i[s.name]=u,r.push(u)}r.sort((function(t,e){return t.name>e.name?1:-1}));for(var c=0;c<r.length;c++)r[c].location=c;return i},Ri.prototype.getUniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var o=e.getActiveUniform(t,n),s=o.name.replace(/\[.*?\]/,""),a=o.name.match(/\[.*?\]/,""),u=Ai(e,o.type);i[s]={type:u,size:o.size,isArray:a,value:di(u,o.size)}}return i},Di.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},Di.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},Ri.from=function(t,e,i){var r=t+e,n=yt[r];return n||(yt[r]=n=new Ri(t,e,i)),n},Object.defineProperties(Ri,Di);var Fi=function(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof ti?e:new ti(e):new ti({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))},Ni={uniforms:{configurable:!0}};Fi.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var r=e.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},Fi.prototype.destroy=function(){this.uniformGroup=null},Ni.uniforms.get=function(){return this.uniformGroup.uniforms},Fi.from=function(t,e,i){var r=Ri.from(t,e);return new Fi(r,i)},Object.defineProperties(Fi.prototype,Ni);var Li=function(){this.data=0,this.blendMode=T.NORMAL,this.polygonOffset=0,this.blend=!0},ji={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};ji.blend.get=function(){return!!(1&this.data)},ji.blend.set=function(t){!!(1&this.data)!==t&&(this.data^=1)},ji.offsets.get=function(){return!!(2&this.data)},ji.offsets.set=function(t){!!(2&this.data)!==t&&(this.data^=2)},ji.culling.get=function(){return!!(4&this.data)},ji.culling.set=function(t){!!(4&this.data)!==t&&(this.data^=4)},ji.depthTest.get=function(){return!!(8&this.data)},ji.depthTest.set=function(t){!!(8&this.data)!==t&&(this.data^=8)},ji.clockwiseFrontFace.get=function(){return!!(16&this.data)},ji.clockwiseFrontFace.set=function(t){!!(16&this.data)!==t&&(this.data^=16)},ji.blendMode.get=function(){return this._blendMode},ji.blendMode.set=function(t){this.blend=t!==T.NONE,this._blendMode=t},ji.polygonOffset.get=function(){return this._polygonOffset},ji.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},Li.for2d=function(){var t=new Li;return t.depthTest=!1,t.blend=!0,t},Object.defineProperties(Li.prototype,ji);var Ui=function(t){function e(i,r,n){var o=Ri.from(i||e.defaultVertexSrc,r||e.defaultFragmentSrc);t.call(this,o,n),this.padding=0,this.resolution=F.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new Li}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blendMode:{configurable:!0}},r={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return e.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r,n)},i.blendMode.get=function(){return this.state.blendMode},i.blendMode.set=function(t){this.state.blendMode=t},r.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},r.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(e.prototype,i),Object.defineProperties(e,r),e}(Fi);Ui.SOURCE_KEY_MAP={};var zi=new Rt,Vi=function(t,e){this._texture=t,this.mapCoord=new Rt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin="undefined"===typeof e?.5:e,this.isSimple=!1},Wi={texture:{configurable:!0}};Wi.texture.get=function(){return this._texture},Wi.texture.set=function(t){this._texture=t,this._updateID=-1},Vi.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e},Vi.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._updateID===e._updateID)return!1;this._updateID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(zi.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(zi));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(e._frame.x+a+u)/o.width,s[1]=(e._frame.y+a+u)/o.height,s[2]=(e._frame.x+e._frame.width-a+u)/o.width,s[3]=(e._frame.y+e._frame.height-a+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},Object.defineProperties(Vi.prototype,Wi);var Xi=function(t){function e(e){var i=new Rt;t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),e.renderable=!1,this.maskSprite=e,this.maskMatrix=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t,e,i,r){var n=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new Vi(o,0)),o.transform.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,t.applyFilter(this,e,i,r))},e}(Ui),Hi=function(t){function e(e){t.call(this,e),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){if(!e.isMaskData){var i=this.maskDataPool.pop()||new li;i.pooled=!0,i.maskObject=e,e=i}switch(e.autoDetect&&this.detect(e),e.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),e._target=t,e.type){case D.SCISSOR:this.maskStack.push(e),this.renderer.scissor.push(e);break;case D.STENCIL:this.maskStack.push(e),this.renderer.stencil.push(e);break;case D.SPRITE:e.copyCountersOrReset(null),this.pushSpriteMask(e),this.maskStack.push(e)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case D.SCISSOR:this.renderer.scissor.pop();break;case D.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case D.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=D.SPRITE;else if(t.type=D.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,r=Math.atan2(i.b,i.a),n=Math.atan2(i.d,i.c);r=Math.round(r*(180/Math.PI)*100),n=((n=Math.round(n*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0===(r=(r%9e3+9e3)%9e3)&&9e3===n&&(t.type=D.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new Xi(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e;var n=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,r),i.filterArea=n,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(Be),Gi=function(t){function e(e){t.call(this,e),this.maskStack=[],this.glConst=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==i&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this,this),this.maskStack=null},e}(Be),qi=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.SCISSOR_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,r=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,i?r.fit(i):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=r,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,r=i.transform,n=i.sourceFrame,o=i.destinationFrame,s=e?e.resolution:this.renderer.resolution,a=(t.x-n.x)*s+o.x,u=(t.y-n.y)*s+o.y,c=t.width*s,h=t.height*s;r&&(a+=r.tx*s,u+=r.ty*s),e||(u=this.renderer.height-h-u),this.renderer.gl.scissor(a,u,c,h)},e}(Gi),Yi=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.STENCIL_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Gi),Ki=function(t){function e(e){t.call(this,e),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Rt,this.transform=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix;r?(n.a=1/t.width*2*i,n.d=-1/t.height*2*i,n.tx=-1-e.x*n.a,n.ty=1-e.y*n.d):(n.a=1/t.width*2*i,n.d=1/t.height*2*i,n.tx=-1-e.x*n.a,n.ty=-1-e.y*n.d)},e.prototype.setTransform=function(){},e}(Be),Ji=new Xt,Zi=function(t){function e(e){t.call(this,e),this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Xt,this.destinationFrame=new Xt}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,i){void 0===t&&(t=null),this.current=t;var r,n=this.renderer;if(t){var o=t.baseTexture;r=o.resolution,i||(Ji.width=o.realWidth,Ji.height=o.realHeight,i=Ji),e||(e=i),this.renderer.framebuffer.bind(o.framebuffer,i),this.renderer.projection.update(i,e,r,!1),this.renderer.mask.setMaskStack(o.maskStack)}else r=this.renderer.resolution,i||(Ji.width=n.width,Ji.height=n.height,i=Ji),e||(e=i),n.framebuffer.bind(null,i),this.renderer.projection.update(i,e,r,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(e),this.destinationFrame.x=i.x/r,this.destinationFrame.y=i.y/r,this.destinationFrame.width=i.width/r,this.destinationFrame.height=i.height/r,e===i&&this.sourceFrame.copyFrom(this.destinationFrame)},e.prototype.clear=function(t){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(Be),Qi=function(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}};Qi.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var $i=0,tr={textureCount:0},er=function(t){function e(e){t.call(this,e),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=$i++}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.systemCheck=function(){if(!function(){if("boolean"===typeof Oi)return Oi;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Oi=!0===t({a:"b"},"a","b")}catch(e){Oi=!1}return Oi}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(tr.textureCount=0,this.syncUniformGroup(t.uniformGroup,tr)),r},e.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();t.static&&t.dirtyId===i.uniformGroups[t.id]||(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},e.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i="var v = null;\n    var cv = null\n    var t = 0;\n    var gl = renderer.gl\n    ";for(var r in t.uniforms){var n=e[r];if(n)if("float"===n.type&&1===n.size)i+="\n            if(uv."+r+" !== ud."+r+".value)\n            {\n                ud."+r+".value = uv."+r+"\n                gl.uniform1f(ud."+r+".location, uv."+r+")\n            }\n";else if("sampler2D"!==n.type&&"samplerCube"!==n.type&&"sampler2DArray"!==n.type||1!==n.size||n.isArray)if("mat3"===n.type&&1===n.size)void 0!==t.uniforms[r].a?i+="\n                gl.uniformMatrix3fv(ud."+r+".location, false, uv."+r+".toArray(true));\n                \n":i+="\n                gl.uniformMatrix3fv(ud."+r+".location, false, uv."+r+");\n                \n";else if("vec2"===n.type&&1===n.size)void 0!==t.uniforms[r].x?i+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+r+".location, v.x, v.y);\n                }\n":i+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+r+".location, v[0], v[1]);\n                }\n                \n";else if("vec4"===n.type&&1===n.size)void 0!==t.uniforms[r].width?i+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+r+".location, v.x, v.y, v.width, v.height)\n                }\n":i+="\n                cv = ud."+r+".value;\n                v = uv."+r+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+r+".location, v[0], v[1], v[2], v[3])\n                }\n                \n";else{i+="\n            cv = ud."+r+".value;\n            v = uv."+r+";\n            "+(1===n.size?Ei:Ii)[n.type].replace("location","ud."+r+".location")+";\n"}else i+="\n\n            t = syncData.textureCount++;\n\n            renderer.texture.bind(uv."+r+", t);\n            \n            if(ud."+r+".value !== t)\n            {\n                ud."+r+".value = t;\n                gl.uniform1i(ud."+r+".location, t);\n; // eslint-disable-line max-len\n            }\n";else t.uniforms[r].group&&(i+="\n                    renderer.shader.syncUniformGroup(uv."+r+", syncData);\n                ")}return new Function("ud","uv","renderer","syncData",i)}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var i=t.uniforms,r=[];for(var n in i)r.push(n),e[n]&&r.push(e[n].type);return r.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,i=t.program,r={};for(var n in i.attributeData)r[n]=i.attributeData[n].location;var o=pi(e,i.vertexSrc,i.fragmentSrc,r),s={};for(var a in i.uniformData){var u=i.uniformData[a];s[a]={location:e.getUniformLocation(o,a),value:di(u.type,u.size)}}var c=new Qi(o,s);return i.glPrograms[this.renderer.CONTEXT_UID]=c,c},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(Be);var ir=function(t){function e(e){t.call(this,e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=T.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new Li,this.defaultState.blend=!0,this.defaultState.depth=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[T.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.ADD]=[t.ONE,t.ONE],e[T.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.NONE]=[0,0],e[T.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[T.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[T.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[T.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[T.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[T.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[T.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[T.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[T.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[T.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[T.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var i=0;i<this.checks.length;i++)this.checks[i](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(e.polygonOffset,0)},e}(Be),rr=function(t){function e(e){t.call(this,e),this.count=0,this.checkCount=0,this.maxIdle=F.GC_MAX_IDLE,this.checkCountMax=F.GC_MAX_CHECK_COUNT,this.mode=F.GC_MODE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==k.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},e.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e}(Be),nr=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},or=function(t){function e(e){t.call(this,e),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Se}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new nr(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new nr(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var o=0;o<this.boundTextures.length;o++)this.bind(null,o)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.baseTexture||t).valid){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(var n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),i[n]=null)},e.prototype.initTexture=function(t){var e=new nr(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===O.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e));else{var r=t.realWidth,n=t.realHeight,o=i.gl;(e.width!==r||e.height!==n||e.dirtyId<0)&&(e.width=r,e.height=n,o.texImage2D(t.target,0,e.internalFormat,r,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.baseTexture||t)._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&ht(this.managedTextures,r,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==B.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=0,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=P.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===C.LINEAR){var n=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode?i.LINEAR:i.NEAREST)},e}(Be),sr={FilterSystem:ii,BatchSystem:ni,ContextSystem:si,FramebufferSystem:ai,GeometrySystem:hi,MaskSystem:Hi,ScissorSystem:qi,StencilSystem:Yi,ProjectionSystem:Ki,RenderTextureSystem:Zi,ShaderSystem:er,StateSystem:ir,TextureGCSystem:rr,TextureSystem:or},ar=new Rt,ur=function(t){function e(e,i){t.call(this),(i=Object.assign({},F.RENDER_OPTIONS,i)).roundPixels&&(F.ROUND_PIXELS=i.roundPixels,mt("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=i,this.type=S.UNKNOWN,this.screen=new Xt(0,0,i.width,i.height),this.view=i.view||document.createElement("canvas"),this.resolution=i.resolution||F.RESOLUTION,this.transparent=i.transparent,this.autoDensity=i.autoDensity||i.autoResize||!1,this.preserveDrawingBuffer=i.preserveDrawingBuffer,this.clearBeforeRender=i.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=i.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new Qt,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},i.width.get=function(){return this.view.width},i.height.get=function(){return this.view.height},e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,r){0===(r=r||t.getLocalBounds()).width&&(r.width=1),0===r.height&&(r.height=1);var n=Ue.create(0|r.width,0|r.height,e,i);return ar.tx=-r.x,ar.ty=-r.y,this.render(t,n,!1,ar,!!t.parent),n},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=S.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},i.backgroundColor.get=function(){return this._backgroundColor},i.backgroundColor.set=function(t){this._backgroundColor=t,this._backgroundColorString=K(t),Y(t,this._backgroundColorRgba)},Object.defineProperties(e.prototype,i),e}(L.a),cr=function(t){function e(i){void 0===i&&(i={}),t.call(this,"WebGL",i),i=this.options,this.type=S.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new de("destroy"),contextChange:new de("contextChange",1),reset:new de("reset"),update:new de("update"),postrender:new de("postrender"),prerender:new de("prerender"),resize:new de("resize",2)},this.globalUniforms=new ti({projectionMatrix:new Rt},!0),this.addSystem(Hi,"mask").addSystem(si,"context").addSystem(ir,"state").addSystem(er,"shader").addSystem(or,"texture").addSystem(hi,"geometry").addSystem(ai,"framebuffer").addSystem(qi,"scissor").addSystem(Yi,"stencil").addSystem(Ki,"projection").addSystem(rr,"textureGC").addSystem(ii,"filter").addSystem(Zi,"renderTexture").addSystem(ni,"batch"),this.initPlugins(e.__plugins),i.context?this.context.initFromContext(i.context):this.context.initFromOptions({alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,G(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(q())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=i,this.runners)this.runners[r].add(i);return this},e.prototype.render=function(t,e,i,r,n){if(this.renderingToScreen=!e,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(e||(this._lastObjectRendered=t),!n){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.run(e,i)},e.prototype.reset=function(){return this.runners.reset.run(),this},e.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.run(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(ur);function hr(t){return cr.create(t)}var lr="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",pr="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.from=function(t,i){return new e(new Ee(t,i))},e}(Se),dr=function(){this.texArray=null,this.blend=0,this.type=A.TRIANGLES,this.start=0,this.size=0,this.data=null},mr=function(){this.elements=[],this.ids=[],this.count=0};mr.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0};var yr=function(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},vr={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};vr.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},vr.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},vr.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},vr.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},vr.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},yr.prototype.view=function(t){return this[t+"View"]},yr.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},yr.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Object.defineProperties(yr.prototype,vr);var _r=function(t){function e(e){t.call(this,e),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=Li.for2d(),this.size=4*F.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.renderer.gl;F.PREFER_ENV===w.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),F.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Pi(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new dr);for(;i.length<n;)i.push(new mr);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,r=e._textureArrayPool,n=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++Se._globalBatch,u=0,c=r[0],h=0;n.copyBoundTextures(o,i);for(var l=0;l<this._bufferSize;++l){var p=t[l];t[l]=null,p._batchEnabled!==a&&(c.count>=i&&(n.boundArray(c,o,a,i),this.buildDrawCalls(c,h,l),h=l,c=r[++u],++a),p._batchEnabled=a,p.touched=s,c.elements[c.count++]=p)}c.count>0&&(n.boundArray(c,o,a,i),this.buildDrawCalls(c,h,this._bufferSize),++u,++a);for(var f=0;f<o.length;f++)o[f]=null;Se._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,r){var n=this._bufferedElements,o=this._attributeBuffer,s=this._indexBuffer,a=this.vertexSize,u=e._drawCallPool,c=this._dcIndex,h=this._aIndex,l=this._iIndex,p=u[c];p.start=this._iIndex,p.texArray=t;for(var f=i;f<r;++f){var d=n[f],m=d._texture.baseTexture,y=Q[m.alphaMode?1:0][d.blendMode];n[f]=null,i<f&&p.blend!==y&&(p.size=l-p.start,i=f,(p=u[++c]).texArray=t,p.start=l),this.packInterleavedGeometry(d,o,s,h,l),h+=d.vertexData.length/2*a,l+=d.indices.length,p.blend=y}i<r&&(p.size=l-p.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=l},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;F.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,r=i.gl,n=i.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var u=o[a],c=u.texArray,h=u.type,l=u.size,p=u.start,f=u.blend;s!==c&&(s=c,this.bindAndClearTexArray(c)),this.state.blendMode=f,n.set(this.state),r.drawElements(h,l,r.UNSIGNED_SHORT,2*p)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),F.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=at(Math.ceil(t/8)),i=ct(e),r=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new yr(r*this.vertexSize*4)),n},e.prototype.getIndexBuffer=function(t){var e=at(Math.ceil(t/12)),i=ct(e),r=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n},e.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var o=e.uint32View,s=e.float32View,a=r/this.vertexSize,u=t.uvs,c=t.indices,h=t.vertexData,l=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?et(t._tintRGB,p):t._tintRGB+(255*p<<24),d=0;d<h.length;d+=2)s[r++]=h[d],s[r++]=h[d+1],s[r++]=u[d],s[r++]=u[d+1],o[r++]=f,s[r++]=l;for(var m=0;m<c.length;m++)i[n++]=a+c[m]},e}(ri);_r._drawCallPool=[],_r._textureArrayPool=[];var br=function(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};br.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=ti.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ri(this.vertexSrc,r)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Rt,default:this.defaultGroupCache[t]};return new Fi(this.programCache[t],n)},br.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"};var gr=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this._buffer=new Xe(null,e,!1),this._indexBuffer=new Xe(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,O.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,O.FLOAT).addAttribute("aColor",this._buffer,4,!0,O.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,O.FLOAT).addIndex(this._indexBuffer)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Je),xr="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",wr="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Sr=function(){},Tr={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};Sr.create=function(t){var e=Object.assign({vertex:xr,fragment:wr,geometryClass:gr,vertexSize:6},t),i=e.vertex,r=e.fragment,n=e.vertexSize,o=e.geometryClass;return function(t){function e(e){t.call(this,e),this.shaderGenerator=new br(i,r),this.geometryClass=o,this.vertexSize=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(_r)},Tr.defaultVertexSrc.get=function(){return xr},Tr.defaultFragmentTemplate.get=function(){return wr},Object.defineProperties(Sr,Tr);var Ar=Sr.create(),Er=function t(e){var i=this;e=Object.assign({forceCanvas:!1},e),this.renderer=hr(e),this.stage=new Qt,t._plugins.forEach((function(t){t.init.call(i,e)}))},Ir={view:{configurable:!0},screen:{configurable:!0}};Er.registerPlugin=function(t){Er._plugins.push(t)},Er.prototype.render=function(){this.renderer.render(this.stage)},Ir.view.get=function(){return this.renderer.view},Ir.screen.get=function(){return this.renderer.screen},Er.prototype.destroy=function(t,e){var i=this,r=Er._plugins.slice(0);r.reverse(),r.forEach((function(t){t.destroy.call(i)})),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},Object.defineProperties(Er.prototype,Ir),Er._plugins=[];var Or=function(){};Or.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.resize),this._resizeTo=t,t&&(window.addEventListener("resize",this.resize),this.resize())},get:function(){return this._resizeTo}}),this.resize=function(){e._resizeTo&&(e._resizeTo===window?e.renderer.resize(window.innerWidth,window.innerHeight):e.renderer.resize(e._resizeTo.clientWidth,e._resizeTo.clientHeight))},this._resizeTo=null,this.resizeTo=t.resizeTo||null},Or.destroy=function(){this.resizeTo=null,this.resize=null},Er.registerPlugin(Or);var Cr=new Xt,Pr=function(t){this.renderer=t,t.extract=this};Pr.prototype.image=function(t,e,i){var r=new Image;return r.src=this.base64(t,e,i),r},Pr.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},Pr.prototype.canvas=function(t){var e,i,r,n=this.renderer,o=!1,s=!1;t&&(t instanceof Ue?r=t:(r=this.renderer.generateTexture(t),s=!0)),r?(e=r.baseTexture.resolution,i=r.frame,o=!1,n.renderTexture.bind(r)):(e=this.renderer.resolution,o=!0,(i=Cr).width=this.renderer.width,i.height=this.renderer.height,n.renderTexture.bind(null));var a=Math.floor(i.width*e+1e-4),u=Math.floor(i.height*e+1e-4),c=new xt(a,u,1),h=new Uint8Array(4*a*u),l=n.gl;l.readPixels(i.x*e,i.y*e,a,u,l.RGBA,l.UNSIGNED_BYTE,h);var p=c.context.getImageData(0,0,a,u);return Pr.arrayPostDivide(h,p.data),c.context.putImageData(p,0,0),o&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-u)),s&&r.destroy(!0),c.canvas},Pr.prototype.pixels=function(t){var e,i,r,n=this.renderer,o=!1;t&&(t instanceof Ue?r=t:(r=this.renderer.generateTexture(t),o=!0)),r?(e=r.baseTexture.resolution,i=r.frame,n.renderTexture.bind(r)):(e=n.resolution,(i=Cr).width=n.width,i.height=n.height,n.renderTexture.bind(null));var s=i.width*e,a=i.height*e,u=new Uint8Array(4*s*a),c=n.gl;return c.readPixels(i.x*e,i.y*e,s,a,c.RGBA,c.UNSIGNED_BYTE,u),o&&r.destroy(!0),Pr.arrayPostDivide(u,u),u},Pr.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Pr.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var r=e[i+3]=t[i+3];0!==r?(e[i]=Math.round(Math.min(255*t[i]/r,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/r,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/r,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}};var Br=i(104),Mr=i.n(Br),kr=i(40),Rr=i.n(kr);function Dr(){}function Fr(t,e,i,r){var n=0,o=t.length;!function s(a){a||n===o?i&&i(a):r?setTimeout((function(){e(t[n++],s)}),1):e(t[n++],s)}()}function Nr(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function Lr(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,r={_tasks:[],concurrency:e,saturated:Dr,unsaturated:Dr,buffer:e/4,empty:Dr,drain:Dr,error:Dr,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){i=0,r.drain=Dr,r.started=!1,r._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!r.paused&&i<r.concurrency&&r._tasks.length;){var e=r._tasks.shift();0===r._tasks.length&&r.empty(),(i+=1)===r.concurrency&&r.saturated(),t(e.data,Nr(o(e)))}},length:function(){return r._tasks.length},running:function(){return i},idle:function(){return r._tasks.length+i===0},pause:function(){!0!==r.paused&&(r.paused=!0)},resume:function(){if(!1!==r.paused){r.paused=!1;for(var t=1;t<=r.concurrency;t++)r.process()}}};function n(t,e,i){if(null!=i&&"function"!==typeof i)throw new Error("task callback must be a function");if(r.started=!0,null==t&&r.idle())setTimeout((function(){return r.drain()}),1);else{var n={data:t,callback:"function"===typeof i?i:Dr};e?r._tasks.unshift(n):r._tasks.push(n),setTimeout((function(){return r.process()}),1)}}function o(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&r.error(arguments[0],t.data),i<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r}var jr={};function Ur(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zr(t,e,i){return e&&Ur(t.prototype,e),i&&Ur(t,i),t}var Vr=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),Wr=null;function Xr(){}var Hr=function(){function t(e,i,r){if("string"!==typeof e||"string"!==typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Xr,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Rr.a,this.onProgress=new Rr.a,this.onComplete=new Rr.a,this.onAfterMiddleware=new Rr.a}t.setExtensionLoadType=function(e,i){Gr(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){Gr(t._xhrTypeMap,e,i)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"===typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:Vr&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!==(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!==typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!==typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(qr(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(qr(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(qr(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,i="",r="undefined"===typeof e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&"undefined"!==typeof e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(s){return void this.abort("Error trying to parse loaded json: "+s)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(s){return void this.abort("Error trying to parse loaded xml: "+s)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,Wr||(Wr=document.createElement("a")),Wr.href=t;var i=!(t=Mr()(Wr.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&r===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(r>-1?r:t.length,n>-1?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},zr(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function Gr(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function qr(t){return t.toString().replace("object ","")}Hr.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Hr.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Hr.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Hr.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Hr._loadTypeMap={gif:Hr.LOAD_TYPE.IMAGE,png:Hr.LOAD_TYPE.IMAGE,bmp:Hr.LOAD_TYPE.IMAGE,jpg:Hr.LOAD_TYPE.IMAGE,jpeg:Hr.LOAD_TYPE.IMAGE,tif:Hr.LOAD_TYPE.IMAGE,tiff:Hr.LOAD_TYPE.IMAGE,webp:Hr.LOAD_TYPE.IMAGE,tga:Hr.LOAD_TYPE.IMAGE,svg:Hr.LOAD_TYPE.IMAGE,"svg+xml":Hr.LOAD_TYPE.IMAGE,mp3:Hr.LOAD_TYPE.AUDIO,ogg:Hr.LOAD_TYPE.AUDIO,wav:Hr.LOAD_TYPE.AUDIO,mp4:Hr.LOAD_TYPE.VIDEO,webm:Hr.LOAD_TYPE.VIDEO},Hr._xhrTypeMap={xhtml:Hr.XHR_RESPONSE_TYPE.DOCUMENT,html:Hr.XHR_RESPONSE_TYPE.DOCUMENT,htm:Hr.XHR_RESPONSE_TYPE.DOCUMENT,xml:Hr.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Hr.XHR_RESPONSE_TYPE.DOCUMENT,svg:Hr.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Hr.XHR_RESPONSE_TYPE.DOCUMENT,gif:Hr.XHR_RESPONSE_TYPE.BLOB,png:Hr.XHR_RESPONSE_TYPE.BLOB,bmp:Hr.XHR_RESPONSE_TYPE.BLOB,jpg:Hr.XHR_RESPONSE_TYPE.BLOB,jpeg:Hr.XHR_RESPONSE_TYPE.BLOB,tif:Hr.XHR_RESPONSE_TYPE.BLOB,tiff:Hr.XHR_RESPONSE_TYPE.BLOB,webp:Hr.XHR_RESPONSE_TYPE.BLOB,tga:Hr.XHR_RESPONSE_TYPE.BLOB,json:Hr.XHR_RESPONSE_TYPE.JSON,text:Hr.XHR_RESPONSE_TYPE.TEXT,txt:Hr.XHR_RESPONSE_TYPE.TEXT,ttf:Hr.XHR_RESPONSE_TYPE.BUFFER,otf:Hr.XHR_RESPONSE_TYPE.BUFFER},Hr.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Yr=window.URL||window.webkitURL;var Kr={caching:function(t,e){var i=this;jr[t.url]?(t.data=jr[t.url],t.complete()):t.onComplete.once((function(){return jr[i.url]=i.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===Hr.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!==typeof t.data){if(0===t.data.type.indexOf("image")){var i=Yr.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=Hr.TYPE.IMAGE,void(t.data.onload=function(){Yr.revokeObjectURL(i),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],o=0;o<r.length;++o)i<t.length?r[o]=255&t.charCodeAt(i++):r[o]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var s=0;s<n.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[s])}return e}(t.xhr.responseText),t.type=Hr.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},Jr=/(#[\w-]+)?$/,Zr=function(){function t(e,i){var r=this;void 0===e&&(e=""),void 0===i&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=Lr(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new Rr.a,this.onError=new Rr.a,this.onLoad=new Rr.a,this.onStart=new Rr.a,this.onComplete=new Rr.a;for(var n=0;n<t._defaultBeforeMiddleware.length;++n)this.pre(t._defaultBeforeMiddleware[n]);for(var o=0;o<t._defaultAfterMiddleware.length;++o)this.use(t._defaultAfterMiddleware[o])}var e=t.prototype;return e.add=function(t,e,i,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"===typeof t&&(r=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!==typeof e&&(r=i,i=e,e=t),"string"!==typeof e)throw new Error("No url passed to add resource to loader.");if("function"===typeof i&&(r=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Hr(t,e,i),"function"===typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var o=i.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var u=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var c=0;c<s.length;++c)s[c].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"===typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,i=Mr()(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=Jr.exec(e)[0];-1!==(e=e.substr(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},e._loadResource=function(t,e){var i=this;t._dequeue=e,Fr(this._beforeMiddleware,(function(e,r){e.call(i,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Fr(this._afterMiddleware,(function(i,r){i.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},zr(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();Zr._defaultBeforeMiddleware=[],Zr._defaultAfterMiddleware=[],Zr.pre=function(t){return Zr._defaultBeforeMiddleware.push(t),Zr},Zr.use=function(t){return Zr._defaultAfterMiddleware.push(t),Zr};var Qr=function(){};Qr.use=function(t,e){t.data&&t.type===Hr.TYPE.IMAGE&&(t.texture=Le.fromLoader(t.data,t.url,t.name)),e()};var $r=function(t){function e(i,r){var n=this;t.call(this,i,r),L.a.call(this);for(var o=0;o<e._plugins.length;++o){var s=e._plugins[o],a=s.pre,u=s.use;a&&this.pre(a),u&&this.use(u)}this.onStart.add((function(t){return n.emit("start",t)})),this.onProgress.add((function(t,e){return n.emit("progress",t,e)})),this.onError.add((function(t,e,i){return n.emit("error",t,e,i)})),this.onLoad.add((function(t,e){return n.emit("load",t,e)})),this.onComplete.add((function(t,e){return n.emit("complete",t,e)})),this._protected=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={shared:{configurable:!0}};return e.prototype.destroy=function(){this._protected||(this.removeAllListeners(),this.reset())},i.shared.get=function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},Object.defineProperties(e,i),e}(Zr);Object.assign($r.prototype,L.a.prototype),$r._plugins=[],$r.registerPlugin=function(t){return $r._plugins.push(t),t.add&&t.add(),$r},$r.registerPlugin({use:Kr.parsing}),$r.registerPlugin(Qr);var tn=function(){};tn.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?$r.shared:new $r},tn.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};var en=Hr,rn=function(t){function e(e,i,r,n){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===n&&(n=!1),t.call(this);r>16384&&(r=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=T.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(i),this._tint=0,this.tintRgb=new Float32Array(4),this.tint=16777215}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={tint:{configurable:!0}};return e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t,Y(t,this.tintRgb)},e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},Object.defineProperties(e.prototype,i),e}(Qt),nn=function(t,e,i){this.geometry=new Je,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||O.FLOAT,offset:n.offset},e[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()};nn.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Xe(rt(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var r=this.dynamicProperties[i];r.offset=e,e+=r.size,this.dynamicStride+=r.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Xe(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var a=this.staticProperties[s];a.offset=o,o+=a.size,this.staticStride+=a.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new Xe(this.staticData,!0,!1);for(var c=0;c<this.dynamicProperties.length;++c){var h=this.dynamicProperties[c];t.addAttribute(h.attributeName,this.dynamicBuffer,0,h.type===O.UNSIGNED_BYTE,h.type,4*this.dynamicStride,4*h.offset)}for(var l=0;l<this.staticProperties.length;++l){var p=this.staticProperties[l];t.addAttribute(p.attributeName,this.staticBuffer,0,p.type===O.UNSIGNED_BYTE,p.type,4*this.staticStride,4*p.offset)}},nn.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.type===O.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},nn.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.type===O.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},nn.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()};var on=function(t){function e(e){t.call(this,e),this.shader=null,this.properties=null,this.tempMatrix=new Rt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:O.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Fi.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=Li.for2d()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,n=this.renderer,o=e.length;if(0!==o){o>i&&!t.autoResize&&(o=i);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.state.blendMode=$(t.blendMode,a.alphaMode),n.state.set(this.state);var u=n.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=tt(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.alphaMode),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var h=!1,l=0,p=0;l<o;l+=r,p+=1){var f=o-l;f>r&&(f=r),p>=s.length&&s.push(this._generateOneMoreBuffer(t));var d=s[p];d.uploadDynamic(e,l,f);var m=t._bufferUpdateIDs[p]||0;(h=h||d._updateID<m)&&(d._updateID=t._updateID,d.uploadStatic(e,l,f)),n.geometry.bind(d.geometry),u.drawElements(u.TRIANGLES,6*f,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,r=t._batchSize,n=t._properties,o=0;o<i;o+=r)e.push(new nn(this.properties,n,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new nn(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,r,n,o){for(var s=0,a=0,u=0,c=0,h=0;h<i;++h){var l=t[e+h],p=l._texture,f=l.scale.x,d=l.scale.y,m=p.trim,y=p.orig;m?(s=(a=m.x-l.anchor.x*y.width)+m.width,u=(c=m.y-l.anchor.y*y.height)+m.height):(s=y.width*(1-l.anchor.x),a=y.width*-l.anchor.x,u=y.height*(1-l.anchor.y),c=y.height*-l.anchor.y),r[o]=a*f,r[o+1]=c*d,r[o+n]=s*f,r[o+n+1]=c*d,r[o+2*n]=s*f,r[o+2*n+1]=u*d,r[o+3*n]=a*f,r[o+3*n+1]=u*d,o+=4*n}},e.prototype.uploadPosition=function(t,e,i,r,n,o){for(var s=0;s<i;s++){var a=t[e+s].position;r[o]=a.x,r[o+1]=a.y,r[o+n]=a.x,r[o+n+1]=a.y,r[o+2*n]=a.x,r[o+2*n+1]=a.y,r[o+3*n]=a.x,r[o+3*n+1]=a.y,o+=4*n}},e.prototype.uploadRotation=function(t,e,i,r,n,o){for(var s=0;s<i;s++){var a=t[e+s].rotation;r[o]=a,r[o+n]=a,r[o+2*n]=a,r[o+3*n]=a,o+=4*n}},e.prototype.uploadUvs=function(t,e,i,r,n,o){for(var s=0;s<i;++s){var a=t[e+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+n]=a.x1,r[o+n+1]=a.y1,r[o+2*n]=a.x2,r[o+2*n+1]=a.y2,r[o+3*n]=a.x3,r[o+3*n+1]=a.y3,o+=4*n):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+2*n]=0,r[o+2*n+1]=0,r[o+3*n]=0,r[o+3*n+1]=0,o+=4*n)}},e.prototype.uploadTint=function(t,e,i,r,n,o){for(var s=0;s<i;++s){var a=t[e+s],u=a._texture.baseTexture.alphaMode>0,c=a.alpha,h=c<1&&u?et(a._tintRGB,c):a._tintRGB+(255*c<<24);r[o]=h,r[o+n]=h,r[o+2*n]=h,r[o+3*n]=h,o+=4*n}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(ri),sn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||Number.isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},an=function(){this.reset()};an.prototype.clone=function(){var t=new an;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},an.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Le.WHITE,this.matrix=null,this.visible=!1},an.prototype.destroy=function(){this.texture=null,this.matrix=null};var un={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,r=t.holes,n=e.points,o=e.indices;if(i.length>=6){for(var s=[],a=0;a<r.length;a++){var u=r[a];s.push(i.length/2),i=i.concat(u.points)}var c=U()(i,s,2);if(!c)return;for(var h=n.length/2,l=0;l<c.length;l+=3)o.push(c[l]+h),o.push(c[l+1]+h),o.push(c[l+2]+h);for(var p=0;p<i.length;p++)n.push(i[p])}}},cn={build:function(t){var e,i,r=t.shape,n=t.points,o=r.x,s=r.y;if(n.length=0,t.type===Ot.CIRC?(e=r.radius,i=r.radius):(e=r.width,i=r.height),0!==e&&0!==i){var a=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height));a/=2.3;for(var u=2*Math.PI/a,c=0;c<a-.5;c++)n.push(o+Math.sin(-u*c)*e,s+Math.cos(-u*c)*i);n.push(n[0],n[1])}},triangulate:function(t,e){var i=t.points,r=e.points,n=e.indices,o=r.length/2,s=o;r.push(t.shape.x,t.shape.y);for(var a=0;a<i.length;a+=2)r.push(i[a],i[a+1]),n.push(o++,s,o)}},hn={build:function(t){var e=t.shape,i=e.x,r=e.y,n=e.width,o=e.height,s=t.points;s.length=0,s.push(i,r,i+n,r,i+n,r+o,i,r+o)},triangulate:function(t,e){var i=t.points,r=e.points,n=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},ln={build:function(t){var e=t.shape,i=t.points,r=e.x,n=e.y,o=e.width,s=e.height,a=e.radius;i.length=0,fn(r,n+a,r,n,r+a,n,i),fn(r+o-a,n,r+o,n,r+o,n+a,i),fn(r+o,n+s-a,r+o,n+s,r+o-a,n+s,i),fn(r+a,n+s,r,n+s,r,n+s-a,i)},triangulate:function(t,e){for(var i=t.points,r=e.points,n=e.indices,o=r.length/2,s=U()(i,null,2),a=0,u=s.length;a<u;a+=3)n.push(s[a]+o),n.push(s[a+1]+o),n.push(s[a+2]+o);for(var c=0,h=i.length;c<h;c++)r.push(i[c],i[++c])}};function pn(t,e,i){return t+(e-t)*i}function fn(t,e,i,r,n,o,s){void 0===s&&(s=[]);for(var a=s,u=0,c=0,h=0,l=0,p=0,f=0,d=0,m=0;d<=20;++d)u=pn(t,i,m=d/20),c=pn(e,r,m),h=pn(i,n,m),l=pn(r,o,m),p=pn(u,h,m),f=pn(c,l,m),a.push(p,f);return a}function dn(t,e){t.lineStyle.native?function(t,e){var i=0,r=t.shape,n=t.points||r.points,o=r.type!==Ot.POLY||r.closeStroke;if(0===n.length)return;var s=e.points,a=e.indices,u=n.length/2,c=s.length/2,h=c;for(s.push(n[0],n[1]),i=1;i<u;i++)s.push(n[2*i],n[2*i+1]),a.push(h,h+1),h++;o&&a.push(h,c)}(t,e):function(t,e){var i=t.shape,r=t.points||i.points.slice(),n=e.closePointEps;if(0===r.length)return;var o=t.lineStyle,s=new Ct(r[0],r[1]),a=new Ct(r[r.length-2],r[r.length-1]),u=i.type!==Ot.POLY||i.closeStroke,c=Math.abs(s.x-a.x)<n&&Math.abs(s.y-a.y)<n;if(u){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));var h=a.x+.5*(s.x-a.x),l=a.y+.5*(s.y-a.y);r.unshift(h,l),r.push(h,l)}var p=e.points,f=r.length/2,d=r.length,m=p.length/2,y=o.width/2,v=r[0],_=r[1],b=r[2],g=r[3],x=0,w=0,S=-(_-g),T=v-b,A=0,E=0,I=0,O=0,C=Math.sqrt(S*S+T*T);S/=C,T/=C,S*=y,T*=y;var P=o.alignment,B=2*(1-P),M=2*P;p.push(v-S*B,_-T*B),p.push(v+S*M,_+T*M);for(var k=1;k<f-1;++k){v=r[2*(k-1)],_=r[2*(k-1)+1],b=r[2*k],g=r[2*k+1],x=r[2*(k+1)],w=r[2*(k+1)+1],S=-(_-g),T=v-b,C=Math.sqrt(S*S+T*T),S/=C,T/=C,S*=y,T*=y,A=-(g-w),E=b-x,C=Math.sqrt(A*A+E*E),A/=C,E/=C;var R=-T+_-(-T+g),D=-S+b-(-S+v),F=(-S+v)*(-T+g)-(-S+b)*(-T+_),N=-(E*=y)+w-(-E+g),L=-(A*=y)+b-(-A+x),j=(-A+x)*(-E+g)-(-A+b)*(-E+w),U=R*L-N*D;if(Math.abs(U)<.1)U+=10.1,p.push(b-S*B,g-T*B),p.push(b+S*M,g+T*M);else{var z=(D*j-L*F)/U,V=(N*F-R*j)/U;(z-b)*(z-b)+(V-g)*(V-g)>196*y*y?(I=S-A,O=T-E,C=Math.sqrt(I*I+O*O),I/=C,O/=C,I*=y,O*=y,p.push(b-I*B,g-O*B),p.push(b+I*M,g+O*M),p.push(b-I*M*B,g-O*B),d++):(p.push(b+(z-b)*B,g+(V-g)*B),p.push(b-(z-b)*M,g-(V-g)*M))}}v=r[2*(f-2)],_=r[2*(f-2)+1],b=r[2*(f-1)],g=r[2*(f-1)+1],S=-(_-g),T=v-b,C=Math.sqrt(S*S+T*T),S/=C,T/=C,S*=y,T*=y,p.push(b-S*B,g-T*B),p.push(b+S*M,g+T*M);for(var W=e.indices,X=0;X<d-2;++X)W.push(m,m+1,m+2),m++}(t,e)}var mn=function(t){function e(e,i,r,n,o,s){o=o||n/2;for(var a=-1*Math.PI/2+s,u=2*r,c=Bt/u,h=[],l=0;l<u;l++){var p=l%2?o:n,f=l*c+a;h.push(e+p*Math.cos(f),i+p*Math.sin(f))}t.call(this,h)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(qt),yn=function(){};yn.curveTo=function(t,e,i,r,n,o){var s=o[o.length-2],a=o[o.length-1]-e,u=s-t,c=r-e,h=i-t,l=Math.abs(a*h-u*c);if(l<1e-8||0===n)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var p=a*a+u*u,f=c*c+h*h,d=a*c+u*h,m=n*Math.sqrt(p)/l,y=n*Math.sqrt(f)/l,v=m*d/p,_=y*d/f,b=m*h+y*u,g=m*c+y*a,x=u*(y+v),w=a*(y+v),S=h*(m+_),T=c*(m+_);return{cx:b+t,cy:g+e,radius:n,startAngle:Math.atan2(w-g,x-b),endAngle:Math.atan2(T-g,S-b),anticlockwise:u*c>h*a}},yn.arc=function(t,e,i,r,n,o,s,a,u){for(var c=s-o,h=sn._segmentsCount(Math.abs(c)*n,40*Math.ceil(Math.abs(c)/Bt)),l=c/(2*h),p=2*l,f=Math.cos(l),d=Math.sin(l),m=h-1,y=m%1/m,v=0;v<=m;++v){var _=l+o+p*(v+y*v),b=Math.cos(_),g=-Math.sin(_);u.push((f*b+d*g)*n+i,(f*-g+d*b)*n+r)}};var vn=function(){};vn.curveLength=function(t,e,i,r,n,o,s,a){for(var u=0,c=0,h=0,l=0,p=0,f=0,d=0,m=0,y=0,v=0,_=0,b=t,g=e,x=1;x<=10;++x)v=b-(m=(d=(f=(p=1-(c=x/10))*p)*p)*t+3*f*c*i+3*p*(h=c*c)*n+(l=h*c)*s),_=g-(y=d*e+3*f*c*r+3*p*h*o+l*a),b=m,g=y,u+=Math.sqrt(v*v+_*_);return u},vn.curveTo=function(t,e,i,r,n,o,s){var a=s[s.length-2],u=s[s.length-1];s.length-=2;var c=sn._segmentsCount(vn.curveLength(a,u,t,e,i,r,n,o)),h=0,l=0,p=0,f=0,d=0;s.push(a,u);for(var m=1,y=0;m<=c;++m)p=(l=(h=1-(y=m/c))*h)*h,d=(f=y*y)*y,s.push(p*a+3*l*y*t+3*h*f*i+d*n,p*u+3*l*y*e+3*h*f*r+d*o)};var _n=function(){};_n.curveLength=function(t,e,i,r,n,o){var s=t-2*i+n,a=e-2*r+o,u=2*i-2*t,c=2*r-2*e,h=4*(s*s+a*a),l=4*(s*u+a*c),p=u*u+c*c,f=2*Math.sqrt(h+l+p),d=Math.sqrt(h),m=2*h*d,y=2*Math.sqrt(p),v=l/d;return(m*f+d*l*(f-y)+(4*p*h-l*l)*Math.log((2*d+v+f)/(v+y)))/(4*m)},_n.curveTo=function(t,e,i,r,n){for(var o=n[n.length-2],s=n[n.length-1],a=sn._segmentsCount(_n.curveLength(o,s,t,e,i,r)),u=0,c=0,h=1;h<=a;++h){var l=h/a;u=o+(t-o)*l,c=s+(e-s)*l,n.push(u+(t+(i-t)*l-u)*l,c+(e+(r-e)*l-c)*l)}};var bn=function(){this.reset()};bn.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},bn.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},bn.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0};var gn={};gn[Ot.POLY]=un,gn[Ot.CIRC]=cn,gn[Ot.ELIP]=cn,gn[Ot.RECT]=hn,gn[Ot.RREC]=ln;var xn=[],wn=[],Sn={buildPoly:un,buildCircle:cn,buildRectangle:hn,buildRoundedRectangle:ln,FILL_COMMANDS:gn,BATCH_POOL:xn,DRAW_CALL_POOL:wn,buildLine:dn,buildComplexPoly:function(t,e){var i=t.points.slice();if(!(i.length<6)){var r=e.indices;e.points=i,e.alpha=t.fillAlpha,e.color=Y(t.fillColor);for(var n=1/0,o=-1/0,s=1/0,a=-1/0,u=0,c=0,h=0;h<i.length;h+=2)n=(u=i[h])<n?u:n,o=u>o?u:o,s=(c=i[h+1])<s?c:s,a=c>a?c:a;i.push(n,s,o,s,o,a,n,a);for(var l=i.length/2,p=0;p<l;p++)r.push(p)}},bezierCurveTo:function(t,e,i,r,n,o,s,a,u,c){void 0===c&&(c=[]);var h=0,l=0,p=0,f=0,d=0;c.push(t,e);for(var m=1,y=0;m<=u;++m)p=(l=(h=1-(y=m/u))*h)*h,d=(f=y*y)*y,c.push(p*t+3*l*y*i+3*h*f*n+d*s,p*e+3*l*y*r+3*h*f*o+d*a);return c},Star:mn,ArcUtils:yn,BezierUtils:vn,QuadraticUtils:_n,BatchPart:bn},Tn=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=r,this.type=t.type,this.points=[],this.holes=[]};Tn.prototype.clone=function(){return new Tn(this.shape,this.fillStyle,this.lineStyle,this.matrix)},Tn.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null};var An=new Ct,En=new Kt,In=function(t){function e(){t.call(this),this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeIndex=0,this._bounds=new Kt,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.uvsFloat32=null,this.closePointEps=1e-4}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={bounds:{configurable:!0}};return i.bounds.get=function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].textures.length=0,wn.push(this.drawCalls[t]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),xn.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,r){var n=new Tn(t,e,i,r);return this.graphicsData.push(n),this.dirty++,this},e.prototype.drawHole=function(t,e){if(!this.graphicsData.length)return null;var i=new Tn(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(t,An):An.copyFrom(t),r.shape.contains(An.x,An.y)))){var n=!1;if(r.holes)for(var o=0;o<r.holes.length;o++){if(r.holes[o].shape.contains(An.x,An.y)){n=!0;break}}if(!n)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,i=null,r=null;this.batches.length>0&&(r=(i=this.batches[this.batches.length-1]).style);for(var n=this.shapeIndex;n<e.length;n++){this.shapeIndex++;var o=e[n],s=o.fillStyle,a=o.lineStyle;gn[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var u=0;u<2;u++){var c=0===u?s:a;if(c.visible){var h=c.texture.baseTexture,l=this.indices.length,p=this.points.length/2;h.wrapMode=P.REPEAT,0===u?this.processFill(o):this.processLine(o);var f=this.points.length/2-p;0!==f&&(i&&!this._compareStyles(r,c)&&(i.end(l,p),i=null),i||((i=xn.pop()||new bn).begin(c,l,p),this.batches.push(i),r=c),this.addUvs(this.points,t,c.texture,p,f,c.matrix))}}}if(i){var d=this.indices.length,m=this.points.length/2;i.end(d,m)}0!==this.batches.length?(this.indicesUint16=new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()):this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native===!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],r=i.fillStyle,n=i.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var r=t[e],n=0;n<r.size;n++){var o=r.start+n;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},e.prototype.isBatchable=function(){for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Se._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].textures.length=0,wn.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,r=this.textureIds,n=wn.pop();n||((n=new dr).textures=new mr),n.textures.count=0,n.start=0,n.size=0,n.type=A.TRIANGLES;var o=0,s=null,a=0,u=!1,c=A.TRIANGLES,h=0;this.drawCalls.push(n);for(var l=0;l<this.batches.length;l++){var p=this.batches[l],f=p.style,d=f.texture.baseTexture;u!==!!f.native&&(c=(u=!!f.native)?A.LINES:A.TRIANGLES,s=null,o=8,t++),s!==d&&(s=d,d._batchEnabled!==t&&(8===o&&(t++,o=0,n.size>0&&((n=wn.pop())||((n=new dr).textures=new mr),this.drawCalls.push(n)),n.start=h,n.size=0,n.textures.count=0,n.type=c),d.touched=1,d._batchEnabled=t,d._batchLocation=o,d.wrapMode=10497,n.textures.elements[n.textures.count++]=d,o++)),n.size+=p.size,h+=p.size,a=d._batchLocation,this.addColors(i,f.color,f.alpha,p.attribSize),this.addTextureIds(r,a,p.attribSize)}Se._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(3*t.length*4),o=new Float32Array(n),s=new Uint32Array(n),a=0,u=0;u<t.length/2;u++)o[a++]=t[2*u],o[a++]=t[2*u+1],o[a++]=e[2*u],o[a++]=e[2*u+1],s[a++]=i[u],o[a++]=r[u];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),un.triangulate(t,this)):gn[t.type].triangulate(t,this)},e.prototype.processLine=function(t){dn(t,this);for(var e=0;e<t.holes.length;e++)dn(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];gn[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=En,i=Rt.IDENTITY;this._bounds.clear(),e.clear();for(var r=0;r<this.graphicsData.length;r++){var n=this.graphicsData[r],o=n.shape,s=n.type,a=n.lineStyle,u=n.matrix||Rt.IDENTITY,c=0;if(a&&a.visible){var h=a.alignment;c=a.width,s===Ot.POLY?c*=.5+Math.abs(.5-h):c*=Math.max(0,h)}i!==u&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=u),s===Ot.RECT||s===Ot.RREC?e.addFramePad(o.x,o.y,o.x+o.width,o.y+o.height,c,c):s===Ot.CIRC?e.addFramePad(o.x,o.y,o.x,o.y,o.radius+c,o.radius+c):s===Ot.ELIP?e.addFramePad(o.x,o.y,o.x,o.y,o.width+c,o.height+c):t.addVerticesMatrix(i,o.points,0,o.points.length,c,c)}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var r=t[2*i],n=t[2*i+1];t[2*i]=e.a*r+e.c*n+e.tx,t[2*i+1]=e.b*r+e.d*n+e.ty}},e.prototype.addColors=function(t,e,i,r){for(var n=et((e>>16)+(65280&e)+((255&e)<<16),i);r-- >0;)t.push(n)},e.prototype.addTextureIds=function(t,e,i){for(;i-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,i,r,n,o){for(var s=0,a=e.length,u=i.frame;s<n;){var c=t[2*(r+s)],h=t[2*(r+s)+1];if(o){var l=o.a*c+o.c*h+o.tx;h=o.b*c+o.d*h+o.ty,c=l}s++,e.push(c/u.width,h/u.height)}var p=i.baseTexture;(u.width<p.width||u.height<p.height)&&this.adjustUvs(e,i,a,n)},e.prototype.adjustUvs=function(t,e,i,r){for(var n=e.baseTexture,o=i+2*r,s=e.frame,a=s.width/n.width,u=s.height/n.height,c=s.x/s.width,h=s.y/s.height,l=Math.floor(t[i]+1e-6),p=Math.floor(t[i+1]+1e-6),f=i+2;f<o;f+=2)l=Math.min(l,Math.floor(t[f]+1e-6)),p=Math.min(p,Math.floor(t[f+1]+1e-6));c-=l,h-=p;for(var d=i;d<o;d+=2)t[d]=(t[d]+c)*a,t[d+1]=(t[d+1]+h)*u},Object.defineProperties(e.prototype,i),e}(gr);In.BATCHABLE_SIZE=100;var On=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.width=0,this.alignment=.5,this.native=!1},e}(an),Cn=new Float32Array(3),Pn={},Bn=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.geometry=e||new In,this.geometry.refCount++,this.shader=null,this.state=Li.for2d(),this._fillStyle=new an,this._lineStyle=new On,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.vertexData=null,this._transformID=-1,this.batchDirty=-1,this.pluginName="batch",this.tint=16777215,this.blendMode=T.NORMAL}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blendMode:{configurable:!0},tint:{configurable:!0},fill:{configurable:!0},line:{configurable:!0}};return e.prototype.clone=function(){return this.finishPoly(),new e(this.geometry)},i.blendMode.set=function(t){this.state.blendMode=t},i.blendMode.get=function(){return this.state.blendMode},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t},i.fill.get=function(){return this._fillStyle},i.line.get=function(){return this._lineStyle},e.prototype.lineStyle=function(t){if("number"===typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"===typeof t){mt("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments[0],i=arguments[1],r=arguments[2],n=arguments[3],o=arguments[4],s=arguments[5],a=arguments[6];t={width:e,texture:i,color:r,alpha:n,matrix:o,alignment:s,native:a},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({width:0,texture:Le.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1},t),this.currentPath&&this.startPoly();var u=t.width>0&&t.alpha>0;return u?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:u},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new qt,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new qt,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,r){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),_n.curveTo(t,e,i,r,n),this},e.prototype.bezierCurveTo=function(t,e,i,r,n,o){return this._initCurve(),vn.curveTo(t,e,i,r,n,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,r,n){this._initCurve(t,e);var o=this.currentPath.points,s=yn.curveTo(t,e,i,r,n,o);if(s){var a=s.cx,u=s.cy,c=s.radius,h=s.startAngle,l=s.endAngle,p=s.anticlockwise;this.arc(a,u,c,h,l,p)}return this},e.prototype.arc=function(t,e,i,r,n,o){if(void 0===o&&(o=!1),r===n)return this;if(!o&&n<=r?n+=Bt:o&&r<=n&&(r+=Bt),0===n-r)return this;var s=t+Math.cos(r)*i,a=e+Math.sin(r)*i,u=this.geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var h=Math.abs(c[c.length-2]-s),l=Math.abs(c[c.length-1]-a);h<u&&l<u||c.push(s,a)}else this.moveTo(s,a),c=this.currentPath.points;return yn.arc(s,a,t,e,i,r,n,o,c),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:Le.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof Le){mt("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments[0],i=arguments[1],r=arguments[2],n=arguments[3];t={texture:e,color:i,alpha:r,matrix:n},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({texture:Le.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var o=t.alpha>0;return o?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:o},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,r){return this.drawShape(new Xt(t,e,i,r))},e.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new Yt(t,e,i,r,n))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new Ht(t,e,i))},e.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new Gt(t,e,i,r))},e.prototype.drawPolygon=function(t){var e=arguments,i=t,r=!0;if(i.points&&(r=i.closeStroke,i=i.points),!Array.isArray(i)){i=new Array(arguments.length);for(var n=0;n<i.length;++n)i[n]=e[n]}var o=new qt(i);return o.closeStroke=r,this.drawShape(o),this},e.prototype.drawShape=function(t){return this._holeMode?this.geometry.drawHole(t,this._matrix):this.geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,i,r,n,o){return void 0===o&&(o=0),this.drawPolygon(new mn(t,e,i,r,n,o))},e.prototype.clear=function(){return this.geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){return 1===this.geometry.graphicsData.length&&this.geometry.graphicsData[0].shape.type===Ot.RECT&&!this.geometry.graphicsData[0].lineWidth},e.prototype._render=function(t){this.finishPoly();var e=this.geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this.geometry,e=this.blendMode;this.batches=[],this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.vertexData=new Float32Array(t.points);for(var i=0,r=t.batches.length;i<r;i++){var n=t.batches[i],o=n.style.color,s=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),u={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:a,_batchRGB:Y(o),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[i]=u}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this.geometry,r=this.tint,n=this.worldAlpha,o=e.uniforms,s=i.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*n,o.tint[1]=(r>>8&255)/255*n,o.tint[2]=(255&r)/255*n,o.tint[3]=n,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,u=s.length;a<u;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.textures,r=e.type,n=e.size,o=e.start,s=i.count,a=0;a<s;a++)t.texture.bind(i.elements[a],a);t.geometry.draw(r,n,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!Pn[i]){for(var r=new Int32Array(16),n=0;n<16;n++)r[n]=n;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Rt,default:ti.from({uSamplers:r},!0)},s=t.plugins[i]._shader.program;Pn[i]=new Fi(s,o)}e=Pn[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this.geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,r=e.minY,n=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,i,r,n,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this.geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Y(this.tint,Cn),e=0;e<this.batches.length;e++){var i=this.batches[e],r=i._batchRGB,n=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);i._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID;for(var t=this.transform.worldTransform,e=t.a,i=t.b,r=t.c,n=t.d,o=t.tx,s=t.ty,a=this.geometry.points,u=this.vertexData,c=0,h=0;h<a.length;h+=2){var l=a[h],p=a[h+1];u[c++]=e*l+r*p+o,u[c++]=n*p+i*l+s}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this.geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},Object.defineProperties(e.prototype,i),e}(Qt);Bn._TEMP_POINT=new Ct;var Mn=new Ct,kn=new Uint16Array([0,1,2,0,2,3]),Rn=function(t){function e(e){t.call(this),this._anchor=new Pt(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=T.NORMAL,this.shader=null,this._cachedTint=16777215,this.uvs=null,this.texture=e||Le.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=kn,this.size=4,this.start=0,this.pluginName="batch",this.isSprite=!0,this._roundPixels=F.ROUND_PIXELS}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={roundPixels:{configurable:!0},width:{configurable:!0},height:{configurable:!0},anchor:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=lt(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=lt(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,c=t.trim,h=t.orig,l=this._anchor,p=0,f=0,d=0,m=0;if(c?(p=(f=c.x-l._x*h.width)+c.width,d=(m=c.y-l._y*h.height)+c.height):(p=(f=-l._x*h.width)+h.width,d=(m=-l._y*h.height)+h.height),u[0]=i*f+n*m+s,u[1]=o*m+r*f+a,u[2]=i*p+n*m+s,u[3]=o*m+r*p+a,u[4]=i*p+n*d+s,u[5]=o*d+r*p+a,u[6]=i*f+n*d+s,u[7]=o*d+r*f+a,this._roundPixels)for(var y=F.RESOLUTION,v=0;v<u.length;++v)u[v]=Math.round((u[v]*y|0)/y)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,u=n.d,c=n.tx,h=n.ty,l=-r._x*i.width,p=l+i.width,f=-r._y*i.height,d=f+i.height;e[0]=o*l+a*f+c,e[1]=u*f+s*l+h,e[2]=o*p+a*f+c,e[3]=u*f+s*p+h,e[4]=o*p+a*d+c,e[5]=u*d+s*p+h,e[6]=o*l+a*d+c,e[7]=u*d+s*l+h},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Xt),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Mn);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return Mn.x>=r&&Mn.x<r+e&&(n=-i*this.anchor.y,Mn.y>=n&&Mn.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"===typeof e?e:e&&e.texture){var i="boolean"===typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t,i){return new e(t instanceof Le?t:Le.from(t,i))},i.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},i.roundPixels.get=function(){return this._roundPixels},i.width.get=function(){return Math.abs(this.scale.x)*this._texture.orig.width},i.width.set=function(t){var e=lt(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},i.height.get=function(){return Math.abs(this.scale.y)*this._texture.orig.height},i.height.set=function(t){var e=lt(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){this._anchor.copyFrom(t)},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},i.texture.get=function(){return this._texture},i.texture.set=function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Le.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},Object.defineProperties(e.prototype,i),e}(Qt),Dn={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},Fn={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Dn.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Nn=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ln=function(t){this.styleID=0,this.reset(),Vn(this,t,t)},jn={align:{configurable:!0},breakWords:{configurable:!0},dropShadow:{configurable:!0},dropShadowAlpha:{configurable:!0},dropShadowAngle:{configurable:!0},dropShadowBlur:{configurable:!0},dropShadowColor:{configurable:!0},dropShadowDistance:{configurable:!0},fill:{configurable:!0},fillGradientType:{configurable:!0},fillGradientStops:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontStyle:{configurable:!0},fontVariant:{configurable:!0},fontWeight:{configurable:!0},letterSpacing:{configurable:!0},lineHeight:{configurable:!0},leading:{configurable:!0},lineJoin:{configurable:!0},miterLimit:{configurable:!0},padding:{configurable:!0},stroke:{configurable:!0},strokeThickness:{configurable:!0},textBaseline:{configurable:!0},trim:{configurable:!0},whiteSpace:{configurable:!0},wordWrap:{configurable:!0},wordWrapWidth:{configurable:!0}};function Un(t){return"number"===typeof t?K(t):("string"===typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function zn(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Un(t[e]);return t}return Un(t)}function Vn(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}Ln.prototype.clone=function(){var t={};return Vn(t,this,Fn),new Ln(t)},Ln.prototype.reset=function(){Vn(this,Fn,Fn)},jn.align.get=function(){return this._align},jn.align.set=function(t){this._align!==t&&(this._align=t,this.styleID++)},jn.breakWords.get=function(){return this._breakWords},jn.breakWords.set=function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},jn.dropShadow.get=function(){return this._dropShadow},jn.dropShadow.set=function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},jn.dropShadowAlpha.get=function(){return this._dropShadowAlpha},jn.dropShadowAlpha.set=function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},jn.dropShadowAngle.get=function(){return this._dropShadowAngle},jn.dropShadowAngle.set=function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},jn.dropShadowBlur.get=function(){return this._dropShadowBlur},jn.dropShadowBlur.set=function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},jn.dropShadowColor.get=function(){return this._dropShadowColor},jn.dropShadowColor.set=function(t){var e=zn(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},jn.dropShadowDistance.get=function(){return this._dropShadowDistance},jn.dropShadowDistance.set=function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},jn.fill.get=function(){return this._fill},jn.fill.set=function(t){var e=zn(t);this._fill!==e&&(this._fill=e,this.styleID++)},jn.fillGradientType.get=function(){return this._fillGradientType},jn.fillGradientType.set=function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},jn.fillGradientStops.get=function(){return this._fillGradientStops},jn.fillGradientStops.set=function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},jn.fontFamily.get=function(){return this._fontFamily},jn.fontFamily.set=function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},jn.fontSize.get=function(){return this._fontSize},jn.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},jn.fontStyle.get=function(){return this._fontStyle},jn.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},jn.fontVariant.get=function(){return this._fontVariant},jn.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},jn.fontWeight.get=function(){return this._fontWeight},jn.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},jn.letterSpacing.get=function(){return this._letterSpacing},jn.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},jn.lineHeight.get=function(){return this._lineHeight},jn.lineHeight.set=function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},jn.leading.get=function(){return this._leading},jn.leading.set=function(t){this._leading!==t&&(this._leading=t,this.styleID++)},jn.lineJoin.get=function(){return this._lineJoin},jn.lineJoin.set=function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},jn.miterLimit.get=function(){return this._miterLimit},jn.miterLimit.set=function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},jn.padding.get=function(){return this._padding},jn.padding.set=function(t){this._padding!==t&&(this._padding=t,this.styleID++)},jn.stroke.get=function(){return this._stroke},jn.stroke.set=function(t){var e=zn(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},jn.strokeThickness.get=function(){return this._strokeThickness},jn.strokeThickness.set=function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},jn.textBaseline.get=function(){return this._textBaseline},jn.textBaseline.set=function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},jn.trim.get=function(){return this._trim},jn.trim.set=function(t){this._trim!==t&&(this._trim=t,this.styleID++)},jn.whiteSpace.get=function(){return this._whiteSpace},jn.whiteSpace.set=function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},jn.wordWrap.get=function(){return this._wordWrap},jn.wordWrap.set=function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},jn.wordWrapWidth.get=function(){return this._wordWrapWidth},jn.wordWrapWidth.set=function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},Ln.prototype.toFontString=function(){var t="number"===typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Nn.indexOf(r)<0&&(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},Object.defineProperties(Ln.prototype,jn);var Wn=function(t,e,i,r,n,o,s,a,u){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=u};Wn.measureText=function(t,e,i,r){void 0===r&&(r=Wn._canvas),i=void 0===i||null===i?e.wordWrap:i;var n=e.toFontString(),o=Wn.measureFont(n);0===o.fontSize&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);var s=r.getContext("2d");s.font=n;for(var a=(i?Wn.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),u=new Array(a.length),c=0,h=0;h<a.length;h++){var l=s.measureText(a[h]).width+(a[h].length-1)*e.letterSpacing;u[h]=l,c=Math.max(c,l)}var p=c+e.strokeThickness;e.dropShadow&&(p+=e.dropShadowDistance);var f=e.lineHeight||o.fontSize+e.strokeThickness,d=Math.max(f,o.fontSize+e.strokeThickness)+(a.length-1)*(f+e.leading);return e.dropShadow&&(d+=e.dropShadowDistance),new Wn(t,e,p,d,a,u,f+e.leading,c,o)},Wn.wordWrap=function(t,e,i){void 0===i&&(i=Wn._canvas);for(var r=i.getContext("2d"),n=0,o="",s="",a={},u=e.letterSpacing,c=e.whiteSpace,h=Wn.collapseSpaces(c),l=Wn.collapseNewlines(c),p=!h,f=e.wordWrapWidth+u,d=Wn.tokenize(t),m=0;m<d.length;m++){var y=d[m];if(Wn.isNewline(y)){if(!l){s+=Wn.addLine(o),p=!h,o="",n=0;continue}y=" "}if(h){var v=Wn.isBreakingSpace(y),_=Wn.isBreakingSpace(o[o.length-1]);if(v&&_)continue}var b=Wn.getFromCache(y,u,a,r);if(b>f)if(""!==o&&(s+=Wn.addLine(o),o="",n=0),Wn.canBreakWords(y,e.breakWords))for(var g=Wn.wordWrapSplit(y),x=0;x<g.length;x++){for(var w=g[x],S=1;g[x+S];){var T=g[x+S],A=w[w.length-1];if(Wn.canBreakChars(A,T,y,x,e.breakWords))break;w+=T,S++}x+=w.length-1;var E=Wn.getFromCache(w,u,a,r);E+n>f&&(s+=Wn.addLine(o),p=!1,o="",n=0),o+=w,n+=E}else{o.length>0&&(s+=Wn.addLine(o),o="",n=0);var I=m===d.length-1;s+=Wn.addLine(y,!I),p=!1,o="",n=0}else b+n>f&&(p=!1,s+=Wn.addLine(o),o="",n=0),(o.length>0||!Wn.isBreakingSpace(y)||p)&&(o+=y,n+=b)}return s+=Wn.addLine(o,!1)},Wn.addLine=function(t,e){return void 0===e&&(e=!0),t=Wn.trimRight(t),t=e?t+"\n":t},Wn.getFromCache=function(t,e,i,r){var n=i[t];if(void 0===n){var o=t.length*e;n=r.measureText(t).width+o,i[t]=n}return n},Wn.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},Wn.collapseNewlines=function(t){return"normal"===t},Wn.trimRight=function(t){if("string"!==typeof t)return"";for(var e=t.length-1;e>=0;e--){var i=t[e];if(!Wn.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},Wn.isNewline=function(t){return"string"===typeof t&&Wn._newlines.indexOf(t.charCodeAt(0))>=0},Wn.isBreakingSpace=function(t){return"string"===typeof t&&Wn._breakingSpaces.indexOf(t.charCodeAt(0))>=0},Wn.tokenize=function(t){var e=[],i="";if("string"!==typeof t)return e;for(var r=0;r<t.length;r++){var n=t[r];Wn.isBreakingSpace(n)||Wn.isNewline(n)?(""!==i&&(e.push(i),i=""),e.push(n)):i+=n}return""!==i&&e.push(i),e},Wn.canBreakWords=function(t,e){return e},Wn.canBreakChars=function(t,e,i,r,n){return!0},Wn.wordWrapSplit=function(t){return t.split("")},Wn.measureFont=function(t){if(Wn._fonts[t])return Wn._fonts[t];var e={},i=Wn._canvas,r=Wn._context;r.font=t;var n=Wn.METRICS_STRING+Wn.BASELINE_SYMBOL,o=Math.ceil(r.measureText(n).width),s=Math.ceil(r.measureText(Wn.BASELINE_SYMBOL).width),a=2*s;s=s*Wn.BASELINE_MULTIPLIER|0,i.width=o,i.height=a,r.fillStyle="#f00",r.fillRect(0,0,o,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(n,0,s);var u=r.getImageData(0,0,o,a).data,c=u.length,h=4*o,l=0,p=0,f=!1;for(l=0;l<s;++l){for(var d=0;d<h;d+=4)if(255!==u[p+d]){f=!0;break}if(f)break;p+=h}for(e.ascent=s-l,p=c-h,f=!1,l=a;l>s;--l){for(var m=0;m<h;m+=4)if(255!==u[p+m]){f=!0;break}if(f)break;p-=h}return e.descent=l-s,e.fontSize=e.ascent+e.descent,Wn._fonts[t]=e,e},Wn.clearMetrics=function(t){void 0===t&&(t=""),t?delete Wn._fonts[t]:Wn._fonts={}};var Xn=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(i){return document.createElement("canvas")}}();Xn.width=Xn.height=10,Wn._canvas=Xn,Wn._context=Xn.getContext("2d"),Wn._fonts={},Wn.METRICS_STRING="|\xc9q\xc5",Wn.BASELINE_SYMBOL="M",Wn.BASELINE_MULTIPLIER=1.4,Wn._newlines=[10,13],Wn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Hn={texture:!0,children:!1,baseTexture:!0},Gn=function(t){function e(e,i,r){(r=r||document.createElement("canvas")).width=3,r.height=3;var n=Le.from(r);n.orig=new Xt,n.trim=new Xt,t.call(this,n),this.canvas=r,this.context=this.canvas.getContext("2d"),this._resolution=F.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=i,this.localStyleID=-1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0},style:{configurable:!0},text:{configurable:!0},resolution:{configurable:!0}};return e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i,r,n=this.context,o=Wn.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,u=o.lines,c=o.lineHeight,h=o.lineWidths,l=o.maxLineWidth,p=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;for(var f=e.dropShadow?2:1,d=0;d<f;++d){var m=e.dropShadow&&0===d,y=m?2*a:0,v=y*this.resolution;if(m){n.fillStyle="black",n.strokeStyle="black";var _=e.dropShadowColor,b=Y("number"===typeof _?_:J(_));n.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+e.dropShadowAlpha+")",n.shadowBlur=e.dropShadowBlur,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+v}else n.fillStyle=this._generateFillStyle(e,u),n.strokeStyle=e.stroke,n.shadowColor=0,n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var g=0;g<u.length;g++)i=e.strokeThickness/2,r=e.strokeThickness/2+g*c+p.ascent,"right"===e.align?i+=l-h[g]:"center"===e.align&&(i+=(l-h[g])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(u[g],i+e.padding,r+e.padding-y,!0),e.fill&&this.drawLetterSpacing(u[g],i+e.padding,r+e.padding-y)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i,r){void 0===r&&(r=!1);var n=this._style.letterSpacing;if(0!==n)for(var o=e,s=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,u=0,c=0;c<s.length;++c){var h=s[c];r?this.context.strokeText(h,o,i):this.context.fillText(h,o,i),o+=a-(u=this.context.measureText(t.substring(c+1)).width)+n,a=u}else r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=wt(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,r=this._style,n=r.trim?0:r.padding,o=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(t.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(t.height/this._resolution),i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(1===t.fill.length)return t.fill[0];var i,r,n,o,s=t.dropShadow?t.dropShadowDistance:0,a=Math.ceil(this.canvas.width/this._resolution)-s,u=Math.ceil(this.canvas.height/this._resolution)-s,c=t.fill.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var l=c.length+1,p=1;p<l;++p)h.push(p/l);if(c.unshift(t.fill[0]),h.unshift(0),c.push(t.fill[t.fill.length-1]),h.push(1),t.fillGradientType===Dn.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,0,a/2,u),r=(c.length+1)*e.length,n=0;for(var f=0;f<e.length;f++){n+=1;for(var d=0;d<c.length;d++)o="number"===typeof h[d]?h[d]/e.length+f/e.length:n/r,i.addColorStop(o,c[d]),n++}}else{i=this.context.createLinearGradient(0,u/2,a,u/2),r=c.length+1,n=1;for(var m=0;m<c.length;m++)o="number"===typeof h[m]?h[m]:n/r,i.addColorStop(o,c[m]),n++}return i},e.prototype.destroy=function(e){"boolean"===typeof e&&(e={children:e}),e=Object.assign({},Hn,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},i.width.get=function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},i.width.set=function(t){this.updateText(!0);var e=lt(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},i.height.get=function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},i.height.set=function(t){this.updateText(!0);var e=lt(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},i.style.get=function(){return this._style},i.style.set=function(t){t=t||{},this._style=t instanceof Ln?t:new Ln(t),this.localStyleID=-1,this.dirty=!0},i.text.get=function(){return this._text},i.text.set=function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},i.resolution.get=function(){return this._resolution},i.resolution.set=function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},Object.defineProperties(e.prototype,i),e}(Rn);F.UPLOADS_PER_FRAME=4;var qn=function(t){this.maxItemsPerFrame=t,this.itemsLeft=0};qn.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},qn.prototype.allowedToUpload=function(){return this.itemsLeft-- >0};var Yn=function(t){var e=this;this.limiter=new qn(F.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(to),this.registerFindHook(eo),this.registerFindHook(Kn),this.registerFindHook(Jn),this.registerFindHook(Zn),this.registerUploadHook(Qn),this.registerUploadHook($n)};function Kn(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof Le){var n=t._textures[r].baseTexture;-1===e.indexOf(n)&&(e.push(n),i=!0)}return i}function Jn(t,e){if(t.baseTexture instanceof Se){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Zn(t,e){if(t._texture&&t._texture instanceof Le){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Qn(t,e){return e instanceof Gn&&(e.updateText(!0),!0)}function $n(t,e){if(e instanceof Ln){var i=e.toFontString();return Wn.measureFont(i),!0}return!1}function to(t,e){if(t instanceof Gn){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function eo(t,e){return t instanceof Ln&&(-1===e.indexOf(t)&&e.push(t),!0)}Yn.prototype.upload=function(t,e){"function"===typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,re.system.addOnce(this.tick,this,te.UTILITY))):e&&e()},Yn.prototype.tick=function(){setTimeout(this.delayedTick,0)},Yn.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)re.system.addOnce(this.tick,this,te.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(var o=0,s=n.length;o<s;o++)n[o]()}},Yn.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},Yn.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},Yn.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Qt)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},Yn.prototype.destroy=function(){this.ticking&&re.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null};var io=function(t){function e(e){t.call(this,e),this.uploadHookHelper=this.renderer,this.registerFindHook(oo),this.registerUploadHook(ro),this.registerUploadHook(no)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Yn);function ro(t,e){return e instanceof Se&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function no(t,e){if(!(e instanceof Bn))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var r=i.batches,n=0;n<r.length;n++){var o=r[n].style.texture;o&&ro(t,o.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader()),!0}function oo(t,e){return t instanceof Bn&&(e.push(t),!0)}var so=function(t){this.maxMilliseconds=t,this.frameStart=0};so.prototype.beginFrame=function(){this.frameStart=Date.now()},so.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};var ao=function(t,e,i){void 0===i&&(i=null),this.baseTexture=t,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(i||(this.baseTexture.resource?this.baseTexture.resource.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null},uo={BATCH_SIZE:{configurable:!0}};uo.BATCH_SIZE.get=function(){return 1e3},ao.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=It(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},ao.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=ao.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},ao.prototype._processFrames=function(t){for(var e=t,i=ao.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var r=this._frameKeys[e],n=this._frames[r],o=n.frame;if(o){var s=null,a=null,u=!1!==n.trimmed&&n.sourceSize?n.sourceSize:n.frame,c=new Xt(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s=n.rotated?new Xt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new Xt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==n.trimmed&&n.spriteSourceSize&&(a=new Xt(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new Le(this.baseTexture,s,c,a,n.rotated?2:0,n.anchor),Le.addToCache(this.textures[r],r)}e++}},ao.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var r=t[e][i];this.animations[e].push(this.textures[r])}}},ao.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},ao.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*ao.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*ao.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},ao.prototype.destroy=function(t){for(var e in void 0===t&&(t=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},Object.defineProperties(ao,uo);var co=function(){};co.use=function(t,e){var i=t.name+"_image";if(t.data&&t.type===en.TYPE.JSON&&t.data.frames&&!this.resources[i]){var r={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},n=co.getResourcePath(t,this.baseUrl);this.add(i,n,r,(function(i){if(i.error)e(i.error);else{var r=new ao(i.texture.baseTexture,t.data,t.url);r.parse((function(){t.spritesheet=r,t.textures=r.textures,e()}))}}))}else e()},co.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:V.a.resolve(t.url.replace(e,""),t.data.meta.image)};var ho=new Ct,lo=function(t){function e(e,i,r){void 0===i&&(i=100),void 0===r&&(r=100),t.call(this,e),this.tileTransform=new Wt,this._width=i,this._height=r,this._canvasPattern=null,this.uvMatrix=e.uvMatrix||new Vi(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={clampMargin:{configurable:!0},tileScale:{configurable:!0},tilePosition:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return i.clampMargin.get=function(){return this.uvMatrix.clampMargin},i.clampMargin.set=function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},i.tileScale.get=function(){return this.tileTransform.scale},i.tileScale.set=function(t){this.tileTransform.scale.copyFrom(t)},i.tilePosition.get=function(){return this.tileTransform.position},i.tilePosition.set=function(t){this.tileTransform.position.copyFrom(t)},e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Xt),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ho);var e=this._width,i=this._height,r=-e*this.anchor._x;if(ho.x>=r&&ho.x<r+e){var n=-i*this.anchor._y;if(ho.y>=n&&ho.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i,r){return new e(Le.from(t),i,r)},e.fromFrame=function(t,i,r){var n=vt[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(n,i,r)},e.fromImage=function(t,i,r,n){return n&&"object"!==typeof n&&(n={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),new e(Le.from(t,n),i,r)},i.width.get=function(){return this._width},i.width.set=function(t){this._width=t},i.height.get=function(){return this._height},i.height.set=function(t){this._height=t},Object.defineProperties(e.prototype,i),e}(Rn),po="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",fo=new Rt,mo=function(t){function e(e){t.call(this,e);var i={globals:this.renderer.globalUniforms};this.shader=Fi.from(po,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",i),this.simpleShader=Fi.from(po,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",i),this.quad=new Qe,this.state=Li.for2d()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=this.renderer,i=this.quad,r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((r=i.uvs)[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y),i.invalidate();var n=t._texture,o=n.baseTexture,s=t.tileTransform.localTransform,a=t.uvMatrix,u=o.isPowerOfTwo&&n.frame.width===o.width&&n.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==P.CLAMP:o.wrapMode===P.CLAMP&&(o.wrapMode=P.REPEAT));var c=u?this.simpleShader:this.shader,h=n.width,l=n.height,p=t._width,f=t._height;fo.set(s.a*h/p,s.b*h/f,s.c*l/p,s.d*l/f,s.tx/p,s.ty/f),fo.invert(),u?fo.prepend(a.mapCoord):(c.uniforms.uMapCoord=a.mapCoord.toArray(!0),c.uniforms.uClampFrame=a.uClampFrame,c.uniforms.uClampOffset=a.uClampOffset),c.uniforms.uTransform=fo.toArray(!0),c.uniforms.uColor=it(t.tint,t.worldAlpha,c.uniforms.uColor,o.alphaMode),c.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),c.uniforms.uSampler=n,e.shader.bind(c),e.geometry.bind(i),this.state.blendMode=$(t.blendMode,o.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(ri),yo=function(t){function e(e,i){var r=this;void 0===i&&(i={}),t.call(this),this._textWidth=0,this._textHeight=0,this._glyphs=[],this._font={tint:void 0!==i.tint?i.tint:16777215,align:i.align||"left",name:null,size:0},this.font=i.font,this._text=e,this._maxWidth=0,this._maxLineHeight=0,this._letterSpacing=0,this._anchor=new Pt((function(){r.dirty=!0}),this,0,0),this.dirty=!1,this.roundPixels=F.ROUND_PIXELS,this.updateText()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={tint:{configurable:!0},align:{configurable:!0},anchor:{configurable:!0},font:{configurable:!0},text:{configurable:!0},maxWidth:{configurable:!0},maxLineHeight:{configurable:!0},textWidth:{configurable:!0},letterSpacing:{configurable:!0},textHeight:{configurable:!0}};return e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,r=new Ct,n=[],o=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",a=s.length,u=this._maxWidth*t.size/this._font.size,c=null,h=0,l=0,p=0,f=-1,d=0,m=0,y=0,v=0;v<a;v++){var _=s.charCodeAt(v),b=s.charAt(v);if(/(?:\s)/.test(b)&&(f=v,d=h),"\r"!==b&&"\n"!==b){var g=t.chars[_];g&&(c&&g.kerning[c]&&(r.x+=g.kerning[c]),n.push({texture:g.texture,line:p,charCode:_,position:new Ct(r.x+g.xOffset+this._letterSpacing/2,r.y+g.yOffset)}),r.x+=g.xAdvance+this._letterSpacing,h=r.x,y=Math.max(y,g.yOffset+g.texture.height),c=_,-1!==f&&u>0&&r.x>u&&(ht(n,1+f-++m,1+v-f),v=f,f=-1,o.push(d),l=Math.max(l,d),p++,r.x=0,r.y+=t.lineHeight,c=null))}else o.push(h),l=Math.max(l,h),++p,++m,r.x=0,r.y+=t.lineHeight,c=null}var x=s.charAt(s.length-1);"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(h=d),o.push(h),l=Math.max(l,h));for(var w=[],S=0;S<=p;S++){var T=0;"right"===this._font.align?T=l-o[S]:"center"===this._font.align&&(T=(l-o[S])/2),w.push(T)}for(var A=n.length,E=this.tint,I=0;I<A;I++){var O=this._glyphs[I];O?O.texture=n[I].texture:((O=new Rn(n[I].texture)).roundPixels=this.roundPixels,this._glyphs.push(O)),O.position.x=(n[I].position.x+w[n[I].line])*i,O.position.y=n[I].position.y*i,O.scale.x=O.scale.y=i,O.tint=E,O.parent||this.addChild(O)}for(var C=A;C<this._glyphs.length;++C)this.removeChild(this._glyphs[C]);if(this._textWidth=l*i,this._textHeight=(r.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var P=0;P<A;P++)this._glyphs[P].x-=this._textWidth*this.anchor.x,this._glyphs[P].y-=this._textHeight*this.anchor.y;this._maxLineHeight=y*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},i.tint.get=function(){return this._font.tint},i.tint.set=function(t){this._font.tint="number"===typeof t&&t>=0?t:16777215,this.dirty=!0},i.align.get=function(){return this._font.align},i.align.set=function(t){this._font.align=t||"left",this.dirty=!0},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},i.font.get=function(){return this._font},i.font.set=function(t){t&&("string"===typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"===typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)},i.text.get=function(){return this._text},i.text.set=function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},i.maxWidth.get=function(){return this._maxWidth},i.maxWidth.set=function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},i.maxLineHeight.get=function(){return this.validate(),this._maxLineHeight},i.textWidth.get=function(){return this.validate(),this._textWidth},i.letterSpacing.get=function(){return this._letterSpacing},i.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},i.textHeight.get=function(){return this.validate(),this._textHeight},e.registerFont=function(t,i){var r={},n=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("page"),a=It(s[0].getAttribute("file"),F.RESOLUTION),u={};r.font=n.getAttribute("face"),r.size=parseInt(n.getAttribute("size"),10),r.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/a,r.chars={},i instanceof Le&&(i=[i]);for(var c=0;c<s.length;c++){var h=s[c].getAttribute("id"),l=s[c].getAttribute("file");u[h]=i instanceof Array?i[c]:i[l]}for(var p=t.getElementsByTagName("char"),f=0;f<p.length;f++){var d=p[f],m=parseInt(d.getAttribute("id"),10),y=d.getAttribute("page")||0,v=new Xt(parseInt(d.getAttribute("x"),10)/a+u[y].frame.x/a,parseInt(d.getAttribute("y"),10)/a+u[y].frame.y/a,parseInt(d.getAttribute("width"),10)/a,parseInt(d.getAttribute("height"),10)/a);r.chars[m]={xOffset:parseInt(d.getAttribute("xoffset"),10)/a,yOffset:parseInt(d.getAttribute("yoffset"),10)/a,xAdvance:parseInt(d.getAttribute("xadvance"),10)/a,kerning:{},texture:new Le(u[y].baseTexture,v),page:y}}for(var _=t.getElementsByTagName("kerning"),b=0;b<_.length;b++){var g=_[b],x=parseInt(g.getAttribute("first"),10)/a,w=parseInt(g.getAttribute("second"),10)/a,S=parseInt(g.getAttribute("amount"),10)/a;r.chars[w]&&(r.chars[w].kerning[x]=S)}return e.fonts[r.font]=r,r},Object.defineProperties(e.prototype,i),e}(Qt);yo.fonts={};var vo=function(){};vo.parse=function(t,e){t.bitmapFont=yo.registerFont(t.data,e)},vo.add=function(){en.setExtensionXhrType("fnt",en.XHR_RESPONSE_TYPE.DOCUMENT)},vo.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},vo.use=function(t,e){if(t.data&&t.type===en.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":vo.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var r=t.data.getElementsByTagName("page"),n={},o=function(i){n[i.metadata.pageFile]=i.texture,Object.keys(n).length===r.length&&(vo.parse(t,n),e())},s=0;s<r.length;++s){var a=r[s].getAttribute("file"),u=i+a,c=!1;for(var h in this.resources){var l=this.resources[h];if(l.url===u){l.metadata.pageFile=a,l.texture?o(l):l.onAfterMiddleware.add(o),c=!0;break}}if(!c){var p={crossOrigin:t.crossOrigin,loadType:en.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:a},t.metadata.imageMetadata),parentResource:t};this.add(u,p,o)}}}else e();else e()};var _o=function(t){function e(e){void 0===e&&(e=1),t.call(this,lr,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={alpha:{configurable:!0}};return i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,i),e}(Ui);var bo={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},go=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var xo=function(t){function e(e,i,r,n,o){var s=function(t,e){var i,r=Math.ceil(t/2),n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=i.replace("%index%",s);o+=a=a.replace("%sampleIndex%",s-(r-1)+".0"),o+="\n"}return n=(n=n.replace("%blur%",o)).replace("%size%",t)}(o=o||5,e),a=function(t){for(var e,i=bo[t],r=i.length,n=go,o="",s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s);e=s,s>=r&&(e=t-s-1),o+=a=a.replace("%value%",i[e]),o+="\n"}return n=(n=n.replace("%blur%",o)).replace("%size%",t)}(o);t.call(this,s,a),this.horizontal=e,this.resolution=n||F.RESOLUTION,this._quality=0,this.quality=r||4,this.blur=i||8}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},quality:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{var n=t.getFilterTexture(),o=t.renderer,s=e,a=n;this.state.blend=!1,t.applyFilter(this,s,a,!0);for(var u=1;u<this.passes-1;u++){o.renderTexture.bind(s,s.filterFrame),this.uniforms.uSampler=a;var c=a;a=s,s=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,r),t.returnFilterTexture(n)}},i.blur.get=function(){return this.strength},i.blur.set=function(t){this.padding=1+2*Math.abs(t),this.strength=t},i.quality.get=function(){return this._quality},i.quality.set=function(t){this._quality=t,this.passes=t},Object.defineProperties(e.prototype,i),e}(Ui),wo=function(t){function e(e,i,r,n){t.call(this),this.blurXFilter=new xo(!0,e,i,r,n),this.blurYFilter=new xo(!1,e,i,r,n),this.resolution=r||F.RESOLUTION,this.quality=i||4,this.blur=e||8,this.repeatEdgePixels=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},quality:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0},blendMode:{configurable:!0},repeatEdgePixels:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){var n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,!0),this.blurYFilter.apply(t,s,i,r),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,i,r):this.blurXFilter.apply(t,e,i,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},i.blur.get=function(){return this.blurXFilter.blur},i.blur.set=function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},i.quality.get=function(){return this.blurXFilter.quality},i.quality.set=function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},i.blurX.get=function(){return this.blurXFilter.blur},i.blurX.set=function(t){this.blurXFilter.blur=t,this.updatePadding()},i.blurY.get=function(){return this.blurYFilter.blur},i.blurY.set=function(t){this.blurYFilter.blur=t,this.updatePadding()},i.blendMode.get=function(){return this.blurYFilter.blendMode},i.blendMode.set=function(t){this.blurYFilter.blendMode=t},i.repeatEdgePixels.get=function(){return this._repeatEdgePixels},i.repeatEdgePixels.set=function(t){this._repeatEdgePixels=t,this.updatePadding()},Object.defineProperties(e.prototype,i),e}(Ui),So=function(t){function e(){var e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};t.call(this,pr,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={matrix:{configurable:!0},alpha:{configurable:!0}};return e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,o=(0,Math.sqrt)(n),s=[i+(1-i)*n,n*(1-i)-o*r,n*(1-i)+o*r,0,0,n*(1-i)+o*r,i+n*(1-i),n*(1-i)-o*r,0,0,n*(1-i)-o*r,n*(1-i)+o*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,r,n){var o=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,u=((r=r||3375104)>>16&255)/255,c=(r>>8&255)/255,h=(255&r)/255,l=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,u,c,h,e=e||.15,0,o-u,s-c,a-h,0,0];this._loadMatrix(l,n)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},i.matrix.get=function(){return this.uniforms.m},i.matrix.set=function(t){this.uniforms.m=t},i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,i),e}(Ui);So.prototype.grayscale=So.prototype.greyscale;var To=function(t){function e(e,i){var r=new Rt;e.renderable=!1,t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,null!==i&&void 0!==i||(i=20),this.scale=new Ct(i,i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={map:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.transform.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),s=Math.sqrt(n.c*n.c+n.d*n.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/s,this.uniforms.rotation[3]=n.d/s),t.applyFilter(this,e,i,r)},i.map.get=function(){return this.uniforms.mapSampler},i.map.set=function(t){this.uniforms.mapSampler=t},Object.defineProperties(e.prototype,i),e}(Ui),Ao=function(t){function e(){t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ui),Eo=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random()),t.call(this,pr,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={noise:{configurable:!0},seed:{configurable:!0}};return i.noise.get=function(){return this.uniforms.uNoise},i.noise.set=function(t){this.uniforms.uNoise=t},i.seed.get=function(){return this.uniforms.uSeed},i.seed.set=function(t){this.uniforms.uSeed=t},Object.defineProperties(e.prototype,i),e}(Ui),Io=new Rt;Jt.prototype._cacheAsBitmap=!1,Jt.prototype._cacheData=!1;var Oo=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(Jt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Oo),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Jt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Jt.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds().clone();if(this.filters){var r=this.filters[0].padding;i.pad(r)}i.ceil(F.RESOLUTION);var n=t.renderTexture.current,o=t.renderTexture.sourceFrame,s=t.projection.transform,a=Ue.create(i.width,i.height),u="cacheAsBitmap_"+ft();this._cacheData.textureCacheId=u,Se.addToCache(a.baseTexture,u),Le.addToCache(a,u);var c=Io;c.tx=-i.x,c.ty=-i.y,this.transform.worldTransform.identity(),this.render=this._cacheData.originalRender,t.render(this,a,!0,c,!0),t.projection.transform=s,t.renderTexture.bind(n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new Rn(a);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-i.x/i.width,h.anchor.y=-i.y/i.height,h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},Jt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Jt.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var r=t.context;e.ceil(F.RESOLUTION);var n=Ue.create(e.width,e.height),o="cacheAsBitmap_"+ft();this._cacheData.textureCacheId=o,Se.addToCache(n.baseTexture,o),Le.addToCache(n,o);var s=Io;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,n,!0,s,!1),t.context=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var a=new Rn(n);a.transform.worldTransform=this.transform.worldTransform,a.anchor.x=-e.x/e.width,a.anchor.y=-e.y/e.height,a.alpha=i,a._bounds=this._bounds,this._cacheData.sprite=a,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=a.containsPoint.bind(a)}},Jt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},Jt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},Jt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Se.removeFromCache(this._cacheData.textureCacheId),Le.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Jt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},Jt.prototype.name=null,Qt.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null},Jt.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Ct),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var Co=function(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0};Co.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}};var Po=new Ct,Bo=new qt,Mo=function(t){function e(e,i,r,n){void 0===n&&(n=A.TRIANGLES),t.call(this),this.geometry=e,e.refCount++,this.shader=i,this.state=r||Li.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=0,this._transformID=-1,this.tint=16777215,this.blendMode=T.NORMAL,this._roundPixels=F.ROUND_PIXELS,this.batchUvs=null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={uvBuffer:{configurable:!0},verticesBuffer:{configurable:!0},material:{configurable:!0},blendMode:{configurable:!0},roundPixels:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return i.uvBuffer.get=function(){return this.geometry.buffers[1]},i.verticesBuffer.get=function(){return this.geometry.buffers[0]},i.material.set=function(t){this.shader=t},i.material.get=function(){return this.shader},i.blendMode.set=function(t){this.state.blendMode=t},i.blendMode.get=function(){return this.state.blendMode},i.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},i.roundPixels.get=function(){return this._roundPixels},i.tint.get=function(){return this.shader.tint},i.tint.set=function(t){this.shader.tint=t},i.texture.get=function(){return this.shader.texture},i.texture.set=function(t){this.shader.texture=t},e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===A.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var i=this.transform.worldTransform,r=i.a,n=i.b,o=i.c,s=i.d,a=i.tx,u=i.ty,c=this.vertexData,h=0;h<c.length/2;h++){var l=e[2*h],p=e[2*h+1];c[2*h]=r*l+o*p+a,c[2*h+1]=n*l+s*p+u}if(this._roundPixels)for(var f=F.RESOLUTION,d=0;d<c.length;++d)c[d]=Math.round((c[d]*f|0)/f);this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Co(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Po);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=Bo.points,r=this.geometry.getIndex().data,n=r.length,o=4===this.drawMode?3:1,s=0;s+2<n;s+=o){var a=2*r[s],u=2*r[s+1],c=2*r[s+2];if(i[0]=e[a],i[1]=e[a+1],i[2]=e[u],i[3]=e[u+1],i[4]=e[c],i[5]=e[c+1],Bo.contains(Po.x,Po.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Object.defineProperties(e.prototype,i),e}(Qt);Mo.BATCHABLE_SIZE=100;var ko=function(t){function e(e,i){var r={uSampler:e,alpha:1,uTextureMatrix:Rt.IDENTITY,uColor:new Float32Array([1,1,1,1])};(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(r,i.uniforms),t.call(this,i.program||Ri.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r),this._colorDirty=!1,this.uvMatrix=new Vi(e),this.batchable=void 0===i.program,this.pluginName=i.pluginName,this.tint=i.tint,this.alpha=i.alpha}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={texture:{configurable:!0},alpha:{configurable:!0},tint:{configurable:!0}};return i.texture.get=function(){return this.uniforms.uSampler},i.texture.set=function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},i.alpha.set=function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},i.alpha.get=function(){return this._alpha},i.tint.set=function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},i.tint.get=function(){return this._tint},e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;it(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},Object.defineProperties(e.prototype,i),e}(Fi),Ro=function(t){function e(e,i,r){t.call(this);var n=new Xe(e),o=new Xe(i,!0),s=new Xe(r,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,O.FLOAT).addAttribute("aTextureCoord",o,2,!1,O.FLOAT).addIndex(s),this._updateId=-1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertexDirtyId:{configurable:!0}};return i.vertexDirtyId.get=function(){return this.buffers[0]._updateID},Object.defineProperties(e.prototype,i),e}(Je),Do=function(t){function e(e,i,r,n){void 0===e&&(e=100),void 0===i&&(i=100),void 0===r&&(r=10),void 0===n&&(n=10),t.call(this),this.segWidth=r,this.segHeight=n,this.width=e,this.height=i,this.build()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],r=[],n=this.segWidth-1,o=this.segHeight-1,s=this.width/n,a=this.height/o,u=0;u<t;u++){var c=u%this.segWidth,h=u/this.segWidth|0;e.push(c*s,h*a),i.push(c/n,h/o)}for(var l=n*o,p=0;p<l;p++){var f=p%n,d=p/n|0,m=d*this.segWidth+f,y=d*this.segWidth+f+1,v=(d+1)*this.segWidth+f,_=(d+1)*this.segWidth+f+1;r.push(m,y,v,y,_,v)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Ro),Fo=function(t){function e(e,i,r){void 0===e&&(e=200),void 0===r&&(r=0),t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1))),this.points=i,this.width=e,this.textureScale=r,this.build()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var n=i.data,o=r.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var s=0,a=t[0],u=this.width*this.textureScale,c=t.length,h=0;h<c;h++){var l=4*h;if(this.textureScale>0){var p=a.x-t[h].x,f=a.y-t[h].y,d=Math.sqrt(p*p+f*f);a=t[h],s+=d/u}else s=h/(c-1);n[l]=s,n[l+1]=0,n[l+2]=s,n[l+3]=1}for(var m=0,y=0;y<c-1;y++){var v=2*y;o[m++]=v,o[m++]=v+1,o[m++]=v+2,o[m++]=v+2,o[m++]=v+1,o[m++]=v+3}i.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],r=0,n=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var u=t[a],c=4*a;n=-((e=a<t.length-1?t[a+1]:u).x-i.x),r=e.y-i.y;var h=Math.sqrt(r*r+n*n),l=this.textureScale>0?this.textureScale*this.width/2:this.width/2;r/=h,n/=h,r*=l,n*=l,o[c]=u.x+r,o[c+1]=u.y+n,o[c+2]=u.x-r,o[c+3]=u.y-n,i=u}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Ro),No=function(t){function e(e,i,r){void 0===r&&(r=0);var n=new Fo(e.height,i,r),o=new ko(e);r>0&&(e.baseTexture.wrapMode=P.REPEAT),t.call(this,n,o),this.autoUpdate=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._render=function(e){(this.autoUpdate||this.geometry.width!==this.shader.texture.height)&&(this.geometry.width=this.shader.texture.height,this.geometry.update()),t.prototype._render.call(this,e)},e}(Mo),Lo=function(t){function e(e,i,r){var n=new Do(e.width,e.height,i,r),o=new ko(Le.WHITE);t.call(this,n,o),this.texture=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={texture:{configurable:!0}};return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this.geometry.width=this.shader.texture.width,this.geometry.height=this.shader.texture.height,this.geometry.build()},i.texture.set=function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},i.texture.get=function(){return this.shader.texture},e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},Object.defineProperties(e.prototype,i),e}(Mo),jo=function(t){function e(e,i,r,n,o){void 0===e&&(e=Le.EMPTY);var s=new Ro(i,r,n);s.getBuffer("aVertexPosition").static=!1;var a=new ko(e);t.call(this,s,a,null,o),this.autoUpdate=!0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertices:{configurable:!0}};return i.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},i.vertices.set=function(t){this.geometry.getBuffer("aVertexPosition").data=t},e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},Object.defineProperties(e.prototype,i),e}(Mo),Uo=function(t){function e(e,i,r,n,o){t.call(this,Le.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth="undefined"!==typeof i?i:10,this._rightWidth="undefined"!==typeof n?n:10,this._topHeight="undefined"!==typeof r?r:10,this._bottomHeight="undefined"!==typeof o?o:10,this.texture=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertices:{configurable:!0},width:{configurable:!0},height:{configurable:!0},leftWidth:{configurable:!0},rightWidth:{configurable:!0},topHeight:{configurable:!0},bottomHeight:{configurable:!0}};return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},i.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},i.vertices.set=function(t){this.geometry.getBuffer("aVertexPosition").data=t},e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,r=this._height>i?1:this._height/i;return Math.min(e,r)},i.width.get=function(){return this._width},i.width.set=function(t){this._width=t,this._refresh()},i.height.get=function(){return this._height},i.height.set=function(t){this._height=t,this._refresh()},i.leftWidth.get=function(){return this._leftWidth},i.leftWidth.set=function(t){this._leftWidth=t,this._refresh()},i.rightWidth.get=function(){return this._rightWidth},i.rightWidth.set=function(t){this._rightWidth=t,this._refresh()},i.topHeight.get=function(){return this._topHeight},i.topHeight.set=function(t){this._topHeight=t,this._refresh()},i.bottomHeight.get=function(){return this._bottomHeight},i.bottomHeight.set=function(t){this._bottomHeight=t,this._refresh()},e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},Object.defineProperties(e.prototype,i),e}(Lo),zo=function(t){function e(e,i){t.call(this,e[0]instanceof Le?e[0]:e[0].texture),this._textures=null,this._durations=null,this.textures=e,this._autoUpdate=!1!==i,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this.playing=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={totalFrames:{configurable:!0},textures:{configurable:!0},currentFrame:{configurable:!0}};return e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&re.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&re.shared.add(this.update,this,te.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this._currentTime=0,this.stop(),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this._currentTime=this._textures.length-1,this.stop(),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],r=0;r<t.length;++r)i.push(Le.from(t[r]));return new e(i)},e.fromImages=function(t){for(var i=[],r=0;r<t.length;++r)i.push(Le.from(t[r]));return new e(i)},i.totalFrames.get=function(){return this._textures.length},i.textures.get=function(){return this._textures},i.textures.set=function(t){if(t[0]instanceof Le)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()},i.currentFrame.get=function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},Object.defineProperties(e.prototype,i),e}(Rn);i.d(e,"VERSION",(function(){return Xo})),i.d(e,"filters",(function(){return Ho})),i.d(e,"useDeprecated",(function(){return Wo})),i.d(e,"accessibility",(function(){return n})),i.d(e,"interaction",(function(){return o})),i.d(e,"utils",(function(){return r})),i.d(e,"Application",(function(){return Er})),i.d(e,"AbstractBatchRenderer",(function(){return _r})),i.d(e,"AbstractRenderer",(function(){return ur})),i.d(e,"Attribute",(function(){return Ve})),i.d(e,"BaseRenderTexture",(function(){return De})),i.d(e,"BaseTexture",(function(){return Se})),i.d(e,"BatchDrawCall",(function(){return dr})),i.d(e,"BatchGeometry",(function(){return gr})),i.d(e,"BatchPluginFactory",(function(){return Sr})),i.d(e,"BatchRenderer",(function(){return Ar})),i.d(e,"BatchShaderGenerator",(function(){return br})),i.d(e,"BatchTextureArray",(function(){return mr})),i.d(e,"Buffer",(function(){return Xe})),i.d(e,"CubeTexture",(function(){return fr})),i.d(e,"Filter",(function(){return Ui})),i.d(e,"Framebuffer",(function(){return ke})),i.d(e,"GLProgram",(function(){return Qi})),i.d(e,"GLTexture",(function(){return nr})),i.d(e,"Geometry",(function(){return Je})),i.d(e,"MaskData",(function(){return li})),i.d(e,"ObjectRenderer",(function(){return ri})),i.d(e,"Program",(function(){return Ri})),i.d(e,"Quad",(function(){return Ze})),i.d(e,"QuadUv",(function(){return Qe})),i.d(e,"RenderTexture",(function(){return Ue})),i.d(e,"RenderTexturePool",(function(){return ze})),i.d(e,"Renderer",(function(){return cr})),i.d(e,"Shader",(function(){return Fi})),i.d(e,"SpriteMaskFilter",(function(){return Xi})),i.d(e,"State",(function(){return Li})),i.d(e,"System",(function(){return Be})),i.d(e,"Texture",(function(){return Le})),i.d(e,"TextureMatrix",(function(){return Vi})),i.d(e,"TextureUvs",(function(){return Fe})),i.d(e,"UniformGroup",(function(){return ti})),i.d(e,"ViewableBuffer",(function(){return yr})),i.d(e,"autoDetectRenderer",(function(){return hr})),i.d(e,"checkMaxIfStatementsInShader",(function(){return Pi})),i.d(e,"defaultFilterVertex",(function(){return pr})),i.d(e,"defaultVertex",(function(){return lr})),i.d(e,"resources",(function(){return Pe})),i.d(e,"systems",(function(){return sr})),i.d(e,"Extract",(function(){return Pr})),i.d(e,"AppLoaderPlugin",(function(){return tn})),i.d(e,"Loader",(function(){return $r})),i.d(e,"LoaderResource",(function(){return en})),i.d(e,"TextureLoader",(function(){return Qr})),i.d(e,"ParticleContainer",(function(){return rn})),i.d(e,"ParticleRenderer",(function(){return on})),i.d(e,"BasePrepare",(function(){return Yn})),i.d(e,"CountLimiter",(function(){return qn})),i.d(e,"Prepare",(function(){return io})),i.d(e,"TimeLimiter",(function(){return so})),i.d(e,"Spritesheet",(function(){return ao})),i.d(e,"SpritesheetLoader",(function(){return co})),i.d(e,"TilingSprite",(function(){return lo})),i.d(e,"TilingSpriteRenderer",(function(){return mo})),i.d(e,"BitmapFontLoader",(function(){return vo})),i.d(e,"BitmapText",(function(){return yo})),i.d(e,"Ticker",(function(){return re})),i.d(e,"TickerPlugin",(function(){return ne})),i.d(e,"UPDATE_PRIORITY",(function(){return te})),i.d(e,"ALPHA_MODES",(function(){return M})),i.d(e,"BLEND_MODES",(function(){return T})),i.d(e,"DRAW_MODES",(function(){return A})),i.d(e,"ENV",(function(){return w})),i.d(e,"FORMATS",(function(){return E})),i.d(e,"GC_MODES",(function(){return k})),i.d(e,"MASK_TYPES",(function(){return D})),i.d(e,"MIPMAP_MODES",(function(){return B})),i.d(e,"PRECISION",(function(){return R})),i.d(e,"RENDERER_TYPE",(function(){return S})),i.d(e,"SCALE_MODES",(function(){return C})),i.d(e,"TARGETS",(function(){return I})),i.d(e,"TYPES",(function(){return O})),i.d(e,"WRAP_MODES",(function(){return P})),i.d(e,"Bounds",(function(){return Kt})),i.d(e,"Container",(function(){return Qt})),i.d(e,"DisplayObject",(function(){return Jt})),i.d(e,"FillStyle",(function(){return an})),i.d(e,"GRAPHICS_CURVES",(function(){return sn})),i.d(e,"Graphics",(function(){return Bn})),i.d(e,"GraphicsData",(function(){return Tn})),i.d(e,"GraphicsGeometry",(function(){return In})),i.d(e,"LineStyle",(function(){return On})),i.d(e,"graphicsUtils",(function(){return Sn})),i.d(e,"Circle",(function(){return Ht})),i.d(e,"DEG_TO_RAD",(function(){return kt})),i.d(e,"Ellipse",(function(){return Gt})),i.d(e,"Matrix",(function(){return Rt})),i.d(e,"ObservablePoint",(function(){return Pt})),i.d(e,"PI_2",(function(){return Bt})),i.d(e,"Point",(function(){return Ct})),i.d(e,"Polygon",(function(){return qt})),i.d(e,"RAD_TO_DEG",(function(){return Mt})),i.d(e,"Rectangle",(function(){return Xt})),i.d(e,"RoundedRectangle",(function(){return Yt})),i.d(e,"SHAPES",(function(){return Ot})),i.d(e,"Transform",(function(){return Wt})),i.d(e,"groupD8",(function(){return Vt})),i.d(e,"Mesh",(function(){return Mo})),i.d(e,"MeshBatchUvs",(function(){return Co})),i.d(e,"MeshGeometry",(function(){return Ro})),i.d(e,"MeshMaterial",(function(){return ko})),i.d(e,"NineSlicePlane",(function(){return Uo})),i.d(e,"PlaneGeometry",(function(){return Do})),i.d(e,"RopeGeometry",(function(){return Fo})),i.d(e,"SimpleMesh",(function(){return jo})),i.d(e,"SimplePlane",(function(){return Lo})),i.d(e,"SimpleRope",(function(){return No})),i.d(e,"Runner",(function(){return de})),i.d(e,"Sprite",(function(){return Rn})),i.d(e,"AnimatedSprite",(function(){return zo})),i.d(e,"TEXT_GRADIENT",(function(){return Dn})),i.d(e,"Text",(function(){return Gn})),i.d(e,"TextMetrics",(function(){return Wn})),i.d(e,"TextStyle",(function(){return Ln})),i.d(e,"isMobile",(function(){return x})),i.d(e,"settings",(function(){return F}));var Vo="5.0.0";function Wo(){var t=this;Object.defineProperties(t,{SVG_SIZE:{get:function(){return mt(Vo,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),t.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return mt(Vo,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),t.Transform}},TransformBase:{get:function(){return mt(Vo,"PIXI.TransformBase class has been removed, use PIXI.Transform"),t.Transform}},TRANSFORM_MODE:{get:function(){return mt(Vo,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return mt(Vo,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),t.Renderer}},CanvasRenderTarget:{get:function(){return mt(Vo,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),t.utils.CanvasRenderTarget}},loader:{get:function(){return mt(Vo,"PIXI.loader instance has moved to PIXI.Loader.shared"),t.Loader.shared}},FilterManager:{get:function(){return mt(Vo,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),t.systems.FilterSystem}},CanvasTinter:{get:function(){return mt("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),t.canvasUtils}},GroupD8:{get:function(){return mt("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),t.groupD8}}}),t.prepare={},Object.defineProperties(t.prepare,{BasePrepare:{get:function(){return mt("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),t.BasePrepare}},Prepare:{get:function(){return mt("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),t.Prepare}},CanvasPrepare:{get:function(){return mt("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),t.CanvasPrepare}}}),t.extract={},Object.defineProperties(t.extract,{Extract:{get:function(){return mt("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),t.Extract}},CanvasExtract:{get:function(){return mt("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),t.CanvasExtract}}}),t.extras={},Object.defineProperties(t.extras,{TilingSprite:{get:function(){return mt(Vo,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),t.TilingSprite}},TilingSpriteRenderer:{get:function(){return mt(Vo,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),t.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return mt(Vo,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),t.AnimatedSprite}},BitmapText:{get:function(){return mt(Vo,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),t.BitmapText}}}),Object.defineProperties(t.utils,{getSvgSize:{get:function(){return mt(Vo,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),t.SVGResource.getSize}}}),t.mesh={},Object.defineProperties(t.mesh,{Mesh:{get:function(){return mt(Vo,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),t.SimpleMesh}},NineSlicePlane:{get:function(){return mt(Vo,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),t.NineSlicePlane}},Plane:{get:function(){return mt(Vo,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),t.SimplePlane}},Rope:{get:function(){return mt(Vo,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),t.SimpleRope}},RawMesh:{get:function(){return mt(Vo,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),t.Mesh}},CanvasMeshRenderer:{get:function(){return mt(Vo,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),t.CanvasMeshRenderer}},MeshRenderer:{get:function(){return mt(Vo,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),t.MeshRenderer}}}),t.particles={},Object.defineProperties(t.particles,{ParticleContainer:{get:function(){return mt(Vo,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),t.ParticleContainer}},ParticleRenderer:{get:function(){return mt(Vo,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),t.ParticleRenderer}}}),t.ticker={},Object.defineProperties(t.ticker,{Ticker:{get:function(){return mt(Vo,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),t.Ticker}},shared:{get:function(){return mt(Vo,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),t.Ticker.shared}}}),t.loaders={},Object.defineProperties(t.loaders,{Loader:{get:function(){return mt(Vo,"PIXI.loaders.Loader class has moved to PIXI.Loader"),t.Loader}},Resource:{get:function(){return mt(Vo,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),t.LoaderResource}},bitmapFontParser:{get:function(){return mt(Vo,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),t.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){return mt(Vo,"PIXI.loaders.parseBitmapFontData function has moved to PIXI.BitmapFontLoader.parse"),t.BitmapFontLoader.parse}},spritesheetParser:{get:function(){return mt(Vo,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),t.SpritesheetLoader.use}},getResourcePath:{get:function(){return mt(Vo,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),t.SpritesheetLoader.getResourcePath}}}),t.Loader.addPixiMiddleware=function(e){return mt(Vo,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),t.loaders.Loader.registerPlugin({use:e()})},Object.defineProperty(t.extract,"WebGLExtract",{get:function(){return mt(Vo,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),t.Extract}}),Object.defineProperty(t.prepare,"WebGLPrepare",{get:function(){return mt(Vo,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),t.Prepare}}),t.Container.prototype._renderWebGL=function(t){mt(Vo,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(t)},t.Container.prototype.renderWebGL=function(t){mt(Vo,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(t)},t.DisplayObject.prototype.renderWebGL=function(t){mt(Vo,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(t)},t.Container.prototype.renderAdvancedWebGL=function(t){mt(Vo,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(t)},Object.defineProperties(t.settings,{TRANSFORM_MODE:{get:function(){return mt(Vo,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){mt(Vo,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var e=t.BaseTexture;e.prototype.loadSource=function(e){mt(Vo,"PIXI.BaseTexture.loadSource method has been deprecated");var i=t.resources.autoDetectResource(e);i.internal=!0,this.setResource(i),this.update()};var i=!1;Object.defineProperties(e.prototype,{hasLoaded:{get:function(){return mt(Vo,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){return mt(Vo,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&this.resource.url},set:function(t){mt(Vo,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=t)}},source:{get:function(){return mt(Vo,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource&&this.resource.source},set:function(t){mt(Vo,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=t)}},premultiplyAlpha:{get:function(){return mt("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){mt("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}},_id:{get:function(){return i||(mt("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),i=!0),this._batchLocation},set:function(t){this._batchLocation=t}}}),e.fromImage=function(t,i,r,n){mt(Vo,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var o={scale:n,crossorigin:i};return e.from(t,{scaleMode:r,resourceOptions:o})},e.fromCanvas=function(t,i){return mt(Vo,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),e.from(t,{scaleMode:i})},e.fromSVG=function(t,i,r,n){mt(Vo,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var o={scale:n,crossorigin:i};return e.from(t,{scaleMode:r,resourceOptions:o})},Object.defineProperties(t.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return mt("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){mt("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}}}),t.Point.prototype.copy=function(t){return mt(Vo,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(t)},t.ObservablePoint.prototype.copy=function(t){return mt(Vo,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(t)},t.Rectangle.prototype.copy=function(t){return mt(Vo,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(t)},t.Matrix.prototype.copy=function(t){return mt(Vo,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(t)},t.systems.StateSystem.prototype.setState=function(t){return mt("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(t)},Object.assign(t.systems.FilterSystem.prototype,{getRenderTarget:function(t,e){return mt(Vo,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(e)},returnRenderTarget:function(t){mt(Vo,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(t)},calculateScreenSpaceMatrix:function(t){mt(Vo,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var e=t.identity(),i=this.activeState,r=i.sourceFrame,n=i.destinationFrame;return e.translate(r.x/n.width,r.y/n.height),e.scale(n.width,n.height),e},calculateNormalizedScreenSpaceMatrix:function(t){mt(Vo,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var e=this.activeState,i=e.sourceFrame,r=e.destinationFrame,n=t.identity();n.translate(i.x/r.width,i.y/r.height);var o=r.width/i.width,s=r.height/i.height;return n.scale(o,s),n}}),Object.defineProperties(t.RenderTexture.prototype,{sourceFrame:{get:function(){return mt(Vo,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return mt(Vo,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var r=function(t){function e(e,i,r,n){mt(Vo,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!0,e,i,r,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.filters.BlurFilterPass),n=function(t){function e(e,i,r,n){mt(Vo,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!1,e,i,r,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.filters.BlurFilterPass);Object.assign(t.filters,{BlurXFilter:r,BlurYFilter:n});var o=t.Sprite,s=t.Texture,a=t.Graphics;function u(t,e,i,r){return mt(Vo,"PIXI.Sprite."+t+" method is deprecated, use PIXI.Sprite.from"),o.from(e,{resourceOptions:{scale:r,crossorigin:i}})}function c(t,e,i,r){return mt(Vo,"PIXI.Texture."+t+" method is deprecated, use PIXI.Texture.from"),s.from(e,{resourceOptions:{scale:r,crossorigin:i}})}a.prototype.generateCanvasTexture||(a.prototype.generateCanvasTexture=function(){mt(Vo,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(t.Graphics.prototype,"graphicsData",{get:function(){return mt(Vo,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),Object.defineProperty(t.SimpleRope.prototype,"points",{get:function(){return mt(Vo,"PIXI.SimpleRope.points property is deprecated, use PIXI.SimpleRope.geometry.points"),this.geometry.points},set:function(t){mt(Vo,"PIXI.SimpleRope.points property is deprecated, use PIXI.SimpleRope.geometry.points"),this.geometry.points=t}}),o.fromImage=u.bind(null,"fromImage"),o.fromSVG=u.bind(null,"fromSVG"),o.fromCanvas=u.bind(null,"fromCanvas"),o.fromVideo=u.bind(null,"fromVideo"),o.fromFrame=u.bind(null,"fromFrame"),s.fromImage=c.bind(null,"fromImage"),s.fromSVG=c.bind(null,"fromSVG"),s.fromCanvas=c.bind(null,"fromCanvas"),s.fromVideo=c.bind(null,"fromVideo"),s.fromFrame=c.bind(null,"fromFrame"),Object.defineProperty(t.AbstractRenderer.prototype,"autoResize",{get:function(){return mt(Vo,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(t){mt(Vo,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=t}}),Object.defineProperty(t.Renderer.prototype,"textureManager",{get:function(){return mt(Vo,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),t.utils.mixins={mixin:function(){mt(Vo,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){mt(Vo,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){mt(Vo,"PIXI.utils.mixins.performMixins function is no longer available")}}}cr.registerPlugin("accessibility",ee),cr.registerPlugin("extract",Pr),cr.registerPlugin("interaction",fe),cr.registerPlugin("particle",on),cr.registerPlugin("prepare",io),cr.registerPlugin("batch",Ar),cr.registerPlugin("tilingSprite",mo),$r.registerPlugin(vo),$r.registerPlugin(co),Er.registerPlugin(ne),Er.registerPlugin(tn);var Xo="5.2.1",Ho={AlphaFilter:_o,BlurFilter:wo,BlurFilterPass:xo,ColorMatrixFilter:So,DisplacementFilter:To,FXAAFilter:Ao,NoiseFilter:Eo}},function(t,e,i){var r="undefined"!==typeof DEBUG&&DEBUG,n="undefined"!==typeof ASSERT&&ASSERT;t.exports=u;var o=i(7),s=i(3),a=i(4);function u(t){if(!(this instanceof u))return new u(t);"number"===typeof t?this.setAngle(t):"object"===typeof t?this.set(t):this.setIdentity()}u.neo=function(t){var e=Object.create(u.prototype);return e.setAngle(t),e},u.clone=function(t){n&&u.assert(t);var e=Object.create(u.prototype);return e.s=t.s,e.c=t.c,e},u.identity=function(){var t=Object.create(u.prototype);return t.s=0,t.c=1,t},u.isValid=function(t){return t&&a.isFinite(t.s)&&a.isFinite(t.c)},u.assert=function(t){if(n&&!u.isValid(t))throw r&&o.debug(t),new Error("Invalid Rot!")},u.prototype.setIdentity=function(){this.s=0,this.c=1},u.prototype.set=function(t){"object"===typeof t?(n&&u.assert(t),this.s=t.s,this.c=t.c):(n&&a.assert(t),this.s=a.sin(t),this.c=a.cos(t))},u.prototype.setAngle=function(t){n&&a.assert(t),this.s=a.sin(t),this.c=a.cos(t)},u.prototype.getAngle=function(){return a.atan2(this.s,this.c)},u.prototype.getXAxis=function(){return s.neo(this.c,this.s)},u.prototype.getYAxis=function(){return s.neo(-this.s,this.c)},u.mul=function(t,e){if(n&&u.assert(t),"c"in e&&"s"in e){n&&u.assert(e);var i=u.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i}if("x"in e&&"y"in e)return n&&s.assert(e),s.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},u.mulRot=function(t,e){n&&u.assert(t),n&&u.assert(e);var i=u.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i},u.mulVec2=function(t,e){return n&&u.assert(t),n&&s.assert(e),s.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},u.mulSub=function(t,e,i){var r=t.c*(e.x-i.x)-t.s*(e.y-i.y),n=t.s*(e.x-i.x)+t.c*(e.y-i.y);return s.neo(r,n)},u.mulT=function(t,e){if("c"in e&&"s"in e){n&&u.assert(e);var i=u.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i}if("x"in e&&"y"in e)return n&&s.assert(e),s.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},u.mulTRot=function(t,e){n&&u.assert(e);var i=u.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i},u.mulTVec2=function(t,e){return n&&s.assert(e),s.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)}},function(t,e){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;var i=e;i.maxManifoldPoints=2,i.maxPolygonVertices=12,i.aabbExtension=.1,i.aabbMultiplier=2,i.linearSlop=.005,i.linearSlopSquared=i.linearSlop*i.linearSlop,i.angularSlop=2/180*Math.PI,i.polygonRadius=2*i.linearSlop,i.maxSubSteps=8,i.maxTOIContacts=32,i.maxTOIIterations=20,i.maxDistnceIterations=20,i.velocityThreshold=1,i.maxLinearCorrection=.2,i.maxAngularCorrection=8/180*Math.PI,i.maxTranslation=2,i.maxTranslationSquared=i.maxTranslation*i.maxTranslation,i.maxRotation=.5*Math.PI,i.maxRotationSquared=i.maxRotation*i.maxRotation,i.baumgarte=.2,i.toiBaugarte=.75,i.timeToSleep=.5,i.linearSleepTolerance=.01,i.linearSleepToleranceSqr=Math.pow(i.linearSleepTolerance,2),i.angularSleepTolerance=2/180*Math.PI,i.angularSleepToleranceSqr=Math.pow(i.angularSleepTolerance,2)},function(t,e,i){var r="undefined"!==typeof DEBUG&&DEBUG,n="undefined"!==typeof ASSERT&&ASSERT;t.exports=u;var o=i(7),s=i(3),a=i(12);function u(t,e){if(!(this instanceof u))return new u(t,e);this.p=s.zero(),this.q=a.identity(),"undefined"!==typeof t&&this.p.set(t),"undefined"!==typeof e&&this.q.set(e)}u.clone=function(t){var e=Object.create(u.prototype);return e.p=s.clone(t.p),e.q=a.clone(t.q),e},u.neo=function(t,e){var i=Object.create(u.prototype);return i.p=s.clone(t),i.q=a.clone(e),i},u.identity=function(){var t=Object.create(u.prototype);return t.p=s.zero(),t.q=a.identity(),t},u.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},u.prototype.set=function(t,e){"undefined"===typeof e?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},u.isValid=function(t){return t&&s.isValid(t.p)&&a.isValid(t.q)},u.assert=function(t){if(n&&!u.isValid(t))throw r&&o.debug(t),new Error("Invalid Transform!")},u.mul=function(t,e){if(n&&u.assert(t),Array.isArray(e)){for(var i=[],r=0;r<e.length;r++)i[r]=u.mul(t,e[r]);return i}if("x"in e&&"y"in e){n&&s.assert(e);var o=t.q.c*e.x-t.q.s*e.y+t.p.x,c=t.q.s*e.x+t.q.c*e.y+t.p.y;return s.neo(o,c)}if("p"in e&&"q"in e){n&&u.assert(e);var h=u.identity();return h.q=a.mulRot(t.q,e.q),h.p=s.add(a.mulVec2(t.q,e.p),t.p),h}},u.mulAll=function(t,e){n&&u.assert(t);for(var i=[],r=0;r<e.length;r++)i[r]=u.mul(t,e[r]);return i},u.mulFn=function(t){return n&&u.assert(t),function(e){return u.mul(t,e)}},u.mulVec2=function(t,e){n&&u.assert(t),n&&s.assert(e);var i=t.q.c*e.x-t.q.s*e.y+t.p.x,r=t.q.s*e.x+t.q.c*e.y+t.p.y;return s.neo(i,r)},u.mulXf=function(t,e){n&&u.assert(t),n&&u.assert(e);var i=u.identity();return i.q=a.mulRot(t.q,e.q),i.p=s.add(a.mulVec2(t.q,e.p),t.p),i},u.mulT=function(t,e){if(n&&u.assert(t),"x"in e&&"y"in e){n&&s.assert(e);var i=e.x-t.p.x,r=e.y-t.p.y,o=t.q.c*i+t.q.s*r,c=-t.q.s*i+t.q.c*r;return s.neo(o,c)}if("p"in e&&"q"in e){n&&u.assert(e);var h=u.identity();return h.q.set(a.mulTRot(t.q,e.q)),h.p.set(a.mulTVec2(t.q,s.sub(e.p,t.p))),h}},u.mulTVec2=function(t,e){n&&u.assert(t),n&&s.assert(e);var i=e.x-t.p.x,r=e.y-t.p.y,o=t.q.c*i+t.q.s*r,a=-t.q.s*i+t.q.c*r;return s.neo(o,a)},u.mulTXf=function(t,e){n&&u.assert(t),n&&u.assert(e);var i=u.identity();return i.q.set(a.mulTRot(t.q,e.q)),i.p.set(a.mulTVec2(t.q,s.sub(e.p,t.p))),i}},function(t,e,i){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=i(18);function o(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?Object(n.a)(t):e}i.d(e,"a",(function(){return o}))},function(t,e,i){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";var r=i(55),n=i(56);e.async=new n.AsyncScheduler(r.AsyncAction)},function(t,e,i){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}i.d(e,"a",(function(){return r}))},function(t,e){if("function"==typeof Object.create)t.exports=function(t,e){return Object.create.call(Object,t,e)};else{var i=function(){};t.exports=function(t,e){if(e)throw Error("Second argument is not supported!");if("object"!==typeof t||null===t)throw Error("Invalid prototype!");return i.prototype=t,new i}}},function(t,e,i){"use strict";var r=i(38),n=i(106),o=i(63),s=i(25),a=i(24),u=i(107),c=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var i=this._parent,c=this._parents,l=this._unsubscribe,p=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,d=c?c.length:0;i;)i.remove(this),i=++f<d&&c[f]||null;if(o.isFunction(l))s.tryCatch(l).call(this)===a.errorObject&&(e=!0,t=t||(a.errorObject.e instanceof u.UnsubscriptionError?h(a.errorObject.e.errors):[a.errorObject.e]));if(r.isArray(p))for(f=-1,d=p.length;++f<d;){var m=p[f];if(n.isObject(m))if(s.tryCatch(m.unsubscribe).call(m)===a.errorObject){e=!0,t=t||[];var y=a.errorObject.e;y instanceof u.UnsubscriptionError?t=t.concat(h(y.errors)):t.push(y)}}if(e)throw new u.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var i=e;switch(typeof e){case"function":i=new t(e);case"object":if(i.closed||"function"!==typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!==typeof i._addParent){var r=i;(i=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.prototype._addParent=function(t){var e=this._parent,i=this._parents;e&&e!==t?i?-1===i.indexOf(t)&&i.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function h(t){return t.reduce((function(t,e){return t.concat(e instanceof u.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=c},function(t,e){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT,Object.prototype.propertyIsEnumerable;t.exports=function(t,e){for(var i in null!==t&&"undefined"!==typeof t||(t={}),e)e.hasOwnProperty(i)&&"undefined"===typeof t[i]&&(t[i]=e[i]);if("function"===typeof Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),n=0;n<r.length;n++){var o=r[n];e.propertyIsEnumerable(o)&&"undefined"===typeof t[i]&&(t[o]=e[o])}return t}},function(t,e,i){"use strict";var r=i(23);e.Subject=r.Subject,e.AnonymousSubject=r.AnonymousSubject;var n=i(0);e.Observable=n.Observable,i(228),i(231),i(234),i(237),i(240),i(243),i(245),i(248),i(249),i(252),i(255),i(257),i(260),i(263),i(268),i(269),i(270),i(273),i(274),i(276),i(279),i(282),i(285),i(288),i(290),i(292),i(294),i(300),i(302),i(304),i(306),i(308),i(310),i(312),i(314),i(316),i(318),i(320),i(322),i(324),i(326),i(328),i(330),i(332),i(334),i(336),i(338),i(341),i(343),i(345),i(347),i(349),i(351),i(353),i(355),i(357),i(359),i(361),i(363),i(365),i(370),i(372),i(374),i(376),i(378),i(380),i(382),i(384),i(386),i(388),i(390),i(392),i(394),i(396),i(398),i(400),i(402),i(404),i(406),i(408),i(410),i(412),i(415),i(417),i(419),i(421),i(423),i(425),i(427),i(429),i(431),i(433),i(435),i(437),i(439),i(441),i(443),i(445),i(447),i(449),i(451),i(453),i(455),i(457),i(459),i(461),i(468),i(470),i(472),i(474),i(476),i(478),i(480),i(482),i(484),i(486),i(487),i(489),i(491),i(493),i(495),i(496),i(498),i(500),i(502),i(504),i(506),i(508),i(510);var o=i(20);e.Subscription=o.Subscription;var s=i(2);e.Subscriber=s.Subscriber;var a=i(67);e.AsyncSubject=a.AsyncSubject;var u=i(74);e.ReplaySubject=u.ReplaySubject;var c=i(164);e.BehaviorSubject=c.BehaviorSubject;var h=i(158);e.ConnectableObservable=h.ConnectableObservable;var l=i(52);e.Notification=l.Notification;var p=i(75);e.EmptyError=p.EmptyError;var f=i(58);e.ArgumentOutOfRangeError=f.ArgumentOutOfRangeError;var d=i(66);e.ObjectUnsubscribedError=d.ObjectUnsubscribedError;var m=i(193);e.TimeoutError=m.TimeoutError;var y=i(107);e.UnsubscriptionError=y.UnsubscriptionError;var v=i(190);e.TimeInterval=v.TimeInterval;var _=i(100);e.Timestamp=_.Timestamp;var b=i(512);e.TestScheduler=b.TestScheduler;var g=i(206);e.VirtualTimeScheduler=g.VirtualTimeScheduler;var x=i(118);e.AjaxResponse=x.AjaxResponse,e.AjaxError=x.AjaxError,e.AjaxTimeoutError=x.AjaxTimeoutError;var w=i(84);e.pipe=w.pipe;var S=i(183),T=i(17),A=i(119),E=i(515),I=i(64),O=i(50),C=i(65),P=i(519);e.operators=P;var B={asap:S.asap,queue:A.queue,animationFrame:E.animationFrame,async:T.async};e.Scheduler=B;var M={rxSubscriber:I.rxSubscriber,observable:C.observable,iterator:O.iterator};e.Symbol=M},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(2),s=i(20),a=i(66),u=i(109),c=i(64),h=function(t){function e(e){t.call(this,e),this.destination=e}return r(e,t),e}(o.Subscriber);e.SubjectSubscriber=h;var l=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(e,t),e.prototype[c.rxSubscriber]=function(){return new h(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,i=e.length,r=e.slice(),n=0;n<i;n++)r[n].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,r=e.slice(),n=0;n<i;n++)r[n].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),r=0;r<e;r++)i[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new n.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(n.Observable);e.Subject=l;var p=function(t){function e(e,i){t.call(this),this.destination=e,this.source=i}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},e}(l);e.AnonymousSubject=p},function(t,e,i){"use strict";e.errorObject={e:{}}},function(t,e,i){"use strict";var r,n=i(24);function o(){try{return r.apply(this,arguments)}catch(t){return n.errorObject.e=t,n.errorObject}}e.tryCatch=function(t){return r=t,o}},function(t,e,i){"use strict";(function(t){var i="undefined"!==typeof window&&window,r="undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,n=i||"undefined"!==typeof t&&t||r;e.root=n,function(){if(!n)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,i(44))},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=c;var n=i(7),o=i(4),s=i(3),a=i(12),u=i(14);function c(t,e){r&&n.assert("undefined"===typeof t),r&&n.assert("undefined"===typeof e),this.localCenter=s.zero(),this.c=s.zero(),this.a=0,this.alpha0=0,this.c0=s.zero(),this.a0=0}c.prototype.setTransform=function(t){var e=u.mulVec2(t,this.localCenter);this.c.set(e),this.c0.set(e),this.a=t.q.getAngle(),this.a0=t.q.getAngle()},c.prototype.setLocalCenter=function(t,e){this.localCenter.set(t);var i=u.mulVec2(e,this.localCenter);this.c.set(i),this.c0.set(i)},c.prototype.getTransform=function(t,e){e="undefined"===typeof e?0:e,t.q.setAngle((1-e)*this.a0+e*this.a),t.p.setCombine(1-e,this.c0,e,this.c),t.p.sub(a.mulVec2(t.q,this.localCenter))},c.prototype.advance=function(t){r&&n.assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.setCombine(e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},c.prototype.forward=function(){this.a0=this.a,this.c0.set(this.c)},c.prototype.normalize=function(){var t=o.mod(this.a0,-o.PI,+o.PI);this.a-=this.a0-t,this.a0=t},c.prototype.clone=function(){var t=new c;return t.localCenter.set(this.localCenter),t.alpha0=this.alpha0,t.a0=this.a0,t.a=this.a,t.c0.set(this.c0),t.c.set(this.c),t},c.prototype.set=function(t){this.localCenter.set(t.localCenter),this.alpha0=t.alpha0,this.a0=t.a0,this.a=t.a,this.c0.set(t.c0),this.c.set(t.c)}},function(t,e,i){var r="undefined"!==typeof DEBUG&&DEBUG,n="undefined"!==typeof ASSERT&&ASSERT;t.exports=a;var o=i(7),s=(i(4),i(3));function a(t,e,i,r){"object"===typeof t&&null!==t?(this.ex=s.clone(t),this.ey=s.clone(e)):"number"===typeof t?(this.ex=s.neo(t,i),this.ey=s.neo(e,r)):(this.ex=s.zero(),this.ey=s.zero())}a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&s.isValid(t.ex)&&s.isValid(t.ey)},a.assert=function(t){if(n&&!a.isValid(t))throw r&&o.debug(t),new Error("Invalid Mat22!")},a.prototype.set=function(t,e,i,r){"number"===typeof t&&"number"===typeof e&&"number"===typeof i&&"number"===typeof r?(this.ex.set(t,i),this.ey.set(e,r)):"object"===typeof t&&"object"===typeof e?(this.ex.set(t),this.ey.set(e)):"object"===typeof t?(n&&a.assert(t),this.ex.set(t.ex),this.ey.set(t.ey)):n&&o.assert(!1)},a.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},a.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},a.prototype.getInverse=function(){var t=this.ex.x,e=this.ey.x,i=this.ex.y,r=this.ey.y,n=t*r-e*i;0!=n&&(n=1/n);var o=new a;return o.ex.x=n*r,o.ey.x=-n*e,o.ex.y=-n*i,o.ey.y=n*t,o},a.prototype.solve=function(t){n&&s.assert(t);var e=this.ex.x,i=this.ey.x,r=this.ex.y,o=this.ey.y,a=e*o-i*r;0!=a&&(a=1/a);var u=s.zero();return u.x=a*(o*t.x-i*t.y),u.y=a*(e*t.y-r*t.x),u},a.mul=function(t,e){if(e&&"x"in e&&"y"in e){n&&s.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,r=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,r)}if(e&&"ex"in e&&"ey"in e)return n&&a.assert(e),new a(s.mul(t,e.ex),s.mul(t,e.ey));n&&o.assert(!1)},a.mulVec2=function(t,e){n&&s.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,r=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,r)},a.mulMat22=function(t,e){return n&&a.assert(e),new a(s.mul(t,e.ex),s.mul(t,e.ey))},a.mulT=function(t,e){return e&&"x"in e&&"y"in e?(n&&s.assert(e),s.neo(s.dot(e,t.ex),s.dot(e,t.ey))):e&&"ex"in e&&"ey"in e?(n&&a.assert(e),new a(s.neo(s.dot(t.ex,e.ex),s.dot(t.ey,e.ex)),s.neo(s.dot(t.ex,e.ey),s.dot(t.ey,e.ey)))):void(n&&o.assert(!1))},a.mulTVec2=function(t,e){return n&&a.assert(t),n&&s.assert(e),s.neo(s.dot(e,t.ex),s.dot(e,t.ey))},a.mulTMat22=function(t,e){return n&&a.assert(t),n&&a.assert(e),new a(s.neo(s.dot(t.ex,e.ex),s.dot(t.ey,e.ex)),s.neo(s.dot(t.ex,e.ey),s.dot(t.ey,e.ey)))},a.abs=function(t){return n&&a.assert(t),new a(s.abs(t.ex),s.abs(t.ey))},a.add=function(t,e){return n&&a.assert(t),n&&a.assert(e),new a(s.add(t.ex+e.ex),s.add(t.ey+e.ey))}},function(t,e,i){var r="undefined"!==typeof DEBUG&&DEBUG,n="undefined"!==typeof ASSERT&&ASSERT;t.exports=a;var o=i(7),s=i(4);function a(t,e,i){if(!(this instanceof a))return new a(t,e,i);"undefined"===typeof t?(this.x=0,this.y=0,this.z=0):"object"===typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=i),n&&a.assert(this)}a.prototype._serialize=function(){return{x:this.x,y:this.y,z:this.z}},a._deserialize=function(t){var e=Object.create(a.prototype);return e.x=t.x,e.y=t.y,e.z=t.z,e},a.neo=function(t,e,i){var r=Object.create(a.prototype);return r.x=t,r.y=e,r.z=i,r},a.clone=function(t){return n&&a.assert(t),a.neo(t.x,t.y,t.z)},a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&s.isFinite(t.x)&&s.isFinite(t.y)&&s.isFinite(t.z)},a.assert=function(t){if(n&&!a.isValid(t))throw r&&o.debug(t),new Error("Invalid Vec3!")},a.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},a.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},a.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},a.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},a.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},a.areEqual=function(t,e){return n&&a.assert(t),n&&a.assert(e),t==e||"object"===typeof t&&null!==t&&"object"===typeof e&&null!==e&&t.x===e.x&&t.y===e.y&&t.z===e.z},a.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},a.cross=function(t,e){return new a(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},a.add=function(t,e){return new a(t.x+e.x,t.y+e.y,t.z+e.z)},a.sub=function(t,e){return new a(t.x-e.x,t.y-e.y,t.z-e.z)},a.mul=function(t,e){return new a(e*t.x,e*t.y,e*t.z)},a.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},a.neg=function(t){return new a(-t.x,-t.y,-t.z)}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=s;var n=i(7);function o(){this.other=null,this.joint=null,this.prev=null,this.next=null}function s(t,e,i){e=t.bodyA||e,i=t.bodyB||i,r&&n.assert(e),r&&n.assert(i),r&&n.assert(e!=i),this.m_type="unknown-joint",this.m_bodyA=e,this.m_bodyB=i,this.m_index=0,this.m_collideConnected=!!t.collideConnected,this.m_prev=null,this.m_next=null,this.m_edgeA=new o,this.m_edgeB=new o,this.m_islandFlag=!1,this.m_userData=t.userData}s.TYPES={},s._deserialize=function(t,e,i){var r=s.TYPES[t.type];return r&&i(r,t)},s.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},s.prototype.getType=function(){return this.m_type},s.prototype.getBodyA=function(){return this.m_bodyA},s.prototype.getBodyB=function(){return this.m_bodyB},s.prototype.getNext=function(){return this.m_next},s.prototype.getUserData=function(){return this.m_userData},s.prototype.setUserData=function(t){this.m_userData=t},s.prototype.getCollideConnected=function(){return this.m_collideConnected},s.prototype.getAnchorA=function(){},s.prototype.getAnchorB=function(){},s.prototype.getReactionForce=function(t){},s.prototype.getReactionTorque=function(t){},s.prototype.shiftOrigin=function(t){},s.prototype.initVelocityConstraints=function(t){},s.prototype.solveVelocityConstraints=function(t){},s.prototype.solvePositionConstraints=function(t){}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=function(){this.v=r.zero(),this.w=0};var r=i(3)},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=o;var r=i(3),n=i(12);function o(){this.c=r.zero(),this.a=0}o.prototype.getTransform=function(t,e){return t.q.set(this.a),t.p.set(r.sub(this.c,n.mulVec2(t.q,e))),t}},function(t,e,i){var r="undefined"!==typeof DEBUG&&DEBUG,n="undefined"!==typeof ASSERT&&ASSERT;t.exports=u;var o=i(7),s=(i(4),i(3)),a=i(29);function u(t,e,i){"object"===typeof t&&null!==t?(this.ex=a.clone(t),this.ey=a.clone(e),this.ez=a.clone(i)):(this.ex=a(),this.ey=a(),this.ez=a())}u.prototype.toString=function(){return JSON.stringify(this)},u.isValid=function(t){return t&&a.isValid(t.ex)&&a.isValid(t.ey)&&a.isValid(t.ez)},u.assert=function(t){if(n&&!u.isValid(t))throw r&&o.debug(t),new Error("Invalid Mat33!")},u.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},u.prototype.solve33=function(t){var e=a.dot(this.ex,a.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=new a;return i.x=e*a.dot(t,a.cross(this.ey,this.ez)),i.y=e*a.dot(this.ex,a.cross(t,this.ez)),i.z=e*a.dot(this.ex,a.cross(this.ey,t)),i},u.prototype.solve22=function(t){var e=this.ex.x,i=this.ey.x,r=this.ex.y,n=this.ey.y,o=e*n-i*r;0!=o&&(o=1/o);var a=s.zero();return a.x=o*(n*t.x-i*t.y),a.y=o*(e*t.y-r*t.x),a},u.prototype.getInverse22=function(t){var e=this.ex.x,i=this.ey.x,r=this.ex.y,n=this.ey.y,o=e*n-i*r;0!=o&&(o=1/o),t.ex.x=o*n,t.ey.x=-o*i,t.ex.z=0,t.ex.y=-o*r,t.ey.y=o*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},u.prototype.getSymInverse33=function(t){var e=a.dot(this.ex,a.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=this.ex.x,r=this.ey.x,n=this.ez.x,o=this.ey.y,s=this.ez.y,u=this.ez.z;t.ex.x=e*(o*u-s*s),t.ex.y=e*(n*s-r*u),t.ex.z=e*(r*s-n*o),t.ey.x=t.ex.y,t.ey.y=e*(i*u-n*n),t.ey.z=e*(n*r-i*s),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*o-r*r)},u.mul=function(t,e){if(n&&u.assert(t),e&&"z"in e&&"y"in e&&"x"in e){n&&a.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,r=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,c=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new a(i,r,c)}if(e&&"y"in e&&"x"in e){n&&s.assert(e);i=t.ex.x*e.x+t.ey.x*e.y,r=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,r)}n&&o.assert(!1)},u.mulVec3=function(t,e){n&&u.assert(t),n&&a.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,r=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,o=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new a(i,r,o)},u.mulVec2=function(t,e){n&&u.assert(t),n&&s.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,r=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,r)},u.add=function(t,e){return n&&u.assert(t),n&&u.assert(e),new u(a.add(t.ex+e.ex),a.add(t.ey+e.ey),a.add(t.ez+e.ez))}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=r;i(4);function r(){this.m_type,this.m_radius}r.prototype._reset=function(){},r.prototype._serialize=function(){return{}},r.TYPES={},r._deserialize=function(t,e,i){var n=r.TYPES[t.type];return n&&i(n,t)},r.isValid=function(t){return!!t},r.prototype.getRadius=function(){return this.m_radius},r.prototype.getType=function(){return this.m_type},r.prototype._clone=function(){},r.prototype.getChildCount=function(){},r.prototype.testPoint=function(t,e){},r.prototype.rayCast=function(t,e,i,r){},r.prototype.computeAABB=function(t,e,i){},r.prototype.computeMass=function(t,e){},r.prototype.computeDistanceProxy=function(t){}},function(t,e,i){"use strict";var r=i(529),n=["__proto__","prototype","constructor"];function o(t){for(var e=t.split("."),i=[],r=0;r<e.length;r++){for(var o=e[r];"\\"===o[o.length-1]&&void 0!==e[r+1];)o=o.slice(0,-1)+".",o+=e[++r];i.push(o)}return i.some((function(t){return n.includes(t)}))?[]:i}t.exports={get:function(t,e,i){if(!r(t)||"string"!==typeof e)return void 0===i?t:i;var n=o(e);if(0!==n.length){for(var s=0;s<n.length;s++){if(!Object.prototype.propertyIsEnumerable.call(t,n[s]))return i;if(void 0===(t=t[n[s]])||null===t){if(s!==n.length-1)return i;break}}return t}},set:function(t,e,i){if(!r(t)||"string"!==typeof e)return t;for(var n=t,s=o(e),a=0;a<s.length;a++){var u=s[a];r(t[u])||(t[u]={}),a===s.length-1&&(t[u]=i),t=t[u]}return n},delete:function(t,e){if(r(t)&&"string"===typeof e)for(var i=o(e),n=0;n<i.length;n++){var s=i[n];if(n===i.length-1)return void delete t[s];if(t=t[s],!r(t))return}},has:function(t,e){if(!r(t)||"string"!==typeof e)return!1;var i=o(e);if(0===i.length)return!1;for(var n=0;n<i.length;n++){if(!r(t))return!1;if(!(i[n]in t))return!1;t=t[i[n]]}return!0}}},function(t,e,i){var r=i(520),n=i(207),o=i(528);t.exports={InputManager:r,GameStateEnums:n,GameStateController:o}},function(t,e,i){"use strict";e.isScheduler=function(t){return t&&"function"===typeof t.schedule}},function(t,e,i){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"===typeof t.length}},function(t,e,i){var r="undefined"!==typeof DEBUG&&DEBUG,n="undefined"!==typeof ASSERT&&ASSERT,o=(i(13),i(4)),s=i(3);function a(t,e){if(!(this instanceof a))return new a(t,e);this.lowerBound=s.zero(),this.upperBound=s.zero(),"object"===typeof t&&this.lowerBound.set(t),"object"===typeof e?this.upperBound.set(e):"object"===typeof t&&this.upperBound.set(t)}t.exports=a,a.prototype.isValid=function(){return a.isValid(this)},a.isValid=function(t){var e=s.sub(t.upperBound,t.lowerBound);return e.x>=0&&e.y>=0&&s.isValid(t.lowerBound)&&s.isValid(t.upperBound)},a.assert=function(t){if(n&&!a.isValid(t))throw r&&common.debug(t),new Error("Invalid AABB!")},a.prototype.getCenter=function(){return s.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},a.prototype.getExtents=function(){return s.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},a.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},a.prototype.combine=function(t,e){e=e||this;var i=t.lowerBound,r=t.upperBound,n=e.lowerBound,s=e.upperBound,a=o.min(i.x,n.x),u=o.min(i.y,n.y),c=o.max(s.x,r.x),h=o.max(s.y,r.y);this.lowerBound.set(a,u),this.upperBound.set(c,h)},a.prototype.combinePoints=function(t,e){this.lowerBound.set(o.min(t.x,e.x),o.min(t.y,e.y)),this.upperBound.set(o.max(t.x,e.x),o.max(t.y,e.y))},a.prototype.set=function(t){this.lowerBound.set(t.lowerBound.x,t.lowerBound.y),this.upperBound.set(t.upperBound.x,t.upperBound.y)},a.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},a.prototype.extend=function(t){return a.extend(this,t),this},a.extend=function(t,e){t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e},a.testOverlap=function(t,e){var i=e.lowerBound.x-t.upperBound.x,r=t.lowerBound.x-e.upperBound.x,n=e.lowerBound.y-t.upperBound.y,o=t.lowerBound.y-e.upperBound.y;return!(i>0||n>0||r>0||o>0)},a.areEqual=function(t,e){return s.areEqual(t.lowerBound,e.lowerBound)&&s.areEqual(t.upperBound,e.upperBound)},a.diff=function(t,e){var i=o.max(0,o.min(t.upperBound.x,e.upperBound.x)-o.max(e.lowerBound.x,t.lowerBound.x)),r=o.max(0,o.min(t.upperBound.y,e.upperBound.y)-o.max(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-i*r},a.prototype.rayCast=function(t,e){for(var i=-1/0,r=1/0,n=e.p1,a=s.sub(e.p2,e.p1),u=s.abs(a),c=s.zero(),h="x";null!==h;h="x"===h?"y":null)if(u.x<o.EPSILON){if(n[h]<this.lowerBound[h]||this.upperBound[h]<n[h])return!1}else{var l=1/a[h],p=(this.lowerBound[h]-n[h])*l,f=(this.upperBound[h]-n[h])*l,d=-1;if(p>f){var m=p;p=f,f=m,d=1}if(p>i&&(c.setZero(),c[h]=d,i=p),i>(r=o.min(r,f)))return!1}return!(i<0||e.maxFraction<i)&&(t.fraction=i,t.normal=c,!0)},a.prototype.toString=function(){return JSON.stringify(this)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,i,r){void 0===i&&(i=!1),n(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return r(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){n(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!==typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!==typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e.default=a,t.exports=e.default},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(86),s=i(42),a=i(37),u=function(t){function e(e,i){t.call(this),this.array=e,this.scheduler=i,i||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,i){return new e(t,i)},e.of=function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];var r=t[t.length-1];a.isScheduler(r)?t.pop():r=null;var n=t.length;return n>1?new e(t,r):1===n?new o.ScalarObservable(t[0],r):new s.EmptyObservable(r)},e.dispatch=function(t){var e=t.array,i=t.index,r=t.count,n=t.subscriber;i>=r?n.complete():(n.next(e[i]),n.closed||(t.index=i+1,this.schedule(t)))},e.prototype._subscribe=function(t){var i=this.array,r=i.length,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{array:i,index:0,count:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(i[o]);t.complete()},e}(n.Observable);e.ArrayObservable=u},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e){t.call(this),this.scheduler=e}return r(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(i(0).Observable);e.EmptyObservable=n},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT,n=i(7),o=i(4),s=i(3),a=i(14),u=i(28),c=i(12),h=i(13),l=i(46),p=i(77);function f(t){this.contact=t,this.prev,this.next,this.other}function d(t,e,i,r,n){this.m_nodeA=new f(this),this.m_nodeB=new f(this),this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=r,this.m_evaluateFcn=n,this.m_manifold=new l,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=y(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=v(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.v_points=[],this.v_normal=s.zero(),this.v_normalMass=new u,this.v_K=new u,this.v_pointCount,this.v_tangentSpeed,this.v_friction,this.v_restitution,this.v_invMassA,this.v_invMassB,this.v_invIA,this.v_invIB,this.p_localPoints=[],this.p_localNormal=s.zero(),this.p_localPoint=s.zero(),this.p_localCenterA=s.zero(),this.p_localCenterB=s.zero(),this.p_type,this.p_radiusA,this.p_radiusB,this.p_pointCount,this.p_invMassA,this.p_invMassB,this.p_invIA,this.p_invIB}function m(){this.rA=s.zero(),this.rB=s.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}function y(t,e){return o.sqrt(t*e)}function v(t,e){return t>e?t:e}t.exports=d,d.prototype.initConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,o=e.getShape(),a=i.getShape(),u=e.getBody(),c=i.getBody(),h=this.getManifold(),l=h.pointCount;r&&n.assert(l>0),this.v_invMassA=u.m_invMass,this.v_invMassB=c.m_invMass,this.v_invIA=u.m_invI,this.v_invIB=c.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=l,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=u.m_invMass,this.p_invMassB=c.m_invMass,this.p_invIA=u.m_invI,this.p_invIB=c.m_invI,this.p_localCenterA=s.clone(u.m_sweep.localCenter),this.p_localCenterB=s.clone(c.m_sweep.localCenter),this.p_radiusA=o.m_radius,this.p_radiusB=a.m_radius,this.p_type=h.type,this.p_localNormal=s.clone(h.localNormal),this.p_localPoint=s.clone(h.localPoint),this.p_pointCount=l;for(var p=0;p<l;++p){var f=h.points[p],d=this.v_points[p]=new m;t.warmStarting?(d.normalImpulse=t.dtRatio*f.normalImpulse,d.tangentImpulse=t.dtRatio*f.tangentImpulse):(d.normalImpulse=0,d.tangentImpulse=0),d.rA.setZero(),d.rB.setZero(),d.normalMass=0,d.tangentMass=0,d.velocityBias=0,this.p_localPoints[p]=s.clone(f.localPoint)}},d.prototype.getManifold=function(){return this.m_manifold},d.prototype.getWorldManifold=function(t){var e=this.m_fixtureA.getBody(),i=this.m_fixtureB.getBody(),r=this.m_fixtureA.getShape(),n=this.m_fixtureB.getShape();return this.m_manifold.getWorldManifold(t,e.getTransform(),r.m_radius,i.getTransform(),n.m_radius)},d.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},d.prototype.isEnabled=function(){return this.m_enabledFlag},d.prototype.isTouching=function(){return this.m_touchingFlag},d.prototype.getNext=function(){return this.m_next},d.prototype.getFixtureA=function(){return this.m_fixtureA},d.prototype.getFixtureB=function(){return this.m_fixtureB},d.prototype.getChildIndexA=function(){return this.m_indexA},d.prototype.getChildIndexB=function(){return this.m_indexB},d.prototype.flagForFiltering=function(){this.m_filterFlag=!0},d.prototype.setFriction=function(t){this.m_friction=t},d.prototype.getFriction=function(){return this.m_friction},d.prototype.resetFriction=function(){this.m_friction=y(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},d.prototype.setRestitution=function(t){this.m_restitution=t},d.prototype.getRestitution=function(){return this.m_restitution},d.prototype.resetRestitution=function(){this.m_restitution=v(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},d.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},d.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},d.prototype.evaluate=function(t,e,i){this.m_evaluateFcn(t,e,this.m_fixtureA,this.m_indexA,i,this.m_fixtureB,this.m_indexB)},d.prototype.update=function(t){this.m_enabledFlag=!0;var e=!1,i=this.m_touchingFlag,r=this.m_fixtureA.isSensor(),n=this.m_fixtureB.isSensor(),o=r||n,s=this.m_fixtureA.getBody(),a=this.m_fixtureB.getBody(),u=s.getTransform(),c=a.getTransform();if(o){var h=this.m_fixtureA.getShape(),f=this.m_fixtureB.getShape();e=p.testOverlap(h,this.m_indexA,f,this.m_indexB,u,c),this.m_manifold.pointCount=0}else{var d=this.m_manifold;this.m_manifold=new l,this.evaluate(this.m_manifold,u,c),e=this.m_manifold.pointCount>0;for(var m=0;m<this.m_manifold.pointCount;++m){var y=this.m_manifold.points[m];y.normalImpulse=0,y.tangentImpulse=0;for(var v=0;v<d.pointCount;++v){var _=d.points[v];if(_.id.key==y.id.key){y.normalImpulse=_.normalImpulse,y.tangentImpulse=_.tangentImpulse;break}}}e!=i&&(s.setAwake(!0),a.setAwake(!0))}this.m_touchingFlag=e,0==i&&1==e&&t&&t.beginContact(this),1==i&&0==e&&t&&t.endContact(this),0==o&&e&&t&&t.preSolve(this,d)},d.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,!1)},d.prototype.solvePositionConstraintTOI=function(t,e,i){return this._solvePositionConstraint(t,!0,e,i)},d.prototype._solvePositionConstraint=function(t,e,i,r){var n=this.m_fixtureA,u=this.m_fixtureB,p=n.getBody(),f=u.getBody(),d=(p.c_velocity,f.c_velocity,p.c_position),m=f.c_position,y=s.clone(this.p_localCenterA),v=s.clone(this.p_localCenterB),_=0,b=0;e&&p!=i&&p!=r||(_=this.p_invMassA,b=this.p_invIA);var g=0,x=0;e&&f!=i&&f!=r||(g=this.p_invMassB,x=this.p_invIB);for(var w=s.clone(d.c),S=d.a,T=s.clone(m.c),A=m.a,E=0,I=0;I<this.p_pointCount;++I){var O,C,P,B=a.identity(),M=a.identity();switch(B.q.set(S),M.q.set(A),B.p=s.sub(w,c.mulVec2(B.q,y)),M.p=s.sub(T,c.mulVec2(M.q,v)),this.p_type){case l.e_circles:var k=a.mulVec2(B,this.p_localPoint),R=a.mulVec2(M,this.p_localPoints[0]);(O=s.sub(R,k)).normalize(),C=s.combine(.5,k,.5,R),P=s.dot(s.sub(R,k),O)-this.p_radiusA-this.p_radiusB;break;case l.e_faceA:O=c.mulVec2(B.q,this.p_localNormal);var D=a.mulVec2(B,this.p_localPoint),F=a.mulVec2(M,this.p_localPoints[I]);P=s.dot(s.sub(F,D),O)-this.p_radiusA-this.p_radiusB,C=F;break;case l.e_faceB:O=c.mulVec2(M.q,this.p_localNormal);D=a.mulVec2(M,this.p_localPoint),F=a.mulVec2(B,this.p_localPoints[I]);P=s.dot(s.sub(F,D),O)-this.p_radiusA-this.p_radiusB,C=F,O.mul(-1)}var N=s.sub(C,w),L=s.sub(C,T);E=o.min(E,P);var j=e?h.toiBaugarte:h.baumgarte,U=h.linearSlop,z=h.maxLinearCorrection,V=o.clamp(j*(P+U),-z,0),W=s.cross(N,O),X=s.cross(L,O),H=_+g+b*W*W+x*X*X,G=H>0?-V/H:0,q=s.mul(G,O);w.subMul(_,q),S-=b*s.cross(N,q),T.addMul(g,q),A+=x*s.cross(L,q)}return d.c.set(w),d.a=S,m.c.set(T),m.a=A,E},d.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,o=e.getBody(),u=i.getBody(),l=o.c_velocity,p=u.c_velocity,f=o.c_position,d=u.c_position,m=this.p_radiusA,y=this.p_radiusB,v=this.getManifold(),_=this.v_invMassA,b=this.v_invMassB,g=this.v_invIA,x=this.v_invIB,w=s.clone(this.p_localCenterA),S=s.clone(this.p_localCenterB),T=s.clone(f.c),A=f.a,E=s.clone(l.v),I=l.w,O=s.clone(d.c),C=d.a,P=s.clone(p.v),B=p.w;r&&n.assert(v.pointCount>0);var M=a.identity(),k=a.identity();M.q.set(A),k.q.set(C),M.p.setCombine(1,T,-1,c.mulVec2(M.q,w)),k.p.setCombine(1,O,-1,c.mulVec2(k.q,S));var R=v.getWorldManifold(null,M,m,k,y);this.v_normal.set(R.normal);for(var D=0;D<this.v_pointCount;++D){var F=this.v_points[D];F.rA.set(s.sub(R.points[D],T)),F.rB.set(s.sub(R.points[D],O));var N=s.cross(F.rA,this.v_normal),L=s.cross(F.rB,this.v_normal),j=_+b+g*N*N+x*L*L;F.normalMass=j>0?1/j:0;var U=s.cross(this.v_normal,1),z=s.cross(F.rA,U),V=s.cross(F.rB,U),W=_+b+g*z*z+x*V*V;F.tangentMass=W>0?1/W:0,F.velocityBias=0;var X=s.dot(this.v_normal,P)+s.dot(this.v_normal,s.cross(B,F.rB))-s.dot(this.v_normal,E)-s.dot(this.v_normal,s.cross(I,F.rA));X<-h.velocityThreshold&&(F.velocityBias=-this.v_restitution*X)}if(2==this.v_pointCount&&t.blockSolve){var H=this.v_points[0],G=this.v_points[1],q=s.cross(H.rA,this.v_normal),Y=s.cross(H.rB,this.v_normal),K=s.cross(G.rA,this.v_normal),J=s.cross(G.rB,this.v_normal),Z=_+b+g*q*q+x*Y*Y,Q=_+b+g*K*K+x*J*J,$=_+b+g*q*K+x*Y*J;Z*Z<1e3*(Z*Q-$*$)?(this.v_K.ex.set(Z,$),this.v_K.ey.set($,Q),this.v_normalMass.set(this.v_K.getInverse())):this.v_pointCount=1}f.c.set(T),f.a=A,l.v.set(E),l.w=I,d.c.set(O),d.a=C,p.v.set(P),p.w=B},d.prototype.warmStartConstraint=function(t){for(var e=this.m_fixtureA,i=this.m_fixtureB,r=e.getBody(),n=i.getBody(),o=r.c_velocity,a=n.c_velocity,u=(r.c_position,n.c_position,this.v_invMassA),c=this.v_invIA,h=this.v_invMassB,l=this.v_invIB,p=s.clone(o.v),f=o.w,d=s.clone(a.v),m=a.w,y=this.v_normal,v=s.cross(y,1),_=0;_<this.v_pointCount;++_){var b=this.v_points[_],g=s.combine(b.normalImpulse,y,b.tangentImpulse,v);f-=c*s.cross(b.rA,g),p.subMul(u,g),m+=l*s.cross(b.rB,g),d.addMul(h,g)}o.v.set(p),o.w=f,a.v.set(d),a.w=m},d.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,i=0;i<this.v_pointCount;++i)e.points[i].normalImpulse=this.v_points[i].normalImpulse,e.points[i].tangentImpulse=this.v_points[i].tangentImpulse},d.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA.m_body,i=this.m_fixtureB.m_body,a=e.c_velocity,c=(e.c_position,i.c_velocity),h=(i.c_position,this.v_invMassA),l=this.v_invIA,p=this.v_invMassB,f=this.v_invIB,d=s.clone(a.v),m=a.w,y=s.clone(c.v),v=c.w,_=this.v_normal,b=s.cross(_,1),g=this.v_friction;r&&n.assert(1==this.v_pointCount||2==this.v_pointCount);for(var x=0;x<this.v_pointCount;++x){var w=this.v_points[x];(O=s.zero()).addCombine(1,y,1,s.cross(v,w.rB)),O.subCombine(1,d,1,s.cross(m,w.rA));var S=s.dot(O,b)-this.v_tangentSpeed,T=w.tangentMass*-S,A=g*w.normalImpulse;T=(C=o.clamp(w.tangentImpulse+T,-A,A))-w.tangentImpulse,w.tangentImpulse=C;var E=s.mul(T,b);d.subMul(h,E),m-=l*s.cross(w.rA,E),y.addMul(p,E),v+=f*s.cross(w.rB,E)}if(1==this.v_pointCount||0==t.blockSolve)for(var I=0;I<this.v_pointCount;++I){var O;w=this.v_points[I];(O=s.zero()).addCombine(1,y,1,s.cross(v,w.rB)),O.subCombine(1,d,1,s.cross(m,w.rA));var C,P=s.dot(O,_);T=-w.normalMass*(P-w.velocityBias);T=(C=o.max(w.normalImpulse+T,0))-w.normalImpulse,w.normalImpulse=C;E=s.mul(T,_);d.subMul(h,E),m-=l*s.cross(w.rA,E),y.addMul(p,E),v+=f*s.cross(w.rB,E)}else{var B=this.v_points[0],M=this.v_points[1],k=s.neo(B.normalImpulse,M.normalImpulse);r&&n.assert(k.x>=0&&k.y>=0);var R=s.zero().add(y).add(s.cross(v,B.rB)).sub(d).sub(s.cross(m,B.rA)),D=s.zero().add(y).add(s.cross(v,M.rB)).sub(d).sub(s.cross(m,M.rA)),F=s.dot(R,_),N=s.dot(D,_),L=s.neo(F-B.velocityBias,N-M.velocityBias);L.sub(u.mulVec2(this.v_K,k));for(;;){var j=u.mulVec2(this.v_normalMass,L).neg();if(j.x>=0&&j.y>=0){var U=s.sub(j,k),z=s.mul(U.x,_),V=s.mul(U.y,_);d.subCombine(h,z,h,V),m-=l*(s.cross(B.rA,z)+s.cross(M.rA,V)),y.addCombine(p,z,p,V),v+=f*(s.cross(B.rB,z)+s.cross(M.rB,V)),B.normalImpulse=j.x,M.normalImpulse=j.y;break}if(j.x=-B.normalMass*L.x,j.y=0,F=0,N=this.v_K.ex.y*j.x+L.y,j.x>=0&&N>=0){U=s.sub(j,k),z=s.mul(U.x,_),V=s.mul(U.y,_);d.subCombine(h,z,h,V),m-=l*(s.cross(B.rA,z)+s.cross(M.rA,V)),y.addCombine(p,z,p,V),v+=f*(s.cross(B.rB,z)+s.cross(M.rB,V)),B.normalImpulse=j.x,M.normalImpulse=j.y;break}if(j.x=0,j.y=-M.normalMass*L.y,F=this.v_K.ey.x*j.y+L.x,N=0,j.y>=0&&F>=0){U=s.sub(j,k),z=s.mul(U.x,_),V=s.mul(U.y,_);d.subCombine(h,z,h,V),m-=l*(s.cross(B.rA,z)+s.cross(M.rA,V)),y.addCombine(p,z,p,V),v+=f*(s.cross(B.rB,z)+s.cross(M.rB,V)),B.normalImpulse=j.x,M.normalImpulse=j.y;break}if(j.x=0,j.y=0,F=L.x,N=L.y,F>=0&&N>=0){U=s.sub(j,k),z=s.mul(U.x,_),V=s.mul(U.y,_);d.subCombine(h,z,h,V),m-=l*(s.cross(B.rA,z)+s.cross(M.rA,V)),y.addCombine(p,z,p,V),v+=f*(s.cross(B.rB,z)+s.cross(M.rB,V)),B.normalImpulse=j.x,M.normalImpulse=j.y;break}break}}a.v.set(d),a.w=m,c.v.set(y),c.w=v};var _=[];d.addType=function(t,e,i){_[t]=_[t]||{},_[t][e]=i},d.create=function(t,e,i,r){var n,o,s=t.getType(),a=i.getType();if(o=_[s]&&_[s][a])n=new d(t,e,i,r,o);else{if(!(o=_[a]&&_[a][s]))return null;n=new d(i,r,t,e,o)}t=n.getFixtureA(),i=n.getFixtureB(),e=n.getChildIndexA(),r=n.getChildIndexB();var u=t.getBody(),c=i.getBody();return n.m_nodeA.contact=n,n.m_nodeA.other=c,n.m_nodeA.prev=null,n.m_nodeA.next=u.m_contactList,null!=u.m_contactList&&(u.m_contactList.prev=n.m_nodeA),u.m_contactList=n.m_nodeA,n.m_nodeB.contact=n,n.m_nodeB.other=u,n.m_nodeB.prev=null,n.m_nodeB.next=c.m_contactList,null!=c.m_contactList&&(c.m_contactList.prev=n.m_nodeB),c.m_contactList=n.m_nodeB,0==t.isSensor()&&0==i.isSensor()&&(u.setAwake(!0),c.setAwake(!0)),n},d.destroy=function(t,e){var i=t.m_fixtureA,r=t.m_fixtureB,n=i.getBody(),o=r.getBody();t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==n.m_contactList&&(n.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==o.m_contactList&&(o.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&0==i.isSensor()&&0==r.isSensor()&&(n.setAwake(!0),o.setAwake(!0));var s=i.getType(),a=r.getType(),u=_[s][a].destroyFcn;"function"===typeof u&&u(t)}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(r){"object"===typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var r=i(158);e.multicast=function(t,e){return function(i){var o;if(o="function"===typeof t?t:function(){return t},"function"===typeof e)return i.lift(new n(o,e));var s=Object.create(i,r.connectableObservableDescriptor);return s.source=i,s.subjectFactory=o,s}};var n=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var i=this.selector,r=this.subjectFactory(),n=i(r).subscribe(t);return n.add(e.subscribe(r)),n},t}();e.MulticastOperator=n},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT,i(7);var r=i(3),n=i(14),o=i(4),s=i(12);function a(){this.type,this.localNormal=r.zero(),this.localPoint=r.zero(),this.points=[new u,new u],this.pointCount=0}function u(){this.localPoint=r.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.id=new c}function c(){this.cf=new h}function h(){this.indexA,this.indexB,this.typeA,this.typeB}function l(){this.normal,this.points=[],this.separations=[]}t.exports=a,t.exports.clipSegmentToLine=function(t,e,i,n,o){var s=0,u=r.dot(i,e[0].v)-n,c=r.dot(i,e[1].v)-n;u<=0&&t[s++].set(e[0]);c<=0&&t[s++].set(e[1]);if(u*c<0){var h=u/(u-c);t[s].v.setCombine(1-h,e[0].v,h,e[1].v),t[s].id.cf.indexA=o,t[s].id.cf.indexB=e[0].id.cf.indexB,t[s].id.cf.typeA=a.e_vertex,t[s].id.cf.typeB=a.e_face,++s}return s},t.exports.clipVertex=f,t.exports.getPointStates=function(t,e,i,r){for(var n=0;n<i.pointCount;++n){var o=i.points[n].id;t[n]=p.removeState;for(var s=0;s<r.pointCount;++s)if(r.points[s].id.key==o.key){t[n]=p.persistState;break}}for(n=0;n<r.pointCount;++n){o=r.points[n].id;e[n]=p.addState;for(s=0;s<i.pointCount;++s)if(i.points[s].id.key==o.key){e[n]=p.persistState;break}}},t.exports.PointState=p,a.e_circles=0,a.e_faceA=1,a.e_faceB=2,a.e_vertex=0,a.e_face=1,Object.defineProperty(c.prototype,"key",{get:function(){return this.cf.indexA+4*this.cf.indexB+16*this.cf.typeA+64*this.cf.typeB},enumerable:!0,configurable:!0}),c.prototype.set=function(t){this.cf.set(t.cf)},h.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB},a.prototype.getWorldManifold=function(t,e,i,u,c){if(0!=this.pointCount){var h=(t=t||new l).normal,p=t.points,f=t.separations;switch(this.type){case a.e_circles:h=r.neo(1,0);var d=n.mulVec2(e,this.localPoint),m=n.mulVec2(u,this.points[0].localPoint),y=r.sub(m,d);r.lengthSquared(y)>o.EPSILON*o.EPSILON&&(h.set(y),h.normalize());var v=d.clone().addMul(i,h),_=m.clone().addMul(-c,h);p[0]=r.mid(v,_),f[0]=r.dot(r.sub(_,v),h),p.length=1,f.length=1;break;case a.e_faceA:h=s.mulVec2(e.q,this.localNormal);for(var b=n.mulVec2(e,this.localPoint),g=0;g<this.pointCount;++g){var x=n.mulVec2(u,this.points[g].localPoint);v=r.clone(x).addMul(i-r.dot(r.sub(x,b),h),h),_=r.clone(x).subMul(c,h);p[g]=r.mid(v,_),f[g]=r.dot(r.sub(_,v),h)}p.length=this.pointCount,f.length=this.pointCount;break;case a.e_faceB:h=s.mulVec2(u.q,this.localNormal);for(b=n.mulVec2(u,this.localPoint),g=0;g<this.pointCount;++g){x=n.mulVec2(e,this.points[g].localPoint),_=r.combine(1,x,c-r.dot(r.sub(x,b),h),h),v=r.combine(1,x,-i,h);p[g]=r.mid(v,_),f[g]=r.dot(r.sub(v,_),h)}p.length=this.pointCount,f.length=this.pointCount,h.mul(-1)}return t.normal=h,t.points=p,t.separations=f,t}};var p={nullState:0,addState:1,persistState:2,removeState:3};function f(){this.v=r.zero(),this.id=new c}f.prototype.set=function(t){this.v.set(t.v),this.id.set(t.id)}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}},function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}i.d(e,"a",(function(){return o}))},function(t,e,i){"use strict";var r=i(26);function n(t){var e=t.Symbol;if("function"===typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var i=t.Set;if(i&&"function"===typeof(new i)["@@iterator"])return"@@iterator";var r=t.Map;if(r)for(var n=Object.getOwnPropertyNames(r.prototype),o=0;o<n.length;++o){var s=n[o];if("entries"!==s&&"size"!==s&&r.prototype[s]===r.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=n,e.iterator=n(r.root),e.$$iterator=e.iterator},function(t,e,i){"use strict";var r=i(37),n=i(112),o=i(113),s=i(87);e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&r.isScheduler(t[1])?o.from(t[0]):s.concatAll()(n.of.apply(void 0,t))}},function(t,e,i){"use strict";var r=i(0),n=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"===typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){switch(this.kind){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!==typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=n},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(6),o=i(5);e.mergeMap=function(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),function(r){return"number"===typeof e&&(i=e,e=null),r.lift(new s(t,e,i))}};var s=function(){function t(t,e,i){void 0===i&&(i=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=i}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=s;var a=function(t){function e(e,i,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this,e),this.project=i,this.resultSelector=r,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,i)},e.prototype._innerSub=function(t,e,i){this.add(n.subscribeToResult(this,t,e,i))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i,r,n){this.resultSelector?this._notifyResultSelector(t,e,i,r):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,i,r){var n;try{n=this.resultSelector(t,e,i,r)}catch(o){return void this.destination.error(o)}this.destination.next(n)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeMapSubscriber=a},function(t,e,i){"use strict";var r=i(38);e.isNumeric=function(t){return!r.isArray(t)&&t-parseFloat(t)+1>=0}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(26),o=function(t){function e(e,i){t.call(this,e,i),this.scheduler=e,this.pending=!1,this.work=i}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),n.root.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;n.root.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i=!1,r=void 0;try{this.work(t)}catch(n){i=!0,r=!!n&&n||new Error(n)}if(i)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(i(266).Action);e.AsyncAction=o},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(i(267).Scheduler);e.AsyncScheduler=n},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.map=function(t,e){return function(i){if("function"!==typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new o(t,e))}};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();e.MapOperator=o;var s=function(t){function e(e,i,r){t.call(this,e),this.project=i,this.count=0,this.thisArg=r||this}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(e)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.ArgumentOutOfRangeError=n},function(t,e,i){"use strict";var r=i(96),n=i(97),o=i(91),s=i(84);e.reduce=function(t,e){return arguments.length>=2?function(i){return s.pipe(r.scan(t,e),n.takeLast(1),o.defaultIfEmpty(e))(i)}:function(e){return s.pipe(r.scan((function(e,i,r){return t(e,i,r+1)})),n.takeLast(1))(e)}}},function(t,e,i){e.internal={},e.Serializer=i(553),e.Math=i(4),e.Vec2=i(3),e.Vec3=i(29),e.Mat22=i(28),e.Mat33=i(33),e.Transform=i(14),e.Rot=i(12),e.AABB=i(39),e.Shape=i(34),e.Fixture=i(213),e.Body=i(61),e.Contact=i(43),e.Joint=i(30),e.World=i(211),e.Circle=i(78),e.Edge=i(79),e.Polygon=i(62),e.Chain=i(102),e.Box=i(558),i(559),i(560),e.internal.CollidePolygons=i(561),i(562),i(563),e.DistanceJoint=i(564),e.FrictionJoint=i(565),e.GearJoint=i(566),e.MotorJoint=i(567),e.MouseJoint=i(568),e.PrismaticJoint=i(216),e.PulleyJoint=i(569),e.RevoluteJoint=i(215),e.RopeJoint=i(570),e.WeldJoint=i(571),e.WheelJoint=i(572),e.internal.Sweep=i(27),e.internal.stats=i(101),e.internal.Manifold=i(46),e.internal.Distance=i(77),e.internal.TimeOfImpact=i(214),e.internal.DynamicTree=i(212),e.internal.Settings=i(13)},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=_;var n=i(7),o=i(21),s=i(3),a=i(12),u=i(4),c=i(27),h=i(14),l=i(31),p=i(32),f=i(213),d=(i(34),_.STATIC="static"),m=_.KINEMATIC="kinematic",y=_.DYNAMIC="dynamic",v={type:d,position:s.zero(),angle:0,linearVelocity:s.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null};function _(t,e){e=o(e,v),r&&n.assert(s.isValid(e.position)),r&&n.assert(s.isValid(e.linearVelocity)),r&&n.assert(u.isFinite(e.angle)),r&&n.assert(u.isFinite(e.angularVelocity)),r&&n.assert(u.isFinite(e.angularDamping)&&e.angularDamping>=0),r&&n.assert(u.isFinite(e.linearDamping)&&e.linearDamping>=0),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==y?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=h.identity(),this.m_xf.p=s.clone(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new c,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new l,this.c_position=new p,this.m_force=s.zero(),this.m_torque=0,this.m_linearVelocity=s.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}function b(){this.mass=0,this.center=s.zero(),this.I=0}_.prototype._serialize=function(){for(var t=[],e=this.m_fixtureList;e;e=e.m_next)t.push(e);return{type:this.m_type,position:this.m_xf.p,angle:this.m_xf.q.getAngle(),linearVelocity:this.m_linearVelocity,angularVelocity:this.m_angularVelocity,fixtures:t}},_._deserialize=function(t,e,i){var r=new _(e,t);return t.fixtures.forEach((function(t){var e=i(f,t,r);r._addFixture(e)})),r},_.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},_.prototype.getWorld=function(){return this.m_world},_.prototype.getNext=function(){return this.m_next},_.prototype.setUserData=function(t){this.m_userData=t},_.prototype.getUserData=function(){return this.m_userData},_.prototype.getFixtureList=function(){return this.m_fixtureList},_.prototype.getJointList=function(){return this.m_jointList},_.prototype.getContactList=function(){return this.m_contactList},_.prototype.isStatic=function(){return this.m_type==d},_.prototype.isDynamic=function(){return this.m_type==y},_.prototype.isKinematic=function(){return this.m_type==m},_.prototype.setStatic=function(){return this.setType(d),this},_.prototype.setDynamic=function(){return this.setType(y),this},_.prototype.setKinematic=function(){return this.setType(m),this},_.prototype.getType=function(){return this.m_type},_.prototype.setType=function(t){if(r&&n.assert(t===d||t===m||t===y),r&&n.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==d&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var i=e;e=e.next,this.m_world.destroyContact(i.contact)}this.m_contactList=null;for(var o=this.m_world.m_broadPhase,s=this.m_fixtureList;s;s=s.m_next)for(var a=s.m_proxyCount,u=0;u<a;++u)o.touchProxy(s.m_proxies[u].proxyId)}},_.prototype.isBullet=function(){return this.m_bulletFlag},_.prototype.setBullet=function(t){this.m_bulletFlag=!!t},_.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},_.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},_.prototype.isAwake=function(){return this.m_awakeFlag},_.prototype.setAwake=function(t){t?0==this.m_awakeFlag&&(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},_.prototype.isActive=function(){return this.m_activeFlag},_.prototype.setActive=function(t){if(r&&n.assert(0==this.isWorldLocked()),t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag)for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.createProxies(e,this.m_xf);else{for(e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.destroyProxies(e);for(var o=this.m_contactList;o;){var s=o;o=o.next,this.m_world.destroyContact(s.contact)}this.m_contactList=null}},_.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},_.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},_.prototype.getTransform=function(){return this.m_xf},_.prototype.setTransform=function(t,e){if(r&&n.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){this.m_xf.set(t,e),this.m_sweep.setTransform(this.m_xf);for(var i=this.m_world.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)o.synchronize(i,this.m_xf,this.m_xf)}},_.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},_.prototype.synchronizeFixtures=function(){var t=h.identity();this.m_sweep.getTransform(t,0);for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.synchronize(e,t,this.m_xf)},_.prototype.advance=function(t){this.m_sweep.advance(t),this.m_sweep.c.set(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},_.prototype.getPosition=function(){return this.m_xf.p},_.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},_.prototype.getAngle=function(){return this.m_sweep.a},_.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},_.prototype.getWorldCenter=function(){return this.m_sweep.c},_.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},_.prototype.getLinearVelocity=function(){return this.m_linearVelocity},_.prototype.getLinearVelocityFromWorldPoint=function(t){var e=s.sub(t,this.m_sweep.c);return s.add(this.m_linearVelocity,s.cross(this.m_angularVelocity,e))},_.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},_.prototype.setLinearVelocity=function(t){this.m_type!=d&&(s.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.set(t))},_.prototype.getAngularVelocity=function(){return this.m_angularVelocity},_.prototype.setAngularVelocity=function(t){this.m_type!=d&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},_.prototype.getLinearDamping=function(){return this.m_linearDamping},_.prototype.setLinearDamping=function(t){this.m_linearDamping=t},_.prototype.getAngularDamping=function(){return this.m_angularDamping},_.prototype.setAngularDamping=function(t){this.m_angularDamping=t},_.prototype.getGravityScale=function(){return this.m_gravityScale},_.prototype.setGravityScale=function(t){this.m_gravityScale=t},_.prototype.getMass=function(){return this.m_mass},_.prototype.getInertia=function(){return this.m_I+this.m_mass*s.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},_.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),t.center.set(this.m_sweep.localCenter)},_.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.isStatic()||this.isKinematic())return this.m_sweep.c0.set(this.m_xf.p),this.m_sweep.c.set(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);r&&n.assert(this.isDynamic());for(var t=s.zero(),e=this.m_fixtureList;e;e=e.m_next)if(0!=e.m_density){var i=new b;e.getMassData(i),this.m_mass+=i.mass,t.addMul(i.mass,i.center),this.m_I+=i.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.mul(this.m_invMass)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*s.dot(t,t),r&&n.assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var o=s.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t,this.m_xf),this.m_linearVelocity.add(s.cross(this.m_angularVelocity,s.sub(this.m_sweep.c,o)))},_.prototype.setMassData=function(t){if(r&&n.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type==y){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*s.dot(t.center,t.center),r&&n.assert(this.m_I>0),this.m_invI=1/this.m_I);var e=s.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t.center,this.m_xf),this.m_linearVelocity.add(s.cross(this.m_angularVelocity,s.sub(this.m_sweep.c,e)))}},_.prototype.applyForce=function(t,e,i){this.m_type==y&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=s.cross(s.sub(e,this.m_sweep.c),t)))},_.prototype.applyForceToCenter=function(t,e){this.m_type==y&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},_.prototype.applyTorque=function(t,e){this.m_type==y&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},_.prototype.applyLinearImpulse=function(t,e,i){this.m_type==y&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*s.cross(s.sub(e,this.m_sweep.c),t)))},_.prototype.applyAngularImpulse=function(t,e){this.m_type==y&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},_.prototype.shouldCollide=function(t){if(this.m_type!=y&&t.m_type!=y)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},_.prototype._addFixture=function(t){if(r&&n.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;if(this.m_activeFlag){var e=this.m_world.m_broadPhase;t.createProxies(e,this.m_xf)}return t.m_next=this.m_fixtureList,this.m_fixtureList=t,t.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,t},_.prototype.createFixture=function(t,e){if(r&&n.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;var i=new f(this,t,e);return this._addFixture(i),i},_.prototype.destroyFixture=function(t){if(r&&n.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){r&&n.assert(t.m_body==this);var e=!1;if(this.m_fixtureList===t)this.m_fixtureList=t.m_next,e=!0;else for(var i=this.m_fixtureList;null!=i;){if(i.m_next===t){i.m_next=t.m_next,e=!0;break}i=i.m_next}r&&n.assert(e);for(var o=this.m_contactList;o;){var s=o.contact;o=o.next;var a=s.getFixtureA(),u=s.getFixtureB();t!=a&&t!=u||this.m_world.destroyContact(s)}if(this.m_activeFlag){var c=this.m_world.m_broadPhase;t.destroyProxies(c)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},_.prototype.getWorldPoint=function(t){return h.mulVec2(this.m_xf,t)},_.prototype.getWorldVector=function(t){return a.mulVec2(this.m_xf.q,t)},_.prototype.getLocalPoint=function(t){return h.mulTVec2(this.m_xf,t)},_.prototype.getLocalVector=function(t){return a.mulTVec2(this.m_xf.q,t)}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=p;var n=i(7),o=i(19),s=(i(21),i(4)),a=i(14),u=i(12),c=i(3),h=(i(39),i(13)),l=i(34);function p(t){if(!(this instanceof p))return new p(t);p._super.call(this),this.m_type=p.TYPE,this.m_radius=h.polygonRadius,this.m_centroid=c.zero(),this.m_vertices=[],this.m_normals=[],this.m_count=0,t&&t.length&&this._set(t)}p._super=l,p.prototype=o(p._super.prototype),p.TYPE="polygon",l.TYPES[p.TYPE]=p,p.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices}},p._deserialize=function(t){return new p(t.vertices)},p.prototype.getVertex=function(t){return r&&n.assert(0<=t&&t<this.m_count),this.m_vertices[t]},p.prototype._clone=function(){var t=new p;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.set(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},p.prototype.getChildCount=function(){return 1},p.prototype._reset=function(){this._set(this.m_vertices)},p.prototype._set=function(t){if(r&&n.assert(3<=t.length&&t.length<=h.maxPolygonVertices),t.length<3)this._setAsBox(1,1);else{for(var e=s.min(t.length,h.maxPolygonVertices),i=[],o=0,a=0;a<e;++a){for(var u=t[a],l=!0,p=0;p<o;++p)if(c.distanceSquared(u,i[p])<.25*h.linearSlopSquared){l=!1;break}l&&(i[o++]=u)}if((e=o)<3)return r&&n.assert(!1),void this._setAsBox(1,1);var f=0,d=i[0].x;for(a=1;a<e;++a){var m=i[a].x;(m>d||m==d&&i[a].y<i[f].y)&&(f=a,d=m)}for(var y=[],v=0,_=f;;){y[v]=_;var b=0;for(p=1;p<e;++p)if(b!=_){var g=c.sub(i[b],i[y[v]]),x=(u=c.sub(i[p],i[y[v]]),c.cross(g,u));x<0&&(b=p),0==x&&u.lengthSquared()>g.lengthSquared()&&(b=p)}else b=p;if(++v,_=b,b==f)break}if(v<3)return r&&n.assert(!1),void this._setAsBox(1,1);this.m_count=v;for(a=0;a<v;++a)this.m_vertices[a]=i[y[a]];for(a=0;a<v;++a){var w=a,S=a+1<v?a+1:0,T=c.sub(this.m_vertices[S],this.m_vertices[w]);r&&n.assert(T.lengthSquared()>s.EPSILON*s.EPSILON),this.m_normals[a]=c.cross(T,1),this.m_normals[a].normalize()}this.m_centroid=function(t,e){r&&n.assert(e>=3);for(var i=c.zero(),o=0,a=c.zero(),u=0;u<e;++u){var h=a,l=t[u],p=u+1<e?t[u+1]:t[0],f=c.sub(l,h),d=c.sub(p,h),m=.5*c.cross(f,d);o+=m,i.addMul(m*(1/3),h),i.addMul(m*(1/3),l),i.addMul(m*(1/3),p)}return r&&n.assert(o>s.EPSILON),i.mul(1/o),i}(this.m_vertices,v)}},p.prototype._setAsBox=function(t,e,i,r){if(this.m_vertices[0]=c.neo(-t,-e),this.m_vertices[1]=c.neo(t,-e),this.m_vertices[2]=c.neo(t,e),this.m_vertices[3]=c.neo(-t,e),this.m_normals[0]=c.neo(0,-1),this.m_normals[1]=c.neo(1,0),this.m_normals[2]=c.neo(0,1),this.m_normals[3]=c.neo(-1,0),this.m_count=4,c.isValid(i)){r=r||0,this.m_centroid.set(i);var n=a.identity();n.p.set(i),n.q.set(r);for(var o=0;o<this.m_count;++o)this.m_vertices[o]=a.mulVec2(n,this.m_vertices[o]),this.m_normals[o]=u.mulVec2(n.q,this.m_normals[o])}},p.prototype.testPoint=function(t,e){for(var i=u.mulTVec2(t.q,c.sub(e,t.p)),r=0;r<this.m_count;++r){if(c.dot(this.m_normals[r],c.sub(i,this.m_vertices[r]))>0)return!1}return!0},p.prototype.rayCast=function(t,e,i,o){for(var s=u.mulTVec2(i.q,c.sub(e.p1,i.p)),a=u.mulTVec2(i.q,c.sub(e.p2,i.p)),h=c.sub(a,s),l=0,p=e.maxFraction,f=-1,d=0;d<this.m_count;++d){var m=c.dot(this.m_normals[d],c.sub(this.m_vertices[d],s)),y=c.dot(this.m_normals[d],h);if(0==y){if(m<0)return!1}else y<0&&m<l*y?(l=m/y,f=d):y>0&&m<p*y&&(p=m/y);if(p<l)return!1}return r&&n.assert(0<=l&&l<=e.maxFraction),f>=0&&(t.fraction=l,t.normal=u.mulVec2(i.q,this.m_normals[f]),!0)},p.prototype.computeAABB=function(t,e,i){for(var r=1/0,n=1/0,o=-1/0,u=-1/0,c=0;c<this.m_count;++c){var h=a.mulVec2(e,this.m_vertices[c]);r=s.min(r,h.x),o=s.max(o,h.x),n=s.min(n,h.y),u=s.max(u,h.y)}t.lowerBound.set(r,n),t.upperBound.set(o,u),t.extend(this.m_radius)},p.prototype.computeMass=function(t,e){r&&n.assert(this.m_count>=3);for(var i=c.zero(),o=0,a=0,u=c.zero(),h=0;h<this.m_count;++h)u.add(this.m_vertices[h]);u.mul(1/this.m_count);for(h=0;h<this.m_count;++h){var l=c.sub(this.m_vertices[h],u),p=h+1<this.m_count?c.sub(this.m_vertices[h+1],u):c.sub(this.m_vertices[0],u),f=c.cross(l,p),d=.5*f;o+=d,i.addCombine(d*(1/3),l,d*(1/3),p);var m=l.x,y=l.y,v=p.x,_=p.y;a+=1/3*.25*f*(m*m+v*m+v*v+(y*y+_*y+_*_))}t.mass=e*o,r&&n.assert(o>s.EPSILON),i.mul(1/o),t.center.setCombine(1,i,1,u),t.I=e*a,t.I+=t.mass*(c.dot(t.center,t.center)-c.dot(i,i))},p.prototype.validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,i=t<this.m_count-1?e+1:0,r=this.m_vertices[e],n=c.sub(this.m_vertices[i],r),o=0;o<this.m_count;++o)if(o!=e&&o!=i){var s=c.sub(this.m_vertices[o],r);if(c.cross(n,s)<0)return!1}return!0},p.prototype.computeDistanceProxy=function(t){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius}},function(t,e,i){"use strict";e.isFunction=function(t){return"function"===typeof t}},function(t,e,i){"use strict";var r=i(26).root.Symbol;e.rxSubscriber="function"===typeof r&&"function"===typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,i){"use strict";var r=i(26);function n(t){var e,i=t.Symbol;return"function"===typeof i?i.observable?e=i.observable:(e=i("observable"),i.observable=e):e="@@observable",e}e.getSymbolObservable=n,e.observable=n(r.root),e.$$observable=e.observable},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.ObjectUnsubscribedError=n},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(20),s=function(t){function e(){t.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return r(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(n.Subject);e.AsyncSubject=s},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(41),o=i(38),s=i(5),a=i(6),u={};e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=null;return"function"===typeof t[t.length-1]&&(i=t.pop()),1===t.length&&o.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(new n.ArrayObservable([e].concat(t)),new c(i))}};var c=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project))},t}();e.CombineLatestOperator=c;var h=function(t){function e(e,i){t.call(this,e),this.project=i,this.active=0,this.values=[],this.observables=[]}return r(e,t),e.prototype._next=function(t){this.values.push(u),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var i=0;i<e;i++){var r=t[i];this.add(a.subscribeToResult(this,r,r,i))}}},e.prototype.notifyComplete=function(t){0===(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i,r,n){var o=this.values,s=o[i],a=this.toRespond?s===u?--this.toRespond:this.toRespond:0;o[i]=e,0===a&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)},e}(s.OuterSubscriber);e.CombineLatestSubscriber=h},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(52);e.observeOn=function(t,e){return void 0===e&&(e=0),function(i){return i.lift(new s(t,e))}};var s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=s;var a=function(t){function e(e,i,r){void 0===r&&(r=0),t.call(this,e),this.scheduler=i,this.delay=r}return r(e,t),e.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new u(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},e}(n.Subscriber);e.ObserveOnSubscriber=a;var u=function(t,e){this.notification=t,this.destination=e};e.ObserveOnMessage=u},function(t,e,i){"use strict";var r=i(53),n=i(116);e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),r.mergeMap(n.identity,null,t)}},function(t,e,i){"use strict";var r=i(0),n=i(41),o=i(37),s=i(70);e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=Number.POSITIVE_INFINITY,a=null,u=t[t.length-1];return o.isScheduler(u)?(a=t.pop(),t.length>1&&"number"===typeof t[t.length-1]&&(i=t.pop())):"number"===typeof u&&(i=t.pop()),null===a&&1===t.length&&t[0]instanceof r.Observable?t[0]:s.mergeAll(i)(new n.ArrayObservable(t,a))}},function(t,e,i){"use strict";e.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(41),o=i(38),s=i(2),a=i(5),u=i(6),c=i(50);function h(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=t[t.length-1];return"function"===typeof i&&t.pop(),new n.ArrayObservable(t).lift(new l(i))}e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(h.apply(void 0,[e].concat(t)))}},e.zipStatic=h;var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.project))},t}();e.ZipOperator=l;var p=function(t){function e(e,i,r){void 0===r&&(r=Object.create(null)),t.call(this,e),this.iterators=[],this.active=0,this.project="function"===typeof i?i:null,this.values=r}return r(e,t),e.prototype._next=function(t){var e=this.iterators;o.isArray(t)?e.push(new d(t)):"function"===typeof t[c.iterator]?e.push(new f(t[c.iterator]())):e.push(new m(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var i=0;i<e;i++){var r=t[i];r.stillUnsubscribed?this.add(r.subscribe(r,i)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,i=this.destination,r=0;r<e;r++){if("function"===typeof(s=t[r]).hasValue&&!s.hasValue())return}var n=!1,o=[];for(r=0;r<e;r++){var s,a=(s=t[r]).next();if(s.hasCompleted()&&(n=!0),a.done)return void i.complete();o.push(a.value)}this.project?this._tryProject(o):i.next(o),n&&i.complete()},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)},e}(s.Subscriber);e.ZipSubscriber=p;var f=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),d=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[c.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,i=this.array;return e<this.length?{value:i[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),m=function(t){function e(e,i,r){t.call(this,e),this.parent=i,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return r(e,t),e.prototype[c.iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,i,r,n){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return u.subscribeToResult(this,this.observable,this,e)},e}(a.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(119),s=i(20),a=i(69),u=i(66),c=i(109),h=function(t){function e(e,i,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=r,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=i<1?1:i}return r(e,t),e.prototype.next=function(e){var i=this._getNow();this._events.push(new l(i,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,i=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?e=s.Subscription.EMPTY:this.isStopped?e=s.Subscription.EMPTY:(this.observers.push(t),e=new c.SubjectSubscription(this,t)),r&&t.add(t=new a.ObserveOnSubscriber(t,r));for(var n=i.length,o=0;o<n&&!t.closed;o++)t.next(i[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,i=this._windowTime,r=this._events,n=r.length,o=0;o<n&&!(t-r[o].time<i);)o++;return n>e&&(o=Math.max(o,n-e)),o>0&&r.splice(0,o),r},e}(n.Subject);e.ReplaySubject=h;var l=function(t,e){this.time=t,this.value=e}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.EmptyError=n},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.defaultThrottleConfig={leading:!0,trailing:!1},e.throttle=function(t,i){return void 0===i&&(i=e.defaultThrottleConfig),function(e){return e.lift(new s(t,i.leading,i.trailing))}};var s=function(){function t(t,e,i){this.durationSelector=t,this.leading=e,this.trailing=i}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector,this.leading,this.trailing))},t}(),a=function(t){function e(e,i,r,n){t.call(this,e),this.destination=e,this.durationSelector=i,this._leading=r,this._trailing=n,this._hasTrailingValue=!1}return r(e,t),e.prototype._next=function(t){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t);else{var e=this.tryDurationSelector(t);e&&this.add(this.throttled=o.subscribeToResult(this,e)),this._leading&&(this.destination.next(t),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t))}},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}},e.prototype._unsubscribe=function(){var t=this.throttled;this._trailingValue,this._hasTrailingValue,this._trailing;this._trailingValue=null,this._hasTrailingValue=!1,t&&(this.remove(t),this.throttled=null,t.unsubscribe())},e.prototype._sendTrailing=function(){var t=this,e=t.destination,i=t.throttled,r=t._trailing,n=t._trailingValue,o=t._hasTrailingValue;i&&r&&o&&(e.next(n),this._trailingValue=null,this._hasTrailingValue=!1)},e.prototype.notifyNext=function(t,e,i,r,n){this._sendTrailing(),this._unsubscribe()},e.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},e}(n.OuterSubscriber)},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=d,t.exports.Input=l,t.exports.Output=p,t.exports.Proxy=m,t.exports.Cache=f;var n=i(13),o=i(7),s=i(101),a=i(4),u=i(3),c=(i(29),i(28),i(33),i(12)),h=(i(27),i(14));i(31),i(32);function l(){this.proxyA=new m,this.proxyB=new m,this.transformA=null,this.transformB=null,this.useRadii=!1}function p(){this.pointA=u.zero(),this.pointB=u.zero(),this.distance,this.iterations}function f(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}function d(t,e,i){++s.gjkCalls;var r=i.proxyA,o=i.proxyB,l=i.transformA,p=i.transformB,f=new v;f.readCache(e,r,l,o,p);for(var d=f.m_v,m=n.maxDistnceIterations,y=[],_=[],b=0,g=0;g<m;){b=f.m_count;for(var x=0;x<b;++x)y[x]=d[x].indexA,_[x]=d[x].indexB;if(f.solve(),3==f.m_count)break;(O=f.getClosestPoint()).lengthSquared();var w=f.getSearchDirection();if(w.lengthSquared()<a.EPSILON*a.EPSILON)break;var S=d[f.m_count];S.indexA=r.getSupport(c.mulTVec2(l.q,u.neg(w))),S.wA=h.mulVec2(l,r.getVertex(S.indexA)),S.indexB=o.getSupport(c.mulTVec2(p.q,w)),S.wB=h.mulVec2(p,o.getVertex(S.indexB)),S.w=u.sub(S.wB,S.wA),++g,++s.gjkIters;var T=!1;for(x=0;x<b;++x)if(S.indexA==y[x]&&S.indexB==_[x]){T=!0;break}if(T)break;++f.m_count}if(s.gjkMaxIters=a.max(s.gjkMaxIters,g),f.getWitnessPoints(t.pointA,t.pointB),t.distance=u.distance(t.pointA,t.pointB),t.iterations=g,f.writeCache(e),i.useRadii){var A=r.m_radius,E=o.m_radius;if(t.distance>A+E&&t.distance>a.EPSILON){t.distance-=A+E;var I=u.sub(t.pointB,t.pointA);I.normalize(),t.pointA.addMul(A,I),t.pointB.subMul(E,I)}else{var O=u.mid(t.pointA,t.pointB);t.pointA.set(O),t.pointB.set(O),t.distance=0}}}function m(){this.m_buffer=[],this.m_vertices=[],this.m_count=0,this.m_radius=0}function y(){this.indexA,this.indexB,this.wA=u.zero(),this.wB=u.zero(),this.w=u.zero(),this.a}function v(){this.m_v1=new y,this.m_v2=new y,this.m_v3=new y,this.m_v=[this.m_v1,this.m_v2,this.m_v3],this.m_count}s.gjkCalls=0,s.gjkIters=0,s.gjkMaxIters=0,m.prototype.getVertexCount=function(){return this.m_count},m.prototype.getVertex=function(t){return r&&o.assert(0<=t&&t<this.m_count),this.m_vertices[t]},m.prototype.getSupport=function(t){for(var e=0,i=u.dot(this.m_vertices[0],t),r=0;r<this.m_count;++r){var n=u.dot(this.m_vertices[r],t);n>i&&(e=r,i=n)}return e},m.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},m.prototype.set=function(t,e){r&&o.assert("function"===typeof t.computeDistanceProxy),t.computeDistanceProxy(this,e)},y.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.wA=u.clone(t.wA),this.wB=u.clone(t.wB),this.w=u.clone(t.w),this.a=t.a},v.prototype.print=function(){return 3==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},v.prototype.readCache=function(t,e,i,n,s){r&&o.assert(t.count<=3),this.m_count=t.count;for(var c=0;c<this.m_count;++c){(m=this.m_v[c]).indexA=t.indexA[c],m.indexB=t.indexB[c];var l=e.getVertex(m.indexA),p=n.getVertex(m.indexB);m.wA=h.mulVec2(i,l),m.wB=h.mulVec2(s,p),m.w=u.sub(m.wB,m.wA),m.a=0}if(this.m_count>1){var f=t.metric,d=this.getMetric();(d<.5*f||2*f<d||d<a.EPSILON)&&(this.m_count=0)}if(0==this.m_count){var m;(m=this.m_v[0]).indexA=0,m.indexB=0;l=e.getVertex(0),p=n.getVertex(0);m.wA=h.mulVec2(i,l),m.wB=h.mulVec2(s,p),m.w=u.sub(m.wB,m.wA),m.a=1,this.m_count=1}},v.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},v.prototype.getSearchDirection=function(){switch(this.m_count){case 1:return u.neg(this.m_v1.w);case 2:var t=u.sub(this.m_v2.w,this.m_v1.w);return u.cross(t,u.neg(this.m_v1.w))>0?u.cross(1,t):u.cross(t,1);default:return r&&o.assert(!1),u.zero()}},v.prototype.getClosestPoint=function(){switch(this.m_count){case 0:return r&&o.assert(!1),u.zero();case 1:return u.clone(this.m_v1.w);case 2:return u.combine(this.m_v1.a,this.m_v1.w,this.m_v2.a,this.m_v2.w);case 3:return u.zero();default:return r&&o.assert(!1),u.zero()}},v.prototype.getWitnessPoints=function(t,e){switch(this.m_count){case 0:r&&o.assert(!1);break;case 1:t.set(this.m_v1.wA),e.set(this.m_v1.wB);break;case 2:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),e.setCombine(this.m_v1.a,this.m_v1.wB,this.m_v2.a,this.m_v2.wB);break;case 3:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),t.addMul(this.m_v3.a,this.m_v3.wA),e.set(t);break;default:r&&o.assert(!1)}},v.prototype.getMetric=function(){switch(this.m_count){case 0:return r&&o.assert(!1),0;case 1:return 0;case 2:return u.distance(this.m_v1.w,this.m_v2.w);case 3:return u.cross(u.sub(this.m_v2.w,this.m_v1.w),u.sub(this.m_v3.w,this.m_v1.w));default:return r&&o.assert(!1),0}},v.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break;default:r&&o.assert(!1)}},v.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=u.sub(e,t),r=-u.dot(t,i);if(r<=0)return this.m_v1.a=1,void(this.m_count=1);var n=u.dot(e,i);if(n<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var o=1/(n+r);this.m_v1.a=n*o,this.m_v2.a=r*o,this.m_count=2},v.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,r=u.sub(e,t),n=u.dot(t,r),o=u.dot(e,r),s=-n,a=u.sub(i,t),c=u.dot(t,a),h=u.dot(i,a),l=-c,p=u.sub(i,e),f=u.dot(e,p),d=u.dot(i,p),m=-f,y=u.cross(r,a),v=y*u.cross(e,i),_=y*u.cross(i,t),b=y*u.cross(t,e);if(s<=0&&l<=0)return this.m_v1.a=1,void(this.m_count=1);if(o>0&&s>0&&b<=0){var g=1/(o+s);return this.m_v1.a=o*g,this.m_v2.a=s*g,void(this.m_count=2)}if(h>0&&l>0&&_<=0){var x=1/(h+l);return this.m_v1.a=h*x,this.m_v3.a=l*x,this.m_count=2,void this.m_v2.set(this.m_v3)}if(o<=0&&m<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(h<=0&&d<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(d>0&&m>0&&v<=0){var w=1/(d+m);return this.m_v2.a=d*w,this.m_v3.a=m*w,this.m_count=2,void this.m_v1.set(this.m_v3)}var S=1/(v+_+b);this.m_v1.a=v*S,this.m_v2.a=_*S,this.m_v3.a=b*S,this.m_count=3},d.testOverlap=function(t,e,i,r,n,o){var s=new l;s.proxyA.set(t,e),s.proxyB.set(i,r),s.transformA=n,s.transformB=o,s.useRadii=!0;var u=new f,c=new p;return d(c,u,s),c.distance<10*a.EPSILON}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=h;var n=i(7),o=i(19),s=(i(21),i(4)),a=(i(14),i(12)),u=i(3),c=(i(39),i(13),i(34));function h(t,e){if(!(this instanceof h))return new h(t,e);h._super.call(this),this.m_type=h.TYPE,this.m_p=u.zero(),this.m_radius=1,"object"===typeof t&&u.isValid(t)?(this.m_p.set(t),"number"===typeof e&&(this.m_radius=e)):"number"===typeof t&&(this.m_radius=t)}h._super=c,h.prototype=o(h._super.prototype),h.TYPE="circle",c.TYPES[h.TYPE]=h,h.prototype._serialize=function(){return{type:this.m_type,p:this.m_p,radius:this.m_radius}},h._deserialize=function(t){return new h(t.p,t.radius)},h.prototype.getRadius=function(){return this.m_radius},h.prototype.getCenter=function(){return this.m_p},h.prototype.getVertex=function(t){return r&&n.assert(0==t),this.m_p},h.prototype.getVertexCount=function(t){return 1},h.prototype._clone=function(){var t=new h;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},h.prototype.getChildCount=function(){return 1},h.prototype.testPoint=function(t,e){var i=u.add(t.p,a.mulVec2(t.q,this.m_p)),r=u.sub(e,i);return u.dot(r,r)<=this.m_radius*this.m_radius},h.prototype.rayCast=function(t,e,i,r){var n=u.add(i.p,a.mulVec2(i.q,this.m_p)),o=u.sub(e.p1,n),c=u.dot(o,o)-this.m_radius*this.m_radius,h=u.sub(e.p2,e.p1),l=u.dot(o,h),p=u.dot(h,h),f=l*l-p*c;if(f<0||p<s.EPSILON)return!1;var d=-(l+s.sqrt(f));return 0<=d&&d<=e.maxFraction*p&&(d/=p,t.fraction=d,t.normal=u.add(o,u.mul(d,h)),t.normal.normalize(),!0)},h.prototype.computeAABB=function(t,e,i){var r=u.add(e.p,a.mulVec2(e.q,this.m_p));t.lowerBound.set(r.x-this.m_radius,r.y-this.m_radius),t.upperBound.set(r.x+this.m_radius,r.y+this.m_radius)},h.prototype.computeMass=function(t,e){t.mass=e*s.PI*this.m_radius*this.m_radius,t.center=this.m_p,t.I=t.mass*(.5*this.m_radius*this.m_radius+u.dot(this.m_p,this.m_p))},h.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_p),t.m_count=1,t.m_radius=this.m_radius}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=c;var r=i(19),n=(i(21),i(13)),o=i(34),s=(i(4),i(14)),a=i(12),u=i(3);i(39);function c(t,e){if(!(this instanceof c))return new c(t,e);c._super.call(this),this.m_type=c.TYPE,this.m_radius=n.polygonRadius,this.m_vertex1=t?u.clone(t):u.zero(),this.m_vertex2=e?u.clone(e):u.zero(),this.m_vertex0=u.zero(),this.m_vertex3=u.zero(),this.m_hasVertex0=!1,this.m_hasVertex3=!1}c._super=o,c.prototype=r(c._super.prototype),c.TYPE="edge",o.TYPES[c.TYPE]=c,c.prototype._serialize=function(){return{type:this.m_type,vertex1:this.m_vertex1,vertex2:this.m_vertex2,vertex0:this.m_vertex0,vertex3:this.m_vertex3,hasVertex0:this.m_hasVertex0,hasVertex3:this.m_hasVertex3}},c._deserialize=function(t){var e=new c(t.vertex1,t.vertex2);return e.hasVertex0&&e.setPrev(t.vertex0),e.hasVertex3&&e.setNext(t.vertex3),e},c.prototype.setNext=function(t){return t?(this.m_vertex3.set(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},c.prototype.setPrev=function(t){return t?(this.m_vertex0.set(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},c.prototype._set=function(t,e){return this.m_vertex1.set(t),this.m_vertex2.set(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},c.prototype._clone=function(){var t=new c;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.set(this.m_vertex1),t.m_vertex2.set(this.m_vertex2),t.m_vertex0.set(this.m_vertex0),t.m_vertex3.set(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},c.prototype.getChildCount=function(){return 1},c.prototype.testPoint=function(t,e){return!1},c.prototype.rayCast=function(t,e,i,r){var n=a.mulTVec2(i.q,u.sub(e.p1,i.p)),o=a.mulTVec2(i.q,u.sub(e.p2,i.p)),s=u.sub(o,n),c=this.m_vertex1,h=this.m_vertex2,l=u.sub(h,c),p=u.neo(l.y,-l.x);p.normalize();var f=u.dot(p,u.sub(c,n)),d=u.dot(p,s);if(0==d)return!1;var m=f/d;if(m<0||e.maxFraction<m)return!1;var y=u.add(n,u.mul(m,s)),v=u.sub(h,c),_=u.dot(v,v);if(0==_)return!1;var b=u.dot(u.sub(y,c),v)/_;return!(b<0||1<b)&&(t.fraction=m,t.normal=f>0?a.mulVec2(i.q,p).neg():a.mulVec2(i.q,p),!0)},c.prototype.computeAABB=function(t,e,i){var r=s.mulVec2(e,this.m_vertex1),n=s.mulVec2(e,this.m_vertex2);t.combinePoints(r,n),t.extend(this.m_radius)},c.prototype.computeMass=function(t,e){t.mass=0,t.center.setCombine(.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},c.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_vertex1),t.m_vertices.push(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius}},function(t,e,i){i(11),i(217),i(218);var r=i(60).Vec2;t.exports=function t(){t.prototype.create=function(t){var e=t.name,i=t.position,n=void 0===i?r(0,0):i,o=t.scale,s=void 0===o?r(1,1):o,a=t.anchor,u=void 0===a?1:a,c=t.mass,h=void 0===c?1:c,l=t.sprite,p=void 0===l?1:l,f=t.followSprite,d=void 0===f?1:f,m=t.physics,y={};return e&&"string"==typeof e?y={name:e,position:n,scale:s,anchor:u,mass:h,sprite:p,followSprite:d,physics:void 0===m?1:m}:(y.errorMessage="name not a String",y)},t.prototype.renderPosition=function(t){var e=t.physics.getPosition();t.sprite.anchor=t.anchor,t.sprite.position.x=e.x,t.sprite.position.y=e.y+5,t.followSprite.anchor=t.anchor,t.followSprite.position.x=e.x,t.followSprite.position.y=e.y+15},t.prototype.error=function(t){console.log(t.errorMessage)},t.prototype.swapSprites=function(t,e){t.sprite.alpha=0,t.sprite=e}}},function(t,e,i){"use strict";var r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(n){return!1}}()?Object.assign:function(t,e){for(var i,a,u=s(t),c=1;c<arguments.length;c++){for(var h in i=Object(arguments[c]))n.call(i,h)&&(u[h]=i[h]);if(r){a=r(i);for(var l=0;l<a.length;l++)o.call(i,a[l])&&(u[a[l]]=i[a[l]])}}return u}},function(t,e,i){"use strict";var r=i(547),n=i(549);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){n.isString(t)&&(t=b(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(c),l=["%","/","?",";","#"].concat(h),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=i(550);function b(t,e,i){if(t&&n.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,i),r}o.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var b=t=c.join(a);if(b=b.trim(),!i&&1===t.split("#").length){var g=u.exec(b);if(g)return this.path=b,this.href=b,this.pathname=g[1],g[2]?(this.search=g[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(b);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,b=b.substr(x.length)}if(i||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===b.substr(0,2);!S||x&&y[x]||(b=b.substr(2),this.slashes=!0)}if(!y[x]&&(S||x&&!v[x])){for(var T,A,E=-1,I=0;I<p.length;I++){-1!==(O=b.indexOf(p[I]))&&(-1===E||O<E)&&(E=O)}-1!==(A=-1===E?b.lastIndexOf("@"):b.lastIndexOf("@",E))&&(T=b.slice(0,A),b=b.slice(A+1),this.auth=decodeURIComponent(T)),E=-1;for(I=0;I<l.length;I++){var O;-1!==(O=b.indexOf(l[I]))&&(-1===E||O<E)&&(E=O)}-1===E&&(E=b.length),this.host=b.slice(0,E),b=b.slice(E),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var P=this.hostname.split(/\./),B=(I=0,P.length);I<B;I++){var M=P[I];if(M&&!M.match(f)){for(var k="",R=0,D=M.length;R<D;R++)M.charCodeAt(R)>127?k+="x":k+=M[R];if(!k.match(f)){var F=P.slice(0,I),N=P.slice(I+1),L=M.match(d);L&&(F.push(L[1]),N.unshift(L[2])),N.length&&(b="/"+N.join(".")+b),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+j,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[w])for(I=0,B=h.length;I<B;I++){var z=h[I];if(-1!==b.indexOf(z)){var V=encodeURIComponent(z);V===z&&(V=escape(z)),b=b.split(z).join(V)}}var W=b.indexOf("#");-1!==W&&(this.hash=b.substr(W),b=b.slice(0,W));var X=b.indexOf("?");if(-1!==X?(this.search=b.substr(X),this.query=b.substr(X+1),e&&(this.query=_.parse(this.query)),b=b.slice(0,X)):e&&(this.search="",this.query={}),b&&(this.pathname=b),v[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var H=this.search||"";this.path=j+H}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=_.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(n.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c];"protocol"!==h&&(i[h]=t[h])}return v[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!v[t.protocol]){for(var l=Object.keys(t),p=0;p<l.length;p++){var f=l[p];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||y[t.protocol])i.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),i.pathname=d.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",_=i.search||"";i.path=m+_}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var b=i.pathname&&"/"===i.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=g||b||i.host&&t.pathname,w=x,S=i.pathname&&i.pathname.split("/")||[],T=(d=t.pathname&&t.pathname.split("/")||[],i.protocol&&!v[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(""===S[0]?S[0]=i.host:S.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),x=x&&(""===d[0]||""===S[0])),g)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search)){if(T)i.hostname=i.host=S.shift(),(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift());return i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var A=S.slice(-1)[0],E=(i.host||t.host||S.length>1)&&("."===A||".."===A)||""===A,I=0,O=S.length;O>=0;O--)"."===(A=S[O])?S.splice(O,1):".."===A?(S.splice(O,1),I++):I&&(S.splice(O,1),I--);if(!x&&!w)for(;I--;I)S.unshift("..");!x||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),E&&"/"!==S.join("/").substr(-1)&&S.push("");var C,P=""===S[0]||S[0]&&"/"===S[0].charAt(0);T&&(i.hostname=i.host=P?"":S.length?S.shift():"",(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift()));return(x=x||i.host&&S.length)&&!P&&S.unshift(""),S.length?i.pathname=S.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}i.d(e,"a",(function(){return r}))},function(t,e,i){"use strict";var r=i(85);function n(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:r.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n(t)},e.pipeFromArray=n},function(t,e,i){"use strict";e.noop=function(){}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e,i){t.call(this),this.value=e,this.scheduler=i,this._isScalar=!0,i&&(this._isScalar=!1)}return r(e,t),e.create=function(t,i){return new e(t,i)},e.dispatch=function(t){var e=t.done,i=t.value,r=t.subscriber;e?r.complete():(r.next(i),r.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var i=this.value,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{done:!1,value:i,subscriber:t});t.next(i),t.closed||t.complete()},e}(i(0).Observable);e.ScalarObservable=n},function(t,e,i){"use strict";var r=i(70);e.concatAll=function(){return r.mergeAll(1)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(38),o=i(41),s=i(5),a=i(6);e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(1===t.length){if(!n.isArray(t[0]))return t[0];t=t[0]}return new o.ArrayObservable(t).lift(new u)};var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new c(t))},t}();e.RaceOperator=u;var c=function(t){function e(e){t.call(this,e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return r(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var i=0;i<e&&!this.hasFirst;i++){var r=t[i],n=a.subscribeToResult(this,r,r,i);this.subscriptions&&this.subscriptions.push(n),this.add(n)}this.observables=null}},e.prototype.notifyNext=function(t,e,i,r,n){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==i){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(s.OuterSubscriber);e.RaceSubscriber=c},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(114),o=i(38),s=i(5),a=i(6);e.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length&&o.isArray(t[0])&&(t=t[0]),function(e){return e.lift(new u(t))}},e.onErrorResumeNextStatic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=null;return 1===t.length&&o.isArray(t[0])&&(t=t[0]),i=t.shift(),new n.FromObservable(i,null).lift(new u(t))};var u=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.nextSources))},t}(),c=function(t){function e(e,i){t.call(this,e),this.destination=e,this.nextSources=i}return r(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(a.subscribeToResult(this,t)):this.destination.complete()},e}(s.OuterSubscriber)},function(t,e,i){"use strict";var r=i(53);e.concatMap=function(t,e){return r.mergeMap(t,e,1)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.defaultIfEmpty=function(t){return void 0===t&&(t=null),function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.defaultValue))},t}(),s=function(t){function e(e,i){t.call(this,e),this.defaultValue=i,this.isEmpty=!0}return r(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(25),s=i(24);e.distinctUntilChanged=function(t,e){return function(i){return i.lift(new a(t,e))}};var a=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.compare,this.keySelector))},t}(),u=function(t){function e(e,i,r){t.call(this,e),this.keySelector=r,this.hasKey=!1,"function"===typeof i&&(this.compare=i)}return r(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=o.tryCatch(this.keySelector)(t))===s.errorObject)return this.destination.error(s.errorObject.e);var i=!1;if(this.hasKey){if((i=o.tryCatch(this.compare)(this.key,e))===s.errorObject)return this.destination.error(s.errorObject.e)}else this.hasKey=!0;!1===Boolean(i)&&(this.key=e,this.destination.next(t))},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.filter=function(t,e){return function(i){return i.lift(new o(t,e))}};var o=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(t){function e(e,i,r){t.call(this,e),this.predicate=i,this.thisArg=r,this.count=0}return r(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(t)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.find=function(t,e){if("function"!==typeof t)throw new TypeError("predicate is not a function");return function(i){return i.lift(new o(t,i,!1,e))}};var o=function(){function t(t,e,i,r){this.predicate=t,this.source=e,this.yieldIndex=i,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}();e.FindValueOperator=o;var s=function(t){function e(e,i,r,n,o){t.call(this,e),this.predicate=i,this.source=r,this.yieldIndex=n,this.thisArg=o,this.index=0}return r(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){var e=this.predicate,i=this.thisArg,r=this.index++;try{e.call(i||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(n.Subscriber);e.FindValueSubscriber=s},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(25),o=i(24),s=i(5),a=i(6);e.audit=function(t){return function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.durationSelector))},t}(),c=function(t){function e(e,i){t.call(this,e),this.durationSelector=i,this.hasValue=!1}return r(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=n.tryCatch(this.durationSelector)(t);if(e===o.errorObject)this.destination.error(o.errorObject.e);else{var i=a.subscribeToResult(this,e);i.closed?this.clearThrottle():this.add(this.throttled=i)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,i=this.throttled;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,i,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(s.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.scan=function(t,e){var i=!1;return arguments.length>=2&&(i=!0),function(r){return r.lift(new o(t,e,i))}};var o=function(){function t(t,e,i){void 0===i&&(i=!1),this.accumulator=t,this.seed=e,this.hasSeed=i}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))},t}(),s=function(t){function e(e,i,r,n){t.call(this,e),this.accumulator=i,this._seed=r,this.hasSeed=n,this.index=0}return r(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.accumulator(this.seed,t,i)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(58),s=i(42);e.takeLast=function(t){return function(e){return 0===t?new s.EmptyObservable:e.lift(new a(t))}};var a=function(){function t(t){if(this.total=t,this.total<0)throw new o.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.total))},t}(),u=function(t){function e(e,i){t.call(this,e),this.total=i,this.ring=new Array,this.count=0}return r(e,t),e.prototype._next=function(t){var e=this.ring,i=this.total,r=this.count++;e.length<i?e.push(t):e[r%i]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var i=this.count>=this.total?this.total:this.count,r=this.ring,n=0;n<i;n++){var o=e++%i;t.next(r[o])}t.complete()},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.refCount=function(){return function(t){return t.lift(new o(t))}};var o=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var i=this.connectable;i._refCount++;var r=new s(t,i),n=e.subscribe(r);return r.closed||(r.connection=i.connect()),n},t}(),s=function(t){function e(e,i){t.call(this,e),this.connectable=i}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var i=this.connection,r=t._connection;this.connection=null,!r||i&&r!==i||r.unsubscribe()}}else this.connection=null},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.switchMap=function(t,e){return function(i){return i.lift(new s(t,e))}};var s=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.project=i,this.resultSelector=r,this.index=0}return r(e,t),e.prototype._next=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,i)},e.prototype._innerSub=function(t,e,i){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,t,e,i))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,i,r,n){this.resultSelector?this._tryNotifyNext(t,e,i,r):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,i,r){var n;try{n=this.resultSelector(t,e,i,r)}catch(o){return void this.destination.error(o)}this.destination.next(n)},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=i(17),n=i(57);e.timestamp=function(t){return void 0===t&&(t=r.async),n.map((function(e){return new o(e,t.now())}))};var o=function(t,e){this.value=t,this.timestamp=e};e.Timestamp=o},function(t,e){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;e.toString=function(t){t="string"===typeof t?t:"\n";var e="";for(var i in this)"function"!==typeof this[i]&&"object"!==typeof this[i]&&(e+=i+": "+this[i]+t);return e}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=l;var n=i(7),o=i(19),s=(i(21),i(4),i(14)),a=(i(12),i(3)),u=(i(39),i(13)),c=i(34),h=i(79);function l(t,e){if(!(this instanceof l))return new l(t,e);l._super.call(this),this.m_type=l.TYPE,this.m_radius=u.polygonRadius,this.m_vertices=[],this.m_count=0,this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_isLoop=e,t&&t.length&&(e?this._createLoop(t):this._createChain(t))}l._super=c,l.prototype=o(l._super.prototype),l.TYPE="chain",c.TYPES[l.TYPE]=l,l.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices,isLoop:this.m_isLoop,prevVertex:this.m_prevVertex,nextVertex:this.m_nextVertex,hasPrevVertex:this.m_hasPrevVertex,hasNextVertex:this.m_hasNextVertex}},l._deserialize=function(t){return new l(t.vertices.map(a._deserialize),t.isLoop)},l.prototype._createLoop=function(t){r&&n.assert(0==this.m_vertices.length&&0==this.m_count),r&&n.assert(t.length>=3);for(var e=1;e<t.length;++e){var i=t[e-1],o=t[e];r&&n.assert(a.distanceSquared(i,o)>u.linearSlopSquared)}this.m_vertices.length=0,this.m_count=t.length+1;for(e=0;e<t.length;++e)this.m_vertices[e]=t[e].clone();return this.m_vertices[t.length]=t[0].clone(),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},l.prototype._createChain=function(t){r&&n.assert(0==this.m_vertices.length&&0==this.m_count),r&&n.assert(t.length>=2);for(var e=1;e<t.length;++e){var i=t[e-1],o=t[e];r&&n.assert(a.distanceSquared(i,o)>u.linearSlopSquared)}this.m_count=t.length;for(e=0;e<t.length;++e)this.m_vertices[e]=t[e].clone();return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},l.prototype._setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},l.prototype._setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},l.prototype._clone=function(){var t=new l;return t.createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},l.prototype.getChildCount=function(){return this.m_count-1},l.prototype.getChildEdge=function(t,e){r&&n.assert(0<=e&&e<this.m_count-1),t.m_type=h.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},l.prototype.getVertex=function(t){return r&&n.assert(0<=t&&t<=this.m_count),t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},l.prototype.testPoint=function(t,e){return!1},l.prototype.rayCast=function(t,e,i,o){return r&&n.assert(0<=o&&o<this.m_count),new h(this.getVertex(o),this.getVertex(o+1)).rayCast(t,e,i,0)},l.prototype.computeAABB=function(t,e,i){r&&n.assert(0<=i&&i<this.m_count);var o=s.mulVec2(e,this.getVertex(i)),a=s.mulVec2(e,this.getVertex(i+1));t.combinePoints(o,a)},l.prototype.computeMass=function(t,e){t.mass=0,t.center=a.neo(),t.I=0},l.prototype.computeDistanceProxy=function(t,e){r&&n.assert(0<=e&&e<this.m_count),t.m_buffer[0]=this.getVertex(e),t.m_buffer[1]=this.getVertex(e+1),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius}},function(t,e,i){var r=i(574).Viewport;t.exports=function(t){var e=new r({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:1e3,worldHeight:1e3,interaction:t.renderer.plugins.interaction});return e.drag().pinch().wheel().decelerate(),e}},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[i.key[o]]=r[o]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,(function(t,e,r){e&&(n[i.q.name][e]=r)})),n}},function(t,e,i){"use strict";var r=i(10);function n(t,e,i){return(n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(r.a)(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}i.d(e,"a",(function(){return n}))},function(t,e,i){"use strict";e.isObject=function(t){return null!=t&&"object"===typeof t}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e){t.call(this),this.errors=e;var i=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"");this.name=i.name="UnsubscriptionError",this.stack=i.stack,this.message=i.message}return r(e,t),e}(Error);e.UnsubscriptionError=n},function(t,e,i){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e,i){t.call(this),this.subject=e,this.subscriber=i,this.closed=!1}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(i(20).Subscription);e.SubjectSubscription=n},function(t,e,i){"use strict";e.isArrayLike=function(t){return t&&"number"===typeof t.length}},function(t,e,i){"use strict";e.isPromise=function(t){return t&&"function"!==typeof t.subscribe&&"function"===typeof t.then}},function(t,e,i){"use strict";var r=i(41);e.of=r.ArrayObservable.of},function(t,e,i){"use strict";var r=i(114);e.from=r.FromObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(38),o=i(110),s=i(111),a=i(115),u=i(238),c=i(41),h=i(239),l=i(50),p=i(0),f=i(69),d=i(65),m=function(t){function e(e,i){t.call(this,null),this.ish=e,this.scheduler=i}return r(e,t),e.create=function(t,i){if(null!=t){if("function"===typeof t[d.observable])return t instanceof p.Observable&&!i?t:new e(t,i);if(n.isArray(t))return new c.ArrayObservable(t,i);if(s.isPromise(t))return new a.PromiseObservable(t,i);if("function"===typeof t[l.iterator]||"string"===typeof t)return new u.IteratorObservable(t,i);if(o.isArrayLike(t))return new h.ArrayLikeObservable(t,i)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,i=this.scheduler;return null==i?e[d.observable]().subscribe(t):e[d.observable]().subscribe(new f.ObserveOnSubscriber(t,i,0))},e}(p.Observable);e.FromObservable=m},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(26),o=function(t){function e(e,i){t.call(this),this.promise=e,this.scheduler=i}return r(e,t),e.create=function(t,i){return new e(t,i)},e.prototype._subscribe=function(t){var e=this,i=this.promise,r=this.scheduler;if(null==r)this._isScalar?t.closed||(t.next(this.value),t.complete()):i.then((function(i){e.value=i,e._isScalar=!0,t.closed||(t.next(i),t.complete())}),(function(e){t.closed||t.error(e)})).then(null,(function(t){n.root.setTimeout((function(){throw t}))}));else if(this._isScalar){if(!t.closed)return r.schedule(s,0,{value:this.value,subscriber:t})}else i.then((function(i){e.value=i,e._isScalar=!0,t.closed||t.add(r.schedule(s,0,{value:i,subscriber:t}))}),(function(e){t.closed||t.add(r.schedule(a,0,{err:e,subscriber:t}))})).then(null,(function(t){n.root.setTimeout((function(){throw t}))}))},e}(i(0).Observable);function s(t){var e=t.value,i=t.subscriber;i.closed||(i.next(e),i.complete())}function a(t){var e=t.err,i=t.subscriber;i.closed||i.error(e)}e.PromiseObservable=o},function(t,e,i){"use strict";e.identity=function(t){return t}},function(t,e,i){"use strict";var r=i(289);e.timer=r.TimerObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(26),o=i(25),s=i(24),a=i(0),u=i(2),c=i(57);function h(){if(n.root.XMLHttpRequest)return new n.root.XMLHttpRequest;if(n.root.XDomainRequest)return new n.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function l(t,e){return void 0===e&&(e=null),new _({method:"GET",url:t,headers:e})}function p(t,e,i){return new _({method:"POST",url:t,body:e,headers:i})}function f(t,e){return new _({method:"DELETE",url:t,headers:e})}function d(t,e,i){return new _({method:"PUT",url:t,body:e,headers:i})}function m(t,e,i){return new _({method:"PATCH",url:t,body:e,headers:i})}e.ajaxGet=l,e.ajaxPost=p,e.ajaxDelete=f,e.ajaxPut=d,e.ajaxPatch=m;var y=c.map((function(t,e){return t.response}));function v(t,e){return y(new _({method:"GET",url:t,responseType:"json",headers:e}))}e.ajaxGetJSON=v;var _=function(t){function e(e){t.call(this);var i={async:!0,createXHR:function(){return this.crossDomain?h.call(this):function(){if(n.root.XMLHttpRequest)return new n.root.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=0;i<3;i++)try{if(t=e[i],new n.root.ActiveXObject(t))break}catch(r){}return new n.root.ActiveXObject(t)}catch(r){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"===typeof e)i.url=e;else for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);this.request=i}return r(e,t),e.prototype._subscribe=function(t){return new b(t,this.request)},e.create=function(){var t=function(t){return new e(t)};return t.get=l,t.post=p,t.delete=f,t.put=d,t.patch=m,t.getJSON=v,t}(),e}(a.Observable);e.AjaxObservable=_;var b=function(t){function e(e,i){t.call(this,e),this.request=i,this.done=!1;var r=i.headers=i.headers||{};i.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||n.root.FormData&&i.body instanceof n.root.FormData||"undefined"===typeof i.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),i.body=this.serializeBody(i.body,i.headers["Content-Type"]),this.send()}return r(e,t),e.prototype.next=function(t){this.done=!0;var e=this.xhr,i=this.request,r=this.destination,n=new g(t,e,i);r.next(n)},e.prototype.send=function(){var t=this.request,e=this.request,i=e.user,r=e.method,n=e.url,a=e.async,u=e.password,c=e.headers,h=e.body,l=t.createXHR,p=o.tryCatch(l).call(t);if(p===s.errorObject)this.error(s.errorObject.e);else{this.xhr=p,this.setupEvents(p,t);if((i?o.tryCatch(p.open).call(p,r,n,a,i,u):o.tryCatch(p.open).call(p,r,n,a))===s.errorObject)return this.error(s.errorObject.e),null;if(a&&(p.timeout=t.timeout,p.responseType=t.responseType),"withCredentials"in p&&(p.withCredentials=!!t.withCredentials),this.setHeaders(p,c),(h?o.tryCatch(p.send).call(p,h):o.tryCatch(p.send).call(p))===s.errorObject)return this.error(s.errorObject.e),null}return p},e.prototype.serializeBody=function(t,e){if(!t||"string"===typeof t)return t;if(n.root.FormData&&t instanceof n.root.FormData)return t;if(e){var i=e.indexOf(";");-1!==i&&(e=e.substring(0,i))}switch(e){case"application/x-www-form-urlencoded":return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&");case"application/json":return JSON.stringify(t);default:return t}},e.prototype.setHeaders=function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setRequestHeader(i,e[i])},e.prototype.setupEvents=function(t,e){var i=e.progressSubscriber;function r(t){var e=r,i=e.subscriber,n=e.progressSubscriber,o=e.request;n&&n.error(t),i.error(new S(this,o))}if(t.ontimeout=r,r.request=e,r.subscriber=this,r.progressSubscriber=i,t.upload&&"withCredentials"in t){var o,s;if(i)o=function(t){o.progressSubscriber.next(t)},n.root.XDomainRequest?t.onprogress=o:t.upload.onprogress=o,o.progressSubscriber=i;s=function(t){var e=s,i=e.progressSubscriber,r=e.subscriber,n=e.request;i&&i.error(t),r.error(new x("ajax error",this,n))},t.onerror=s,s.request=e,s.subscriber=this,s.progressSubscriber=i}function a(t){var e=a,i=e.subscriber,r=e.progressSubscriber,n=e.request;if(4===this.readyState){var o=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;0===o&&(o=s?200:0),200<=o&&o<300?(r&&r.complete(),i.next(t),i.complete()):(r&&r.error(t),i.error(new x("ajax error "+o,this,n)))}}t.onreadystatechange=a,a.subscriber=this,a.progressSubscriber=i,a.request=e},e.prototype.unsubscribe=function(){var e=this.done,i=this.xhr;!e&&i&&4!==i.readyState&&"function"===typeof i.abort&&i.abort(),t.prototype.unsubscribe.call(this)},e}(u.Subscriber);e.AjaxSubscriber=b;var g=function(t,e,i){this.originalEvent=t,this.xhr=e,this.request=i,this.status=e.status,this.responseType=e.responseType||i.responseType,this.response=w(this.responseType,e)};e.AjaxResponse=g;var x=function(t){function e(e,i,r){t.call(this,e),this.message=e,this.xhr=i,this.request=r,this.status=i.status,this.responseType=i.responseType||r.responseType,this.response=w(this.responseType,i)}return r(e,t),e}(Error);function w(t,e){switch(t){case"json":return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null");case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}e.AjaxError=x;var S=function(t){function e(e,i){t.call(this,"ajax timeout",e,i)}return r(e,t),e}(x);e.AjaxTimeoutError=S},function(t,e,i){"use strict";var r=i(297),n=i(298);e.queue=new n.QueueScheduler(r.QueueAction)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.buffer=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.closingNotifier))},t}(),a=function(t){function e(e,i){t.call(this,e),this.buffer=[],this.add(o.subscribeToResult(this,i))}return r(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,i,r,n){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.bufferCount=function(t,e){return void 0===e&&(e=null),function(i){return i.lift(new o(t,e))}};var o=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?a:s}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),s=function(t){function e(e,i){t.call(this,e),this.bufferSize=i,this.buffer=[]}return r(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(n.Subscriber),a=function(t){function e(e,i,r){t.call(this,e),this.bufferSize=i,this.startBufferEvery=r,this.buffers=[],this.count=0}return r(e,t),e.prototype._next=function(t){var e=this.bufferSize,i=this.startBufferEvery,r=this.buffers,n=this.count;this.count++,n%i===0&&r.push([]);for(var o=r.length;o--;){var s=r[o];s.push(t),s.length===e&&(r.splice(o,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,i=this.destination;e.length>0;){var r=e.shift();r.length>0&&i.next(r)}t.prototype._complete.call(this)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(17),o=i(2),s=i(37);e.bufferTime=function(t){var e=arguments.length,i=n.async;s.isScheduler(arguments[arguments.length-1])&&(i=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var o=Number.POSITIVE_INFINITY;return e>=3&&(o=arguments[2]),function(e){return e.lift(new a(t,r,o,i))}};var a=function(){function t(t,e,i,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=i,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),u=function(){this.buffer=[]},c=function(t){function e(e,i,r,n,o){t.call(this,e),this.bufferTimeSpan=i,this.bufferCreationInterval=r,this.maxBufferSize=n,this.scheduler=o,this.contexts=[];var s=this.openContext();if(this.timespanOnly=null==r||r<0,this.timespanOnly){var a={subscriber:this,context:s,bufferTimeSpan:i};this.add(s.closeAction=o.schedule(h,i,a))}else{var u={subscriber:this,context:s},c={bufferTimeSpan:i,bufferCreationInterval:r,subscriber:this,scheduler:o};this.add(s.closeAction=o.schedule(p,i,u)),this.add(o.schedule(l,r,c))}}return r(e,t),e.prototype._next=function(t){for(var e,i=this.contexts,r=i.length,n=0;n<r;n++){var o=i[n],s=o.buffer;s.push(t),s.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,i=this.destination;e.length>0;){var r=e.shift();i.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var i=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:i};this.add(t.closeAction=this.scheduler.schedule(h,i,r))}},e.prototype.openContext=function(){var t=new u;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(o.Subscriber);function h(t){var e=t.subscriber,i=t.context;i&&e.closeContext(i),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function l(t){var e=t.bufferCreationInterval,i=t.bufferTimeSpan,r=t.subscriber,n=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=n.schedule(p,i,{subscriber:r,context:o})),this.schedule(t,e))}function p(t){var e=t.subscriber,i=t.context;e.closeContext(i)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(20),o=i(6),s=i(5);e.bufferToggle=function(t,e){return function(i){return i.lift(new a(t,e))}};var a=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.openings,this.closingSelector))},t}(),u=function(t){function e(e,i,r){t.call(this,e),this.openings=i,this.closingSelector=r,this.contexts=[],this.add(o.subscribeToResult(this,i))}return r(e,t),e.prototype._next=function(t){for(var e=this.contexts,i=e.length,r=0;r<i;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var i=this.contexts;i.length>0;){var r=i.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var i=e.shift();this.destination.next(i.buffer),i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,i,r,n){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(i){this._error(i)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var i=t.buffer,r=t.subscription;this.destination.next(i),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,i=new n.Subscription,r={buffer:[],subscription:i};e.push(r);var s=o.subscribeToResult(this,t,r);!s||s.closed?this.closeBuffer(r):(s.context=r,this.add(s),i.add(s))},e}(s.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(20),o=i(25),s=i(24),a=i(5),u=i(6);e.bufferWhen=function(t){return function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,i){t.call(this,e),this.closingSelector=i,this.subscribing=!1,this.openBuffer()}return r(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,i,r,n){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var i=o.tryCatch(this.closingSelector)();i===s.errorObject?this.error(s.errorObject.e):(t=new n.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(u.subscribeToResult(this,i)),this.subscribing=!1)},e}(a.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.catchError=function(t){return function(e){var i=new s(t),r=e.lift(i);return i.caught=r}};var s=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.selector,this.caught))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.selector=i,this.caught=r}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=void 0;try{i=this.selector(e,this.caught)}catch(r){return void t.prototype.error.call(this,r)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,i))}},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=i(68);e.combineAll=function(t){return function(e){return e.lift(new r.CombineLatestOperator(t))}}},function(t,e,i){"use strict";var r=i(51),n=i(51);e.concatStatic=n.concat,e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(r.concat.apply(void 0,[e].concat(t)))}}},function(t,e,i){"use strict";var r=i(90);e.concatMapTo=function(t,e){return r.concatMap((function(){return t}),e)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.count=function(t){return function(e){return e.lift(new o(t,e))}};var o=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.source))},t}(),s=function(t){function e(e,i,r){t.call(this,e),this.predicate=i,this.source=r,this.count=0,this.index=0}return r(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(i){return void this.destination.error(i)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.dematerialize=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(e){t.call(this,e)}return r(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.debounce=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector))},t}(),a=function(t){function e(e,i){t.call(this,e),this.durationSelector=i,this.hasValue=!1,this.durationSubscription=null}return r(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var i=this.durationSubscription;this.value=t,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),(i=o.subscribeToResult(this,e)).closed||this.add(this.durationSubscription=i)},e.prototype.notifyNext=function(t,e,i,r,n){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,i=this.durationSubscription;i&&(this.durationSubscription=null,i.unsubscribe(),this.remove(i)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(17);e.debounceTime=function(t,e){return void 0===e&&(e=o.async),function(i){return i.lift(new s(t,e))}};var s=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.dueTime=i,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return r(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(n.Subscriber);function u(t){t.debouncedNext()}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(17),o=i(72),s=i(2),a=i(52);e.delay=function(t,e){void 0===e&&(e=n.async);var i=o.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new u(i,e))}};var u=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.delay,this.scheduler))},t}(),c=function(t){function e(e,i,r){t.call(this,e),this.delay=i,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return r(e,t),e.dispatch=function(t){for(var e=t.source,i=e.queue,r=t.scheduler,n=t.destination;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(n);if(i.length>0){var o=Math.max(0,i[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,i=new h(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(a.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(a.Notification.createComplete())},e}(s.Subscriber),h=function(t,e){this.time=t,this.notification=e}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(0),s=i(5),a=i(6);e.delayWhen=function(t,e){return e?function(i){return new h(i,e).lift(new u(t))}:function(e){return e.lift(new u(t))}};var u=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.delayDurationSelector))},t}(),c=function(t){function e(e,i){t.call(this,e),this.delayDurationSelector=i,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return r(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.destination.next(t),this.removeSubscription(n),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),i=null;return-1!==e&&(i=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),i},e.prototype.tryDelay=function(t,e){var i=a.subscribeToResult(this,t,e);i&&!i.closed&&(this.add(i),this.delayNotifierSubscriptions.push(i)),this.values.push(e)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(s.OuterSubscriber),h=function(t){function e(e,i){t.call(this),this.source=e,this.subscriptionDelay=i}return r(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new l(t,this.source))},e}(o.Observable),l=function(t){function e(e,i){t.call(this),this.parent=e,this.source=i,this.sourceSubscribed=!1}return r(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6),s=i(340);e.distinct=function(t,e){return function(i){return i.lift(new a(t,e))}};var a=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.keySelector,this.flushes))},t}(),u=function(t){function e(e,i,r){t.call(this,e),this.keySelector=i,this.values=new s.Set,r&&this.add(o.subscribeToResult(this,r))}return r(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,i=this.destination;try{e=this.keySelector(t)}catch(r){return void i.error(r)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var i=this.values;i.has(t)||(i.add(t),this.destination.next(e))},e}(n.OuterSubscriber);e.DistinctSubscriber=u},function(t,e,i){"use strict";var r=i(92);e.distinctUntilKeyChanged=function(t,e){return r.distinctUntilChanged((function(i,r){return e?e(i[t],r[t]):i[t]===r[t]}))}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.tap=function(t,e,i){return function(r){return r.lift(new o(t,e,i))}};var o=function(){function t(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(t){function e(e,i,r,o){t.call(this,e);var s=new n.Subscriber(i,r,o);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return r(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.exhaust=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(t){function e(e){t.call(this,e),this.hasCompleted=!1,this.hasSubscription=!1}return r(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(o.subscribeToResult(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.exhaustMap=function(t,e){return function(i){return i.lift(new s(t,e))}};var s=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.project=i,this.resultSelector=r,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return r(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,i=this.destination;try{var r=this.project(t,e);this.hasSubscription=!0,this.add(o.subscribeToResult(this,r,t,e))}catch(n){i.error(n)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,i,r,n){var o=this.resultSelector,s=this.destination;o?this.trySelectResult(t,e,i,r):s.next(e)},e.prototype.trySelectResult=function(t,e,i,r){var n=this.resultSelector,o=this.destination;try{var s=n(t,e,i,r);o.next(s)}catch(a){o.error(a)}},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(25),o=i(24),s=i(5),a=i(6);e.expand=function(t,e,i){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new u(t,e,i))}};var u=function(){function t(t,e,i){this.project=t,this.concurrent=e,this.scheduler=i}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.concurrent,this.scheduler))},t}();e.ExpandOperator=u;var c=function(t){function e(e,i,r,n){t.call(this,e),this.project=i,this.concurrent=r,this.scheduler=n,this.index=0,this.active=0,this.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(this.buffer=[])}return r(e,t),e.dispatch=function(t){var e=t.subscriber,i=t.result,r=t.value,n=t.index;e.subscribeToProjection(i,r,n)},e.prototype._next=function(t){var i=this.destination;if(i.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){i.next(t);var s=n.tryCatch(this.project)(t,r);if(s===o.errorObject)i.error(o.errorObject.e);else if(this.scheduler){var a={subscriber:this,result:s,value:t,index:r};this.add(this.scheduler.schedule(e.dispatch,0,a))}else this.subscribeToProjection(s,t,r)}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,i){this.active++,this.add(a.subscribeToResult(this,t,e,i))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i,r,n){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(s.OuterSubscriber);e.ExpandSubscriber=c},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(58);e.elementAt=function(t,e){return function(i){return i.lift(new s(t,e))}};var s=function(){function t(t,e){if(this.index=t,this.defaultValue=e,t<0)throw new o.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.index,this.defaultValue))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.index=i,this.defaultValue=r}return r(e,t),e.prototype._next=function(t){0===this.index--&&(this.destination.next(t),this.destination.complete())},e.prototype._complete=function(){var t=this.destination;this.index>=0&&("undefined"!==typeof this.defaultValue?t.next(this.defaultValue):t.error(new o.ArgumentOutOfRangeError)),t.complete()},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(20);e.finalize=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.callback))},t}(),a=function(t){function e(e,i){t.call(this,e),this.add(new o.Subscription(i))}return r(e,t),e}(n.Subscriber)},function(t,e,i){"use strict";var r=i(94);e.findIndex=function(t,e){return function(i){return i.lift(new r.FindValueOperator(t,i,!0,e))}}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(75);e.first=function(t,e,i){return function(r){return r.lift(new s(t,e,i,r))}};var s=function(){function t(t,e,i,r){this.predicate=t,this.resultSelector=e,this.defaultValue=i,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),a=function(t){function e(e,i,r,n,o){t.call(this,e),this.predicate=i,this.resultSelector=r,this.defaultValue=n,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return r(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var i;try{i=this.predicate(t,e,this.source)}catch(r){return void this.destination.error(r)}i&&this._emit(t,e)},e.prototype._emit=function(t,e){this.resultSelector?this._tryResultSelector(t,e):this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var i;try{i=this.resultSelector(t,e)}catch(r){return void this.destination.error(r)}this._emitFinal(i)},e.prototype._emitFinal=function(t){var e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||"undefined"===typeof this.defaultValue?this.hasCompleted||t.error(new o.EmptyError):(t.next(this.defaultValue),t.complete())},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(20),s=i(0),a=i(23),u=i(367),c=i(369);e.groupBy=function(t,e,i,r){return function(n){return n.lift(new h(t,e,i,r))}};var h=function(){function t(t,e,i,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=i,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),l=function(t){function e(e,i,r,n,o){t.call(this,e),this.keySelector=i,this.elementSelector=r,this.durationSelector=n,this.subjectSelector=o,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return r(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(i){return void this.error(i)}this._group(t,e)},e.prototype._group=function(t,e){var i=this.groups;i||(i=this.groups="string"===typeof e?new c.FastMap:new u.Map);var r,n=i.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(h){this.error(h)}else r=t;if(!n){n=this.subjectSelector?this.subjectSelector():new a.Subject,i.set(e,n);var o=new f(e,n,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new f(e,n))}catch(h){return void this.error(h)}this.add(s.subscribe(new p(e,n,this)))}}n.closed||n.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach((function(e,i){e.error(t)})),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach((function(t,e){t.complete()})),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(n.Subscriber),p=function(t){function e(e,i,r){t.call(this,i),this.key=e,this.group=i,this.parent=r}return r(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(n.Subscriber),f=function(t){function e(e,i,r){t.call(this),this.key=e,this.groupSubject=i,this.refCountSubscription=r}return r(e,t),e.prototype._subscribe=function(t){var e=new o.Subscription,i=this.refCountSubscription,r=this.groupSubject;return i&&!i.closed&&e.add(new d(i)),e.add(r.subscribe(t)),e},e}(s.Observable);e.GroupedObservable=f;var d=function(t){function e(e){t.call(this),this.parent=e,e.count++}return r(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(o.Subscription)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(85);e.ignoreElements=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype._next=function(t){o.noop()},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.isEmpty=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(e){t.call(this,e)}return r(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=i(17),n=i(95),o=i(117);e.auditTime=function(t,e){return void 0===e&&(e=r.async),n.audit((function(){return o.timer(t,e)}))}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(75);e.last=function(t,e,i){return function(r){return r.lift(new s(t,e,i,r))}};var s=function(){function t(t,e,i,r){this.predicate=t,this.resultSelector=e,this.defaultValue=i,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),a=function(t){function e(e,i,r,n,o){t.call(this,e),this.predicate=i,this.resultSelector=r,this.defaultValue=n,this.source=o,this.hasValue=!1,this.index=0,"undefined"!==typeof n&&(this.lastValue=n,this.hasValue=!0)}return r(e,t),e.prototype._next=function(t){var e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryPredicate=function(t,e){var i;try{i=this.predicate(t,e,this.source)}catch(r){return void this.destination.error(r)}if(i){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryResultSelector=function(t,e){var i;try{i=this.resultSelector(t,e)}catch(r){return void this.destination.error(r)}this.lastValue=i,this.hasValue=!0},e.prototype._complete=function(){var t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new o.EmptyError)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.every=function(t,e){return function(i){return i.lift(new o(t,e,i))}};var o=function(){function t(t,e,i){this.predicate=t,this.thisArg=e,this.source=i}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg,this.source))},t}(),s=function(t){function e(e,i,r,n){t.call(this,e),this.predicate=i,this.thisArg=r,this.source=n,this.index=0,this.thisArg=r||this}return r(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(i){return void this.destination.error(i)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.mapTo=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.value))},t}(),s=function(t){function e(e,i){t.call(this,e),this.value=i}return r(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(52);e.materialize=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new a(t))},t}(),a=function(t){function e(e){t.call(this,e)}return r(e,t),e.prototype._next=function(t){this.destination.next(o.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(o.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(o.Notification.createComplete()),t.complete()},e}(n.Subscriber)},function(t,e,i){"use strict";var r=i(59);e.max=function(t){var e="function"===typeof t?function(e,i){return t(e,i)>0?e:i}:function(t,e){return t>e?t:e};return r.reduce(e)}},function(t,e,i){"use strict";var r=i(71),n=i(71);e.mergeStatic=n.merge,e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(r.merge.apply(void 0,[e].concat(t)))}}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.mergeMapTo=function(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"number"===typeof e&&(i=e,e=null),function(r){return r.lift(new s(t,e,i))}};var s=function(){function t(t,e,i){void 0===i&&(i=Number.POSITIVE_INFINITY),this.ish=t,this.resultSelector=e,this.concurrent=i}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.ish,this.resultSelector,this.concurrent))},t}();e.MergeMapToOperator=s;var a=function(t){function e(e,i,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this,e),this.ish=i,this.resultSelector=r,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.resultSelector,i=this.index++,r=this.ish,n=this.destination;this.active++,this._innerSub(r,n,e,t,i)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,i,r,n){this.add(o.subscribeToResult(this,t,r,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i,r,n){var o=this.resultSelector,s=this.destination;o?this.trySelectResult(t,e,i,r):s.next(e)},e.prototype.trySelectResult=function(t,e,i,r){var n,o=this.resultSelector,s=this.destination;try{n=o(t,e,i,r)}catch(a){return void s.error(a)}s.next(n)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(n.OuterSubscriber);e.MergeMapToSubscriber=a},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(25),o=i(24),s=i(6),a=i(5);e.mergeScan=function(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),function(r){return r.lift(new u(t,e,i))}};var u=function(){function t(t,e,i){this.accumulator=t,this.seed=e,this.concurrent=i}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.accumulator,this.seed,this.concurrent))},t}();e.MergeScanOperator=u;var c=function(t){function e(e,i,r,n){t.call(this,e),this.accumulator=i,this.acc=r,this.concurrent=n,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,i=n.tryCatch(this.accumulator)(this.acc,t),r=this.destination;i===o.errorObject?r.error(o.errorObject.e):(this.active++,this._innerSub(i,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,i){this.add(s.subscribeToResult(this,t,e,i))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(t,e,i,r,n){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(a.OuterSubscriber);e.MergeScanSubscriber=c},function(t,e,i){"use strict";var r=i(59);e.min=function(t){var e="function"===typeof t?function(e,i){return t(e,i)<0?e:i}:function(t,e){return t<e?t:e};return r.reduce(e)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(0),s=i(2),a=i(20),u=i(98),c=function(t){function e(e,i){t.call(this),this.source=e,this.subjectFactory=i,this._refCount=0,this._isComplete=!1}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.Subscription).add(this.source.subscribe(new l(this.getSubject(),this))),t.closed?(this._connection=null,t=a.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return u.refCount()(this)},e}(o.Observable);e.ConnectableObservable=c;var h=c.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}};var l=function(t){function e(e,i){t.call(this,e),this.connectable=i}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(n.SubjectSubscriber),p=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var i=this.connectable;i._refCount++;var r=new p(t,i),n=e.subscribe(r);return r.closed||(r.connection=i.connect()),n}}(),function(t){function e(e,i){t.call(this,e),this.connectable=i}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var i=this.connection,r=t._connection;this.connection=null,!r||i&&r!==i||r.unsubscribe()}}else this.connection=null},e}(s.Subscriber))},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.pairwise=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(e){t.call(this,e),this.hasPrev=!1}return r(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(n.Subscriber)},function(t,e,i){"use strict";var r=i(414),n=i(93);e.partition=function(t,e){return function(i){return[n.filter(t,e)(i),n.filter(r.not(t,e))(i)]}}},function(t,e,i){"use strict";var r=i(57);function n(t,e){return function(i){for(var r=i,n=0;n<e;n++){var o=r[t[n]];if("undefined"===typeof o)return;r=o}return r}}e.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=t.length;if(0===i)throw new Error("list of properties cannot be empty.");return function(e){return r.map(n(t,i))(e)}}},function(t,e,i){"use strict";var r=i(23),n=i(45);e.publish=function(t){return t?n.multicast((function(){return new r.Subject}),t):n.multicast(new r.Subject)}},function(t,e,i){"use strict";var r=i(164),n=i(45);e.publishBehavior=function(t){return function(e){return n.multicast(new r.BehaviorSubject(t))(e)}}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(66),s=function(t){function e(e){t.call(this),this._value=e}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(n.Subject);e.BehaviorSubject=s},function(t,e,i){"use strict";var r=i(74),n=i(45);e.publishReplay=function(t,e,i,o){i&&"function"!==typeof i&&(o=i);var s="function"===typeof i?i:void 0,a=new r.ReplaySubject(t,e,o);return function(t){return n.multicast((function(){return a}),s)(t)}}},function(t,e,i){"use strict";var r=i(67),n=i(45);e.publishLast=function(){return function(t){return n.multicast(new r.AsyncSubject)(t)}}},function(t,e,i){"use strict";var r=i(38),n=i(88);e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return 1===t.length&&r.isArray(t[0])&&(t=t[0]),e.lift.call(n.race.apply(void 0,[e].concat(t)))}}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(42);e.repeat=function(t){return void 0===t&&(t=-1),function(e){return 0===t?new o.EmptyObservable:t<0?e.lift(new s(-1,e)):e.lift(new s(t-1,e))}};var s=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.count,this.source))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.count=i,this.source=r}return r(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,i=this.count;if(0===i)return t.prototype.complete.call(this);i>-1&&(this.count=i-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(25),s=i(24),a=i(5),u=i(6);e.repeatWhen=function(t){return function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,e))},t}(),h=function(t){function e(e,i,r){t.call(this,e),this.notifier=i,this.source=r,this.sourceIsBeingSubscribedTo=!0}return r(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this.notifications,i=this.retries,r=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,t.prototype._unsubscribeAndRecycle.call(this),this.notifications=e,this.retries=i,this.retriesSubscription=r,this},e.prototype.subscribeToRetries=function(){this.notifications=new n.Subject;var e=o.tryCatch(this.notifier)(this.notifications);if(e===s.errorObject)return t.prototype.complete.call(this);this.retries=e,this.retriesSubscription=u.subscribeToResult(this,e)},e}(a.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.retry=function(t){return void 0===t&&(t=-1),function(e){return e.lift(new o(t,e))}};var o=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.count,this.source))},t}(),s=function(t){function e(e,i,r){t.call(this,e),this.count=i,this.source=r}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(25),s=i(24),a=i(5),u=i(6);e.retryWhen=function(t){return function(e){return e.lift(new c(t,e))}};var c=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,this.source))},t}(),h=function(t){function e(e,i,r){t.call(this,e),this.notifier=i,this.source=r}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var i=this.errors,r=this.retries,a=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(i=new n.Subject,(r=o.tryCatch(this.notifier)(i))===s.errorObject)return t.prototype.error.call(this,s.errorObject.e);a=u.subscribeToResult(this,r)}this._unsubscribeAndRecycle(),this.errors=i,this.retries=r,this.retriesSubscription=a,i.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,i,r,n){var o=this.errors,s=this.retries,a=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=o,this.retries=s,this.retriesSubscription=a,this.source.subscribe(this)},e}(a.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.sample=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var i=new a(t),r=e.subscribe(i);return r.add(o.subscribeToResult(i,this.notifier)),r},t}(),a=function(t){function e(){t.apply(this,arguments),this.hasValue=!1}return r(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,i,r,n){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(17);e.sampleTime=function(t,e){return void 0===e&&(e=o.async),function(i){return i.lift(new s(t,e))}};var s=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.period,this.scheduler))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.period=i,this.scheduler=r,this.hasValue=!1,this.add(r.schedule(u,i,{subscriber:this,period:i}))}return r(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(n.Subscriber);function u(t){var e=t.subscriber,i=t.period;e.notifyNext(),this.schedule(t,i)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(25),s=i(24);e.sequenceEqual=function(t,e){return function(i){return i.lift(new a(t,e))}};var a=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.compareTo,this.comparor))},t}();e.SequenceEqualOperator=a;var u=function(t){function e(e,i,r){t.call(this,e),this.compareTo=i,this.comparor=r,this._a=[],this._b=[],this._oneComplete=!1,this.add(i.subscribe(new c(e,this)))}return r(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,i=this.comparor;t.length>0&&e.length>0;){var r=t.shift(),n=e.shift(),a=!1;i?(a=o.tryCatch(i)(r,n))===s.errorObject&&this.destination.error(s.errorObject.e):a=r===n,a||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e}(n.Subscriber);e.SequenceEqualSubscriber=u;var c=function(t){function e(e,i){t.call(this,e),this.parent=i}return r(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t)},e.prototype._complete=function(){this.parent._complete()},e}(n.Subscriber)},function(t,e,i){"use strict";var r=i(45),n=i(98),o=i(23);function s(){return new o.Subject}e.share=function(){return function(t){return n.refCount()(r.multicast(s)(t))}}},function(t,e,i){"use strict";var r=i(74);e.shareReplay=function(t,e,i){return function(n){return n.lift(function(t,e,i){var n,o,s=0,a=!1,u=!1;return function(c){s++,n&&!a||(a=!1,n=new r.ReplaySubject(t,e,i),o=c.subscribe({next:function(t){n.next(t)},error:function(t){a=!0,n.error(t)},complete:function(){u=!0,n.complete()}}));var h=n.subscribe(this);return function(){s--,h.unsubscribe(),o&&0===s&&u&&o.unsubscribe()}}}(t,e,i))}}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(75);e.single=function(t){return function(e){return e.lift(new s(t,e))}};var s=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.source))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.predicate=i,this.source=r,this.seenValue=!1,this.index=0}return r(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new o.EmptyError)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.skip=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.total))},t}(),s=function(t){function e(e,i){t.call(this,e),this.total=i,this.count=0}return r(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(58);e.skipLast=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new o.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new n.Subscriber(t)):e.subscribe(new a(t,this._skipCount))},t}(),a=function(t){function e(e,i){t.call(this,e),this._skipCount=i,this._count=0,this._ring=new Array(i)}return r(e,t),e.prototype._next=function(t){var e=this._skipCount,i=this._count++;if(i<e)this._ring[i]=t;else{var r=i%e,n=this._ring,o=n[r];n[r]=t,this.destination.next(o)}},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.skipUntil=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier))},t}(),a=function(t){function e(e,i){t.call(this,e),this.hasValue=!1,this.isInnerStopped=!1,this.add(o.subscribeToResult(this,i))}return r(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype._complete=function(){this.isInnerStopped?t.prototype._complete.call(this):this.unsubscribe()},e.prototype.notifyNext=function(t,e,i,r,n){this.hasValue=!0},e.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&t.prototype._complete.call(this)},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.skipWhile=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate))},t}(),s=function(t){function e(e,i){t.call(this,e),this.predicate=i,this.skipping=!0,this.index=0}return r(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(i){this.destination.error(i)}},e}(n.Subscriber)},function(t,e,i){"use strict";var r=i(41),n=i(86),o=i(42),s=i(51),a=i(37);e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var i=t[t.length-1];a.isScheduler(i)?t.pop():i=null;var u=t.length;return 1===u?s.concat(new n.ScalarObservable(t[0],i),e):u>1?s.concat(new r.ArrayObservable(t,i),e):s.concat(new o.EmptyObservable(i),e)}}},function(t,e,i){"use strict";var r=i(465),n=i(467);e.asap=new n.AsapScheduler(r.AsapAction)},function(t,e,i){"use strict";var r=i(99),n=i(116);e.switchAll=function(){return r.switchMap(n.identity)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.switchMapTo=function(t,e){return function(i){return i.lift(new s(t,e))}};var s=function(){function t(t,e){this.observable=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.observable,this.resultSelector))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.inner=i,this.resultSelector=r,this.index=0}return r(e,t),e.prototype._next=function(t){var e=this.innerSubscription;e&&e.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,this.inner,t,this.index++))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,i,r,n){var o=this.resultSelector,s=this.destination;o?this.tryResultSelector(t,e,i,r):s.next(e)},e.prototype.tryResultSelector=function(t,e,i,r){var n,o=this.resultSelector,s=this.destination;try{n=o(t,e,i,r)}catch(a){return void s.error(a)}s.next(n)},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(58),s=i(42);e.take=function(t){return function(e){return 0===t?new s.EmptyObservable:e.lift(new a(t))}};var a=function(){function t(t){if(this.total=t,this.total<0)throw new o.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.total))},t}(),u=function(t){function e(e,i){t.call(this,e),this.total=i,this.count=0}return r(e,t),e.prototype._next=function(t){var e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.takeUntil=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier))},t}(),a=function(t){function e(e,i){t.call(this,e),this.notifier=i,this.add(o.subscribeToResult(this,i))}return r(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.complete()},e.prototype.notifyComplete=function(){},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2);e.takeWhile=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate))},t}(),s=function(t){function e(e,i){t.call(this,e),this.predicate=i,this.index=0}return r(e,t),e.prototype._next=function(t){var e,i=this.destination;try{e=this.predicate(t,this.index++)}catch(r){return void i.error(r)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var i=this.destination;Boolean(e)?i.next(t):i.complete()},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(17),s=i(76);e.throttleTime=function(t,e,i){return void 0===e&&(e=o.async),void 0===i&&(i=s.defaultThrottleConfig),function(r){return r.lift(new a(t,e,i.leading,i.trailing))}};var a=function(){function t(t,e,i,r){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),u=function(t){function e(e,i,r,n,o){t.call(this,e),this.duration=i,this.scheduler=r,this.leading=n,this.trailing=o,this._hasTrailingValue=!1,this._trailingValue=null}return r(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(c,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(n.Subscriber);function c(t){t.subscriber.clearThrottle()}},function(t,e,i){"use strict";var r=i(17),n=i(191);e.TimeInterval=n.TimeInterval,e.timeInterval=function(t){return void 0===t&&(t=r.async),n.timeInterval(t)(this)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(17);e.timeInterval=function(t){return void 0===t&&(t=o.async),function(e){return e.lift(new a(t))}};var s=function(t,e){this.value=t,this.interval=e};e.TimeInterval=s;var a=function(){function t(t){this.scheduler=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.scheduler))},t}(),u=function(t){function e(e,i){t.call(this,e),this.scheduler=i,this.lastTime=0,this.lastTime=i.now()}return r(e,t),e.prototype._next=function(t){var e=this.scheduler.now(),i=e-this.lastTime;this.lastTime=e,this.destination.next(new s(t,i))},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(17),o=i(72),s=i(2),a=i(193);e.timeout=function(t,e){void 0===e&&(e=n.async);var i=o.isDate(t),r=i?+t-e.now():Math.abs(t);return function(t){return t.lift(new u(r,i,e,new a.TimeoutError))}};var u=function(){function t(t,e,i,r){this.waitFor=t,this.absoluteTimeout=e,this.scheduler=i,this.errorInstance=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},t}(),c=function(t){function e(e,i,r,n,o){t.call(this,e),this.absoluteTimeout=i,this.waitFor=r,this.scheduler=n,this.errorInstance=o,this.action=null,this.scheduleTimeout()}return r(e,t),e.dispatchTimeout=function(t){t.error(t.errorInstance)},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},e}(s.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){var e=t.call(this,"Timeout has occurred");this.name=e.name="TimeoutError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.TimeoutError=n},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(17),o=i(72),s=i(5),a=i(6);e.timeoutWith=function(t,e,i){return void 0===i&&(i=n.async),function(r){var n=o.isDate(t),s=n?+t-i.now():Math.abs(t);return r.lift(new u(s,n,e,i))}};var u=function(){function t(t,e,i,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=i,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),c=function(t){function e(e,i,r,n,o){t.call(this,e),this.absoluteTimeout=i,this.waitFor=r,this.withObservable=n,this.scheduler=o,this.action=null,this.scheduleTimeout()}return r(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(a.subscribeToResult(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(s.OuterSubscriber)},function(t,e,i){"use strict";var r=i(59);function n(t,e,i){return 0===i?[e]:(t.push(e),t)}e.toArray=function(){return r.reduce(n,[])}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(5),s=i(6);e.window=function(t){return function(e){return e.lift(new a(t))}};var a=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var i=new u(t),r=e.subscribe(i);return r.closed||i.add(s.subscribeToResult(i,this.windowBoundaries)),r},t}(),u=function(t){function e(e){t.call(this,e),this.window=new n.Subject,e.next(this.window)}return r(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,i=this.window=new n.Subject;e.next(i)},e}(o.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(2),o=i(23);e.windowCount=function(t,e){return void 0===e&&(e=0),function(i){return i.lift(new s(t,e))}};var s=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.windowSize,this.startWindowEvery))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.destination=e,this.windowSize=i,this.startWindowEvery=r,this.windows=[new o.Subject],this.count=0,e.next(this.windows[0])}return r(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,r=this.windowSize,n=this.windows,s=n.length,a=0;a<s&&!this.closed;a++)n[a].next(t);var u=this.count-r+1;if(u>=0&&u%e===0&&!this.closed&&n.shift().complete(),++this.count%e===0&&!this.closed){var c=new o.Subject;n.push(c),i.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(n.Subscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(17),s=i(2),a=i(54),u=i(37);e.windowTime=function(t){var e=o.async,i=null,r=Number.POSITIVE_INFINITY;return u.isScheduler(arguments[3])&&(e=arguments[3]),u.isScheduler(arguments[2])?e=arguments[2]:a.isNumeric(arguments[2])&&(r=arguments[2]),u.isScheduler(arguments[1])?e=arguments[1]:a.isNumeric(arguments[1])&&(i=arguments[1]),function(n){return n.lift(new c(t,i,r,e))}};var c=function(){function t(t,e,i,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=i,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),h=function(t){function e(){t.apply(this,arguments),this._numberOfNextedValues=0}return r(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(n.Subject),l=function(t){function e(e,i,r,n,o){t.call(this,e),this.destination=e,this.windowTimeSpan=i,this.windowCreationInterval=r,this.maxWindowSize=n,this.scheduler=o,this.windows=[];var s=this.openWindow();if(null!==r&&r>=0){var a={subscriber:this,window:s,context:null},u={windowTimeSpan:i,windowCreationInterval:r,subscriber:this,scheduler:o};this.add(o.schedule(d,i,a)),this.add(o.schedule(f,r,u))}else{var c={subscriber:this,window:s,windowTimeSpan:i};this.add(o.schedule(p,i,c))}}return r(e,t),e.prototype._next=function(t){for(var e=this.windows,i=e.length,r=0;r<i;r++){var n=e[r];n.closed||(n.next(t),n.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(n))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new h;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(s.Subscriber);function p(t){var e=t.subscriber,i=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,i)}function f(t){var e=t.windowTimeSpan,i=t.subscriber,r=t.scheduler,n=t.windowCreationInterval,o=i.openWindow(),s={action:this,subscription:null},a={subscriber:i,window:o,context:s};s.subscription=r.schedule(d,e,a),this.add(s.subscription),this.schedule(t,n)}function d(t){var e=t.subscriber,i=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(i)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(20),s=i(25),a=i(24),u=i(5),c=i(6);e.windowToggle=function(t,e){return function(i){return i.lift(new h(t,e))}};var h=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.openings,this.closingSelector))},t}(),l=function(t){function e(e,i,r){t.call(this,e),this.openings=i,this.closingSelector=r,this.contexts=[],this.add(this.openSubscription=c.subscribeToResult(this,i,i))}return r(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var i=e.length,r=0;r<i;r++)e[r].window.next(t)},e.prototype._error=function(e){var i=this.contexts;if(this.contexts=null,i)for(var r=i.length,n=-1;++n<r;){var o=i[n];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var i=e.length,r=-1;++r<i;){var n=e[r];n.window.complete(),n.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,i=-1;++i<e;){var r=t[i];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,i,r,u){if(t===this.openings){var h=this.closingSelector,l=s.tryCatch(h)(e);if(l===a.errorObject)return this.error(a.errorObject.e);var p=new n.Subject,f=new o.Subscription,d={window:p,subscription:f};this.contexts.push(d);var m=c.subscribeToResult(this,l,d);m.closed?this.closeWindow(this.contexts.length-1):(m.context=d,f.add(m)),this.destination.next(p)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,i=e[t],r=i.window,n=i.subscription;e.splice(t,1),r.complete(),n.unsubscribe()}},e}(u.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(25),s=i(24),a=i(5),u=i(6);e.windowWhen=function(t){return function(e){return e.lift(new c(t))}};var c=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,i){t.call(this,e),this.destination=e,this.closingSelector=i,this.openWindow()}return r(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.openWindow(n)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var i=this.window=new n.Subject;this.destination.next(i);var r=o.tryCatch(this.closingSelector)();if(r===s.errorObject){var a=s.errorObject.e;this.destination.error(a),this.window.error(a)}else this.add(this.closingNotification=u.subscribeToResult(this,r))},e}(a.OuterSubscriber)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(5),o=i(6);e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var i;"function"===typeof t[t.length-1]&&(i=t.pop());var r=t;return e.lift(new s(r,i))}};var s=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.observables,this.project))},t}(),a=function(t){function e(e,i,r){t.call(this,e),this.observables=i,this.project=r,this.toRespond=[];var n=i.length;this.values=new Array(n);for(var s=0;s<n;s++)this.toRespond.push(s);for(s=0;s<n;s++){var a=i[s];this.add(o.subscribeToResult(this,a,a,s))}}return r(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.values[i]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(i);-1!==s&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)},e}(n.OuterSubscriber)},function(t,e,i){"use strict";var r=i(73);e.zipAll=function(t){return function(e){return e.lift(new r.ZipOperator(t))}}},function(t,e,i){"use strict";var r=i(204),n=function(){function t(){this.subscriptions=[]}return t.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new r.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},t.prototype.logUnsubscribedFrame=function(t){var e=this.subscriptions,i=e[t];e[t]=new r.SubscriptionLog(i.subscribedFrame,this.scheduler.now())},t}();e.SubscriptionLoggable=n},function(t,e,i){"use strict";var r=function(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.subscribedFrame=t,this.unsubscribedFrame=e};e.SubscriptionLog=r},function(t,e,i){"use strict";e.applyMixins=function(t,e){for(var i=0,r=e.length;i<r;i++)for(var n=e[i],o=Object.getOwnPropertyNames(n.prototype),s=0,a=o.length;s<a;s++){var u=o[s];t.prototype[u]=n.prototype[u]}}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(55),o=function(t){function e(e,i){var r=this;void 0===e&&(e=s),void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e,(function(){return r.frame})),this.maxFrames=i,this.frame=0,this.index=-1}return r(e,t),e.prototype.flush=function(){for(var t,e,i=this.actions,r=this.maxFrames;(e=i.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=i.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(i(56).AsyncScheduler);e.VirtualTimeScheduler=o;var s=function(t){function e(e,i,r){void 0===r&&(r=e.index+=1),t.call(this,e,i),this.scheduler=e,this.work=i,this.index=r,this.active=!0,this.index=e.index=r}return r(e,t),e.prototype.schedule=function(i,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,i,r);this.active=!1;var n=new e(this.scheduler,this.work);return this.add(n),n.schedule(i,r)},e.prototype.requestAsyncId=function(t,i,r){void 0===r&&(r=0),this.delay=t.frame+r;var n=t.actions;return n.push(this),n.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,i){void 0===i&&(i=0)},e.prototype._execute=function(e,i){if(!0===this.active)return t.prototype._execute.call(this,e,i)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(n.AsyncAction);e.VirtualAction=s},function(t,e){var i=Object.freeze({IDLE:"IDLE",GENERATE:"GENERATE",PLAY:"PLAY",PAUSE:"PAUSE",ERROR:"ERROR",SCORE_CHANGED:"SCORE_CHANGED"});t.exports=i},,function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function o(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,r,o){if("function"!==typeof i)throw new TypeError("The listener must be a function");var a=new s(i,r||t,o),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function u(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},c.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},c.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},c.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var u,c,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,r),!0;case 5:return h.fn.call(h.context,e,i,r,o),!0;case 6:return h.fn.call(h.context,e,i,r,o,s),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var p,f=h.length;for(c=0;c<f;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,i);break;case 4:h[c].fn.call(h[c].context,e,i,r);break;default:if(!u)for(p=1,u=new Array(l-1);p<l;p++)u[p-1]=arguments[p];h[c].fn.apply(h[c].context,u)}}return!0},c.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},c.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},c.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||u(this,o);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==e||r&&!s[a].once||i&&s[a].context!==i)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,a,u,c,h,f,d,y=e&&e.length,v=y?e[0]*i:t.length,_=n(t,0,v,i,!0),b=[];if(!_||_.next===_.prev)return b;if(y&&(_=function(t,e,i,r){var s,a,u,c,h,f=[];for(s=0,a=e.length;s<a;s++)u=e[s]*r,c=s<a-1?e[s+1]*r:t.length,(h=n(t,u,c,r,!1))===h.next&&(h.steiner=!0),f.push(m(h));for(f.sort(l),s=0;s<f.length;s++)p(f[s],i),i=o(i,i.next);return i}(t,e,_,i)),t.length>80*i){r=u=t[0],a=c=t[1];for(var g=i;g<v;g+=i)(h=t[g])<r&&(r=h),(f=t[g+1])<a&&(a=f),h>u&&(u=h),f>c&&(c=f);d=0!==(d=Math.max(u-r,c-a))?1/d:0}return s(_,b,i,r,a,d),b}function n(t,e,i,r,n){var o,s;if(n===O(t,e,i,r)>0)for(o=e;o<i;o+=r)s=A(o,t[o],t[o+1],s);else for(o=i-r;o>=e;o-=r)s=A(o,t[o],t[o+1],s);return s&&b(s,s.next)&&(E(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!b(r,r.next)&&0!==_(r.prev,r,r.next))r=r.next;else{if(E(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function s(t,e,i,r,n,l,p){if(t){!p&&l&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=d(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,s,a,u,c=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,r=i,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(u=c;a>0||u>0&&r;)0!==a&&(0===u||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,c*=2}while(s>1)}(n)}(t,r,n,l);for(var f,m,y=t;t.prev!==t.next;)if(f=t.prev,m=t.next,l?u(t,r,n,l):a(t))e.push(f.i/i),e.push(t.i/i),e.push(m.i/i),E(t),t=m.next,y=m.next;else if((t=m)===y){p?1===p?s(t=c(o(t),e,i),e,i,r,n,l,2):2===p&&h(t,e,i,r,n,l):s(o(t),e,i,r,n,l,1);break}}}function a(t){var e=t.prev,i=t,r=t.next;if(_(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(y(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&_(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function u(t,e,i,r){var n=t.prev,o=t,s=t.next;if(_(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,u=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,c=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,h=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,l=d(a,u,e,i,r),p=d(c,h,e,i,r),f=t.prevZ,m=t.nextZ;f&&f.z>=l&&m&&m.z<=p;){if(f!==t.prev&&f!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&_(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,m!==t.prev&&m!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,m.x,m.y)&&_(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;f&&f.z>=l;){if(f!==t.prev&&f!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&_(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=p;){if(m!==t.prev&&m!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,m.x,m.y)&&_(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(t,e,i){var r=t;do{var n=r.prev,s=r.next.next;!b(n,s)&&g(n,r,r.next,s)&&S(n,s)&&S(s,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(s.i/i),E(r),E(r.next),r=t=s),r=r.next}while(r!==t);return o(r)}function h(t,e,i,r,n,a){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&v(u,c)){var h=T(u,c);return u=o(u,u.next),h=o(h,h.next),s(u,e,i,r,n,a),void s(h,e,i,r,n,a)}c=c.next}u=u.next}while(u!==t)}function l(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s){if(s=a,a===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===s)return i;var u,c=i,h=i.x,l=i.y,p=1/0;r=i;do{n>=r.x&&r.x>=h&&n!==r.x&&y(o<l?n:s,o,h,l,o<l?s:n,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(n-r.x),S(r,t)&&(u<p||u===p&&(r.x>i.x||r.x===i.x&&f(i,r)))&&(i=r,p=u)),r=r.next}while(r!==c);return i}(t,e)){var i=T(e,t);o(e,e.next),o(i,i.next)}}function f(t,e){return _(t.prev,t,e.prev)<0&&_(e.next,t,t.next)<0}function d(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function y(t,e,i,r,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(n-s)*(r-a)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&g(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(S(t,e)&&S(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!==i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(_(t.prev,t,e.prev)||_(t,e.prev,e))||b(t,e)&&_(t.prev,t,t.next)>0&&_(e.prev,e,e.next)>0)}function _(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function g(t,e,i,r){var n=w(_(t,e,i)),o=w(_(t,e,r)),s=w(_(i,r,t)),a=w(_(i,r,e));return n!==o&&s!==a||(!(0!==n||!x(t,i,e))||(!(0!==o||!x(t,r,e))||(!(0!==s||!x(i,t,r))||!(0!==a||!x(i,e,r)))))}function x(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function w(t){return t>0?1:t<0?-1:0}function S(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function T(t,e){var i=new I(t.i,t.x,t.y),r=new I(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function A(t,e,i,r){var n=new I(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}t.exports=r,t.exports.default=r,r.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,s=Math.abs(O(t,0,o,i));if(n)for(var a=0,u=e.length;a<u;a++){var c=e[a]*i,h=a<u-1?e[a+1]*i:t.length;s-=Math.abs(O(t,c,h,i))}var l=0;for(a=0;a<r.length;a+=3){var p=r[a]*i,f=r[a+1]*i,d=r[a+2]*i;l+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[n][o][s]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=f;var n=i(21),o=i(7),s=i(3),a=i(554),u=i(556),c=i(61),h=i(30),l=i(43),p={gravity:s.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3};function f(t){if(!(this instanceof f))return new f(t);t&&s.isValid(t)&&(t={gravity:t}),t=n(t,p),this.m_solver=new u(this),this.m_broadPhase=new a,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=t.allowSleep,this.m_gravity=s.clone(t.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=t.warmStarting,this.m_continuousPhysics=t.continuousPhysics,this.m_subStepping=t.subStepping,this.m_blockSolve=t.blockSolve,this.m_velocityIterations=t.velocityIterations,this.m_positionIterations=t.positionIterations,this.m_t=0,this.m_stepCount=0,this.addPair=this.createContact.bind(this)}f.prototype._serialize=function(){for(var t=[],e=[],i=this.getBodyList();i;i=i.getNext())t.push(i);for(var r=this.getJointList();r;r=r.getNext())"function"===typeof r._serialize&&e.push(r);return{gravity:this.m_gravity,bodies:t,joints:e}},f._deserialize=function(t,e,i){if(!t)return new f;var r=new f(t.gravity);return t.bodies&&t.bodies.reverse().forEach((function(t){r._addBody(i(c,t,r))})),t.joints&&t.joints.reverse().forEach((function(t){r.createJoint(i(h,t,r))})),r},f.prototype.getBodyList=function(){return this.m_bodyList},f.prototype.getJointList=function(){return this.m_jointList},f.prototype.getContactList=function(){return this.m_contactList},f.prototype.getBodyCount=function(){return this.m_bodyCount},f.prototype.getJointCount=function(){return this.m_jointCount},f.prototype.getContactCount=function(){return this.m_contactCount},f.prototype.setGravity=function(t){this.m_gravity=t},f.prototype.getGravity=function(){return this.m_gravity},f.prototype.isLocked=function(){return this.m_locked},f.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},f.prototype.getAllowSleeping=function(){return this.m_allowSleep},f.prototype.setWarmStarting=function(t){this.m_warmStarting=t},f.prototype.getWarmStarting=function(){return this.m_warmStarting},f.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},f.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},f.prototype.setSubStepping=function(t){this.m_subStepping=t},f.prototype.getSubStepping=function(){return this.m_subStepping},f.prototype.setAutoClearForces=function(t){this.m_clearForces=t},f.prototype.getAutoClearForces=function(){return this.m_clearForces},f.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},f.prototype.queryAABB=function(t,e){r&&o.assert("function"===typeof e);var i=this.m_broadPhase;this.m_broadPhase.query(t,(function(t){var r=i.getUserData(t);return e(r.fixture)}))},f.prototype.rayCast=function(t,e,i){r&&o.assert("function"===typeof i);var n=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},(function(t,e){var r=n.getUserData(e),o=r.fixture,a=r.childIndex,u={};if(o.rayCast(u,t,a)){var c=u.fraction,h=s.add(s.mul(1-c,t.p1),s.mul(c,t.p2));return i(o,h,u.normal,c)}return t.maxFraction}))},f.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},f.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},f.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},f.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},f.prototype.shiftOrigin=function(t){if(r&&o.assert(0==this.m_locked),!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var i=this.m_jointList;i;i=i.m_next)i.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},f.prototype._addBody=function(t){r&&o.assert(!1===this.isLocked()),this.isLocked()||(t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount)},f.prototype.createBody=function(t,e){if(r&&o.assert(0==this.isLocked()),this.isLocked())return null;t&&s.isValid(t)&&(t={position:t,angle:e});var i=new c(this,t);return this._addBody(i),i},f.prototype.createDynamicBody=function(t,e){return t?s.isValid(t)&&(t={position:t,angle:e}):t={},t.type="dynamic",this.createBody(t)},f.prototype.createKinematicBody=function(t,e){return t?s.isValid(t)&&(t={position:t,angle:e}):t={},t.type="kinematic",this.createBody(t)},f.prototype.destroyBody=function(t){if(r&&o.assert(this.m_bodyCount>0),r&&o.assert(0==this.isLocked()),!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var i=e;e=e.next,this.publish("remove-joint",i.joint),this.destroyJoint(i.joint),t.m_jointList=e}t.m_jointList=null;for(var n=t.m_contactList;n;){var s=n;n=n.next,this.destroyContact(s.contact),t.m_contactList=n}t.m_contactList=null;for(var a=t.m_fixtureList;a;){var u=a;a=a.m_next,this.publish("remove-fixture",u),u.destroyProxies(this.m_broadPhase),t.m_fixtureList=a}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",t),!0}},f.prototype.createJoint=function(t){if(r&&o.assert(!!t.m_bodyA),r&&o.assert(!!t.m_bodyB),r&&o.assert(0==this.isLocked()),this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},f.prototype.destroyJoint=function(t){if(r&&o.assert(0==this.isLocked()),!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,i=t.m_bodyB;if(e.setAwake(!0),i.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,r&&o.assert(this.m_jointCount>0),--this.m_jointCount,0==t.m_collideConnected)for(var n=i.getContactList();n;)n.other==e&&n.contact.flagForFiltering(),n=n.next;this.publish("remove-joint",t)}};var d=new u.TimeStep;f.prototype.step=function(t,e,i){if((0|e)!==e&&(e=0),e=e||this.m_velocityIterations,i=i||this.m_positionIterations,this.m_stepCount++,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,d.reset(t),d.velocityIterations=e,d.positionIterations=i,d.warmStarting=this.m_warmStarting,d.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(d);for(var r=this.m_bodyList;r;r=r.getNext())0!=r.m_islandFlag&&(r.isStatic()||r.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(d),this.m_clearForces&&this.clearForces(),this.m_locked=!1},f.prototype.findNewContacts=function(){this.m_broadPhase.updatePairs(this.addPair)},f.prototype.createContact=function(t,e){var i=t.fixture,r=e.fixture,n=t.childIndex,o=e.childIndex,s=i.getBody(),a=r.getBody();if(s!=a){for(var u=a.getContactList();u;){if(u.other==s){var c=u.contact.getFixtureA(),h=u.contact.getFixtureB(),p=u.contact.getChildIndexA(),f=u.contact.getChildIndexB();if(c==i&&h==r&&p==n&&f==o)return;if(c==r&&h==i&&p==o&&f==n)return}u=u.next}if(0!=a.shouldCollide(s)&&0!=r.shouldCollide(i)){var d=l.create(i,n,r,o);null!=d&&(d.m_prev=null,null!=this.m_contactList&&(d.m_next=this.m_contactList,this.m_contactList.m_prev=d),this.m_contactList=d,++this.m_contactCount)}}},f.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var i=t.getFixtureA(),r=t.getFixtureB(),n=t.getChildIndexA(),o=t.getChildIndexB(),s=i.getBody(),a=r.getBody();if(t.m_filterFlag){if(0==a.shouldCollide(s)){this.destroyContact(t);continue}if(0==r.shouldCollide(i)){this.destroyContact(t);continue}t.m_filterFlag=!1}var u=s.isAwake()&&!s.isStatic(),c=a.isAwake()&&!a.isStatic();if(0!=u||0!=c){var h=i.m_proxies[n].proxyId,l=r.m_proxies[o].proxyId;0!=this.m_broadPhase.testOverlap(h,l)?t.update(this):this.destroyContact(t)}}},f.prototype.destroyContact=function(t){l.destroy(t,this),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),--this.m_contactCount},f.prototype._listeners=null,f.prototype.on=function(t,e){return"string"!==typeof t||"function"!==typeof e?this:(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this)},f.prototype.off=function(t,e){if("string"!==typeof t||"function"!==typeof e)return this;var i=this._listeners&&this._listeners[t];if(!i||!i.length)return this;var r=i.indexOf(e);return r>=0&&i.splice(r,1),this},f.prototype.publish=function(t,e,i,r){var n=this._listeners&&this._listeners[t];if(!n||!n.length)return 0;for(var o=0;o<n.length;o++)n[o].call(this,e,i,r);return n.length},f.prototype.beginContact=function(t){this.publish("begin-contact",t)},f.prototype.endContact=function(t){this.publish("end-contact",t)},f.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},f.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT,n=i(13),o=i(7),s=i(555),a=i(3),u=i(4),c=i(39);function h(t){this.id=t,this.aabb=new c,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.toString=function(){return this.id+": "+this.userData}}function l(){this.m_root=null,this.m_nodes={},this.m_lastProxyId=0,this.m_pool=new s({create:function(){return new h}})}t.exports=l,h.prototype.isLeaf=function(){return null==this.child1},l.prototype.getUserData=function(t){var e=this.m_nodes[t];return r&&o.assert(!!e),e.userData},l.prototype.getFatAABB=function(t){var e=this.m_nodes[t];return r&&o.assert(!!e),e.aabb},l.prototype.allocateNode=function(){var t=this.m_pool.allocate();return t.id=++this.m_lastProxyId,t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,this.m_nodes[t.id]=t,t},l.prototype.freeNode=function(t){this.m_pool.release(t),t.height=-1,delete this.m_nodes[t.id]},l.prototype.createProxy=function(t,e){r&&o.assert(c.isValid(t));var i=this.allocateNode();return i.aabb.set(t),c.extend(i.aabb,n.aabbExtension),i.userData=e,i.height=0,this.insertLeaf(i),i.id},l.prototype.destroyProxy=function(t){var e=this.m_nodes[t];r&&o.assert(!!e),r&&o.assert(e.isLeaf()),this.removeLeaf(e),this.freeNode(e)},l.prototype.moveProxy=function(t,e,i){r&&o.assert(c.isValid(e)),r&&o.assert(!i||a.isValid(i));var s=this.m_nodes[t];return r&&o.assert(!!s),r&&o.assert(s.isLeaf()),!s.aabb.contains(e)&&(this.removeLeaf(s),s.aabb.set(e),e=s.aabb,c.extend(e,n.aabbExtension),i.x<0?e.lowerBound.x+=i.x*n.aabbMultiplier:e.upperBound.x+=i.x*n.aabbMultiplier,i.y<0?e.lowerBound.y+=i.y*n.aabbMultiplier:e.upperBound.y+=i.y*n.aabbMultiplier,this.insertLeaf(s),!0)},l.prototype.insertLeaf=function(t){if(r&&o.assert(c.isValid(t.aabb)),null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,i=this.m_root;0==i.isLeaf();){var n=i.child1,s=i.child2,a=i.aabb.getPerimeter(),h=new c;h.combine(i.aabb,e);var l,p,f=h.getPerimeter(),d=2*f,m=2*(f-a);if(n.isLeaf()){(v=new c).combine(e,n.aabb),l=v.getPerimeter()+m}else{(v=new c).combine(e,n.aabb);var y=n.aabb.getPerimeter();l=v.getPerimeter()-y+m}if(s.isLeaf()){(v=new c).combine(e,s.aabb),p=v.getPerimeter()+m}else{var v;(v=new c).combine(e,s.aabb);y=s.aabb.getPerimeter();p=v.getPerimeter()-y+m}if(d<l&&d<p)break;i=l<p?n:s}var _=i,b=_.parent,g=this.allocateNode();for(g.parent=b,g.userData=null,g.aabb.combine(e,_.aabb),g.height=_.height+1,null!=b?(b.child1==_?b.child1=g:b.child2=g,g.child1=_,g.child2=t,_.parent=g,t.parent=g):(g.child1=_,g.child2=t,_.parent=g,t.parent=g,this.m_root=g),i=t.parent;null!=i;){n=(i=this.balance(i)).child1,s=i.child2;r&&o.assert(null!=n),r&&o.assert(null!=s),i.height=1+u.max(n.height,s.height),i.aabb.combine(n.aabb,s.aabb),i=i.parent}},l.prototype.removeLeaf=function(t){if(t!=this.m_root){var e,i=t.parent,r=i.parent;if(e=i.child1==t?i.child2:i.child1,null!=r){r.child1==i?r.child1=e:r.child2=e,e.parent=r,this.freeNode(i);for(var n=r;null!=n;){var o=(n=this.balance(n)).child1,s=n.child2;n.aabb.combine(o.aabb,s.aabb),n.height=1+u.max(o.height,s.height),n=n.parent}}else this.m_root=e,e.parent=null,this.freeNode(i)}else this.m_root=null},l.prototype.balance=function(t){r&&o.assert(null!=t);var e=t;if(e.isLeaf()||e.height<2)return t;var i=e.child1,n=e.child2,s=n.height-i.height;if(s>1){var a=n.child1,c=n.child2;return n.child1=e,n.parent=e.parent,e.parent=n,null!=n.parent?n.parent.child1==t?n.parent.child1=n:n.parent.child2=n:this.m_root=n,a.height>c.height?(n.child2=a,e.child2=c,c.parent=e,e.aabb.combine(i.aabb,c.aabb),n.aabb.combine(e.aabb,a.aabb),e.height=1+u.max(i.height,c.height),n.height=1+u.max(e.height,a.height)):(n.child2=c,e.child2=a,a.parent=e,e.aabb.combine(i.aabb,a.aabb),n.aabb.combine(e.aabb,c.aabb),e.height=1+u.max(i.height,a.height),n.height=1+u.max(e.height,c.height)),n}if(s<-1){var h=i.child1,l=i.child2;return i.child1=e,i.parent=e.parent,e.parent=i,null!=i.parent?i.parent.child1==e?i.parent.child1=i:i.parent.child2=i:this.m_root=i,h.height>l.height?(i.child2=h,e.child1=l,l.parent=e,e.aabb.combine(n.aabb,l.aabb),i.aabb.combine(e.aabb,h.aabb),e.height=1+u.max(n.height,l.height),i.height=1+u.max(e.height,h.height)):(i.child2=l,e.child1=h,h.parent=e,e.aabb.combine(n.aabb,h.aabb),i.aabb.combine(e.aabb,l.aabb),e.height=1+u.max(n.height,h.height),i.height=1+u.max(e.height,l.height)),i}return e},l.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},l.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),i=0,r=d.allocate().preorder();t=r.next();)t.height<0||(i+=t.aabb.getPerimeter());return d.release(r),i/e},l.prototype.computeHeight=function(t){var e;if((e="undefined"!==typeof t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var i=ComputeHeight(e.child1),r=ComputeHeight(e.child2);return 1+u.max(i,r)},l.prototype.validateStructure=function(t){if(null!=t){t==this.m_root&&r&&o.assert(null==t.parent);var e=t.child1,i=t.child2;if(t.isLeaf())return r&&o.assert(null==e),r&&o.assert(null==i),void(r&&o.assert(0==t.height));r&&o.assert(e.parent==t),r&&o.assert(i.parent==t),this.validateStructure(e),this.validateStructure(i)}},l.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,i=t.child2;if(t.isLeaf())return r&&o.assert(null==e),r&&o.assert(null==i),void(r&&o.assert(0==t.height));var n=this.m_nodes[e].height,s=this.m_nodes[i].height,a=1+u.max(n,s);r&&o.assert(t.height==a);var h=new c;h.combine(e.aabb,i.aabb),r&&o.assert(c.areEqual(h,t.aabb)),this.validateMetrics(e),this.validateMetrics(i)}},l.prototype.validate=function(){ValidateStructure(this.m_root),ValidateMetrics(this.m_root),r&&o.assert(this.getHeight()==this.computeHeight())},l.prototype.getMaxBalance=function(){for(var t,e=0,i=d.allocate().preorder();t=i.next();)if(!(t.height<=1)){r&&o.assert(0==t.isLeaf());var n=u.abs(t.child2.height-t.child1.height);e=u.max(e,n)}return d.release(i),e},l.prototype.rebuildBottomUp=function(){for(var t,e=[],i=0,r=d.allocate().preorder();t=r.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[i]=t,++i):this.freeNode(t));for(d.release(r);i>1;){for(var n=1/0,o=-1,s=-1,a=0;a<i;++a)for(var h=e[a].aabb,l=a+1;l<i;++l){var p=e[l].aabb,f=new c;f.combine(h,p);var m=f.getPerimeter();m<n&&(o=a,s=l,n=m)}var y=e[o],v=e[s],_=this.allocateNode();_.child1=y,_.child2=v,_.height=1+u.max(y.height,v.height),_.aabb.combine(y.aabb,v.aabb),_.parent=null,y.parent=_,v.parent=_,e[s]=e[i-1],e[o]=_,--i}this.m_root=e[0],this.validate()},l.prototype.shiftOrigin=function(t){for(var e,i=d.allocate().preorder();e=i.next();){var r=e.aabb;r.lowerBound.x-=t.x,r.lowerBound.y-=t.y,r.upperBound.x-=t.x,r.upperBound.y-=t.y}d.release(i)},l.prototype.query=function(t,e){r&&o.assert("function"===typeof e);var i=f.allocate();for(i.push(this.m_root);i.length>0;){var n=i.pop();if(null!=n)if(c.testOverlap(n.aabb,t))if(n.isLeaf()){if(0==e(n.id))return}else i.push(n.child1),i.push(n.child2)}f.release(i)},l.prototype.rayCast=function(t,e){r&&o.assert("function"===typeof e);var i=t.p1,n=t.p2,s=a.sub(n,i);r&&o.assert(s.lengthSquared()>0),s.normalize();var h=a.cross(1,s),l=a.abs(h),d=t.maxFraction,m=new c,y=a.combine(1-d,i,d,n);m.combinePoints(i,y);var v=f.allocate(),_=p.allocate();for(v.push(this.m_root);v.length>0;){var b=v.pop();if(null!=b&&0!=c.testOverlap(b.aabb,m)){var g=b.aabb.getCenter(),x=b.aabb.getExtents();if(!(u.abs(a.dot(h,a.sub(i,g)))-a.dot(l,x)>0))if(b.isLeaf()){_.p1=a.clone(t.p1),_.p2=a.clone(t.p2),_.maxFraction=d;var w=e(_,b.id);if(0==w)return;w>0&&(d=w,y=a.combine(1-d,i,d,n),m.combinePoints(i,y))}else v.push(b.child1),v.push(b.child2)}}f.release(v),p.release(_)};var p=new s({create:function(){return{}},release:function(t){}}),f=new s({create:function(){return[]},release:function(t){t.length=0}}),d=new s({create:function(){return new m},release:function(t){t.close()}});function m(){var t=[],e=[];return{preorder:function(i){return t.length=0,t.push(i),e.length=0,e.push(0),this},next:function(){for(;t.length>0;){var i=t.length-1,r=t[i];if(0===e[i])return e[i]=1,r;if(1===e[i]&&(e[i]=2,r.child1))return t.push(r.child1),e.push(1),r.child1;if(2===e[i]&&(e[i]=3,r.child2))return t.push(r.child2),e.push(1),r.child2;t.pop(),e.pop()}},close:function(){t.length=0}}}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=p;var n=i(7),o=i(21),s=i(4),a=i(3),u=i(39),c=i(34),h={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535};function l(t,e){this.aabb=new u,this.fixture=t,this.childIndex=e,this.proxyId}function p(t,e,i){e.shape?(i=e,e=e.shape):"number"===typeof i&&(i={density:i}),i=o(i,h),this.m_body=t,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_density=i.density,this.m_isSensor=i.isSensor,this.m_filterGroupIndex=i.filterGroupIndex,this.m_filterCategoryBits=i.filterCategoryBits,this.m_filterMaskBits=i.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var r=this.m_shape.getChildCount(),n=0;n<r;++n)this.m_proxies[n]=new l(this,n);this.m_userData=i.userData}p.prototype._reset=function(){var t=this.getBody(),e=t.m_world.m_broadPhase;this.destroyProxies(e),this.m_shape._reset&&this.m_shape._reset();for(var i=this.m_shape.getChildCount(),r=0;r<i;++r)this.m_proxies[r]=new l(this,r);this.createProxies(e,t.m_xf),t.resetMassData()},p.prototype._serialize=function(){return{friction:this.m_friction,restitution:this.m_restitution,density:this.m_density,isSensor:this.m_isSensor,filterGroupIndex:this.m_filterGroupIndex,filterCategoryBits:this.m_filterCategoryBits,filterMaskBits:this.m_filterMaskBits,shape:this.m_shape}},p._deserialize=function(t,e,i){var r=i(c,t.shape);return r&&new p(e,r,t)},p.prototype.getType=function(){return this.m_shape.getType()},p.prototype.getShape=function(){return this.m_shape},p.prototype.isSensor=function(){return this.m_isSensor},p.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},p.prototype.getUserData=function(){return this.m_userData},p.prototype.setUserData=function(t){this.m_userData=t},p.prototype.getBody=function(){return this.m_body},p.prototype.getNext=function(){return this.m_next},p.prototype.getDensity=function(){return this.m_density},p.prototype.setDensity=function(t){r&&n.assert(s.isFinite(t)&&t>=0),this.m_density=t},p.prototype.getFriction=function(){return this.m_friction},p.prototype.setFriction=function(t){this.m_friction=t},p.prototype.getRestitution=function(){return this.m_restitution},p.prototype.setRestitution=function(t){this.m_restitution=t},p.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},p.prototype.rayCast=function(t,e,i){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),i)},p.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},p.prototype.getAABB=function(t){return r&&n.assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},p.prototype.createProxies=function(t,e){r&&n.assert(0==this.m_proxyCount),this.m_proxyCount=this.m_shape.getChildCount();for(var i=0;i<this.m_proxyCount;++i){var o=this.m_proxies[i];this.m_shape.computeAABB(o.aabb,e,i),o.proxyId=t.createProxy(o.aabb,o)}},p.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var i=this.m_proxies[e];t.destroyProxy(i.proxyId),i.proxyId=null}this.m_proxyCount=0},p.prototype.synchronize=function(t,e,i){for(var r=0;r<this.m_proxyCount;++r){var n=this.m_proxies[r],o=new u,s=new u;this.m_shape.computeAABB(o,e,n.childIndex),this.m_shape.computeAABB(s,i,n.childIndex),n.aabb.combine(o,s);var c=a.sub(i.p,e.p);t.moveProxy(n.proxyId,n.aabb,c)}},p.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},p.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},p.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},p.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},p.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,i=e.getFixtureA(),r=e.getFixtureB();i!=this&&r!=this||e.flagForFiltering(),t=t.next}var n=this.m_body.getWorld();if(null!=n)for(var o=n.m_broadPhase,s=0;s<this.m_proxyCount;++s)o.touchProxy(this.m_proxies[s].proxyId)}},p.prototype.shouldCollide=function(t){return t.m_filterGroupIndex==this.m_filterGroupIndex&&0!=t.m_filterGroupIndex?t.m_filterGroupIndex>0:0!=(t.m_filterMaskBits&this.m_filterCategoryBits)&&0!=(t.m_filterCategoryBits&this.m_filterMaskBits)}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=function(t,e){var i=s.now();++a.toiCalls,t.state=_.e_unknown,t.t=e.tMax;var c=e.proxyA,h=e.proxyB,l=e.sweepA,y=e.sweepB;l.normalize(),y.normalize();var g=e.tMax,x=c.m_radius+h.m_radius,w=u.max(n.linearSlop,x-3*n.linearSlop),S=.25*n.linearSlop;r&&o.assert(w>S);var T=0,A=n.maxTOIIterations,E=0,I=new v,O=new d;for(O.proxyA=e.proxyA,O.proxyB=e.proxyB,O.useRadii=!1;;){var C=p.identity(),P=p.identity();l.getTransform(C,T),y.getTransform(P,T),O.transformA=C,O.transformB=P;var B=new m;if(f(B,I,O),B.distance<=0){t.state=_.e_overlapped,t.t=0;break}if(B.distance<w+S){t.state=_.e_touching,t.t=T;break}var M=new b;M.initialize(I,c,l,h,y,T);for(var k=!1,R=g,D=0;;){var F=M.findMinSeparation(R);M.indexA,M.indexB;if(F>w+S){t.state=_.e_separated,t.t=g,k=!0;break}if(F>w-S){T=R;break}var N=M.evaluate(T);M.indexA,M.indexB;if(N<w-S){t.state=_.e_failed,t.t=T,k=!0;break}if(N<=w+S){t.state=_.e_touching,t.t=T,k=!0;break}for(var L=0,j=T,U=R;;){var z;z=1&L?j+(w-N)*(U-j)/(F-N):.5*(j+U),++L,++a.toiRootIters;var V=M.evaluate(z);M.indexA,M.indexB;if(u.abs(V-w)<S){R=z;break}if(V>w?(j=z,N=V):(U=z,F=V),50==L)break}if(a.toiMaxRootIters=u.max(a.toiMaxRootIters,L),++D==n.maxPolygonVertices)break}if(++E,++a.toiIters,k)break;if(E==A){t.state=_.e_failed,t.t=T;break}}a.toiMaxIters=u.max(a.toiMaxIters,E);var W=s.diff(i);a.toiMaxTime=u.max(a.toiMaxTime,W),a.toiTime+=W},t.exports.Input=function(){this.proxyA=new y,this.proxyB=new y,this.sweepA=new l,this.sweepB=new l,this.tMax},t.exports.Output=_;var n=i(13),o=i(7),s=i(557),a=i(101),u=i(4),c=i(3),h=(i(29),i(28),i(33),i(12)),l=i(27),p=i(14),f=(i(31),i(32),i(77)),d=f.Input,m=f.Output,y=f.Proxy,v=f.Cache;function _(){this.state,this.t}_.e_unknown=0,_.e_failed=1,_.e_overlapped=2,_.e_touching=3,_.e_separated=4,a.toiTime=0,a.toiMaxTime=0,a.toiCalls=0,a.toiIters=0,a.toiMaxIters=0,a.toiRootIters=0,a.toiMaxRootIters=0;function b(){this.m_proxyA=new y,this.m_proxyB=new y,this.m_sweepA,this.m_sweepB,this.m_type,this.m_localPoint=c.zero(),this.m_axis=c.zero()}b.prototype.initialize=function(t,e,i,n,s,a){this.m_proxyA=e,this.m_proxyB=n;var u=t.count;r&&o.assert(0<u&&u<3),this.m_sweepA=i,this.m_sweepB=s;var l=p.identity(),f=p.identity();if(this.m_sweepA.getTransform(l,a),this.m_sweepB.getTransform(f,a),1==u){this.m_type=1;var d=this.m_proxyA.getVertex(t.indexA[0]),m=this.m_proxyB.getVertex(t.indexB[0]),y=p.mulVec2(l,d),v=p.mulVec2(f,m);return this.m_axis.setCombine(1,v,-1,y),S=this.m_axis.normalize()}if(t.indexA[0]==t.indexA[1]){this.m_type=3;var _=n.getVertex(t.indexB[0]),b=n.getVertex(t.indexB[1]);this.m_axis=c.cross(c.sub(b,_),1),this.m_axis.normalize();var g=h.mulVec2(f.q,this.m_axis);this.m_localPoint=c.mid(_,b);v=p.mulVec2(f,this.m_localPoint),d=e.getVertex(t.indexA[0]),y=p.mulVec2(l,d);return(S=c.dot(y,g)-c.dot(v,g))<0&&(this.m_axis=c.neg(this.m_axis),S=-S),S}this.m_type=2;var x=this.m_proxyA.getVertex(t.indexA[0]),w=this.m_proxyA.getVertex(t.indexA[1]);this.m_axis=c.cross(c.sub(w,x),1),this.m_axis.normalize();g=h.mulVec2(l.q,this.m_axis);this.m_localPoint=c.mid(x,w);var S;y=p.mulVec2(l,this.m_localPoint),m=this.m_proxyB.getVertex(t.indexB[0]),v=p.mulVec2(f,m);return(S=c.dot(v,g)-c.dot(y,g))<0&&(this.m_axis=c.neg(this.m_axis),S=-S),S},b.prototype.compute=function(t,e){var i=p.identity(),n=p.identity();switch(this.m_sweepA.getTransform(i,e),this.m_sweepB.getTransform(n,e),this.m_type){case 1:if(t){var s=h.mulTVec2(i.q,this.m_axis),a=h.mulTVec2(n.q,c.neg(this.m_axis));this.indexA=this.m_proxyA.getSupport(s),this.indexB=this.m_proxyB.getSupport(a)}var u=this.m_proxyA.getVertex(this.indexA),l=this.m_proxyB.getVertex(this.indexB),f=p.mulVec2(i,u),d=p.mulVec2(n,l);return c.dot(d,this.m_axis)-c.dot(f,this.m_axis);case 2:var m=h.mulVec2(i.q,this.m_axis);f=p.mulVec2(i,this.m_localPoint);if(t){a=h.mulTVec2(n.q,c.neg(m));this.indexA=-1,this.indexB=this.m_proxyB.getSupport(a)}l=this.m_proxyB.getVertex(this.indexB),d=p.mulVec2(n,l);return c.dot(d,m)-c.dot(f,m);case 3:m=h.mulVec2(n.q,this.m_axis),d=p.mulVec2(n,this.m_localPoint);if(t){s=h.mulTVec2(i.q,c.neg(m));this.indexB=-1,this.indexA=this.m_proxyA.getSupport(s)}u=this.m_proxyA.getVertex(this.indexA),f=p.mulVec2(i,u);return c.dot(f,m)-c.dot(d,m);default:return r&&o.assert(!1),t&&(this.indexA=-1,this.indexB=-1),0}},b.prototype.findMinSeparation=function(t){return this.compute(!0,t)},b.prototype.evaluate=function(t){return this.compute(!1,t)}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=y;var n=i(7),o=i(21),s=i(19),a=i(13),u=i(4),c=i(3),h=i(29),l=i(28),p=i(33),f=i(12),d=(i(27),i(14),i(31),i(32),i(30));y.TYPE="revolute-joint",y._super=d,y.prototype=s(y._super.prototype);var m={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1};function y(t,e,i,r){if(!(this instanceof y))return new y(t,e,i,r);t=o(t,m),d.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=y.TYPE,this.m_localAnchorA=r?e.getLocalPoint(r):t.localAnchorA||c.zero(),this.m_localAnchorB=r?i.getLocalPoint(r):t.localAnchorB||c.zero(),this.m_referenceAngle=u.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=h(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new p,this.m_motorMass,this.m_limitState=0}y.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},y.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},y.prototype.getReferenceAngle=function(){return this.m_referenceAngle},y.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},y.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},y.prototype.isMotorEnabled=function(){return this.m_enableMotor},y.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},y.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},y.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},y.prototype.getMotorSpeed=function(){return this.m_motorSpeed},y.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},y.prototype.isLimitEnabled=function(){return this.m_enableLimit},y.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},y.prototype.getLowerLimit=function(){return this.m_lowerAngle},y.prototype.getUpperLimit=function(){return this.m_upperAngle},y.prototype.setLimits=function(t,e){r&&n.assert(t<=e),t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},y.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},y.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},y.prototype.getReactionForce=function(t){return c.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},y.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},y.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,h=f.neo(e),l=f.neo(n);this.m_rA=f.mulVec2(h,c.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=f.mulVec2(l,c.sub(this.m_localAnchorB,this.m_localCenterB));var p=this.m_invMassA,d=this.m_invMassB,m=this.m_invIA,y=this.m_invIB,v=m+y===0;if(this.m_mass.ex.x=p+d+this.m_rA.y*this.m_rA.y*m+this.m_rB.y*this.m_rB.y*y,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*m-this.m_rB.y*this.m_rB.x*y,this.m_mass.ez.x=-this.m_rA.y*m-this.m_rB.y*y,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=p+d+this.m_rA.x*this.m_rA.x*m+this.m_rB.x*this.m_rB.x*y,this.m_mass.ez.y=this.m_rA.x*m+this.m_rB.x*y,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=m+y,this.m_motorMass=m+y,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||v)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==v){var _=n-e-this.m_referenceAngle;u.abs(this.m_upperAngle-this.m_lowerAngle)<2*a.angularSlop?this.m_limitState=3:_<=this.m_lowerAngle?(1!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=1):_>=this.m_upperAngle?(2!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=2):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var b=c.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(p,b),r-=m*(c.cross(this.m_rA,b)+this.m_motorImpulse+this.m_impulse.z),o.addMul(d,b),s+=y*(c.cross(this.m_rB,b)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},y.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_velocity.v,n=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,p=a+l===0;if(this.m_enableMotor&&3!=this.m_limitState&&0==p){var f=n-i-this.m_motorSpeed,d=-this.m_motorMass*f,m=this.m_motorImpulse,y=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=u.clamp(this.m_motorImpulse+d,-y,y),i-=a*(d=this.m_motorImpulse-m),n+=l*d}if(this.m_enableLimit&&0!=this.m_limitState&&0==p){var v=c.zero();v.addCombine(1,r,1,c.cross(n,this.m_rB)),v.subCombine(1,e,1,c.cross(i,this.m_rA));var _=n-i;f=h(v.x,v.y,_),d=h.neg(this.m_mass.solve33(f));if(3==this.m_limitState)this.m_impulse.add(d);else if(1==this.m_limitState){if(this.m_impulse.z+d.z<0){var b=c.combine(-1,v,this.m_impulse.z,c.neo(this.m_mass.ez.x,this.m_mass.ez.y)),g=this.m_mass.solve22(b);d.x=g.x,d.y=g.y,d.z=-this.m_impulse.z,this.m_impulse.x+=g.x,this.m_impulse.y+=g.y,this.m_impulse.z=0}else this.m_impulse.add(d)}else if(2==this.m_limitState){if(this.m_impulse.z+d.z>0){b=c.combine(-1,v,this.m_impulse.z,c.neo(this.m_mass.ez.x,this.m_mass.ez.y)),g=this.m_mass.solve22(b);d.x=g.x,d.y=g.y,d.z=-this.m_impulse.z,this.m_impulse.x+=g.x,this.m_impulse.y+=g.y,this.m_impulse.z=0}else this.m_impulse.add(d)}var x=c.neo(d.x,d.y);e.subMul(o,x),i-=a*(c.cross(this.m_rA,x)+d.z),r.addMul(s,x),n+=l*(c.cross(this.m_rB,x)+d.z)}else{(f=c.zero()).addCombine(1,r,1,c.cross(n,this.m_rB)),f.subCombine(1,e,1,c.cross(i,this.m_rA));d=this.m_mass.solve22(c.neg(f));this.m_impulse.x+=d.x,this.m_impulse.y+=d.y,e.subMul(o,d),i-=a*c.cross(this.m_rA,d),r.addMul(s,d),n+=l*c.cross(this.m_rB,d)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=n},y.prototype.solvePositionConstraints=function(t){var e,i=this.m_bodyA.c_position.c,r=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,s=f.neo(r),h=f.neo(o),p=0,d=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&0!=this.m_limitState&&0==d){var m=o-r-this.m_referenceAngle,y=0;if(3==this.m_limitState){var v=u.clamp(m-this.m_lowerAngle,-a.maxAngularCorrection,a.maxAngularCorrection);y=-this.m_motorMass*v,p=u.abs(v)}else if(1==this.m_limitState){p=-(v=m-this.m_lowerAngle),v=u.clamp(v+a.angularSlop,-a.maxAngularCorrection,0),y=-this.m_motorMass*v}else if(2==this.m_limitState){p=v=m-this.m_upperAngle,v=u.clamp(v-a.angularSlop,0,a.maxAngularCorrection),y=-this.m_motorMass*v}r-=this.m_invIA*y,o+=this.m_invIB*y}s.set(r),h.set(o);var _=f.mulVec2(s,c.sub(this.m_localAnchorA,this.m_localCenterA)),b=f.mulVec2(h,c.sub(this.m_localAnchorB,this.m_localCenterB));(v=c.zero()).addCombine(1,n,1,b),v.subCombine(1,i,1,_),e=v.length();var g=this.m_invMassA,x=this.m_invMassB,w=this.m_invIA,S=this.m_invIB,T=new l;T.ex.x=g+x+w*_.y*_.y+S*b.y*b.y,T.ex.y=-w*_.x*_.y-S*b.x*b.y,T.ey.x=T.ex.y,T.ey.y=g+x+w*_.x*_.x+S*b.x*b.x;var A=c.neg(T.solve(v));return i.subMul(g,A),r-=w*c.cross(_,A),n.addMul(x,A),o+=S*c.cross(b,A),this.m_bodyA.c_position.c.set(i),this.m_bodyA.c_position.a=r,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,e<=a.linearSlop&&p<=a.angularSlop}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=y;var n=i(7),o=i(21),s=i(19),a=i(13),u=i(4),c=i(3),h=i(29),l=i(28),p=i(33),f=i(12),d=(i(27),i(14),i(31),i(32),i(30));y.TYPE="prismatic-joint",y._super=d,y.prototype=s(y._super.prototype);var m={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0};function y(t,e,i,r,n){if(!(this instanceof y))return new y(t,e,i,r,n);t=o(t,m),d.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=y.TYPE,this.m_localAnchorA=r?e.getLocalPoint(r):t.localAnchorA||c.zero(),this.m_localAnchorB=r?i.getLocalPoint(r):t.localAnchorB||c.zero(),this.m_localXAxisA=n?e.getLocalVector(n):t.localAxisA||c.neo(1,0),this.m_localXAxisA.normalize(),this.m_localYAxisA=c.cross(1,this.m_localXAxisA),this.m_referenceAngle=u.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=h(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=0,this.m_axis=c.zero(),this.m_perp=c.zero(),this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_axis,this.m_perp,this.m_s1,this.m_s2,this.m_a1,this.m_a2,this.m_K=new p,this.m_motorMass}y.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},y.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},y.prototype.getLocalAxisA=function(){return this.m_localXAxisA},y.prototype.getReferenceAngle=function(){return this.m_referenceAngle},y.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),i=c.sub(e,t),r=this.m_bodyA.getWorldVector(this.m_localXAxisA);return c.dot(i,r)},y.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,i=f.mulVec2(t.m_xf.q,c.sub(this.m_localAnchorA,t.m_sweep.localCenter)),r=f.mulVec2(e.m_xf.q,c.sub(this.m_localAnchorB,e.m_sweep.localCenter)),n=c.add(t.m_sweep.c,i),o=c.add(e.m_sweep.c,r),s=c.sub(o,n),a=f.mulVec2(t.m_xf.q,this.m_localXAxisA),u=t.m_linearVelocity,h=e.m_linearVelocity,l=t.m_angularVelocity,p=e.m_angularVelocity;return c.dot(s,c.cross(l,a))+c.dot(a,c.sub(c.addCross(h,p,r),c.addCross(u,l,i)))},y.prototype.isLimitEnabled=function(){return this.m_enableLimit},y.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},y.prototype.getLowerLimit=function(){return this.m_lowerTranslation},y.prototype.getUpperLimit=function(){return this.m_upperTranslation},y.prototype.setLimits=function(t,e){r&&n.assert(t<=e),t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},y.prototype.isMotorEnabled=function(){return this.m_enableMotor},y.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},y.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},y.prototype.setMaxMotorForce=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},y.prototype.getMotorSpeed=function(){return this.m_motorSpeed},y.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},y.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},y.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},y.prototype.getReactionForce=function(t){return c.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(t)},y.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},y.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,h=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,p=f.neo(i),d=f.neo(s),m=f.mulVec2(p,c.sub(this.m_localAnchorA,this.m_localCenterA)),y=f.mulVec2(d,c.sub(this.m_localAnchorB,this.m_localCenterB)),v=c.zero();v.addCombine(1,o,1,y),v.subCombine(1,e,1,m);var _=this.m_invMassA,b=this.m_invMassB,g=this.m_invIA,x=this.m_invIB;this.m_axis=f.mulVec2(p,this.m_localXAxisA),this.m_a1=c.cross(c.add(v,m),this.m_axis),this.m_a2=c.cross(y,this.m_axis),this.m_motorMass=_+b+g*this.m_a1*this.m_a1+x*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=f.mulVec2(p,this.m_localYAxisA),this.m_s1=c.cross(c.add(v,m),this.m_perp),this.m_s2=c.cross(y,this.m_perp);c.cross(m,this.m_perp);var w=_+b+g*this.m_s1*this.m_s1+x*this.m_s2*this.m_s2,S=g*this.m_s1+x*this.m_s2,T=g*this.m_s1*this.m_a1+x*this.m_s2*this.m_a2,A=g+x;0==A&&(A=1);var E=g*this.m_a1+x*this.m_a2,I=_+b+g*this.m_a1*this.m_a1+x*this.m_a2*this.m_a2;if(this.m_K.ex.set(w,S,T),this.m_K.ey.set(S,A,E),this.m_K.ez.set(T,E,I),this.m_enableLimit){var O=c.dot(this.m_axis,v);u.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*a.linearSlop?this.m_limitState=3:O<=this.m_lowerTranslation?1!=this.m_limitState&&(this.m_limitState=1,this.m_impulse.z=0):O>=this.m_upperTranslation?2!=this.m_limitState&&(this.m_limitState=2,this.m_impulse.z=0):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var C=c.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),P=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,B=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;r.subMul(_,C),n-=g*P,h.addMul(b,C),l+=x*B}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(r),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=l},y.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_velocity.v,n=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_enableMotor&&3!=this.m_limitState){var p=c.dot(this.m_axis,c.sub(r,e))+this.m_a2*n-this.m_a1*i,f=this.m_motorMass*(this.m_motorSpeed-p),d=this.m_motorImpulse,m=t.dt*this.m_maxMotorForce;this.m_motorImpulse=u.clamp(this.m_motorImpulse+f,-m,m),f=this.m_motorImpulse-d;var y=c.mul(f,this.m_axis),v=f*this.m_a1,_=f*this.m_a2;e.subMul(o,y),i-=a*v,r.addMul(s,y),n+=l*_}var b=c.zero();if(b.x+=c.dot(this.m_perp,r)+this.m_s2*n,b.x-=c.dot(this.m_perp,e)+this.m_s1*i,b.y=n-i,this.m_enableLimit&&0!=this.m_limitState){var g=0;g+=c.dot(this.m_axis,r)+this.m_a2*n,g-=c.dot(this.m_axis,e)+this.m_a1*i;p=h(b.x,b.y,g);var x=h(this.m_impulse),w=this.m_K.solve33(h.neg(p));this.m_impulse.add(w),1==this.m_limitState?this.m_impulse.z=u.max(this.m_impulse.z,0):2==this.m_limitState&&(this.m_impulse.z=u.min(this.m_impulse.z,0));var S=c.combine(-1,b,-(this.m_impulse.z-x.z),c.neo(this.m_K.ez.x,this.m_K.ez.y)),T=c.add(this.m_K.solve22(S),c.neo(x.x,x.y));this.m_impulse.x=T.x,this.m_impulse.y=T.y,w=h.sub(this.m_impulse,x);y=c.combine(w.x,this.m_perp,w.z,this.m_axis),v=w.x*this.m_s1+w.y+w.z*this.m_a1,_=w.x*this.m_s2+w.y+w.z*this.m_a2;e.subMul(o,y),i-=a*v,r.addMul(s,y),n+=l*_}else{w=this.m_K.solve22(c.neg(b));this.m_impulse.x+=w.x,this.m_impulse.y+=w.y;y=c.mul(w.x,this.m_perp),v=w.x*this.m_s1+w.y,_=w.x*this.m_s2+w.y;e.subMul(o,y),i-=a*v,r.addMul(s,y),n+=l*_}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=n},y.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,n=this.m_bodyB.c_position.a,o=f.neo(i),s=f.neo(n),d=this.m_invMassA,m=this.m_invMassB,y=this.m_invIA,v=this.m_invIB,_=f.mulVec2(o,c.sub(this.m_localAnchorA,this.m_localCenterA)),b=f.mulVec2(s,c.sub(this.m_localAnchorB,this.m_localCenterB)),g=c.sub(c.add(r,b),c.add(e,_)),x=f.mulVec2(o,this.m_localXAxisA),w=c.cross(c.add(g,_),x),S=c.cross(b,x),T=f.mulVec2(o,this.m_localYAxisA),A=c.cross(c.add(g,_),T),E=c.cross(b,T),I=h(),O=c.zero();O.x=c.dot(T,g),O.y=n-i-this.m_referenceAngle;var C=u.abs(O.x),P=u.abs(O.y),B=a.linearSlop,M=a.maxLinearCorrection,k=!1,R=0;if(this.m_enableLimit){var D=c.dot(x,g);u.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*B?(R=u.clamp(D,-M,M),C=u.max(C,u.abs(D)),k=!0):D<=this.m_lowerTranslation?(R=u.clamp(D-this.m_lowerTranslation+B,-M,0),C=u.max(C,this.m_lowerTranslation-D),k=!0):D>=this.m_upperTranslation&&(R=u.clamp(D-this.m_upperTranslation-B,0,M),C=u.max(C,D-this.m_upperTranslation),k=!0)}if(k){var F=d+m+y*A*A+v*E*E,N=y*A+v*E,L=y*A*w+v*E*S;0==(V=y+v)&&(V=1);var j=y*w+v*S,U=d+m+y*w*w+v*S*S;(W=new p).ex.set(F,N,L),W.ey.set(N,V,j),W.ez.set(L,j,U);var z=h();z.x=O.x,z.y=O.y,z.z=R,I=W.solve33(h.neg(z))}else{var V,W;F=d+m+y*A*A+v*E*E,N=y*A+v*E;0==(V=y+v)&&(V=1),(W=new l).ex.set(F,N),W.ey.set(N,V);var X=W.solve(c.neg(O));I.x=X.x,I.y=X.y,I.z=0}var H=c.combine(I.x,T,I.z,x),G=I.x*A+I.y+I.z*w,q=I.x*E+I.y+I.z*S;return e.subMul(d,H),i-=y*G,r.addMul(m,H),n+=v*q,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=r,this.m_bodyB.c_position.a=n,C<=a.linearSlop&&P<=a.angularSlop}},function(t,e,i){var r=i(11);t.exports=function(t,e){var i=new r.Graphics,n=new r.Graphics,o=r.Texture.from("..//img/slope tile.png",{wrapMode:r.WRAP_MODES.REPEAT});n.lineStyle(0),n.beginFill(16777215,1),i.lineStyle(1,16777215,1),i.beginTextureFill(o),i.position.x=0,i.position.y=0,function(t,e,i){for(var r={x:t.position.x,y:t.position.y},n=0;n<i.length;n++){var o=i[n];t.lineTo(o.x,o.y),r.x=o.x,r.y=o.y}t.lineTo(r.x,r.y+200),t.lineTo(-100,r.y+200),t.lineTo(-100,0),t.lineTo(0,0),t.closePath(),t.endFill()}(i,0,e),n.endFill(),t.addChild(i),t.addChild(n)}},function(t,e,i){i(11);var r=i(60);i(80);t.exports=function(t,e,i,n,o,s){var a=r,u=a.Vec2,c=[],h=s.createBody().setDynamic();h.createFixture(a.Circle(.5),1),h.setPosition(u(0,-15)),h.setMassData({mass:5,center:u(),I:1}),n.physics=h,n.position=h.getPosition(),n.anchor=u(.3,1),n.mass=h.getMass();var l=function(t,e,i,r,n){var o,s=f(e,(1-t)*(1-t)*(1-t)),a=f(r,(1-t)*(1-t)*3*t),u=f(n,3*(1-t)*(t*t)),c=f(i,t*t*t);return o=d(s,a),o=d(o,u),o=d(o,c)},p=function(t,e,i,r){for(var n=u(),o=0;o<60;o++)n=l(o/60,t,r,e,i),c.push(n)},f=function(t,e){var i=u();return i.x=t.x*e,i.y=t.y*e,i},d=function(t,e){var i=u();return i.x=t.x+e.x,i.y=t.y+e.y,i},m=function(t,e){var i=u();return i.x=t.x-e.x,i.y=t.y-e.y,i},y=function(t,e){var i=u();return i.x=(t.x+e.x)/2,i.y=(t.y+e.y)/2,i},v=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},_=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)/2};return function(){for(var t=0;t<i.length;t+=1)p(i[t][0],i[t][1],i[t][2],i[t][3]);!function(t){for(var e,i,r=0;r<t.length-1;r+=1){var n=t[r],o=t[r+1],u=_(m(o,n));(e=s.createBody().setStatic()).createFixture(a.Box(u-0,.01),1).setFriction(.1),e.setPosition(y(n,o)),i=v(n,o),e.setAngle(i)}}(c)}(),t.ticker.add((function(){s.step(1/60);for(var t=s.getBodyList();t;t=t.getNext())for(var e=t.getFixtureList();e;e=e.getNext());o.renderPosition(n)})),c}},function(t,e){var i={};t.exports=function(t){return Promise.all(t.map((function(t){return new Promise((function(e,r){if(!0===i[t])return e();if(i[t])i[t].push([e,r]);else if(-1!=t.indexOf(".css")){var n=document.createElement("LINK");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(n),i[t]=!0,e()}else{var o=i[t]=[[e,r]],s=document.createElement("script");s.onerror=function(){i[t]=!1;for(var e=0;e<o.length;e++)o[e][1]()},s.onload=function(){i[t]=!0;for(var e=0;e<o.length;e++)o[e][0]()},document.getElementsByTagName("head")[0].appendChild(s),s.src=t}}))})))}},,,function(t,e,i){t.exports=i(542)},function(t,e,i){(function(r,n){var o;!function(r){var s=r.Promise,a=s&&"resolve"in s&&"reject"in s&&"all"in s&&"race"in s&&function(){var t;return new s((function(e){t=e})),"function"===typeof t}();e?(e.Promise=a?s:S,e.Polyfill=S):void 0===(o=function(){return a?s:S}.call(e,i,e,t))||(t.exports=o);var u=function(){};function c(t){return"[object Array]"===Object.prototype.toString.call(t)}var h,l="undefined"!==typeof n?n:setTimeout,p=[];function f(){for(var t=0;t<p.length;t++)p[t][0](p[t][1]);p=[],h=!1}function d(t,e){p.push([t,e]),h||(h=!0,l(f,0))}function m(t){var e=t.owner,i=e.state_,r=e.data_,n=t[i],o=t.then;if("function"===typeof n){i="fulfilled";try{r=n(r)}catch(s){b(o,s)}}y(o,r)||("fulfilled"===i&&v(o,r),"rejected"===i&&b(o,r))}function y(t,e){var i;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"===typeof e||"object"===typeof e)){var r=e.then;if("function"===typeof r)return r.call(e,(function(r){i||(i=!0,e!==r?v(t,r):_(t,r))}),(function(e){i||(i=!0,b(t,e))})),!0}}catch(n){return i||b(t,n),!0}return!1}function v(t,e){t!==e&&y(t,e)||_(t,e)}function _(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,d(x,t))}function b(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,d(w,t))}function g(t){var e=t.then_;t.then_=void 0;for(var i=0;i<e.length;i++)m(e[i])}function x(t){t.state_="fulfilled",g(t)}function w(t){t.state_="rejected",g(t)}function S(t){if("function"!==typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof S===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function i(t){b(e,t)}try{t((function(t){v(e,t)}),i)}catch(r){i(r)}}(t,this)}S.prototype={constructor:S,state_:"pending",then_:null,data_:void 0,then:function(t,e){var i={owner:this,then:new this.constructor(u),fulfilled:t,rejected:e};return"fulfilled"===this.state_||"rejected"===this.state_?d(m,i):this.then_.push(i),i.then},catch:function(t){return this.then(null,t)}},S.all=function(t){if(!c(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(e,i){var r=[],n=0;function o(t){return n++,function(i){r[t]=i,--n||e(r)}}for(var s,a=0;a<t.length;a++)(s=t[a])&&"function"===typeof s.then?s.then(o(a),i):r[a]=s;n||e(r)}))},S.race=function(t){if(!c(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(e,i){for(var r,n=0;n<t.length;n++)(r=t[n])&&"function"===typeof r.then?r.then(e,i):e(r)}))},S.resolve=function(t){return t&&"object"===typeof t&&t.constructor===this?t:new this((function(e){e(t)}))},S.reject=function(t){return new this((function(e,i){i(t)}))}}("undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this)}).call(this,i(44),i(544).setImmediate)},function(t,e,i){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=i(580)},,function(t,e,i){"use strict";var r=i(81),n="function"===typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,u=n?Symbol.for("react.strict_mode"):60108,c=n?Symbol.for("react.profiler"):60114,h=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113;n&&Symbol.for("react.suspense_list");var d=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116;n&&Symbol.for("react.fundamental"),n&&Symbol.for("react.responder"),n&&Symbol.for("react.scope");var y="function"===typeof Symbol&&Symbol.iterator;function v(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function g(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||_}function x(){}function w(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||_}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(v(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},x.prototype=g.prototype;var S=w.prototype=new x;S.constructor=w,r(S,g.prototype),S.isPureReactComponent=!0;var T={current:null},A={current:null},E=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function O(t,e,i){var r,n={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)E.call(e,r)&&!I.hasOwnProperty(r)&&(n[r]=e[r]);var u=arguments.length-2;if(1===u)n.children=i;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];n.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===n[r]&&(n[r]=u[r]);return{$$typeof:o,type:t,key:s,ref:a,props:n,_owner:A.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var P=/\/+/g,B=[];function M(t,e,i,r){if(B.length){var n=B.pop();return n.result=t,n.keyPrefix=e,n.func=i,n.context=r,n.count=0,n}return{result:t,keyPrefix:e,func:i,context:r,count:0}}function k(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>B.length&&B.push(t)}function R(t,e,i){return null==t?0:function t(e,i,r,n){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case s:u=!0}}if(u)return r(n,e,""===i?"."+D(e,0):i),1;if(u=0,i=""===i?".":i+":",Array.isArray(e))for(var c=0;c<e.length;c++){var h=i+D(a=e[c],c);u+=t(a,h,r,n)}else if(null===e||"object"!==typeof e?h=null:h="function"===typeof(h=y&&e[y]||e["@@iterator"])?h:null,"function"===typeof h)for(e=h.call(e),c=0;!(a=e.next()).done;)u+=t(a=a.value,h=i+D(a,c++),r,n);else if("object"===a)throw r=""+e,Error(v(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,i)}function D(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function F(t,e){t.func.call(t.context,e,t.count++)}function N(t,e,i){var r=t.result,n=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?L(t,r,i,(function(t){return t})):null!=t&&(C(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,n+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(P,"$&/")+"/")+i)),r.push(t))}function L(t,e,i,r,n){var o="";null!=i&&(o=(""+i).replace(P,"$&/")+"/"),R(t,N,e=M(e,o,r,n)),k(e)}function j(){var t=T.current;if(null===t)throw Error(v(321));return t}var U={Children:{map:function(t,e,i){if(null==t)return t;var r=[];return L(t,r,null,e,i),r},forEach:function(t,e,i){if(null==t)return t;R(t,F,e=M(null,null,e,i)),k(e)},count:function(t){return R(t,(function(){return null}),null)},toArray:function(t){var e=[];return L(t,e,null,(function(t){return t})),e},only:function(t){if(!C(t))throw Error(v(143));return t}},createRef:function(){return{current:null}},Component:g,PureComponent:w,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:l,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:p,render:t}},lazy:function(t){return{$$typeof:m,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return j().useCallback(t,e)},useContext:function(t,e){return j().useContext(t,e)},useEffect:function(t,e){return j().useEffect(t,e)},useImperativeHandle:function(t,e,i){return j().useImperativeHandle(t,e,i)},useDebugValue:function(){},useLayoutEffect:function(t,e){return j().useLayoutEffect(t,e)},useMemo:function(t,e){return j().useMemo(t,e)},useReducer:function(t,e,i){return j().useReducer(t,e,i)},useRef:function(t){return j().useRef(t)},useState:function(t){return j().useState(t)},Fragment:a,Profiler:c,StrictMode:u,Suspense:f,createElement:O,cloneElement:function(t,e,i){if(null===t||void 0===t)throw Error(v(267,t));var n=r({},t.props),s=t.key,a=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,u=A.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)E.call(e,h)&&!I.hasOwnProperty(h)&&(n[h]=void 0===e[h]&&void 0!==c?c[h]:e[h])}var h=arguments.length-2;if(1===h)n.children=i;else if(1<h){c=Array(h);for(var l=0;l<h;l++)c[l]=arguments[l+2];n.children=c}return{$$typeof:o,type:t.type,key:s,ref:a,props:n,_owner:u}},createFactory:function(t){var e=O.bind(null,t);return e.type=t,e},isValidElement:C,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:A,IsSomeRendererActing:{current:!1},assign:r}},z={default:U},V=z&&U||z;t.exports=V.default||V},function(t,e,i){"use strict";var r=i(2),n=i(64),o=i(108);e.toSubscriber=function(t,e,i){if(t){if(t instanceof r.Subscriber)return t;if(t[n.rxSubscriber])return t[n.rxSubscriber]()}return t||e||i?new r.Subscriber(t,e,i):new r.Subscriber(o.empty)}},function(t,e,i){"use strict";var r=i(0),n=i(229);r.Observable.bindCallback=n.bindCallback},function(t,e,i){"use strict";var r=i(230);e.bindCallback=r.BoundCallbackObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(25),s=i(24),a=i(67),u=function(t){function e(e,i,r,n,o){t.call(this),this.callbackFunc=e,this.selector=i,this.args=r,this.context=n,this.scheduler=o}return r(e,t),e.create=function(t,i,r){return void 0===i&&(i=void 0),function(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];return new e(t,i,n,this,r)}},e.prototype._subscribe=function(t){var i=this.callbackFunc,r=this.args,n=this.scheduler,u=this.subject;if(n)return n.schedule(e.dispatch,0,{source:this,subscriber:t,context:this.context});if(!u){u=this.subject=new a.AsyncSubject;var c=function t(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];var r=t.source,n=r.selector,a=r.subject;if(n){var u=o.tryCatch(n).apply(this,e);u===s.errorObject?a.error(s.errorObject.e):(a.next(u),a.complete())}else a.next(e.length<=1?e[0]:e),a.complete()};c.source=this,o.tryCatch(i).apply(this.context,r.concat(c))===s.errorObject&&u.error(s.errorObject.e)}return u.subscribe(t)},e.dispatch=function(t){var e=this,i=t.source,r=t.subscriber,n=t.context,u=i.callbackFunc,l=i.args,p=i.scheduler,f=i.subject;if(!f){f=i.subject=new a.AsyncSubject;var d=function t(){for(var i=[],r=0;r<arguments.length;r++)i[r-0]=arguments[r];var n=t.source,a=n.selector,u=n.subject;if(a){var l=o.tryCatch(a).apply(this,i);l===s.errorObject?e.add(p.schedule(h,0,{err:s.errorObject.e,subject:u})):e.add(p.schedule(c,0,{value:l,subject:u}))}else{var f=i.length<=1?i[0]:i;e.add(p.schedule(c,0,{value:f,subject:u}))}};d.source=i,o.tryCatch(u).apply(n,l.concat(d))===s.errorObject&&f.error(s.errorObject.e)}e.add(f.subscribe(r))},e}(n.Observable);function c(t){var e=t.value,i=t.subject;i.next(e),i.complete()}function h(t){var e=t.err;t.subject.error(e)}e.BoundCallbackObservable=u},function(t,e,i){"use strict";var r=i(0),n=i(232);r.Observable.bindNodeCallback=n.bindNodeCallback},function(t,e,i){"use strict";var r=i(233);e.bindNodeCallback=r.BoundNodeCallbackObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(25),s=i(24),a=i(67),u=function(t){function e(e,i,r,n,o){t.call(this),this.callbackFunc=e,this.selector=i,this.args=r,this.context=n,this.scheduler=o}return r(e,t),e.create=function(t,i,r){return void 0===i&&(i=void 0),function(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];return new e(t,i,n,this,r)}},e.prototype._subscribe=function(t){var e=this.callbackFunc,i=this.args,r=this.scheduler,n=this.subject;if(r)return r.schedule(c,0,{source:this,subscriber:t,context:this.context});if(!n){n=this.subject=new a.AsyncSubject;var u=function t(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];var r=t.source,n=r.selector,a=r.subject,u=e.shift();if(u)a.error(u);else if(n){var c=o.tryCatch(n).apply(this,e);c===s.errorObject?a.error(s.errorObject.e):(a.next(c),a.complete())}else a.next(e.length<=1?e[0]:e),a.complete()};u.source=this,o.tryCatch(e).apply(this.context,i.concat(u))===s.errorObject&&n.error(s.errorObject.e)}return n.subscribe(t)},e}(n.Observable);function c(t){var e=this,i=t.source,r=t.subscriber,n=t.context,u=i,c=u.callbackFunc,p=u.args,f=u.scheduler,d=i.subject;if(!d){d=i.subject=new a.AsyncSubject;var m=function t(){for(var i=[],r=0;r<arguments.length;r++)i[r-0]=arguments[r];var n=t.source,a=n.selector,u=n.subject,c=i.shift();if(c)e.add(f.schedule(l,0,{err:c,subject:u}));else if(a){var p=o.tryCatch(a).apply(this,i);p===s.errorObject?e.add(f.schedule(l,0,{err:s.errorObject.e,subject:u})):e.add(f.schedule(h,0,{value:p,subject:u}))}else{var d=i.length<=1?i[0]:i;e.add(f.schedule(h,0,{value:d,subject:u}))}};m.source=i,o.tryCatch(c).apply(n,p.concat(m))===s.errorObject&&e.add(f.schedule(l,0,{err:s.errorObject.e,subject:d}))}e.add(d.subscribe(r))}function h(t){var e=t.value,i=t.subject;i.next(e),i.complete()}function l(t){var e=t.err;t.subject.error(e)}e.BoundNodeCallbackObservable=u},function(t,e,i){"use strict";var r=i(0),n=i(235);r.Observable.combineLatest=n.combineLatest},function(t,e,i){"use strict";var r=i(37),n=i(38),o=i(41),s=i(68);e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=null,a=null;return r.isScheduler(t[t.length-1])&&(a=t.pop()),"function"===typeof t[t.length-1]&&(i=t.pop()),1===t.length&&n.isArray(t[0])&&(t=t[0]),new o.ArrayObservable(t,a).lift(new s.CombineLatestOperator(i))}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e,i,r){t.call(this),this.parent=e,this.outerValue=i,this.outerIndex=r,this.index=0}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(i(2).Subscriber);e.InnerSubscriber=n},function(t,e,i){"use strict";var r=i(0),n=i(51);r.Observable.concat=n.concat},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(26),o=i(0),s=i(50),a=function(t){function e(e,i){if(t.call(this),this.scheduler=i,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[s.iterator];if(!e&&"string"===typeof t)return new u(t);if(!e&&void 0!==t.length)return new c(t);if(!e)throw new TypeError("object is not iterable");return t[s.iterator]()}(e)}return r(e,t),e.create=function(t,i){return new e(t,i)},e.dispatch=function(t){var e=t.index,i=t.hasError,r=t.iterator,n=t.subscriber;if(i)n.error(t.error);else{var o=r.next();o.done?n.complete():(n.next(o.value),t.index=e+1,n.closed?"function"===typeof r.return&&r.return():this.schedule(t))}},e.prototype._subscribe=function(t){var i=this.iterator,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{index:0,iterator:i,subscriber:t});for(;;){var n=i.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed){"function"===typeof i.return&&i.return();break}}},e}(o.Observable);e.IteratorObservable=a;var u=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length),this.str=t,this.idx=e,this.len=i}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),c=function(){function t(t,e,i){void 0===e&&(e=0),void 0===i&&(i=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(i=e,"number"!==typeof i||!n.root.isFinite(i)))return e;var i;if((e=function(t){var e=+t;if(0===e)return e;if(isNaN(e))return e;return e<0?-1:1}(e)*Math.floor(Math.abs(e)))<=0)return 0;if(e>h)return h;return e}(t)),this.arr=t,this.idx=e,this.len=i}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var h=Math.pow(2,53)-1},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(86),s=i(42),a=function(t){function e(e,i){t.call(this),this.arrayLike=e,this.scheduler=i,i||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,i){var r=t.length;return 0===r?new s.EmptyObservable:1===r?new o.ScalarObservable(t[0],i):new e(t,i)},e.dispatch=function(t){var e=t.arrayLike,i=t.index,r=t.length,n=t.subscriber;n.closed||(i>=r?n.complete():(n.next(e[i]),t.index=i+1,this.schedule(t)))},e.prototype._subscribe=function(t){var i=this.arrayLike,r=this.scheduler,n=i.length;if(r)return r.schedule(e.dispatch,0,{arrayLike:i,index:0,length:n,subscriber:t});for(var o=0;o<n&&!t.closed;o++)t.next(i[o]);t.complete()},e}(n.Observable);e.ArrayLikeObservable=a},function(t,e,i){"use strict";var r=i(0),n=i(241);r.Observable.defer=n.defer},function(t,e,i){"use strict";var r=i(242);e.defer=r.DeferObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(6),s=i(5),a=function(t){function e(e){t.call(this),this.observableFactory=e}return r(e,t),e.create=function(t){return new e(t)},e.prototype._subscribe=function(t){return new u(t,this.observableFactory)},e}(n.Observable);e.DeferObservable=a;var u=function(t){function e(e,i){t.call(this,e),this.factory=i,this.tryDefer()}return r(e,t),e.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},e.prototype._callFactory=function(){var t=this.factory();t&&this.add(o.subscribeToResult(this,t))},e}(s.OuterSubscriber)},function(t,e,i){"use strict";var r=i(0),n=i(244);r.Observable.empty=n.empty},function(t,e,i){"use strict";var r=i(42);e.empty=r.EmptyObservable.create},function(t,e,i){"use strict";var r=i(0),n=i(246);r.Observable.forkJoin=n.forkJoin},function(t,e,i){"use strict";var r=i(247);e.forkJoin=r.ForkJoinObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(42),s=i(38),a=i(6),u=i(5),c=function(t){function e(e,i){t.call(this),this.sources=e,this.resultSelector=i}return r(e,t),e.create=function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];if(null===t||0===arguments.length)return new o.EmptyObservable;var r=null;return"function"===typeof t[t.length-1]&&(r=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),0===t.length?new o.EmptyObservable:new e(t,r)},e.prototype._subscribe=function(t){return new h(t,this.sources,this.resultSelector)},e}(n.Observable);e.ForkJoinObservable=c;var h=function(t){function e(e,i,r){t.call(this,e),this.sources=i,this.resultSelector=r,this.completed=0,this.haveValues=0;var n=i.length;this.total=n,this.values=new Array(n);for(var o=0;o<n;o++){var s=i[o],u=a.subscribeToResult(this,s,null,o);u&&(u.outerIndex=o,this.add(u))}}return r(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.values[i]=e,n._hasValue||(n._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,i=this.haveValues,r=this.resultSelector,n=this.values,o=n.length;if(t._hasValue){if(this.completed++,this.completed===o){if(i===o){var s=r?r.apply(this,n):n;e.next(s)}e.complete()}}else e.complete()},e}(u.OuterSubscriber)},function(t,e,i){"use strict";var r=i(0),n=i(113);r.Observable.from=n.from},function(t,e,i){"use strict";var r=i(0),n=i(250);r.Observable.fromEvent=n.fromEvent},function(t,e,i){"use strict";var r=i(251);e.fromEvent=r.FromEventObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(25),s=i(63),a=i(24),u=i(20),c=Object.prototype.toString;var h=function(t){function e(e,i,r,n){t.call(this),this.sourceObj=e,this.eventName=i,this.selector=r,this.options=n}return r(e,t),e.create=function(t,i,r,n){return s.isFunction(r)&&(n=r,r=void 0),new e(t,i,n,r)},e.setupSubscription=function(t,i,r,n,o){var s;if(function(t){return!!t&&"[object NodeList]"===c.call(t)}(t)||function(t){return!!t&&"[object HTMLCollection]"===c.call(t)}(t))for(var a=0,h=t.length;a<h;a++)e.setupSubscription(t[a],i,r,n,o);else if(function(t){return!!t&&"function"===typeof t.addEventListener&&"function"===typeof t.removeEventListener}(t)){var l=t;t.addEventListener(i,r,o),s=function(){return l.removeEventListener(i,r,o)}}else if(function(t){return!!t&&"function"===typeof t.on&&"function"===typeof t.off}(t)){var p=t;t.on(i,r),s=function(){return p.off(i,r)}}else{if(!function(t){return!!t&&"function"===typeof t.addListener&&"function"===typeof t.removeListener}(t))throw new TypeError("Invalid event target");var f=t;t.addListener(i,r),s=function(){return f.removeListener(i,r)}}n.add(new u.Subscription(s))},e.prototype._subscribe=function(t){var i=this.sourceObj,r=this.eventName,n=this.options,s=this.selector,u=s?function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];var r=o.tryCatch(s).apply(void 0,e);r===a.errorObject?t.error(a.errorObject.e):t.next(r)}:function(e){return t.next(e)};e.setupSubscription(i,r,u,t,n)},e}(n.Observable);e.FromEventObservable=h},function(t,e,i){"use strict";var r=i(0),n=i(253);r.Observable.fromEventPattern=n.fromEventPattern},function(t,e,i){"use strict";var r=i(254);e.fromEventPattern=r.FromEventPatternObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(63),o=i(0),s=i(20),a=function(t){function e(e,i,r){t.call(this),this.addHandler=e,this.removeHandler=i,this.selector=r}return r(e,t),e.create=function(t,i,r){return new e(t,i,r)},e.prototype._subscribe=function(t){var e=this,i=this.removeHandler,r=this.selector?function(){for(var i=[],r=0;r<arguments.length;r++)i[r-0]=arguments[r];e._callSelector(t,i)}:function(e){t.next(e)},o=this._callAddHandler(r,t);n.isFunction(i)&&t.add(new s.Subscription((function(){i(r,o)})))},e.prototype._callSelector=function(t,e){try{var i=this.selector.apply(this,e);t.next(i)}catch(r){t.error(r)}},e.prototype._callAddHandler=function(t,e){try{return this.addHandler(t)||null}catch(i){e.error(i)}},e}(o.Observable);e.FromEventPatternObservable=a},function(t,e,i){"use strict";var r=i(0),n=i(256);r.Observable.fromPromise=n.fromPromise},function(t,e,i){"use strict";var r=i(115);e.fromPromise=r.PromiseObservable.create},function(t,e,i){"use strict";var r=i(0),n=i(258);r.Observable.generate=n.generate},function(t,e,i){"use strict";var r=i(259);e.generate=r.GenerateObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(37),s=function(t){return t},a=function(t){function e(e,i,r,n,o){t.call(this),this.initialState=e,this.condition=i,this.iterate=r,this.resultSelector=n,this.scheduler=o}return r(e,t),e.create=function(t,i,r,n,a){return 1==arguments.length?new e(t.initialState,t.condition,t.iterate,t.resultSelector||s,t.scheduler):void 0===n||o.isScheduler(n)?new e(t,i,r,s,n):new e(t,i,r,n,a)},e.prototype._subscribe=function(t){var i=this.initialState;if(this.scheduler)return this.scheduler.schedule(e.dispatch,0,{subscriber:t,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:i});for(var r=this.condition,n=this.resultSelector,o=this.iterate;;){if(r){var s=void 0;try{s=r(i)}catch(u){return void t.error(u)}if(!s){t.complete();break}}var a=void 0;try{a=n(i)}catch(u){return void t.error(u)}if(t.next(a),t.closed)break;try{i=o(i)}catch(u){return void t.error(u)}}},e.dispatch=function(t){var e=t.subscriber,i=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(o){return void e.error(o)}else t.needIterate=!0;if(i){var r=void 0;try{r=i(t.state)}catch(o){return void e.error(o)}if(!r)return void e.complete();if(e.closed)return}var n;try{n=t.resultSelector(t.state)}catch(o){return void e.error(o)}if(!e.closed&&(e.next(n),!e.closed))return this.schedule(t)}},e}(n.Observable);e.GenerateObservable=a},function(t,e,i){"use strict";var r=i(0),n=i(261);r.Observable.if=n._if},function(t,e,i){"use strict";var r=i(262);e._if=r.IfObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(6),s=i(5),a=function(t){function e(e,i,r){t.call(this),this.condition=e,this.thenSource=i,this.elseSource=r}return r(e,t),e.create=function(t,i,r){return new e(t,i,r)},e.prototype._subscribe=function(t){var e=this.condition,i=this.thenSource,r=this.elseSource;return new u(t,e,i,r)},e}(n.Observable);e.IfObservable=a;var u=function(t){function e(e,i,r,n){t.call(this,e),this.condition=i,this.thenSource=r,this.elseSource=n,this.tryIf()}return r(e,t),e.prototype.tryIf=function(){var t=this.condition,e=this.thenSource,i=this.elseSource;try{var r=t()?e:i;r?this.add(o.subscribeToResult(this,r)):this._complete()}catch(n){this._error(n)}},e}(s.OuterSubscriber)},function(t,e,i){"use strict";var r=i(0),n=i(264);r.Observable.interval=n.interval},function(t,e,i){"use strict";var r=i(265);e.interval=r.IntervalObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(54),o=i(0),s=i(17),a=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=s.async),t.call(this),this.period=e,this.scheduler=i,(!n.isNumeric(e)||e<0)&&(this.period=0),i&&"function"===typeof i.schedule||(this.scheduler=s.async)}return r(e,t),e.create=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=s.async),new e(t,i)},e.dispatch=function(t){var e=t.index,i=t.subscriber,r=t.period;i.next(e),i.closed||(t.index+=1,this.schedule(t,r))},e.prototype._subscribe=function(t){var i=this.period,r=this.scheduler;t.add(r.schedule(e.dispatch,i,{index:0,subscriber:t,period:i}))},e}(o.Observable);e.IntervalObservable=a},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e,i){t.call(this)}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(i(20).Subscription);e.Action=n},function(t,e,i){"use strict";var r=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=r},function(t,e,i){"use strict";var r=i(0),n=i(71);r.Observable.merge=n.merge},function(t,e,i){"use strict";var r=i(0),n=i(88);r.Observable.race=n.race},function(t,e,i){"use strict";var r=i(0),n=i(271);r.Observable.never=n.never},function(t,e,i){"use strict";var r=i(272);e.never=r.NeverObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(85),s=function(t){function e(){t.call(this)}return r(e,t),e.create=function(){return new e},e.prototype._subscribe=function(t){o.noop()},e}(n.Observable);e.NeverObservable=s},function(t,e,i){"use strict";var r=i(0),n=i(112);r.Observable.of=n.of},function(t,e,i){"use strict";var r=i(0),n=i(275);r.Observable.onErrorResumeNext=n.onErrorResumeNext},function(t,e,i){"use strict";var r=i(89);e.onErrorResumeNext=r.onErrorResumeNextStatic},function(t,e,i){"use strict";var r=i(0),n=i(277);r.Observable.pairs=n.pairs},function(t,e,i){"use strict";var r=i(278);e.pairs=r.PairsObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};function n(t){var e=t.obj,i=t.keys,r=t.length,n=t.index,o=t.subscriber;if(n!==r){var s=i[n];o.next([s,e[s]]),t.index=n+1,this.schedule(t)}else o.complete()}var o=function(t){function e(e,i){t.call(this),this.obj=e,this.scheduler=i,this.keys=Object.keys(e)}return r(e,t),e.create=function(t,i){return new e(t,i)},e.prototype._subscribe=function(t){var e=this.keys,i=this.scheduler,r=e.length;if(i)return i.schedule(n,0,{obj:this.obj,keys:e,length:r,index:0,subscriber:t});for(var o=0;o<r;o++){var s=e[o];t.next([s,this.obj[s]])}t.complete()},e}(i(0).Observable);e.PairsObservable=o},function(t,e,i){"use strict";var r=i(0),n=i(280);r.Observable.range=n.range},function(t,e,i){"use strict";var r=i(281);e.range=r.RangeObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e,i,r){t.call(this),this.start=e,this._count=i,this.scheduler=r}return r(e,t),e.create=function(t,i,r){return void 0===t&&(t=0),void 0===i&&(i=0),new e(t,i,r)},e.dispatch=function(t){var e=t.start,i=t.index,r=t.count,n=t.subscriber;i>=r?n.complete():(n.next(e),n.closed||(t.index=i+1,t.start=e+1,this.schedule(t)))},e.prototype._subscribe=function(t){var i=0,r=this.start,n=this._count,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{index:i,count:n,start:r,subscriber:t});for(;;){if(i++>=n){t.complete();break}if(t.next(r++),t.closed)break}},e}(i(0).Observable);e.RangeObservable=n},function(t,e,i){"use strict";var r=i(0),n=i(283);r.Observable.using=n.using},function(t,e,i){"use strict";var r=i(284);e.using=r.UsingObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(6),s=i(5),a=function(t){function e(e,i){t.call(this),this.resourceFactory=e,this.observableFactory=i}return r(e,t),e.create=function(t,i){return new e(t,i)},e.prototype._subscribe=function(t){var e,i=this.resourceFactory,r=this.observableFactory;try{return e=i(),new u(t,e,r)}catch(n){t.error(n)}},e}(n.Observable);e.UsingObservable=a;var u=function(t){function e(e,i,r){t.call(this,e),this.resource=i,this.observableFactory=r,e.add(i),this.tryUse()}return r(e,t),e.prototype.tryUse=function(){try{var t=this.observableFactory.call(this,this.resource);t&&this.add(o.subscribeToResult(this,t))}catch(e){this._error(e)}},e}(s.OuterSubscriber)},function(t,e,i){"use strict";var r=i(0),n=i(286);r.Observable.throw=n._throw},function(t,e,i){"use strict";var r=i(287);e._throw=r.ErrorObservable.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e,i){t.call(this),this.error=e,this.scheduler=i}return r(e,t),e.create=function(t,i){return new e(t,i)},e.dispatch=function(t){var e=t.error;t.subscriber.error(e)},e.prototype._subscribe=function(t){var i=this.error,r=this.scheduler;if(t.syncErrorThrowable=!0,r)return r.schedule(e.dispatch,0,{error:i,subscriber:t});t.error(i)},e}(i(0).Observable);e.ErrorObservable=n},function(t,e,i){"use strict";var r=i(0),n=i(117);r.Observable.timer=n.timer},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(54),o=i(0),s=i(17),a=i(37),u=i(72),c=function(t){function e(e,i,r){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,n.isNumeric(i)?this.period=Number(i)<1?1:Number(i):a.isScheduler(i)&&(r=i),a.isScheduler(r)||(r=s.async),this.scheduler=r,this.dueTime=u.isDate(e)?+e-this.scheduler.now():e}return r(e,t),e.create=function(t,i,r){return void 0===t&&(t=0),new e(t,i,r)},e.dispatch=function(t){var e=t.index,i=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===i)return r.complete();t.index=e+1,this.schedule(t,i)}},e.prototype._subscribe=function(t){var i=this.period,r=this.dueTime;return this.scheduler.schedule(e.dispatch,r,{index:0,period:i,subscriber:t})},e}(o.Observable);e.TimerObservable=c},function(t,e,i){"use strict";var r=i(0),n=i(291);r.Observable.zip=n.zip},function(t,e,i){"use strict";var r=i(73);e.zip=r.zipStatic},function(t,e,i){"use strict";var r=i(0),n=i(293);r.Observable.ajax=n.ajax},function(t,e,i){"use strict";var r=i(118);e.ajax=r.AjaxObservable.create},function(t,e,i){"use strict";var r=i(0),n=i(295);r.Observable.webSocket=n.webSocket},function(t,e,i){"use strict";var r=i(296);e.webSocket=r.WebSocketSubject.create},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(2),s=i(0),a=i(20),u=i(26),c=i(74),h=i(25),l=i(24),p=i(299),f=function(t){function e(e,i){if(e instanceof s.Observable)t.call(this,i,e);else{if(t.call(this),this.WebSocketCtor=u.root.WebSocket,this._output=new n.Subject,"string"===typeof e?this.url=e:p.assign(this,e),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new c.ReplaySubject}}return r(e,t),e.prototype.resultSelector=function(t){return JSON.parse(t.data)},e.create=function(t){return new e(t)},e.prototype.lift=function(t){var i=new e(this,this.destination);return i.operator=t,i},e.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new c.ReplaySubject),this._output=new n.Subject},e.prototype.multiplex=function(t,e,i){var r=this;return new s.Observable((function(n){var o=h.tryCatch(t)();o===l.errorObject?n.error(l.errorObject.e):r.next(o);var s=r.subscribe((function(t){var e=h.tryCatch(i)(t);e===l.errorObject?n.error(l.errorObject.e):e&&n.next(t)}),(function(t){return n.error(t)}),(function(){return n.complete()}));return function(){var t=h.tryCatch(e)();t===l.errorObject?n.error(l.errorObject.e):r.next(t),s.unsubscribe()}}))},e.prototype._connectSocket=function(){var t=this,e=this.WebSocketCtor,i=this._output,r=null;try{r=this.protocol?new e(this.url,this.protocol):new e(this.url),this.socket=r,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(s){return void i.error(s)}var n=new a.Subscription((function(){t.socket=null,r&&1===r.readyState&&r.close()}));r.onopen=function(e){var s=t.openObserver;s&&s.next(e);var a=t.destination;t.destination=o.Subscriber.create((function(t){return 1===r.readyState&&r.send(t)}),(function(e){var n=t.closingObserver;n&&n.next(void 0),e&&e.code?r.close(e.code,e.reason):i.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()}),(function(){var e=t.closingObserver;e&&e.next(void 0),r.close(),t._resetState()})),a&&a instanceof c.ReplaySubject&&n.add(a.subscribe(t.destination))},r.onerror=function(e){t._resetState(),i.error(e)},r.onclose=function(e){t._resetState();var r=t.closeObserver;r&&r.next(e),e.wasClean?i.complete():i.error(e)},r.onmessage=function(e){var r=h.tryCatch(t.resultSelector)(e);r===l.errorObject?i.error(l.errorObject.e):i.next(r)}},e.prototype._subscribe=function(t){var e=this,i=this.source;if(i)return i.subscribe(t);this.socket||this._connectSocket();var r=new a.Subscription;return r.add(this._output.subscribe(t)),r.add((function(){var t=e.socket;0===e._output.observers.length&&(t&&1===t.readyState&&t.close(),e._resetState())})),r},e.prototype.unsubscribe=function(){var e=this.source,i=this.socket;i&&1===i.readyState&&(i.close(),this._resetState()),t.prototype.unsubscribe.call(this),e||(this.destination=new c.ReplaySubject)},e}(n.AnonymousSubject);e.WebSocketSubject=f},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e,i){t.call(this,e,i),this.scheduler=e,this.work=i}return r(e,t),e.prototype.schedule=function(e,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,i){return i>0||this.closed?t.prototype.execute.call(this,e,i):this._execute(e,i)},e.prototype.requestAsyncId=function(e,i,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,i,r):e.flush(this)},e}(i(55).AsyncAction);e.QueueAction=n},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){t.apply(this,arguments)}return r(e,t),e}(i(56).AsyncScheduler);e.QueueScheduler=n},function(t,e,i){"use strict";var r=i(26);function n(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=e.length,n=0;n<r;n++){var o=e[n];for(var s in o)o.hasOwnProperty(s)&&(t[s]=o[s])}return t}function o(t){return t.Object.assign||n}e.assignImpl=n,e.getAssign=o,e.assign=o(r.root)},function(t,e,i){"use strict";var r=i(0),n=i(301);r.Observable.prototype.buffer=n.buffer},function(t,e,i){"use strict";var r=i(120);e.buffer=function(t){return r.buffer(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(303);r.Observable.prototype.bufferCount=n.bufferCount},function(t,e,i){"use strict";var r=i(121);e.bufferCount=function(t,e){return void 0===e&&(e=null),r.bufferCount(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(305);r.Observable.prototype.bufferTime=n.bufferTime},function(t,e,i){"use strict";var r=i(17),n=i(37),o=i(122);e.bufferTime=function(t){var e=arguments.length,i=r.async;n.isScheduler(arguments[arguments.length-1])&&(i=arguments[arguments.length-1],e--);var s=null;e>=2&&(s=arguments[1]);var a=Number.POSITIVE_INFINITY;return e>=3&&(a=arguments[2]),o.bufferTime(t,s,a,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(307);r.Observable.prototype.bufferToggle=n.bufferToggle},function(t,e,i){"use strict";var r=i(123);e.bufferToggle=function(t,e){return r.bufferToggle(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(309);r.Observable.prototype.bufferWhen=n.bufferWhen},function(t,e,i){"use strict";var r=i(124);e.bufferWhen=function(t){return r.bufferWhen(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(311);r.Observable.prototype.catch=n._catch,r.Observable.prototype._catch=n._catch},function(t,e,i){"use strict";var r=i(125);e._catch=function(t){return r.catchError(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(313);r.Observable.prototype.combineAll=n.combineAll},function(t,e,i){"use strict";var r=i(126);e.combineAll=function(t){return r.combineAll(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(315);r.Observable.prototype.combineLatest=n.combineLatest},function(t,e,i){"use strict";var r=i(68);e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.combineLatest.apply(void 0,t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(317);r.Observable.prototype.concat=n.concat},function(t,e,i){"use strict";var r=i(127),n=i(51);e.concatStatic=n.concat,e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.concat.apply(void 0,t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(319);r.Observable.prototype.concatAll=n.concatAll},function(t,e,i){"use strict";var r=i(87);e.concatAll=function(){return r.concatAll()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(321);r.Observable.prototype.concatMap=n.concatMap},function(t,e,i){"use strict";var r=i(90);e.concatMap=function(t,e){return r.concatMap(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(323);r.Observable.prototype.concatMapTo=n.concatMapTo},function(t,e,i){"use strict";var r=i(128);e.concatMapTo=function(t,e){return r.concatMapTo(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(325);r.Observable.prototype.count=n.count},function(t,e,i){"use strict";var r=i(129);e.count=function(t){return r.count(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(327);r.Observable.prototype.dematerialize=n.dematerialize},function(t,e,i){"use strict";var r=i(130);e.dematerialize=function(){return r.dematerialize()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(329);r.Observable.prototype.debounce=n.debounce},function(t,e,i){"use strict";var r=i(131);e.debounce=function(t){return r.debounce(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(331);r.Observable.prototype.debounceTime=n.debounceTime},function(t,e,i){"use strict";var r=i(17),n=i(132);e.debounceTime=function(t,e){return void 0===e&&(e=r.async),n.debounceTime(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(333);r.Observable.prototype.defaultIfEmpty=n.defaultIfEmpty},function(t,e,i){"use strict";var r=i(91);e.defaultIfEmpty=function(t){return void 0===t&&(t=null),r.defaultIfEmpty(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(335);r.Observable.prototype.delay=n.delay},function(t,e,i){"use strict";var r=i(17),n=i(133);e.delay=function(t,e){return void 0===e&&(e=r.async),n.delay(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(337);r.Observable.prototype.delayWhen=n.delayWhen},function(t,e,i){"use strict";var r=i(134);e.delayWhen=function(t,e){return r.delayWhen(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(339);r.Observable.prototype.distinct=n.distinct},function(t,e,i){"use strict";var r=i(135);e.distinct=function(t,e){return r.distinct(t,e)(this)}},function(t,e,i){"use strict";var r=i(26);function n(){return function(){function t(){this._values=[]}return t.prototype.add=function(t){this.has(t)||this._values.push(t)},t.prototype.has=function(t){return-1!==this._values.indexOf(t)},Object.defineProperty(t.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._values.length=0},t}()}e.minimalSetImpl=n,e.Set=r.root.Set||n()},function(t,e,i){"use strict";var r=i(0),n=i(342);r.Observable.prototype.distinctUntilChanged=n.distinctUntilChanged},function(t,e,i){"use strict";var r=i(92);e.distinctUntilChanged=function(t,e){return r.distinctUntilChanged(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(344);r.Observable.prototype.distinctUntilKeyChanged=n.distinctUntilKeyChanged},function(t,e,i){"use strict";var r=i(136);e.distinctUntilKeyChanged=function(t,e){return r.distinctUntilKeyChanged(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(346);r.Observable.prototype.do=n._do,r.Observable.prototype._do=n._do},function(t,e,i){"use strict";var r=i(137);e._do=function(t,e,i){return r.tap(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(348);r.Observable.prototype.exhaust=n.exhaust},function(t,e,i){"use strict";var r=i(138);e.exhaust=function(){return r.exhaust()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(350);r.Observable.prototype.exhaustMap=n.exhaustMap},function(t,e,i){"use strict";var r=i(139);e.exhaustMap=function(t,e){return r.exhaustMap(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(352);r.Observable.prototype.expand=n.expand},function(t,e,i){"use strict";var r=i(140);e.expand=function(t,e,i){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,r.expand(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(354);r.Observable.prototype.elementAt=n.elementAt},function(t,e,i){"use strict";var r=i(141);e.elementAt=function(t,e){return r.elementAt(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(356);r.Observable.prototype.filter=n.filter},function(t,e,i){"use strict";var r=i(93);e.filter=function(t,e){return r.filter(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(358);r.Observable.prototype.finally=n._finally,r.Observable.prototype._finally=n._finally},function(t,e,i){"use strict";var r=i(142);e._finally=function(t){return r.finalize(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(360);r.Observable.prototype.find=n.find},function(t,e,i){"use strict";var r=i(94);e.find=function(t,e){return r.find(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(362);r.Observable.prototype.findIndex=n.findIndex},function(t,e,i){"use strict";var r=i(143);e.findIndex=function(t,e){return r.findIndex(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(364);r.Observable.prototype.first=n.first},function(t,e,i){"use strict";var r=i(144);e.first=function(t,e,i){return r.first(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(366);r.Observable.prototype.groupBy=n.groupBy},function(t,e,i){"use strict";var r=i(145);e.GroupedObservable=r.GroupedObservable,e.groupBy=function(t,e,i,n){return r.groupBy(t,e,i,n)(this)}},function(t,e,i){"use strict";var r=i(26),n=i(368);e.Map=r.root.Map||n.MapPolyfill},function(t,e,i){"use strict";var r=function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?void 0:this._values[e]},t.prototype.set=function(t,e){var i=this._keys.indexOf(t);return-1===i?(this._keys.push(t),this._values.push(e),this.size++):this._values[i]=e,this},t.prototype.delete=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},t.prototype.forEach=function(t,e){for(var i=0;i<this.size;i++)t.call(e,this._values[i],this._keys[i])},t}();e.MapPolyfill=r},function(t,e,i){"use strict";var r=function(){function t(){this.values={}}return t.prototype.delete=function(t){return this.values[t]=null,!0},t.prototype.set=function(t,e){return this.values[t]=e,this},t.prototype.get=function(t){return this.values[t]},t.prototype.forEach=function(t,e){var i=this.values;for(var r in i)i.hasOwnProperty(r)&&null!==i[r]&&t.call(e,i[r],r)},t.prototype.clear=function(){this.values={}},t}();e.FastMap=r},function(t,e,i){"use strict";var r=i(0),n=i(371);r.Observable.prototype.ignoreElements=n.ignoreElements},function(t,e,i){"use strict";var r=i(146);e.ignoreElements=function(){return r.ignoreElements()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(373);r.Observable.prototype.isEmpty=n.isEmpty},function(t,e,i){"use strict";var r=i(147);e.isEmpty=function(){return r.isEmpty()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(375);r.Observable.prototype.audit=n.audit},function(t,e,i){"use strict";var r=i(95);e.audit=function(t){return r.audit(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(377);r.Observable.prototype.auditTime=n.auditTime},function(t,e,i){"use strict";var r=i(17),n=i(148);e.auditTime=function(t,e){return void 0===e&&(e=r.async),n.auditTime(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(379);r.Observable.prototype.last=n.last},function(t,e,i){"use strict";var r=i(149);e.last=function(t,e,i){return r.last(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(381);r.Observable.prototype.let=n.letProto,r.Observable.prototype.letBind=n.letProto},function(t,e,i){"use strict";e.letProto=function(t){return t(this)}},function(t,e,i){"use strict";var r=i(0),n=i(383);r.Observable.prototype.every=n.every},function(t,e,i){"use strict";var r=i(150);e.every=function(t,e){return r.every(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(385);r.Observable.prototype.map=n.map},function(t,e,i){"use strict";var r=i(57);e.map=function(t,e){return r.map(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(387);r.Observable.prototype.mapTo=n.mapTo},function(t,e,i){"use strict";var r=i(151);e.mapTo=function(t){return r.mapTo(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(389);r.Observable.prototype.materialize=n.materialize},function(t,e,i){"use strict";var r=i(152);e.materialize=function(){return r.materialize()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(391);r.Observable.prototype.max=n.max},function(t,e,i){"use strict";var r=i(153);e.max=function(t){return r.max(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(393);r.Observable.prototype.merge=n.merge},function(t,e,i){"use strict";var r=i(154),n=i(71);e.mergeStatic=n.merge,e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.merge.apply(void 0,t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(395);r.Observable.prototype.mergeAll=n.mergeAll},function(t,e,i){"use strict";var r=i(70);e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),r.mergeAll(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(397);r.Observable.prototype.mergeMap=n.mergeMap,r.Observable.prototype.flatMap=n.mergeMap},function(t,e,i){"use strict";var r=i(53);e.mergeMap=function(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),r.mergeMap(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(399);r.Observable.prototype.flatMapTo=n.mergeMapTo,r.Observable.prototype.mergeMapTo=n.mergeMapTo},function(t,e,i){"use strict";var r=i(155);e.mergeMapTo=function(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),r.mergeMapTo(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(401);r.Observable.prototype.mergeScan=n.mergeScan},function(t,e,i){"use strict";var r=i(156);e.mergeScan=function(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),r.mergeScan(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(403);r.Observable.prototype.min=n.min},function(t,e,i){"use strict";var r=i(157);e.min=function(t){return r.min(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(405);r.Observable.prototype.multicast=n.multicast},function(t,e,i){"use strict";var r=i(45);e.multicast=function(t,e){return r.multicast(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(407);r.Observable.prototype.observeOn=n.observeOn},function(t,e,i){"use strict";var r=i(69);e.observeOn=function(t,e){return void 0===e&&(e=0),r.observeOn(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(409);r.Observable.prototype.onErrorResumeNext=n.onErrorResumeNext},function(t,e,i){"use strict";var r=i(89);e.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.onErrorResumeNext.apply(void 0,t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(411);r.Observable.prototype.pairwise=n.pairwise},function(t,e,i){"use strict";var r=i(159);e.pairwise=function(){return r.pairwise()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(413);r.Observable.prototype.partition=n.partition},function(t,e,i){"use strict";var r=i(160);e.partition=function(t,e){return r.partition(t,e)(this)}},function(t,e,i){"use strict";e.not=function(t,e){function i(){return!i.pred.apply(i.thisArg,arguments)}return i.pred=t,i.thisArg=e,i}},function(t,e,i){"use strict";var r=i(0),n=i(416);r.Observable.prototype.pluck=n.pluck},function(t,e,i){"use strict";var r=i(161);e.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.pluck.apply(void 0,t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(418);r.Observable.prototype.publish=n.publish},function(t,e,i){"use strict";var r=i(162);e.publish=function(t){return r.publish(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(420);r.Observable.prototype.publishBehavior=n.publishBehavior},function(t,e,i){"use strict";var r=i(163);e.publishBehavior=function(t){return r.publishBehavior(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(422);r.Observable.prototype.publishReplay=n.publishReplay},function(t,e,i){"use strict";var r=i(165);e.publishReplay=function(t,e,i,n){return r.publishReplay(t,e,i,n)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(424);r.Observable.prototype.publishLast=n.publishLast},function(t,e,i){"use strict";var r=i(166);e.publishLast=function(){return r.publishLast()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(426);r.Observable.prototype.race=n.race},function(t,e,i){"use strict";var r=i(167),n=i(88);e.raceStatic=n.race,e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.race.apply(void 0,t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(428);r.Observable.prototype.reduce=n.reduce},function(t,e,i){"use strict";var r=i(59);e.reduce=function(t,e){return arguments.length>=2?r.reduce(t,e)(this):r.reduce(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(430);r.Observable.prototype.repeat=n.repeat},function(t,e,i){"use strict";var r=i(168);e.repeat=function(t){return void 0===t&&(t=-1),r.repeat(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(432);r.Observable.prototype.repeatWhen=n.repeatWhen},function(t,e,i){"use strict";var r=i(169);e.repeatWhen=function(t){return r.repeatWhen(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(434);r.Observable.prototype.retry=n.retry},function(t,e,i){"use strict";var r=i(170);e.retry=function(t){return void 0===t&&(t=-1),r.retry(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(436);r.Observable.prototype.retryWhen=n.retryWhen},function(t,e,i){"use strict";var r=i(171);e.retryWhen=function(t){return r.retryWhen(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(438);r.Observable.prototype.sample=n.sample},function(t,e,i){"use strict";var r=i(172);e.sample=function(t){return r.sample(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(440);r.Observable.prototype.sampleTime=n.sampleTime},function(t,e,i){"use strict";var r=i(17),n=i(173);e.sampleTime=function(t,e){return void 0===e&&(e=r.async),n.sampleTime(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(442);r.Observable.prototype.scan=n.scan},function(t,e,i){"use strict";var r=i(96);e.scan=function(t,e){return arguments.length>=2?r.scan(t,e)(this):r.scan(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(444);r.Observable.prototype.sequenceEqual=n.sequenceEqual},function(t,e,i){"use strict";var r=i(174);e.sequenceEqual=function(t,e){return r.sequenceEqual(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(446);r.Observable.prototype.share=n.share},function(t,e,i){"use strict";var r=i(175);e.share=function(){return r.share()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(448);r.Observable.prototype.shareReplay=n.shareReplay},function(t,e,i){"use strict";var r=i(176);e.shareReplay=function(t,e,i){return r.shareReplay(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(450);r.Observable.prototype.single=n.single},function(t,e,i){"use strict";var r=i(177);e.single=function(t){return r.single(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(452);r.Observable.prototype.skip=n.skip},function(t,e,i){"use strict";var r=i(178);e.skip=function(t){return r.skip(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(454);r.Observable.prototype.skipLast=n.skipLast},function(t,e,i){"use strict";var r=i(179);e.skipLast=function(t){return r.skipLast(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(456);r.Observable.prototype.skipUntil=n.skipUntil},function(t,e,i){"use strict";var r=i(180);e.skipUntil=function(t){return r.skipUntil(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(458);r.Observable.prototype.skipWhile=n.skipWhile},function(t,e,i){"use strict";var r=i(181);e.skipWhile=function(t){return r.skipWhile(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(460);r.Observable.prototype.startWith=n.startWith},function(t,e,i){"use strict";var r=i(182);e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.startWith.apply(void 0,t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(462);r.Observable.prototype.subscribeOn=n.subscribeOn},function(t,e,i){"use strict";var r=i(463);e.subscribeOn=function(t,e){return void 0===e&&(e=0),r.subscribeOn(t,e)(this)}},function(t,e,i){"use strict";var r=i(464);e.subscribeOn=function(t,e){return void 0===e&&(e=0),function(i){return i.lift(new n(t,e))}};var n=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new r.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},t}()},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(183),s=i(54),a=function(t){function e(e,i,r){void 0===i&&(i=0),void 0===r&&(r=o.asap),t.call(this),this.source=e,this.delayTime=i,this.scheduler=r,(!s.isNumeric(i)||i<0)&&(this.delayTime=0),r&&"function"===typeof r.schedule||(this.scheduler=o.asap)}return r(e,t),e.create=function(t,i,r){return void 0===i&&(i=0),void 0===r&&(r=o.asap),new e(t,i,r)},e.dispatch=function(t){var e=t.source,i=t.subscriber;return this.add(e.subscribe(i))},e.prototype._subscribe=function(t){var i=this.delayTime,r=this.source;return this.scheduler.schedule(e.dispatch,i,{source:r,subscriber:t})},e}(n.Observable);e.SubscribeOnObservable=a},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(466),o=function(t){function e(e,i){t.call(this,e,i),this.scheduler=e,this.work=i}return r(e,t),e.prototype.requestAsyncId=function(e,i,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,i,r):(e.actions.push(this),e.scheduled||(e.scheduled=n.Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,i,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,i,r);0===e.actions.length&&(n.Immediate.clearImmediate(i),e.scheduled=void 0)},e}(i(55).AsyncAction);e.AsapAction=o},function(t,e,i){"use strict";var r=i(26),n=function(){function t(t){if(this.root=t,t.setImmediate&&"function"===typeof t.setImmediate)this.setImmediate=t.setImmediate.bind(t),this.clearImmediate=t.clearImmediate.bind(t);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var e=function t(e){delete t.instance.tasksByHandle[e]};e.instance=this,this.clearImmediate=e}}return t.prototype.identify=function(t){return this.root.Object.prototype.toString.call(t)},t.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},t.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},t.prototype.canUseReadyStateChange=function(){var t=this.root.document;return Boolean(t&&"onreadystatechange"in t.createElement("script"))},t.prototype.canUsePostMessage=function(){var t=this.root;if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}return!1},t.prototype.partiallyApplied=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=function t(){var e=t.handler,i=t.args;"function"===typeof e?e.apply(void 0,i):new Function(""+e)()};return r.handler=t,r.args=e,r},t.prototype.addFromSetImmediateArguments=function(t){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,t),this.nextHandle++},t.prototype.createProcessNextTickSetImmediate=function(){var t=function t(){var e=t.instance,i=e.addFromSetImmediateArguments(arguments);return e.root.process.nextTick(e.partiallyApplied(e.runIfPresent,i)),i};return t.instance=this,t},t.prototype.createPostMessageSetImmediate=function(){var t=this.root,e="setImmediate$"+t.Math.random()+"$",i=function i(r){var n=i.instance;r.source===t&&"string"===typeof r.data&&0===r.data.indexOf(e)&&n.runIfPresent(+r.data.slice(e.length))};i.instance=this,t.addEventListener("message",i,!1);var r=function t(){var e=t,i=e.messagePrefix,r=e.instance,n=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(i+n,"*"),n};return r.instance=this,r.messagePrefix=e,r},t.prototype.runIfPresent=function(t){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,t),0);else{var e=this.tasksByHandle[t];if(e){this.currentlyRunningATask=!0;try{e()}finally{this.clearImmediate(t),this.currentlyRunningATask=!1}}}},t.prototype.createMessageChannelSetImmediate=function(){var t=this,e=new this.root.MessageChannel;e.port1.onmessage=function(e){var i=e.data;t.runIfPresent(i)};var i=function t(){var e=t,i=e.channel,r=e.instance,n=r.addFromSetImmediateArguments(arguments);return i.port2.postMessage(n),n};return i.channel=e,i.instance=this,i},t.prototype.createReadyStateChangeSetImmediate=function(){var t=function t(){var e=t.instance,i=e.root,r=i.document,n=r.documentElement,o=e.addFromSetImmediateArguments(arguments),s=r.createElement("script");return s.onreadystatechange=function(){e.runIfPresent(o),s.onreadystatechange=null,n.removeChild(s),s=null},n.appendChild(s),o};return t.instance=this,t},t.prototype.createSetTimeoutSetImmediate=function(){var t=function t(){var e=t.instance,i=e.addFromSetImmediateArguments(arguments);return e.root.setTimeout(e.partiallyApplied(e.runIfPresent,i),0),i};return t.instance=this,t},t}();e.ImmediateDefinition=n,e.Immediate=new n(r.root)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,i=this.actions,r=-1,n=i.length;t=t||i.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<n&&(t=i.shift()));if(this.active=!1,e){for(;++r<n&&(t=i.shift());)t.unsubscribe();throw e}},e}(i(56).AsyncScheduler);e.AsapScheduler=n},function(t,e,i){"use strict";var r=i(0),n=i(469);r.Observable.prototype.switch=n._switch,r.Observable.prototype._switch=n._switch},function(t,e,i){"use strict";var r=i(184);e._switch=function(){return r.switchAll()(this)}},function(t,e,i){"use strict";var r=i(0),n=i(471);r.Observable.prototype.switchMap=n.switchMap},function(t,e,i){"use strict";var r=i(99);e.switchMap=function(t,e){return r.switchMap(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(473);r.Observable.prototype.switchMapTo=n.switchMapTo},function(t,e,i){"use strict";var r=i(185);e.switchMapTo=function(t,e){return r.switchMapTo(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(475);r.Observable.prototype.take=n.take},function(t,e,i){"use strict";var r=i(186);e.take=function(t){return r.take(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(477);r.Observable.prototype.takeLast=n.takeLast},function(t,e,i){"use strict";var r=i(97);e.takeLast=function(t){return r.takeLast(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(479);r.Observable.prototype.takeUntil=n.takeUntil},function(t,e,i){"use strict";var r=i(187);e.takeUntil=function(t){return r.takeUntil(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(481);r.Observable.prototype.takeWhile=n.takeWhile},function(t,e,i){"use strict";var r=i(188);e.takeWhile=function(t){return r.takeWhile(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(483);r.Observable.prototype.throttle=n.throttle},function(t,e,i){"use strict";var r=i(76);e.throttle=function(t,e){return void 0===e&&(e=r.defaultThrottleConfig),r.throttle(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(485);r.Observable.prototype.throttleTime=n.throttleTime},function(t,e,i){"use strict";var r=i(17),n=i(76),o=i(189);e.throttleTime=function(t,e,i){return void 0===e&&(e=r.async),void 0===i&&(i=n.defaultThrottleConfig),o.throttleTime(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(190);r.Observable.prototype.timeInterval=n.timeInterval},function(t,e,i){"use strict";var r=i(0),n=i(488);r.Observable.prototype.timeout=n.timeout},function(t,e,i){"use strict";var r=i(17),n=i(192);e.timeout=function(t,e){return void 0===e&&(e=r.async),n.timeout(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(490);r.Observable.prototype.timeoutWith=n.timeoutWith},function(t,e,i){"use strict";var r=i(17),n=i(194);e.timeoutWith=function(t,e,i){return void 0===i&&(i=r.async),n.timeoutWith(t,e,i)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(492);r.Observable.prototype.timestamp=n.timestamp},function(t,e,i){"use strict";var r=i(17),n=i(100);e.timestamp=function(t){return void 0===t&&(t=r.async),n.timestamp(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(494);r.Observable.prototype.toArray=n.toArray},function(t,e,i){"use strict";var r=i(195);e.toArray=function(){return r.toArray()(this)}},function(t,e){},function(t,e,i){"use strict";var r=i(0),n=i(497);r.Observable.prototype.window=n.window},function(t,e,i){"use strict";var r=i(196);e.window=function(t){return r.window(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(499);r.Observable.prototype.windowCount=n.windowCount},function(t,e,i){"use strict";var r=i(197);e.windowCount=function(t,e){return void 0===e&&(e=0),r.windowCount(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(501);r.Observable.prototype.windowTime=n.windowTime},function(t,e,i){"use strict";var r=i(17),n=i(54),o=i(37),s=i(198);e.windowTime=function(t){var e=r.async,i=null,a=Number.POSITIVE_INFINITY;return o.isScheduler(arguments[3])&&(e=arguments[3]),o.isScheduler(arguments[2])?e=arguments[2]:n.isNumeric(arguments[2])&&(a=arguments[2]),o.isScheduler(arguments[1])?e=arguments[1]:n.isNumeric(arguments[1])&&(i=arguments[1]),s.windowTime(t,i,a,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(503);r.Observable.prototype.windowToggle=n.windowToggle},function(t,e,i){"use strict";var r=i(199);e.windowToggle=function(t,e){return r.windowToggle(t,e)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(505);r.Observable.prototype.windowWhen=n.windowWhen},function(t,e,i){"use strict";var r=i(200);e.windowWhen=function(t){return r.windowWhen(t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(507);r.Observable.prototype.withLatestFrom=n.withLatestFrom},function(t,e,i){"use strict";var r=i(201);e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.withLatestFrom.apply(void 0,t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(509);r.Observable.prototype.zip=n.zipProto},function(t,e,i){"use strict";var r=i(73);e.zipProto=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return r.zip.apply(void 0,t)(this)}},function(t,e,i){"use strict";var r=i(0),n=i(511);r.Observable.prototype.zipAll=n.zipAll},function(t,e,i){"use strict";var r=i(202);e.zipAll=function(t){return r.zipAll(t)(this)}},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(52),s=i(513),a=i(514),u=i(204),c=i(206),h=function(t){function e(e){t.call(this,c.VirtualAction,750),this.assertDeepEqual=e,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return r(e,t),e.prototype.createTime=function(t){var i=t.indexOf("|");if(-1===i)throw new Error('marble diagram for time should have a completion marker "|"');return i*e.frameTimeFactor},e.prototype.createColdObservable=function(t,i,r){if(-1!==t.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==t.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var n=e.parseMarbles(t,i,r),o=new s.ColdObservable(n,this);return this.coldObservables.push(o),o},e.prototype.createHotObservable=function(t,i,r){if(-1!==t.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var n=e.parseMarbles(t,i,r),o=new a.HotObservable(n,this);return this.hotObservables.push(o),o},e.prototype.materializeInnerObservable=function(t,e){var i=this,r=[];return t.subscribe((function(t){r.push({frame:i.frame-e,notification:o.Notification.createNext(t)})}),(function(t){r.push({frame:i.frame-e,notification:o.Notification.createError(t)})}),(function(){r.push({frame:i.frame-e,notification:o.Notification.createComplete()})})),r},e.prototype.expectObservable=function(t,i){var r=this;void 0===i&&(i=null);var s,a=[],u={actual:a,ready:!1},c=e.parseMarblesAsSubscriptions(i).unsubscribedFrame;return this.schedule((function(){s=t.subscribe((function(t){var e=t;t instanceof n.Observable&&(e=r.materializeInnerObservable(e,r.frame)),a.push({frame:r.frame,notification:o.Notification.createNext(e)})}),(function(t){a.push({frame:r.frame,notification:o.Notification.createError(t)})}),(function(){a.push({frame:r.frame,notification:o.Notification.createComplete()})}))}),0),c!==Number.POSITIVE_INFINITY&&this.schedule((function(){return s.unsubscribe()}),c),this.flushTests.push(u),{toBe:function(t,i,r){u.ready=!0,u.expected=e.parseMarbles(t,i,r,!0)}}},e.prototype.expectSubscriptions=function(t){var i={actual:t,ready:!1};return this.flushTests.push(i),{toBe:function(t){var r="string"===typeof t?[t]:t;i.ready=!0,i.expected=r.map((function(t){return e.parseMarblesAsSubscriptions(t)}))}}},e.prototype.flush=function(){for(var e=this.hotObservables;e.length>0;)e.shift().setup();t.prototype.flush.call(this);for(var i=this.flushTests.filter((function(t){return t.ready}));i.length>0;){var r=i.shift();this.assertDeepEqual(r.actual,r.expected)}},e.parseMarblesAsSubscriptions=function(t){if("string"!==typeof t)return new u.SubscriptionLog(Number.POSITIVE_INFINITY);for(var e=t.length,i=-1,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,o=0;o<e;o++){var s=o*this.frameTimeFactor,a=t[o];switch(a){case"-":case" ":break;case"(":i=s;break;case")":i=-1;break;case"^":if(r!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");r=i>-1?i:s;break;case"!":if(n!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");n=i>-1?i:s;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+a+"'.")}}return n<0?new u.SubscriptionLog(r):new u.SubscriptionLog(r,n)},e.parseMarbles=function(t,e,i,r){if(void 0===r&&(r=!1),-1!==t.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var n=t.length,a=[],u=t.indexOf("^"),c=-1===u?0:u*-this.frameTimeFactor,h="object"!==typeof e?function(t){return t}:function(t){return r&&e[t]instanceof s.ColdObservable?e[t].messages:e[t]},l=-1,p=0;p<n;p++){var f=p*this.frameTimeFactor+c,d=void 0,m=t[p];switch(m){case"-":case" ":break;case"(":l=f;break;case")":l=-1;break;case"|":d=o.Notification.createComplete();break;case"^":break;case"#":d=o.Notification.createError(i||"error");break;default:d=o.Notification.createNext(h(m))}d&&a.push({frame:l>-1?l:f,notification:d})}return a},e}(c.VirtualTimeScheduler);e.TestScheduler=h},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(0),o=i(20),s=i(203),a=i(205),u=function(t){function e(e,i){t.call(this,(function(t){var e=this,i=e.logSubscribedFrame();return t.add(new o.Subscription((function(){e.logUnsubscribedFrame(i)}))),e.scheduleMessages(t),t})),this.messages=e,this.subscriptions=[],this.scheduler=i}return r(e,t),e.prototype.scheduleMessages=function(t){for(var e=this.messages.length,i=0;i<e;i++){var r=this.messages[i];t.add(this.scheduler.schedule((function(t){var e=t.message,i=t.subscriber;e.notification.observe(i)}),r.frame,{message:r,subscriber:t}))}},e}(n.Observable);e.ColdObservable=u,a.applyMixins(u,[s.SubscriptionLoggable])},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(23),o=i(20),s=i(203),a=i(205),u=function(t){function e(e,i){t.call(this),this.messages=e,this.subscriptions=[],this.scheduler=i}return r(e,t),e.prototype._subscribe=function(e){var i=this,r=i.logSubscribedFrame();return e.add(new o.Subscription((function(){i.logUnsubscribedFrame(r)}))),t.prototype._subscribe.call(this,e)},e.prototype.setup=function(){for(var t=this,e=t.messages.length,i=0;i<e;i++)!function(){var e=t.messages[i];t.scheduler.schedule((function(){e.notification.observe(t)}),e.frame)}()},e}(n.Subject);e.HotObservable=u,a.applyMixins(u,[s.SubscriptionLoggable])},function(t,e,i){"use strict";var r=i(516),n=i(518);e.animationFrame=new n.AnimationFrameScheduler(r.AnimationFrameAction)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=i(55),o=i(517),s=function(t){function e(e,i){t.call(this,e,i),this.scheduler=e,this.work=i}return r(e,t),e.prototype.requestAsyncId=function(e,i,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,i,r):(e.actions.push(this),e.scheduled||(e.scheduled=o.AnimationFrame.requestAnimationFrame(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,i,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,i,r);0===e.actions.length&&(o.AnimationFrame.cancelAnimationFrame(i),e.scheduled=void 0)},e}(n.AsyncAction);e.AnimationFrameAction=s},function(t,e,i){"use strict";var r=i(26),n=function(t){t.requestAnimationFrame?(this.cancelAnimationFrame=t.cancelAnimationFrame.bind(t),this.requestAnimationFrame=t.requestAnimationFrame.bind(t)):t.mozRequestAnimationFrame?(this.cancelAnimationFrame=t.mozCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.mozRequestAnimationFrame.bind(t)):t.webkitRequestAnimationFrame?(this.cancelAnimationFrame=t.webkitCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.webkitRequestAnimationFrame.bind(t)):t.msRequestAnimationFrame?(this.cancelAnimationFrame=t.msCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.msRequestAnimationFrame.bind(t)):t.oRequestAnimationFrame?(this.cancelAnimationFrame=t.oCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.oRequestAnimationFrame.bind(t)):(this.cancelAnimationFrame=t.clearTimeout.bind(t),this.requestAnimationFrame=function(e){return t.setTimeout(e,1e3/60)})};e.RequestAnimationFrameDefinition=n,e.AnimationFrame=new n(r.root)},function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,i=this.actions,r=-1,n=i.length;t=t||i.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<n&&(t=i.shift()));if(this.active=!1,e){for(;++r<n&&(t=i.shift());)t.unsubscribe();throw e}},e}(i(56).AsyncScheduler);e.AnimationFrameScheduler=n},function(t,e,i){"use strict";var r=i(95);e.audit=r.audit;var n=i(148);e.auditTime=n.auditTime;var o=i(120);e.buffer=o.buffer;var s=i(121);e.bufferCount=s.bufferCount;var a=i(122);e.bufferTime=a.bufferTime;var u=i(123);e.bufferToggle=u.bufferToggle;var c=i(124);e.bufferWhen=c.bufferWhen;var h=i(125);e.catchError=h.catchError;var l=i(126);e.combineAll=l.combineAll;var p=i(68);e.combineLatest=p.combineLatest;var f=i(127);e.concat=f.concat;var d=i(87);e.concatAll=d.concatAll;var m=i(90);e.concatMap=m.concatMap;var y=i(128);e.concatMapTo=y.concatMapTo;var v=i(129);e.count=v.count;var _=i(131);e.debounce=_.debounce;var b=i(132);e.debounceTime=b.debounceTime;var g=i(91);e.defaultIfEmpty=g.defaultIfEmpty;var x=i(133);e.delay=x.delay;var w=i(134);e.delayWhen=w.delayWhen;var S=i(130);e.dematerialize=S.dematerialize;var T=i(135);e.distinct=T.distinct;var A=i(92);e.distinctUntilChanged=A.distinctUntilChanged;var E=i(136);e.distinctUntilKeyChanged=E.distinctUntilKeyChanged;var I=i(141);e.elementAt=I.elementAt;var O=i(150);e.every=O.every;var C=i(138);e.exhaust=C.exhaust;var P=i(139);e.exhaustMap=P.exhaustMap;var B=i(140);e.expand=B.expand;var M=i(93);e.filter=M.filter;var k=i(142);e.finalize=k.finalize;var R=i(94);e.find=R.find;var D=i(143);e.findIndex=D.findIndex;var F=i(144);e.first=F.first;var N=i(145);e.groupBy=N.groupBy;var L=i(146);e.ignoreElements=L.ignoreElements;var j=i(147);e.isEmpty=j.isEmpty;var U=i(149);e.last=U.last;var z=i(57);e.map=z.map;var V=i(151);e.mapTo=V.mapTo;var W=i(152);e.materialize=W.materialize;var X=i(153);e.max=X.max;var H=i(154);e.merge=H.merge;var G=i(70);e.mergeAll=G.mergeAll;var q=i(53);e.mergeMap=q.mergeMap;var Y=i(53);e.flatMap=Y.mergeMap;var K=i(155);e.mergeMapTo=K.mergeMapTo;var J=i(156);e.mergeScan=J.mergeScan;var Z=i(157);e.min=Z.min;var Q=i(45);e.multicast=Q.multicast;var $=i(69);e.observeOn=$.observeOn;var tt=i(89);e.onErrorResumeNext=tt.onErrorResumeNext;var et=i(159);e.pairwise=et.pairwise;var it=i(160);e.partition=it.partition;var rt=i(161);e.pluck=rt.pluck;var nt=i(162);e.publish=nt.publish;var ot=i(163);e.publishBehavior=ot.publishBehavior;var st=i(166);e.publishLast=st.publishLast;var at=i(165);e.publishReplay=at.publishReplay;var ut=i(167);e.race=ut.race;var ct=i(59);e.reduce=ct.reduce;var ht=i(168);e.repeat=ht.repeat;var lt=i(169);e.repeatWhen=lt.repeatWhen;var pt=i(170);e.retry=pt.retry;var ft=i(171);e.retryWhen=ft.retryWhen;var dt=i(98);e.refCount=dt.refCount;var mt=i(172);e.sample=mt.sample;var yt=i(173);e.sampleTime=yt.sampleTime;var vt=i(96);e.scan=vt.scan;var _t=i(174);e.sequenceEqual=_t.sequenceEqual;var bt=i(175);e.share=bt.share;var gt=i(176);e.shareReplay=gt.shareReplay;var xt=i(177);e.single=xt.single;var wt=i(178);e.skip=wt.skip;var St=i(179);e.skipLast=St.skipLast;var Tt=i(180);e.skipUntil=Tt.skipUntil;var At=i(181);e.skipWhile=At.skipWhile;var Et=i(182);e.startWith=Et.startWith;var It=i(184);e.switchAll=It.switchAll;var Ot=i(99);e.switchMap=Ot.switchMap;var Ct=i(185);e.switchMapTo=Ct.switchMapTo;var Pt=i(186);e.take=Pt.take;var Bt=i(97);e.takeLast=Bt.takeLast;var Mt=i(187);e.takeUntil=Mt.takeUntil;var kt=i(188);e.takeWhile=kt.takeWhile;var Rt=i(137);e.tap=Rt.tap;var Dt=i(76);e.throttle=Dt.throttle;var Ft=i(189);e.throttleTime=Ft.throttleTime;var Nt=i(191);e.timeInterval=Nt.timeInterval;var Lt=i(192);e.timeout=Lt.timeout;var jt=i(194);e.timeoutWith=jt.timeoutWith;var Ut=i(100);e.timestamp=Ut.timestamp;var zt=i(195);e.toArray=zt.toArray;var Vt=i(196);e.window=Vt.window;var Wt=i(197);e.windowCount=Wt.windowCount;var Xt=i(198);e.windowTime=Xt.windowTime;var Ht=i(199);e.windowToggle=Ht.windowToggle;var Gt=i(200);e.windowWhen=Gt.windowWhen;var qt=i(201);e.withLatestFrom=qt.withLatestFrom;var Yt=i(73);e.zip=Yt.zip;var Kt=i(202);e.zipAll=Kt.zipAll},function(t,e,i){var r=i(47),n=i(48),o=i(521),s=i(526),a=i(527),u=i(22),c=Object.freeze({DOWN:"press",UP:"release"}),h=function(){"use strict";function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this._emitActions=!0,this.actionRegistry=new o(n);var h=u.Observable.fromEvent(i,"keydown").filter((function(t){return e.actionRegistry.isBound(t.key)})).map((function(t){return{key:t.key,type:c.DOWN}})),l=u.Observable.fromEvent(i,"keyup").filter((function(t){return e.actionRegistry.isBound(t.key)})).map((function(t){return{key:t.key,type:c.UP}})),p=h.merge(l).groupBy((function(t){return t.key})).map((function(t){return t.distinctUntilChanged(null,(function(t){return t.type}))})).mergeAll();this._actionObservable=new u.Subject,this._keyPressSubscription=p.subscribe((function(t){var i=new a({action:e.actionRegistry.getActionsForKey(t.key),boundKey:t.key,type:t.type});e._emitActions&&e._actionObservable.next(i)})),this.actionHistory=new s(this._actionObservable)}return n(t,[{key:"toggleEmissions",value:function(){this._emitActions=!this._emitActions}},{key:"startSession",value:function(){this.actionHistory.startSession()}},{key:"terminateSession",value:function(){return this.actionHistory.terminateSession()}},{key:"pauseSession",value:function(){this.actionHistory.pauseSession()}},{key:"resumeSession",value:function(){this.actionHistory.resumeSession()}},{key:"getObservable",value:function(){return this._actionObservable}},{key:"clear",value:function(){this._keyPressSubscription.unsubscribe()}},{key:"bindAction",value:function(t,e){this.actionRegistry.setBindingTo(t,e)}},{key:"setBinding",value:function(t,e){this.actionRegistry.setBindingTo(t,e)}}]),t}();t.exports=h},function(t,e,i){var r=i(522),n=i(47),o=i(48),s=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.bindings=e}return o(t,[{key:"bindActionToKey",value:function(t,e){var i;console.error("Warning: deprecated function. Definition of key binding has changed. See documentation.");var n=this.bindings[t];if(n||Array.isArray(n)){if(n&&!Array.isArray(n))throw new Error("Binding ".concat(n," is not an array. All bindings must be an array of action!"))}else this.bindings[t]=[];Array.isArray(e)?(i=this.bindings[t]).push.apply(i,r(e)):this.bindings[t].push(e)}},{key:"setBindingTo",value:function(t,e){this.bindings[t]=e}},{key:"getActionsForKey",value:function(t){return this.bindings[t]||null}},{key:"isBound",value:function(t){return!!this.getActionsForKey(t)}}]),t}();t.exports=s},function(t,e,i){var r=i(523),n=i(524),o=i(525);t.exports=function(t){return r(t)||n(t)||o()}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,i){var r=i(47),n=i(48),o=function(){"use strict";function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;if(r(this,t),!e)throw new Error("No action stream. Must pass a reference to action observable.");this._actionHistory=[],this._recordActions=!1,this._sessionStarted=!1,this._initialTime=-1,this._pauseOffset=0,this._actionStream=e,this._delayMs=n,this.onNewActionEvent=this.onNewActionEvent.bind(this),this._actionStream.filter((function(){return i._recordActions})).subscribe((function(t){return i.onNewActionEvent(t)}))}return n(t,[{key:"startSession",value:function(){this._sessionStarted?console.error("Session currently running. Must terminate before starting."):(this._recordActions=!0,this._sessionStarted=!0,this._initialTime=Date.now(),this._actionHistory=[])}},{key:"terminateSession",value:function(){return this._sessionStarted?(this._recordActions=!1,this._sessionStarted=!1,this._initialTime=-1,this._actionHistory):(console.error("Cannot terminate session that has not started."),null)}},{key:"onNewActionEvent",value:function(t){t.timestamp=t.timestamp-this._initialTime+this._pauseOffset-this._delayMs,console.log("Recorded timestamp",t.timestamp),this._actionHistory.push(t)}},{key:"pauseSession",value:function(){this._recordActions?(this._pauseOffset+=Date.now()-this._initialTime,this._recordActions=!1):console.error("Session already paused.")}},{key:"resumeSession",value:function(){this._recordActions?console.error("Cannot resume an unpaused session."):(this._recordActions=!0,this._initialTime=Date.now())}},{key:"history",get:function(){return this._actionHistory}}]),t}();t.exports=o},function(t,e,i){var r=i(47),n=i(48),o=function(){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var i=e.action,n=e.boundKey,o=e.type,s=e.timestamp;if(!i||!n||!o)throw new Error("No 'actions', 'boundKey', or 'type' passed to ActionEvent during instantiation!");this._timestamp=s||Date.now(),this._action=i,this._boundKey=n,this._type=o}return n(t,[{key:"toString",value:function(){return"ActionEvent: {\n    'type': ".concat(this._type,"\n    'actions': ").concat(this._actions,"\n    'timestamp': ").concat(this._timestamp,"\n}")}},{key:"action",get:function(){return this._action}},{key:"boundKey",get:function(){return this._boundKey}},{key:"type",get:function(){return this._type}},{key:"timestamp",get:function(){return this._timestamp},set:function(t){this._timestamp=t}}]),t}();t.exports=o},function(t,e,i){var r=i(47),n=i(48),o=i(22).BehaviorSubject,s=i(207),a=function(t,e){return{state:t,body:e}},u=function(){"use strict";function t(){r(this,t);var e=a(s.IDLE,{message:"Initial state."});this.notifier=new o(e),this.controller=new o(e),this.subscriptions={notifier:[],controller:[]}}return n(t,[{key:"request",value:function(t,e){if(!s[t])throw new Error("Invalid game state!");this.controller.next(a(t,e))}},{key:"notify",value:function(t,e){if(!s[t])throw new Error("Invalid game state!");this.notifier.next(a(t,e))}},{key:"onRequestTo",value:function(t,e){if(!e)throw new Error("No handler passed");if(!s[t])throw new Error("Invalid game state!");var i=this.controller.filter((function(e){return e.state===t})).subscribe(e);return this.subscriptions.controller.push(i),this}},{key:"onNotificationOf",value:function(t,e){if(!e)throw new Error("No handler passed");if(!s[t])throw new Error("Invalid game state!");var i=this.notifier.filter((function(e){return e.state===t})).subscribe(e);return this.subscriptions.notifier.push(i),this}},{key:"clearControllerHandlers",value:function(){this.subscriptions.controller.forEach((function(t){return t.unsubscribe()}))}},{key:"clearNotifierHandlers",value:function(){this.subscriptions.notifier.forEach((function(t){return t.unsubscribe()}))}}]),t}();t.exports=u},function(t,e,i){"use strict";t.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},,,,,,,,,,,,,function(t,e,i){var r=i(47),n=i(48),o=i(11),s=i(60),a=i(36),u=a.InputManager,c=(a.GameStateController,a.GameStateEnums),h=i(573),l=i(217),p=i(103),f=i(218),d=i(575),m=i(80),y=i(576),v=i(577),_=i(578),b=function(){"use strict";function t(e,i){var n=this;if(r(this,t),!e||!i)throw new Error("No state controller or canvas passed to Game initialization.");this.actionState={},this.stateController=e;var o=new u;o.bindAction("Spacebar","jump"),o.bindAction("j","jump"),o.bindAction(" ","jump"),o.bindAction("w","trick1");o.getObservable().subscribe((function(t){n.actionState[t.action]=t.type})),this.pixiApp=null,this.CAN_JUMP=!1,this.songAnalysis=null,this.songFeatures=null,this.sprites={title:null,idle:null,jump:null,trick1:null},this.score=null,e.onRequestTo(c.IDLE,(function(){return n.idleState(i)})),e.onRequestTo(c.GENERATE,(function(t){return n.generateMountain(t.body.analysis,t.body.features)})),e.onRequestTo(c.PAUSE,(function(){return n.pauseState()})),e.onRequestTo(c.PLAY,(function(){return n.playLevelState()}))}return n(t,[{key:"getPixiApp",value:function(t){return this.pixiApp||(this.pixiApp=new o.Application({view:t,width:window.innerWidth,height:window.innerHeight,backgroundColor:4381429,antialias:!0,sharedTicker:!0})),this.pixiApp}},{key:"idleState",value:function(t){this.getPixiApp(t);var e=o.Texture.from("../img/title page.png"),i=new o.Sprite(e);i.position.x=0,i.position.y=-175,i.scale.x=1.75,i.scale.y=1.5,this.pixiApp.stage.addChild(i),this.sprites.title=i}},{key:"generateMountain",value:function(t,e){this.songAnalysis=t,this.songFeatures=e,this.generateMountainState()}},{key:"generateMountainState",value:function(){var t=this,e=document.getElementById("mycanvas");this.pixiApp||this.getPixiApp(e),this.pixiApp.stage.removeChild(this.sprites.title),this.pixiApp.stage.removeChild(this.sprites.title);for(var i=["idle_frame_1.png","idle_frame_2.png","idle_frame_3.png","idle_frame_4.png","idle_frame_5.png","idle_frame_6.png"],r=["jump_frame_1.png","jump_frame_2.png","jump_frame_3.png","jump_frame_4.png","jump_frame_5.png","jump_frame_6.png","jump_frame_7.png","jump_frame_8.png","jump_frame_9.png","jump_frame_10.png","jump_frame_11.png","jump_frame_12.png","jump_frame_13.png","jump_frame_14.png"],n=["trick1.png","trick2.png","trick3.png","trick4.png","trick5.png","trick6.png","trick7.png","trick8.png","trick9.png","trick10.png"],a=[],u=[],b=[],g=0;g<6;g++){var x=o.Texture.from("/img/"+i[g]);a.push(x)}for(var w=0;w<14;w++){var S=o.Texture.from("/img/"+r[w]);u.push(S)}for(var T=0;T<10;T++){var A=o.Texture.from("/img/"+n[T]);b.push(A)}var E=d(this.songAnalysis,this.songFeatures),I=p(this.pixiApp);h(this.pixiApp),this.pixiApp.stage.addChild(I);var O=new s.World(s.Vec2(0,100)),C=new m,P=o.Texture.from("../img/snowboarder.png"),B=new o.Sprite(P);B.visible=!1;var M=new o.AnimatedSprite(a);M.animationSpeed=.15,M.scale.x=.2,M.scale.y=.2,M.play();var k=C.create({name:"Player",sprite:M,followSprite:B}),R=new o.AnimatedSprite(u);R.animationSpeed=.15,R.scale.x=.2,R.scale.y=.2;var D=new o.AnimatedSprite(b);D.animationSpeed=.15,D.scale.x=.2,D.scale.y=.2,D.loop=!1,D.onComplete=function(){t.swapSprites(k,I,t.sprites.idle,"trick1 complete")},this.sprites.idle=M,this.sprites.jump=R,this.sprites.trick1=D,this.score=new _(this.stateController);var F=f(this.pixiApp,I,E,k,C,O),N=y(this.songAnalysis,F,I,k);l(I,F),v(this.pixiApp,I,k,N,this.songFeatures),I.addChild(k.followSprite),I.addChild(k.sprite),I.zoomPercent(6);O.on("pre-solve",(function(e){var i=e.getFixtureA(),r=e.getFixtureB(),n=i.getBody(),o=r.getBody(),a=n===k.physics,u=o===k.physics;(a||u)&&(!1===t.CAN_JUMP&&t.swapSprites(k,I,t.sprites.idle,"idle"),t.CAN_JUMP=!0,k.physics.applyForce(s.Vec2(t.songAnalysis.track.tempo,-100),k.position,!0)),k.sprite.rotation=a?o.getAngle():n.getAngle()}));var L=performance.now(),j=L,U=0,z=E[U][3];this.pixiApp.ticker.add((function(){"press"===t.actionState.jump&&!0===t.CAN_JUMP&&(t.swapSprites(k,I,t.sprites.jump,"jump"),k.physics.applyLinearImpulse(s.Vec2(t.songAnalysis.track.tempo,-200),k.position,!0),t.CAN_JUMP=!1),"press"===t.actionState.trick1&&t.swapSprites(k,I,t.sprites.trick1,"trick1")})),this.pixiApp.ticker.add((function(){if(k.position.x>z.x&&U<E.length-1){var t=performance.now(),e=(t-j)/1e3;z=E[U+=1][3],console.log("Time taken to finish curve"+U+" : "+e),console.log("Total time passed: "+(t-L)/1e3),j=t}})),this.pixiApp.ticker.add((function(){I.moveCenter(k.followSprite.position.x+20,k.followSprite.position.y-15)})),this.stateController.notify(c.PLAY,null)}},{key:"swapSprites",value:function(t,e,i,r){"trick1 complete"===r&&(this.score.updateScore(100),console.log("NewScore: "+this.score.getScore()));var n=t.sprite.rotation,o=t.sprite.position.x,s=t.sprite.position.y;t.sprite.stop(),e.removeChild(t.sprite),t.sprite=i,t.sprite.rotation=n,t.sprite.position.x=o,t.sprite.position.y=s,t.sprite.gotoAndPlay(0),e.addChild(t.sprite)}},{key:"playLevelState",value:function(){this.pixiApp.ticker.start()}},{key:"pauseState",value:function(){this.pixiApp.ticker.stop()}}]),t}();t.exports=b},function(t,e,i){"use strict";(function(t){var e=i(223),r=i(81),n=i.n(r);window.Promise||(window.Promise=e.Polyfill),Object.assign||(Object.assign=n.a);var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!o.performance||!o.performance.now){var s=Date.now();o.performance||(o.performance={}),o.performance.now=function(){return Date.now()-s}}for(var a=Date.now(),u=["ms","moz","webkit","o"],c=0;c<u.length&&!o.requestAnimationFrame;++c){var h=u[c];o.requestAnimationFrame=o[h+"RequestAnimationFrame"],o.cancelAnimationFrame=o[h+"CancelAnimationFrame"]||o[h+"CancelRequestAnimationFrame"]}o.requestAnimationFrame||(o.requestAnimationFrame=function(t){if("function"!==typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+a-e;return i<0&&(i=0),a=e,setTimeout((function(){a=Date.now(),t(performance.now())}),i)}),o.cancelAnimationFrame||(o.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array)}).call(this,i(44))},function(t,e,i){(function(t){var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(n.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(n.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(545),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(44))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var r,n=1,o={},s=!1,a=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){h(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"===typeof i.data&&0===i.data.indexOf(e)&&h(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),r=function(i){t.postMessage(e+i,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){h(t.data)},r=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;r=function(e){var i=a.createElement("script");i.onreadystatechange=function(){h(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}():r=function(t){setTimeout(h,0,t)},u.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var s={callback:t,args:e};return o[n]=s,r(n),n++},u.clearImmediate=c}function c(t){delete o[t]}function h(t){if(s)setTimeout(h,0,t);else{var e=o[t];if(e){s=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{c(t),s=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,i(44),i(546))},function(t,e){var i,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"===typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,l=-1;function p(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&f())}function f(){if(!h){var t=a(p);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new d(t,e)),1!==c.length||h||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){(function(t,r){var n;!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,h=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,d=String.fromCharCode;function m(t){throw new RangeError(p[t])}function y(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function v(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+y((t=t.replace(l,".")).split("."),e).join(".")}function _(t){for(var e,i,r=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function b(t){return y(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=d(t)})).join("")}function g(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,i){var r=0;for(t=i?f(t/700):t>>1,t+=f(t/e);t>455;r+=36)t=f(t/35);return f(r+36*t/(t+38))}function w(t){var e,i,r,n,o,s,a,c,h,l,p,d=[],y=t.length,v=0,_=128,g=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&m("not-basic"),d.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<y;){for(o=v,s=1,a=36;n>=y&&m("invalid-input"),((c=(p=t.charCodeAt(n++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||c>f((u-v)/s))&&m("overflow"),v+=c*s,!(c<(h=a<=g?1:a>=g+26?26:a-g));a+=36)s>f(u/(l=36-h))&&m("overflow"),s*=l;g=x(v-o,e=d.length+1,0==o),f(v/e)>u-_&&m("overflow"),_+=f(v/e),v%=e,d.splice(v++,0,_)}return b(d)}function S(t){var e,i,r,n,o,s,a,c,h,l,p,y,v,b,w,S=[];for(y=(t=_(t)).length,e=128,i=0,o=72,s=0;s<y;++s)(p=t[s])<128&&S.push(d(p));for(r=n=S.length,n&&S.push("-");r<y;){for(a=u,s=0;s<y;++s)(p=t[s])>=e&&p<a&&(a=p);for(a-e>f((u-i)/(v=r+1))&&m("overflow"),i+=(a-e)*v,e=a,s=0;s<y;++s)if((p=t[s])<e&&++i>u&&m("overflow"),p==e){for(c=i,h=36;!(c<(l=h<=o?1:h>=o+26?26:h-o));h+=36)w=c-l,b=36-l,S.push(d(g(l+w%b,0))),c=f(w/b);S.push(d(g(c,0))),o=x(i,v,r==n),i=0,++r}++i,++e}return S.join("")}a={version:"1.4.1",ucs2:{decode:_,encode:b},decode:w,encode:S,toASCII:function(t){return v(t,(function(t){return h.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return v(t,(function(t){return c.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return a}.call(e,i,e,t))||(t.exports=n)}()}).call(this,i(548)(t),i(44))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"===typeof t},isObject:function(t){return"object"===typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(551),e.encode=e.stringify=i(552)},function(t,e,i){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!==typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"===typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var h=0;h<c;++h){var l,p,f,d,m=t[h].replace(a,"%20"),y=m.indexOf(i);y>=0?(l=m.substr(0,y),p=m.substr(y+1)):(l=m,p=""),f=decodeURIComponent(l),d=decodeURIComponent(p),r(s,f)?n(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"===typeof t?o(s(t),(function(s){var a=encodeURIComponent(r(s))+i;return n(t[s])?o(t[s],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[s]))})).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){var r=i(211),n=i(61),o=i(30),s=(i(34),0),a={Body:n,Joint:o};e.toJson=function(t,e){e=e||JSON.stringify;for(var i=[],r=[t],a={},u=function(t,e){if(t.__sid=t.__sid||++s,a[t.__sid])return a[t.__sid];r.push(t);var n={refIndex:i.length+r.length,refType:e};return a[t.__sid]=n};r.length;){var c=r.shift(),h=e(c,(function(t,e){return"object"===typeof e&&null!==e&&"function"===typeof e._serialize&&(e=e!==c&&e instanceof n?u(e,"Body"):e!==c&&e instanceof o?u(e,"Joint"):e._serialize()),e}),"  ");i.push(h)}return"["+i.join(",")+"]"},e.fromJson=function(t,e){var i=(e=e||JSON.parse)(t),n={};return r._deserialize(i[0],null,(function t(e,r,o){if(!r.refIndex)return e&&e._deserialize&&e._deserialize(r,o,t);var s=r.refIndex;if(e=a[r.refType]||e,n[s])return n[s];var u=i[s];return n[s]=e._deserialize(u,o,t)}))}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT,n=(i(13),i(7)),o=i(4),s=i(39),a=i(212);function u(){this.m_tree=new a,this.m_proxyCount=0,this.m_moveBuffer=[],this.queryCallback=this.queryCallback.bind(this)}t.exports=u,u.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},u.prototype.testOverlap=function(t,e){var i=this.m_tree.getFatAABB(t),r=this.m_tree.getFatAABB(e);return s.testOverlap(i,r)},u.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},u.prototype.getProxyCount=function(){return this.m_proxyCount},u.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},u.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},u.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},u.prototype.query=function(t,e){this.m_tree.query(t,e)},u.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},u.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},u.prototype.createProxy=function(t,e){r&&n.assert(s.isValid(t));var i=this.m_tree.createProxy(t,e);return this.m_proxyCount++,this.bufferMove(i),i},u.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_proxyCount--,this.m_tree.destroyProxy(t)},u.prototype.moveProxy=function(t,e,i){r&&n.assert(s.isValid(e)),this.m_tree.moveProxy(t,e,i)&&this.bufferMove(t)},u.prototype.touchProxy=function(t){this.bufferMove(t)},u.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},u.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]==t&&(this.m_moveBuffer[e]=null)},u.prototype.updatePairs=function(t){for(r&&n.assert("function"===typeof t),this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},u.prototype.queryCallback=function(t){if(t==this.m_queryProxyId)return!0;var e=o.min(t,this.m_queryProxyId),i=o.max(t,this.m_queryProxyId),r=this.m_tree.getUserData(e),n=this.m_tree.getUserData(i);return this.m_callback(r,n),!0}},function(t,e){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=function(t){var e=[],i=t.max||1/0,r=t.create,n=t.allocate,o=t.release,s=t.discard,a=0,u=0,c=0,h=0;this.max=function(t){return"number"===typeof t?(i=t,this):i},this.size=function(){return e.length},this.allocate=function(){var t;return e.length>0?t=e.shift():(a++,t="function"===typeof r?r():{}),u++,"function"===typeof n&&n(t),t},this.release=function(t){e.length<i?(c++,"function"===typeof o&&o(t),e.push(t)):(h++,"function"===typeof s&&(t=s(t)))},this.toString=function(){return" +"+a+" >"+u+" <"+c+" -"+h+" ="+e.length+"/"+i}}},function(t,e,i){var r="undefined"!==typeof DEBUG&&DEBUG,n="undefined"!==typeof ASSERT&&ASSERT;t.exports=v,t.exports.TimeStep=y;var o=i(13),s=i(7),a=i(3),u=i(4),c=i(61),h=i(43),l=i(30),p=i(214),f=p.Input,d=p.Output,m=i(77);m.Input,m.Output,m.Proxy,m.Cache;function y(t){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}function v(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}y.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},v.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},v.prototype.addBody=function(t){n&&s.assert(t instanceof c,"Not a Body!",t),this.m_bodies.push(t)},v.prototype.addContact=function(t){n&&s.assert(t instanceof h,"Not a Contact!",t),this.m_contacts.push(t)},v.prototype.addJoint=function(t){n&&s.assert(t instanceof l,"Not a Joint!",t),this.m_joints.push(t)},v.prototype.solveWorld=function(t){for(var e=this.m_world,i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1;for(var r=e.m_contactList;r;r=r.m_next)r.m_islandFlag=!1;for(var o=e.m_jointList;o;o=o.m_next)o.m_islandFlag=!1;for(var a=this.m_stack,u=e.m_bodyList;u;u=u.m_next)if(!u.m_islandFlag&&0!=u.isAwake()&&0!=u.isActive()&&!u.isStatic()){for(this.clear(),a.push(u),u.m_islandFlag=!0;a.length>0;){i=a.pop();if(n&&s.assert(1==i.isActive()),this.addBody(i),i.setAwake(!0),!i.isStatic()){for(var c=i.m_contactList;c;c=c.next){var h=c.contact;if(!h.m_islandFlag&&(0!=h.isEnabled()&&0!=h.isTouching())){var l=h.m_fixtureA.m_isSensor,p=h.m_fixtureB.m_isSensor;if(!l&&!p)this.addContact(h),h.m_islandFlag=!0,(d=c.other).m_islandFlag||(a.push(d),d.m_islandFlag=!0)}}for(var f=i.m_jointList;f;f=f.next){var d;if(1!=f.joint.m_islandFlag)0!=(d=f.other).isActive()&&(this.addJoint(f.joint),f.joint.m_islandFlag=!0,d.m_islandFlag||(a.push(d),d.m_islandFlag=!0))}}}this.solveIsland(t);for(var m=0;m<this.m_bodies.length;++m){(i=this.m_bodies[m]).isStatic()&&(i.m_islandFlag=!1)}}},v.prototype.solveIsland=function(t){for(var e=this.m_world,i=e.m_gravity,n=e.m_allowSleep,s=t.dt,c=0;c<this.m_bodies.length;++c){var h=this.m_bodies[c],l=a.clone(h.m_sweep.c),p=h.m_sweep.a,f=a.clone(h.m_linearVelocity),d=h.m_angularVelocity;h.m_sweep.c0.set(h.m_sweep.c),h.m_sweep.a0=h.m_sweep.a,h.isDynamic()&&(f.addMul(s*h.m_gravityScale,i),f.addMul(s*h.m_invMass,h.m_force),d+=s*h.m_invI*h.m_torque,f.mul(1/(1+s*h.m_linearDamping)),d*=1/(1+s*h.m_angularDamping)),h.c_position.c=l,h.c_position.a=p,h.c_velocity.v=f,h.c_velocity.w=d}for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].initConstraint(t)}r&&this.printBodies("M: ");for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].initVelocityConstraint(t)}if(r&&this.printBodies("R: "),t.warmStarting)for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].warmStartConstraint(t)}r&&this.printBodies("Q: ");for(c=0;c<this.m_joints.length;++c){this.m_joints[c].initVelocityConstraints(t)}r&&this.printBodies("E: ");for(c=0;c<t.velocityIterations;++c){for(var m=0;m<this.m_joints.length;++m){this.m_joints[m].solveVelocityConstraints(t)}for(m=0;m<this.m_contacts.length;++m){this.m_contacts[m].solveVelocityConstraint(t)}}r&&this.printBodies("D: ");for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].storeConstraintImpulses(t)}r&&this.printBodies("C: ");for(c=0;c<this.m_bodies.length;++c){h=this.m_bodies[c],l=a.clone(h.c_position.c),p=h.c_position.a,f=a.clone(h.c_velocity.v),d=h.c_velocity.w;var y=a.mul(s,f);if(a.lengthSquared(y)>o.maxTranslationSquared){var v=o.maxTranslation/y.length();f.mul(v)}var _=s*d;if(_*_>o.maxRotationSquared)d*=v=o.maxRotation/u.abs(_);l.addMul(s,f),p+=s*d,h.c_position.c.set(l),h.c_position.a=p,h.c_velocity.v.set(f),h.c_velocity.w=d}r&&this.printBodies("B: ");var b=!1;for(c=0;c<t.positionIterations;++c){var g=0;for(m=0;m<this.m_contacts.length;++m){var x=this.m_contacts[m].solvePositionConstraint(t);g=u.min(g,x)}var w=g>=-3*o.linearSlop,S=!0;for(m=0;m<this.m_joints.length;++m){var T=this.m_joints[m].solvePositionConstraints(t);S=S&&T}if(w&&S){b=!0;break}}r&&this.printBodies("L: ");for(c=0;c<this.m_bodies.length;++c){(h=this.m_bodies[c]).m_sweep.c.set(h.c_position.c),h.m_sweep.a=h.c_position.a,h.m_linearVelocity.set(h.c_velocity.v),h.m_angularVelocity=h.c_velocity.w,h.synchronizeTransform()}if(this.postSolveIsland(),n){var A=1/0,E=o.linearSleepToleranceSqr,I=o.angularSleepToleranceSqr;for(c=0;c<this.m_bodies.length;++c){(h=this.m_bodies[c]).isStatic()||(0==h.m_autoSleepFlag||h.m_angularVelocity*h.m_angularVelocity>I||a.lengthSquared(h.m_linearVelocity)>E?(h.m_sleepTime=0,A=0):(h.m_sleepTime+=s,A=u.min(A,h.m_sleepTime)))}if(A>=o.timeToSleep&&b)for(c=0;c<this.m_bodies.length;++c){(h=this.m_bodies[c]).setAwake(!1)}}},v.prototype.printBodies=function(t){for(var e=0;e<this.m_bodies.length;++e){var i=this.m_bodies[e];s.debug(t,i.c_position.a,i.c_position.c.x,i.c_position.c.y,i.c_velocity.w,i.c_velocity.v.x,i.c_velocity.v.y)}};var _=new y;function b(){this.normalImpulses=[],this.tangentImpulses=[]}v.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1,i.m_sweep.alpha0=0;for(var a=e.m_contactList;a;a=a.m_next)a.m_toiFlag=!1,a.m_islandFlag=!1,a.m_toiCount=0,a.m_toi=1}for(;;){var c=null,h=1;for(a=e.m_contactList;a;a=a.m_next)if(0!=a.isEnabled()&&!(a.m_toiCount>o.maxSubSteps)){var l=1;if(a.m_toiFlag)l=a.m_toi;else{var m=a.getFixtureA(),y=a.getFixtureB();if(m.isSensor()||y.isSensor())continue;var v=m.getBody(),b=y.getBody();n&&s.assert(v.isDynamic()||b.isDynamic());var g=v.isAwake()&&!v.isStatic(),x=b.isAwake()&&!b.isStatic();if(0==g&&0==x)continue;var w=v.isBullet()||!v.isDynamic(),S=b.isBullet()||!b.isDynamic();if(0==w&&0==S)continue;var T=v.m_sweep.alpha0;v.m_sweep.alpha0<b.m_sweep.alpha0?(T=b.m_sweep.alpha0,v.m_sweep.advance(T)):b.m_sweep.alpha0<v.m_sweep.alpha0&&(T=v.m_sweep.alpha0,b.m_sweep.advance(T)),n&&s.assert(T<1);var A=a.getChildIndexA(),E=a.getChildIndexB(),I=(v.m_sweep,b.m_sweep,new f);I.proxyA.set(m.getShape(),A),I.proxyB.set(y.getShape(),E),I.sweepA.set(v.m_sweep),I.sweepB.set(b.m_sweep),I.tMax=1;var O=new d;p(O,I);var C=O.t;l=O.state==d.e_touching?u.min(T+(1-T)*C,1):1,a.m_toi=l,a.m_toiFlag=!0}l<h&&(c=a,h=l)}if(null==c||1-10*u.EPSILON<h){e.m_stepComplete=!0;break}m=c.getFixtureA(),y=c.getFixtureB(),v=m.getBody(),b=y.getBody();var P=v.m_sweep.clone(),B=b.m_sweep.clone();if(v.advance(h),b.advance(h),c.update(e),c.m_toiFlag=!1,++c.m_toiCount,0!=c.isEnabled()&&0!=c.isTouching()){v.setAwake(!0),b.setAwake(!0),this.clear(),this.addBody(v),this.addBody(b),this.addContact(c),v.m_islandFlag=!0,b.m_islandFlag=!0,c.m_islandFlag=!0;for(var M=[v,b],k=0;k<M.length;++k){if((U=M[k]).isDynamic())for(var R=U.m_contactList;R;R=R.next){var D=R.contact;if(!D.m_islandFlag){var F=R.other;if(!F.isDynamic()||U.isBullet()||F.isBullet()){var N=D.m_fixtureA.m_isSensor,L=D.m_fixtureB.m_isSensor;if(!N&&!L){var j=F.m_sweep.clone();0==F.m_islandFlag&&F.advance(h),D.update(e),0!=D.isEnabled()&&0!=D.isTouching()?(D.m_islandFlag=!0,this.addContact(D),F.m_islandFlag||(F.m_islandFlag=!0,F.isStatic()||F.setAwake(!0),this.addBody(F))):(F.m_sweep.set(j),F.synchronizeTransform())}}}}}_.reset((1-h)*t.dt),_.dtRatio=1,_.positionIterations=20,_.velocityIterations=t.velocityIterations,_.warmStarting=!1,this.solveIslandTOI(_,v,b);for(k=0;k<this.m_bodies.length;++k){var U;if((U=this.m_bodies[k]).m_islandFlag=!1,U.isDynamic()){U.synchronizeFixtures();for(R=U.m_contactList;R;R=R.next)R.contact.m_toiFlag=!1,R.contact.m_islandFlag=!1}}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else c.setEnabled(!1),v.m_sweep.set(P),b.m_sweep.set(B),v.synchronizeTransform(),b.synchronizeTransform()}if(r)for(i=e.m_bodyList;i;i=i.m_next)a=i.m_sweep.c,i.m_sweep.a,i.m_linearVelocity,i.m_angularVelocity},v.prototype.solveIslandTOI=function(t,e,i){this.m_world;for(var r=0;r<this.m_bodies.length;++r){(l=this.m_bodies[r]).c_position.c.set(l.m_sweep.c),l.c_position.a=l.m_sweep.a,l.c_velocity.v.set(l.m_linearVelocity),l.c_velocity.w=l.m_angularVelocity}for(var r=0;r<this.m_contacts.length;++r){this.m_contacts[r].initConstraint(t)}for(r=0;r<t.positionIterations;++r){for(var n=0,s=0;s<this.m_contacts.length;++s){var c=this.m_contacts[s].solvePositionConstraintTOI(t,e,i);n=u.min(n,c)}if(n>=-1.5*o.linearSlop)break}e.m_sweep.c0.set(e.c_position.c),e.m_sweep.a0=e.c_position.a,i.m_sweep.c0.set(i.c_position.c),i.m_sweep.a0=i.c_position.a;for(r=0;r<this.m_contacts.length;++r){this.m_contacts[r].initVelocityConstraint(t)}for(r=0;r<t.velocityIterations;++r)for(s=0;s<this.m_contacts.length;++s){this.m_contacts[s].solveVelocityConstraint(t)}var h=t.dt;for(r=0;r<this.m_bodies.length;++r){var l=this.m_bodies[r],p=a.clone(l.c_position.c),f=l.c_position.a,d=a.clone(l.c_velocity.v),m=l.c_velocity.w,y=a.mul(h,d);if(a.dot(y,y)>o.maxTranslationSquared){var v=o.maxTranslation/y.length();d.mul(v)}var _=h*m;if(_*_>o.maxRotationSquared)m*=v=o.maxRotation/u.abs(_);p.addMul(h,d),f+=h*m,l.c_position.c=p,l.c_position.a=f,l.c_velocity.v=d,l.c_velocity.w=m,l.m_sweep.c=p,l.m_sweep.a=f,l.m_linearVelocity=d,l.m_angularVelocity=m,l.synchronizeTransform()}this.postSolveIsland()},v.prototype.postSolveIsland=function(){for(var t=new b,e=0;e<this.m_contacts.length;++e){for(var i=this.m_contacts[e],r=0;r<i.v_points.length;++r)t.normalImpulses.push(i.v_points[r].normalImpulse),t.tangentImpulses.push(i.v_points[r].tangentImpulse);this.m_world.postSolve(i,t)}}},function(t,e){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports.now=function(){return Date.now()},t.exports.diff=function(t){return Date.now()-t}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=o;i(7);var r=i(19),n=i(62);function o(t,e,i,r){if(!(this instanceof o))return new o(t,e,i,r);o._super.call(this),this._setAsBox(t,e,i,r)}o._super=n,o.prototype=r(o._super.prototype),o.TYPE="polygon"},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT,n=i(7),o=(i(19),i(4),i(14)),s=i(3),a=(i(13),i(34),i(43)),u=i(46),c=i(78);function h(t,e,i,r,n){t.pointCount=0;var a=o.mulVec2(i,e.m_p),c=o.mulVec2(n,r.m_p),h=s.distanceSquared(c,a),l=e.m_radius+r.m_radius;h>l*l||(t.type=u.e_circles,t.localPoint.set(e.m_p),t.localNormal.setZero(),t.pointCount=1,t.points[0].localPoint.set(r.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex)}a.addType(c.TYPE,c.TYPE,(function(t,e,i,o,s,a,u){r&&n.assert(i.getType()==c.TYPE),r&&n.assert(a.getType()==c.TYPE),h(t,i.getShape(),e,a.getShape(),s)})),e.CollideCircles=h},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT,n=i(7),o=(i(19),i(4),i(14)),s=i(3),a=(i(12),i(13),i(34),i(43)),u=i(46),c=i(79),h=i(102),l=i(78);function p(t,e,i,a,c){t.pointCount=0;var h=o.mulTVec2(i,o.mulVec2(c,a.m_p)),l=e.m_vertex1,p=e.m_vertex2,f=s.sub(p,l),d=s.dot(f,s.sub(p,h)),m=s.dot(f,s.sub(h,l)),y=e.m_radius+a.m_radius;if(m<=0){var v=s.clone(l),_=s.sub(h,v);if(s.dot(_,_)>y*y)return;if(e.m_hasVertex0){var b=e.m_vertex0,g=l,x=s.sub(g,b);if(s.dot(x,s.sub(g,h))>0)return}return t.type=u.e_circles,t.localNormal.setZero(),t.localPoint.set(v),t.pointCount=1,t.points[0].localPoint.set(a.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=u.e_vertex)}if(d<=0){v=s.clone(p),_=s.sub(h,v);if(s.dot(_,_)>y*y)return;if(e.m_hasVertex3){var w=e.m_vertex3,S=p,T=s.sub(w,S);if(s.dot(T,s.sub(h,S))>0)return}return t.type=u.e_circles,t.localNormal.setZero(),t.localPoint.set(v),t.pointCount=1,t.points[0].localPoint.set(a.m_p),t.points[0].id.cf.indexA=1,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=u.e_vertex)}var A=s.dot(f,f);r&&n.assert(A>0);v=s.combine(d/A,l,m/A,p),_=s.sub(h,v);if(!(s.dot(_,_)>y*y)){var E=s.neo(-f.y,f.x);s.dot(E,s.sub(h,l))<0&&E.set(-E.x,-E.y),E.normalize(),t.type=u.e_faceA,t.localNormal=E,t.localPoint.set(l),t.pointCount=1,t.points[0].localPoint.set(a.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_face,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex}}a.addType(c.TYPE,l.TYPE,(function(t,e,i,o,s,a,u){r&&n.assert(i.getType()==c.TYPE),r&&n.assert(a.getType()==l.TYPE);var h=i.getShape(),f=a.getShape();p(t,h,e,f,s)})),a.addType(h.TYPE,l.TYPE,(function(t,e,i,o,s,a,u){r&&n.assert(i.getType()==h.TYPE),r&&n.assert(a.getType()==l.TYPE);var f=i.getShape(),d=new c;f.getChildEdge(d,o);var m=d,y=a.getShape();p(t,m,e,y,s)}))},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT,n=i(7),o=(i(4),i(14)),s=i(12),a=i(3),u=(i(39),i(13)),c=i(46),h=i(43),l=(i(34),i(62));function p(t,e,i,r){for(var n=t.m_count,u=i.m_count,c=t.m_normals,h=t.m_vertices,l=i.m_vertices,f=o.mulTXf(r,e),d=0,m=-1/0,y=0;y<n;++y){for(var v=s.mulVec2(f.q,c[y]),_=o.mulVec2(f,h[y]),b=1/0,g=0;g<u;++g){var x=a.dot(v,l[g])-a.dot(v,_);x<b&&(b=x)}b>m&&(m=b,d=y)}p._maxSeparation=m,p._bestIndex=d}function f(t,e,i,h,l){t.pointCount=0;var f=e.m_radius+h.m_radius;p(e,i,h,l);var d=p._bestIndex,m=p._maxSeparation;if(!(m>f)){p(h,l,e,i);var y=p._bestIndex,v=p._maxSeparation;if(!(v>f)){var _,b,g,x,w,S;v>m+.1*u.linearSlop?(_=h,b=e,g=l,x=i,w=y,t.type=c.e_faceB,S=1):(_=e,b=h,g=i,x=l,w=d,t.type=c.e_faceA,S=0);var T=[new c.clipVertex,new c.clipVertex];!function(t,e,i,u,h,l){var p=e.m_normals,f=h.m_count,d=h.m_vertices,m=h.m_normals;r&&n.assert(0<=u&&u<e.m_count);for(var y=s.mulT(l.q,s.mulVec2(i.q,p[u])),v=0,_=1/0,b=0;b<f;++b){var g=a.dot(y,m[b]);g<_&&(_=g,v=b)}var x=v,w=x+1<f?x+1:0;t[0].v=o.mulVec2(l,d[x]),t[0].id.cf.indexA=u,t[0].id.cf.indexB=x,t[0].id.cf.typeA=c.e_face,t[0].id.cf.typeB=c.e_vertex,t[1].v=o.mulVec2(l,d[w]),t[1].id.cf.indexA=u,t[1].id.cf.indexB=w,t[1].id.cf.typeA=c.e_face,t[1].id.cf.typeB=c.e_vertex}(T,_,g,w,b,x);var A=_.m_count,E=_.m_vertices,I=w,O=w+1<A?w+1:0,C=E[I],P=E[O],B=a.sub(P,C);B.normalize();var M=a.cross(B,1),k=a.combine(.5,C,.5,P),R=s.mulVec2(g.q,B),D=a.cross(R,1);C=o.mulVec2(g,C),P=o.mulVec2(g,P);var F=a.dot(D,C),N=-a.dot(R,C)+f,L=a.dot(R,P)+f,j=[new c.clipVertex,new c.clipVertex],U=[new c.clipVertex,new c.clipVertex];if(!(c.clipSegmentToLine(j,T,a.neg(R),N,I)<2)&&!(c.clipSegmentToLine(U,j,R,L,O)<2)){t.localNormal=M,t.localPoint=k;for(var z=0,V=0;V<U.length;++V){if(a.dot(D,U[V].v)-F<=f){var W=t.points[z];if(W.localPoint.set(o.mulTVec2(x,U[V].v)),W.id=U[V].id,S){var X=W.id.cf,H=X.indexA,G=X.indexB,q=X.typeA,Y=X.typeB;X.indexA=G,X.indexB=H,X.typeA=Y,X.typeB=q}++z}}t.pointCount=z}}}}t.exports=f,h.addType(l.TYPE,l.TYPE,(function(t,e,i,o,s,a,u){r&&n.assert(i.getType()==l.TYPE),r&&n.assert(a.getType()==l.TYPE),f(t,i.getShape(),e,a.getShape(),s)}))},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT,n=i(7),o=i(4),s=i(14),a=(i(12),i(3)),u=(i(39),i(13),i(46)),c=i(43),h=(i(34),i(78)),l=i(62);c.addType(l.TYPE,h.TYPE,(function(t,e,i,c,p,f,d){r&&n.assert(i.getType()==l.TYPE),r&&n.assert(f.getType()==h.TYPE),function(t,e,i,r,n){t.pointCount=0;for(var c=s.mulVec2(n,r.m_p),h=s.mulTVec2(i,c),l=0,p=-1/0,f=e.m_radius+r.m_radius,d=e.m_count,m=e.m_vertices,y=e.m_normals,v=0;v<d;++v){var _=a.dot(y[v],a.sub(h,m[v]));if(_>f)return;_>p&&(p=_,l=v)}var b=l,g=b+1<d?b+1:0,x=m[b],w=m[g];if(p<o.EPSILON)return t.pointCount=1,t.type=u.e_faceA,t.localNormal.set(y[l]),t.localPoint.setCombine(.5,x,.5,w),t.points[0].localPoint=r.m_p,t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=u.e_vertex);var S=a.dot(a.sub(h,x),a.sub(w,x)),T=a.dot(a.sub(h,w),a.sub(x,w));if(S<=0){if(a.distanceSquared(h,x)>f*f)return;t.pointCount=1,t.type=u.e_faceA,t.localNormal.setCombine(1,h,-1,x),t.localNormal.normalize(),t.localPoint=x,t.points[0].localPoint.set(r.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex}else if(T<=0){if(a.distanceSquared(h,w)>f*f)return;t.pointCount=1,t.type=u.e_faceA,t.localNormal.setCombine(1,h,-1,w),t.localNormal.normalize(),t.localPoint.set(w),t.points[0].localPoint.set(r.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex}else{var A=a.mid(x,w);if((p=a.dot(h,y[b])-a.dot(A,y[b]))>f)return;t.pointCount=1,t.type=u.e_faceA,t.localNormal.set(y[b]),t.localPoint.set(A),t.points[0].localPoint.set(r.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex}}(t,i.getShape(),e,f.getShape(),p)}))},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT,n=i(7),o=(i(19),i(4)),s=i(14),a=i(3),u=i(12),c=i(13),h=(i(34),i(43)),l=i(46),p=i(79),f=i(102),d=i(62);h.addType(p.TYPE,d.TYPE,(function(t,e,i,o,s,a,u){r&&n.assert(i.getType()==p.TYPE),r&&n.assert(a.getType()==d.TYPE),g(t,i.getShape(),e,a.getShape(),s)})),h.addType(f.TYPE,d.TYPE,(function(t,e,i,o,s,a,u){r&&n.assert(i.getType()==f.TYPE),r&&n.assert(a.getType()==d.TYPE);var c=i.getShape(),h=new p;c.getChildEdge(h,o),g(t,h,e,a.getShape(),s)}));function m(){this.type,this.index,this.separation}var y=new m,v=new m,_=new function(){this.vertices=[],this.normals=[],this.count=0},b=new function(){this.i1,this.i2,this.v1,this.v2,this.normal=a.zero(),this.sideNormal1=a.zero(),this.sideOffset1,this.sideNormal2=a.zero(),this.sideOffset2};function g(t,e,i,r,n){var h=s.mulTXf(i,n),p=s.mulVec2(h,r.m_centroid),f=e.m_vertex0,d=e.m_vertex1,m=e.m_vertex2,g=e.m_vertex3,x=e.m_hasVertex0,w=e.m_hasVertex3,S=a.sub(m,d);S.normalize();var T,A=a.neo(S.y,-S.x),E=a.dot(A,a.sub(p,d)),I=0,O=0,C=!1,P=!1;if(x){var B=a.sub(d,f);B.normalize();var M=a.neo(B.y,-B.x);C=a.cross(B,S)>=0,I=a.dot(M,p)-a.dot(M,f)}if(w){var k=a.sub(g,m);k.normalize();var R=a.neo(k.y,-k.x);P=a.cross(S,k)>0,O=a.dot(R,p)-a.dot(R,m)}var D=a.zero(),F=a.zero(),N=a.zero();x&&w?C&&P?(T=I>=0||E>=0||O>=0)?(D.set(A),F.set(M),N.set(R)):(D.setMul(-1,A),F.setMul(-1,A),N.setMul(-1,A)):C?(T=I>=0||E>=0&&O>=0)?(D.set(A),F.set(M),N.set(A)):(D.setMul(-1,A),F.setMul(-1,R),N.setMul(-1,A)):P?(T=O>=0||I>=0&&E>=0)?(D.set(A),F.set(A),N.set(R)):(D.setMul(-1,A),F.setMul(-1,A),N.setMul(-1,M)):(T=I>=0&&E>=0&&O>=0)?(D.set(A),F.set(A),N.set(A)):(D.setMul(-1,A),F.setMul(-1,R),N.setMul(-1,M)):x?C?(T=I>=0||E>=0)?(D.set(A),F.set(M),N.setMul(-1,A)):(D.setMul(-1,A),F.set(A),N.setMul(-1,A)):(T=I>=0&&E>=0)?(D.set(A),F.set(A),N.setMul(-1,A)):(D.setMul(-1,A),F.set(A),N.setMul(-1,M)):w?P?(T=E>=0||O>=0)?(D.set(A),F.setMul(-1,A),N.set(R)):(D.setMul(-1,A),F.setMul(-1,A),N.set(A)):(T=E>=0&&O>=0)?(D.set(A),F.setMul(-1,A),N.set(A)):(D.setMul(-1,A),F.setMul(-1,R),N.set(A)):(T=E>=0)?(D.set(A),F.setMul(-1,A),N.setMul(-1,A)):(D.setMul(-1,A),F.set(A),N.set(A)),_.count=r.m_count;for(var L=0;L<r.m_count;++L)_.vertices[L]=s.mulVec2(h,r.m_vertices[L]),_.normals[L]=u.mulVec2(h.q,r.m_normals[L]);var j=2*c.polygonRadius;t.pointCount=0,y.type=1,y.index=T?0:1,y.separation=1/0;for(L=0;L<_.count;++L){(z=a.dot(D,a.sub(_.vertices[L],d)))<y.separation&&(y.separation=z)}if(-1!=y.type&&!(y.separation>j)){v.type=-1,v.index=-1,v.separation=-1/0;var U=a.neo(-D.y,D.x);for(L=0;L<_.count;++L){var z,V=a.neg(_.normals[L]),W=a.dot(V,a.sub(_.vertices[L],d)),X=a.dot(V,a.sub(_.vertices[L],m));if((z=o.min(W,X))>j){v.type=2,v.index=L,v.separation=z;break}if(a.dot(V,U)>=0){if(a.dot(a.sub(V,N),D)<-c.angularSlop)continue}else if(a.dot(a.sub(V,F),D)<-c.angularSlop)continue;z>v.separation&&(v.type=2,v.index=L,v.separation=z)}if(!(-1!=v.type&&v.separation>j)){var H;H=-1==v.type?y:v.separation>.98*y.separation+.001?v:y;var G=[new l.clipVertex,new l.clipVertex];if(1==H.type){t.type=l.e_faceA;var q=0,Y=a.dot(D,_.normals[0]);for(L=1;L<_.count;++L){var K=a.dot(D,_.normals[L]);K<Y&&(Y=K,q=L)}var J=q,Z=J+1<_.count?J+1:0;G[0].v=_.vertices[J],G[0].id.cf.indexA=0,G[0].id.cf.indexB=J,G[0].id.cf.typeA=l.e_face,G[0].id.cf.typeB=l.e_vertex,G[1].v=_.vertices[Z],G[1].id.cf.indexA=0,G[1].id.cf.indexB=Z,G[1].id.cf.typeA=l.e_face,G[1].id.cf.typeB=l.e_vertex,T?(b.i1=0,b.i2=1,b.v1=d,b.v2=m,b.normal.set(A)):(b.i1=1,b.i2=0,b.v1=m,b.v2=d,b.normal.setMul(-1,A))}else t.type=l.e_faceB,G[0].v=d,G[0].id.cf.indexA=0,G[0].id.cf.indexB=H.index,G[0].id.cf.typeA=l.e_vertex,G[0].id.cf.typeB=l.e_face,G[1].v=m,G[1].id.cf.indexA=0,G[1].id.cf.indexB=H.index,G[1].id.cf.typeA=l.e_vertex,G[1].id.cf.typeB=l.e_face,b.i1=H.index,b.i2=b.i1+1<_.count?b.i1+1:0,b.v1=_.vertices[b.i1],b.v2=_.vertices[b.i2],b.normal.set(_.normals[b.i1]);b.sideNormal1.set(b.normal.y,-b.normal.x),b.sideNormal2.setMul(-1,b.sideNormal1),b.sideOffset1=a.dot(b.sideNormal1,b.v1),b.sideOffset2=a.dot(b.sideNormal2,b.v2);var Q=[new l.clipVertex,new l.clipVertex],$=[new l.clipVertex,new l.clipVertex];if(!(l.clipSegmentToLine(Q,G,b.sideNormal1,b.sideOffset1,b.i1)<c.maxManifoldPoints)&&!(l.clipSegmentToLine($,Q,b.sideNormal2,b.sideOffset2,b.i2)<c.maxManifoldPoints)){1==H.type?(t.localNormal=a.clone(b.normal),t.localPoint=a.clone(b.v1)):(t.localNormal=a.clone(r.m_normals[b.i1]),t.localPoint=a.clone(r.m_vertices[b.i1]));var tt=0;for(L=0;L<c.maxManifoldPoints;++L){if(a.dot(b.normal,a.sub($[L].v,b.v1))<=j){var et=t.points[tt];1==H.type?(et.localPoint=s.mulT(h,$[L].v),et.id=$[L].id):(et.localPoint=$[L].v,et.id.cf.typeA=$[L].id.cf.typeB,et.id.cf.typeB=$[L].id.cf.typeA,et.id.cf.indexA=$[L].id.cf.indexB,et.id.cf.indexB=$[L].id.cf.indexA),++tt}}t.pointCount=tt}}}}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=p;var r=i(21),n=i(19),o=i(13),s=i(4),a=i(3),u=(i(29),i(28),i(33),i(12)),c=(i(27),i(14),i(31),i(32),i(30)),h=i(61);p.TYPE="distance-joint",c.TYPES[p.TYPE]=p,p._super=c,p.prototype=n(p._super.prototype);var l={frequencyHz:0,dampingRatio:0};function p(t,e,i,n,o){if(!(this instanceof p))return new p(t,e,i,n,o);if(i&&n&&"m_type"in n&&"x"in i&&"y"in i){var u=i;i=n,n=u}t=r(t,l),c.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=p.TYPE,this.m_localAnchorA=n?e.getLocalPoint(n):t.localAnchorA||a.zero(),this.m_localAnchorB=o?i.getLocalPoint(o):t.localAnchorB||a.zero(),this.m_length=s.isFinite(t.length)?t.length:a.distance(e.getWorldPoint(this.m_localAnchorA),i.getWorldPoint(this.m_localAnchorB)),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}p.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,length:this.m_length,impulse:this.m_impulse,gamma:this.m_gamma,bias:this.m_bias}},p._deserialize=function(t,e,i){return t.bodyA=i(h,t.bodyA,e),t.bodyB=i(h,t.bodyB,e),new p(t)},p.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},p.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},p.prototype.setLength=function(t){this.m_length=t},p.prototype.getLength=function(){return this.m_length},p.prototype.setFrequency=function(t){this.m_frequencyHz=t},p.prototype.getFrequency=function(){return this.m_frequencyHz},p.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},p.prototype.getDampingRatio=function(){return this.m_dampingRatio},p.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},p.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},p.prototype.getReactionForce=function(t){return a.mul(this.m_impulse,this.m_u).mul(t)},p.prototype.getReactionTorque=function(t){return 0},p.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_position.c,h=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,p=this.m_bodyB.c_velocity.w,f=u.neo(i),d=u.neo(h);this.m_rA=u.mulVec2(f,a.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=u.mulVec2(d,a.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=a.sub(a.add(c,this.m_rB),a.add(e,this.m_rA));var m=this.m_u.length();m>o.linearSlop?this.m_u.mul(1/m):this.m_u.set(0,0);var y=a.cross(this.m_rA,this.m_u),v=a.cross(this.m_rB,this.m_u),_=this.m_invMassA+this.m_invIA*y*y+this.m_invMassB+this.m_invIB*v*v;if(this.m_mass=0!=_?1/_:0,this.m_frequencyHz>0){var b=m-this.m_length,g=2*s.PI*this.m_frequencyHz,x=2*this.m_mass*this.m_dampingRatio*g,w=this.m_mass*g*g,S=t.dt;this.m_gamma=S*(x+S*w),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=b*S*w*this.m_gamma,_+=this.m_gamma,this.m_mass=0!=_?1/_:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var T=a.mul(this.m_impulse,this.m_u);r.subMul(this.m_invMassA,T),n-=this.m_invIA*a.cross(this.m_rA,T),l.addMul(this.m_invMassB,T),p+=this.m_invIB*a.cross(this.m_rB,T)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(r),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(l),this.m_bodyB.c_velocity.w=p},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_velocity.v,n=this.m_bodyB.c_velocity.w,o=a.add(e,a.cross(i,this.m_rA)),s=a.add(r,a.cross(n,this.m_rB)),u=a.dot(this.m_u,s)-a.dot(this.m_u,o),c=-this.m_mass*(u+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=c;var h=a.mul(c,this.m_u);e.subMul(this.m_invMassA,h),i-=this.m_invIA*a.cross(this.m_rA,h),r.addMul(this.m_invMassB,h),n+=this.m_invIB*a.cross(this.m_rB,h),this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(r),this.m_bodyB.c_velocity.w=n},p.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,n=this.m_bodyB.c_position.a,c=u.neo(i),h=u.neo(n),l=u.mulSub(c,this.m_localAnchorA,this.m_localCenterA),p=u.mulSub(h,this.m_localAnchorB,this.m_localCenterB),f=a.sub(a.add(r,p),a.add(e,l)),d=f.normalize()-this.m_length;d=s.clamp(d,-o.maxLinearCorrection,o.maxLinearCorrection);var m=-this.m_mass*d,y=a.mul(m,f);return e.subMul(this.m_invMassA,y),i-=this.m_invIA*a.cross(l,y),r.addMul(this.m_invMassB,y),n+=this.m_invIB*a.cross(p,y),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(r),this.m_bodyB.c_position.a=n,s.abs(d)<o.linearSlop}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=f;var n=i(7),o=i(21),s=i(19),a=(i(13),i(4)),u=i(3),c=(i(29),i(28)),h=(i(33),i(12)),l=(i(27),i(14),i(31),i(32),i(30));f.TYPE="friction-joint",f._super=l,f.prototype=s(f._super.prototype);var p={maxForce:0,maxTorque:0};function f(t,e,i,r){if(!(this instanceof f))return new f(t,e,i,r);t=o(t,p),l.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=f.TYPE,this.m_localAnchorA=r?e.getLocalPoint(r):t.localAnchorA||u.zero(),this.m_localAnchorB=r?i.getLocalPoint(r):t.localAnchorB||u.zero(),this.m_linearImpulse=u.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}f.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},f.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},f.prototype.setMaxForce=function(t){r&&n.assert(a.isFinite(t)&&t>=0),this.m_maxForce=t},f.prototype.getMaxForce=function(){return this.m_maxForce},f.prototype.setMaxTorque=function(t){r&&n.assert(a.isFinite(t)&&t>=0),this.m_maxTorque=t},f.prototype.getMaxTorque=function(){return this.m_maxTorque},f.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},f.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},f.prototype.getReactionForce=function(t){return u.mul(t,this.m_linearImpulse)},f.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},f.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=h.neo(e),l=h.neo(n);this.m_rA=h.mulVec2(a,u.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=h.mulVec2(l,u.sub(this.m_localAnchorB,this.m_localCenterB));var p=this.m_invMassA,f=this.m_invMassB,d=this.m_invIA,m=this.m_invIB,y=new c;if(y.ex.x=p+f+d*this.m_rA.y*this.m_rA.y+m*this.m_rB.y*this.m_rB.y,y.ex.y=-d*this.m_rA.x*this.m_rA.y-m*this.m_rB.x*this.m_rB.y,y.ey.x=y.ex.y,y.ey.y=p+f+d*this.m_rA.x*this.m_rA.x+m*this.m_rB.x*this.m_rB.x,this.m_linearMass=y.getInverse(),this.m_angularMass=d+m,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var v=u.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.subMul(p,v),r-=d*(u.cross(this.m_rA,v)+this.m_angularImpulse),o.addMul(f,v),s+=m*(u.cross(this.m_rB,v)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},f.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_velocity.v,n=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,h=this.m_invIA,l=this.m_invIB,p=t.dt,f=n-i,d=-this.m_angularMass*f,m=this.m_angularImpulse,y=p*this.m_maxTorque;this.m_angularImpulse=a.clamp(this.m_angularImpulse+d,-y,y),i-=h*(d=this.m_angularImpulse-m),n+=l*d;f=u.sub(u.add(r,u.cross(n,this.m_rB)),u.add(e,u.cross(i,this.m_rA))),d=u.neg(c.mulVec2(this.m_linearMass,f)),m=this.m_linearImpulse;this.m_linearImpulse.add(d);y=p*this.m_maxForce;this.m_linearImpulse.lengthSquared()>y*y&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(y)),d=u.sub(this.m_linearImpulse,m),e.subMul(o,d),i-=h*u.cross(this.m_rA,d),r.addMul(s,d),n+=l*u.cross(this.m_rB,d),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=n},f.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=m;var n=i(7),o=i(21),s=i(19),a=i(13),u=i(4),c=i(3),h=(i(29),i(28),i(33),i(12)),l=(i(27),i(14),i(31),i(32),i(30)),p=i(215),f=i(216);m.TYPE="gear-joint",m._super=l,m.prototype=s(m._super.prototype);var d={ratio:1};function m(t,e,i,s,a,y){if(!(this instanceof m))return new m(t,e,i,s,a,y);var v,_;t=o(t,d),l.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=m.TYPE,r&&n.assert(s.m_type===p.TYPE||s.m_type===f.TYPE),r&&n.assert(a.m_type===p.TYPE||a.m_type===f.TYPE),this.m_joint1=s||t.joint1,this.m_joint2=a||t.joint2,this.m_ratio=u.isFinite(y)?y:t.ratio,this.m_type1=this.m_joint1.getType(),this.m_type2=this.m_joint2.getType(),this.m_bodyC=this.m_joint1.getBodyA(),this.m_bodyA=this.m_joint1.getBodyB();var b=this.m_bodyA.m_xf,g=this.m_bodyA.m_sweep.a,x=this.m_bodyC.m_xf,w=this.m_bodyC.m_sweep.a;if(this.m_type1===p.TYPE){var S=this.m_joint1;this.m_localAnchorC=S.m_localAnchorA,this.m_localAnchorA=S.m_localAnchorB,this.m_referenceAngleA=S.m_referenceAngle,this.m_localAxisC=c.zero(),v=g-w-this.m_referenceAngleA}else{var T=this.m_joint1;this.m_localAnchorC=T.m_localAnchorA,this.m_localAnchorA=T.m_localAnchorB,this.m_referenceAngleA=T.m_referenceAngle,this.m_localAxisC=T.m_localXAxisA;var A=this.m_localAnchorC,E=h.mulTVec2(x.q,c.add(h.mul(b.q,this.m_localAnchorA),c.sub(b.p,x.p)));v=c.dot(E,this.m_localAxisC)-c.dot(A,this.m_localAxisC)}this.m_bodyD=this.m_joint2.getBodyA(),this.m_bodyB=this.m_joint2.getBodyB();var I=this.m_bodyB.m_xf,O=this.m_bodyB.m_sweep.a,C=this.m_bodyD.m_xf,P=this.m_bodyD.m_sweep.a;if(this.m_type2===p.TYPE){S=this.m_joint2;this.m_localAnchorD=S.m_localAnchorA,this.m_localAnchorB=S.m_localAnchorB,this.m_referenceAngleB=S.m_referenceAngle,this.m_localAxisD=c.zero(),_=O-P-this.m_referenceAngleB}else{T=this.m_joint2;this.m_localAnchorD=T.m_localAnchorA,this.m_localAnchorB=T.m_localAnchorB,this.m_referenceAngleB=T.m_referenceAngle,this.m_localAxisD=T.m_localXAxisA;var B=this.m_localAnchorD,M=h.mulTVec2(C.q,c.add(h.mul(I.q,this.m_localAnchorB),c.sub(I.p,C.p)));_=c.dot(M,this.m_localAxisD)-c.dot(B,this.m_localAxisD)}this.m_constant=v+this.m_ratio*_,this.m_impulse=0,this.m_lcA,this.m_lcB,this.m_lcC,this.m_lcD,this.m_mA,this.m_mB,this.m_mC,this.m_mD,this.m_iA,this.m_iB,this.m_iC,this.m_iD,this.m_JvAC,this.m_JvBD,this.m_JwA,this.m_JwB,this.m_JwC,this.m_JwD,this.m_mass}m.prototype.getJoint1=function(){return this.m_joint1},m.prototype.getJoint2=function(){return this.m_joint2},m.prototype.setRatio=function(t){r&&n.assert(u.isFinite(t)),this.m_ratio=t},m.prototype.getRatio=function(){return this.m_ratio},m.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},m.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},m.prototype.getReactionForce=function(t){return c.mul(this.m_impulse,this.m_JvAC).mul(t)},m.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},m.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=this.m_bodyC.c_position.a,u=this.m_bodyC.c_velocity.v,l=this.m_bodyC.c_velocity.w,f=this.m_bodyD.c_position.a,d=this.m_bodyD.c_velocity.v,m=this.m_bodyD.c_velocity.w,y=h.neo(e),v=h.neo(n),_=h.neo(a),b=h.neo(f);if(this.m_mass=0,this.m_type1==p.TYPE)this.m_JvAC=c.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var g=h.mulVec2(_,this.m_localAxisC),x=h.mulSub(_,this.m_localAnchorC,this.m_lcC),w=h.mulSub(y,this.m_localAnchorA,this.m_lcA);this.m_JvAC=g,this.m_JwC=c.cross(x,g),this.m_JwA=c.cross(w,g),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==p.TYPE)this.m_JvBD=c.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{g=h.mulVec2(b,this.m_localAxisD);var S=h.mulSub(b,this.m_localAnchorD,this.m_lcD),T=h.mulSub(v,this.m_localAnchorB,this.m_lcB);this.m_JvBD=c.mul(this.m_ratio,g),this.m_JwD=this.m_ratio*c.cross(S,g),this.m_JwB=this.m_ratio*c.cross(T,g),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(i.addMul(this.m_mA*this.m_impulse,this.m_JvAC),r+=this.m_iA*this.m_impulse*this.m_JwA,o.addMul(this.m_mB*this.m_impulse,this.m_JvBD),s+=this.m_iB*this.m_impulse*this.m_JwB,u.subMul(this.m_mC*this.m_impulse,this.m_JvAC),l-=this.m_iC*this.m_impulse*this.m_JwC,d.subMul(this.m_mD*this.m_impulse,this.m_JvBD),m-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(o),this.m_bodyB.c_velocity.w=s,this.m_bodyC.c_velocity.v.set(u),this.m_bodyC.c_velocity.w=l,this.m_bodyD.c_velocity.v.set(d),this.m_bodyD.c_velocity.w=m},m.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_velocity.v,n=this.m_bodyB.c_velocity.w,o=this.m_bodyC.c_velocity.v,s=this.m_bodyC.c_velocity.w,a=this.m_bodyD.c_velocity.v,u=this.m_bodyD.c_velocity.w,h=c.dot(this.m_JvAC,e)-c.dot(this.m_JvAC,o)+c.dot(this.m_JvBD,r)-c.dot(this.m_JvBD,a);h+=this.m_JwA*i-this.m_JwC*s+(this.m_JwB*n-this.m_JwD*u);var l=-this.m_mass*h;this.m_impulse+=l,e.addMul(this.m_mA*l,this.m_JvAC),i+=this.m_iA*l*this.m_JwA,r.addMul(this.m_mB*l,this.m_JvBD),n+=this.m_iB*l*this.m_JwB,o.subMul(this.m_mC*l,this.m_JvAC),s-=this.m_iC*l*this.m_JwC,a.subMul(this.m_mD*l,this.m_JvBD),u-=this.m_iD*l*this.m_JwD,this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(r),this.m_bodyB.c_velocity.w=n,this.m_bodyC.c_velocity.v.set(o),this.m_bodyC.c_velocity.w=s,this.m_bodyD.c_velocity.v.set(a),this.m_bodyD.c_velocity.w=u},m.prototype.solvePositionConstraints=function(t){var e,i,r,n,o,s,u,l,f=this.m_bodyA.c_position.c,d=this.m_bodyA.c_position.a,m=this.m_bodyB.c_position.c,y=this.m_bodyB.c_position.a,v=this.m_bodyC.c_position.c,_=this.m_bodyC.c_position.a,b=this.m_bodyD.c_position.c,g=this.m_bodyD.c_position.a,x=h.neo(d),w=h.neo(y),S=h.neo(_),T=h.neo(g),A=0;if(this.m_type1==p.TYPE)r=c.zero(),o=1,u=1,A+=this.m_iA+this.m_iC,e=d-_-this.m_referenceAngleA;else{var E=h.mulVec2(S,this.m_localAxisC),I=h.mulSub(S,this.m_localAnchorC,this.m_lcC),O=h.mulSub(x,this.m_localAnchorA,this.m_lcA);r=E,u=c.cross(I,E),o=c.cross(O,E),A+=this.m_mC+this.m_mA+this.m_iC*u*u+this.m_iA*o*o;var C=c.sub(this.m_localAnchorC,this.m_lcC),P=h.mulTVec2(S,c.add(O,c.sub(f,v)));e=c.dot(c.sub(P,C),this.m_localAxisC)}if(this.m_type2==p.TYPE)n=c.zero(),s=this.m_ratio,l=this.m_ratio,A+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),i=y-g-this.m_referenceAngleB;else{E=h.mulVec2(T,this.m_localAxisD);var B=h.mulSub(T,this.m_localAnchorD,this.m_lcD),M=h.mulSub(w,this.m_localAnchorB,this.m_lcB);n=c.mul(this.m_ratio,E),l=this.m_ratio*c.cross(B,E),s=this.m_ratio*c.cross(M,E),A+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*l*l+this.m_iB*s*s;var k=c.sub(this.m_localAnchorD,this.m_lcD),R=h.mulTVec2(T,c.add(M,c.sub(m,b)));i=c.dot(R,this.m_localAxisD)-c.dot(k,this.m_localAxisD)}var D=e+this.m_ratio*i-this.m_constant,F=0;return A>0&&(F=-D/A),f.addMul(this.m_mA*F,r),d+=this.m_iA*F*o,m.addMul(this.m_mB*F,n),y+=this.m_iB*F*s,v.subMul(this.m_mC*F,r),_-=this.m_iC*F*u,b.subMul(this.m_mD*F,n),g-=this.m_iD*F*l,this.m_bodyA.c_position.c.set(f),this.m_bodyA.c_position.a=d,this.m_bodyB.c_position.c.set(m),this.m_bodyB.c_position.a=y,this.m_bodyC.c_position.c.set(v),this.m_bodyC.c_position.a=_,this.m_bodyD.c_position.c.set(b),this.m_bodyD.c_position.a=g,0<a.linearSlop}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=f;var n=i(7),o=i(21),s=i(19),a=(i(13),i(4)),u=i(3),c=(i(29),i(28)),h=(i(33),i(12)),l=(i(27),i(14),i(31),i(32),i(30));f.TYPE="motor-joint",f._super=l,f.prototype=s(f._super.prototype);var p={maxForce:1,maxTorque:1,correctionFactor:.3};function f(t,e,i){if(!(this instanceof f))return new f(t,e,i);t=o(t,p),l.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=f.TYPE,this.m_linearOffset=t.linearOffset?t.linearOffset:e.getLocalPoint(i.getPosition());var r=e.getAngle(),n=i.getAngle();this.m_angularOffset=n-r,this.m_linearImpulse=u.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_linearError,this.m_angularError,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}f.prototype.setMaxForce=function(t){r&&n.assert(a.isFinite(t)&&t>=0),this.m_maxForce=t},f.prototype.getMaxForce=function(){return this.m_maxForce},f.prototype.setMaxTorque=function(t){r&&n.assert(a.isFinite(t)&&t>=0),this.m_maxTorque=t},f.prototype.getMaxTorque=function(){return this.m_maxTorque},f.prototype.setCorrectionFactor=function(t){r&&n.assert(a.isFinite(t)&&0<=t&&t<=1),this.m_correctionFactor=t},f.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},f.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset=t)},f.prototype.getLinearOffset=function(){return this.m_linearOffset},f.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},f.prototype.getAngularOffset=function(){return this.m_angularOffset},f.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},f.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},f.prototype.getReactionForce=function(t){return u.mul(t,this.m_linearImpulse)},f.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},f.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,p=h.neo(i),f=h.neo(s);this.m_rA=h.mulVec2(p,u.neg(this.m_localCenterA)),this.m_rB=h.mulVec2(f,u.neg(this.m_localCenterB));var d=this.m_invMassA,m=this.m_invMassB,y=this.m_invIA,v=this.m_invIB,_=new c;if(_.ex.x=d+m+y*this.m_rA.y*this.m_rA.y+v*this.m_rB.y*this.m_rB.y,_.ex.y=-y*this.m_rA.x*this.m_rA.y-v*this.m_rB.x*this.m_rB.y,_.ey.x=_.ex.y,_.ey.y=d+m+y*this.m_rA.x*this.m_rA.x+v*this.m_rB.x*this.m_rB.x,this.m_linearMass=_.getInverse(),this.m_angularMass=y+v,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=u.zero(),this.m_linearError.addCombine(1,o,1,this.m_rB),this.m_linearError.subCombine(1,e,1,this.m_rA),this.m_linearError.sub(h.mulVec2(p,this.m_linearOffset)),this.m_angularError=s-i-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var b=u.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);r.subMul(d,b),n-=y*(u.cross(this.m_rA,b)+this.m_angularImpulse),a.addMul(m,b),l+=v*(u.cross(this.m_rB,b)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=r,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},f.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_velocity.v,n=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,h=this.m_invIA,l=this.m_invIB,p=t.dt,f=t.inv_dt,d=n-i+f*this.m_correctionFactor*this.m_angularError,m=-this.m_angularMass*d,y=this.m_angularImpulse,v=p*this.m_maxTorque;this.m_angularImpulse=a.clamp(this.m_angularImpulse+m,-v,v),i-=h*(m=this.m_angularImpulse-y),n+=l*m,(d=u.zero()).addCombine(1,r,1,u.cross(n,this.m_rB)),d.subCombine(1,e,1,u.cross(i,this.m_rA)),d.addMul(f*this.m_correctionFactor,this.m_linearError);m=u.neg(c.mulVec2(this.m_linearMass,d)),y=u.clone(this.m_linearImpulse);this.m_linearImpulse.add(m);v=p*this.m_maxForce;this.m_linearImpulse.clamp(v),m=u.sub(this.m_linearImpulse,y),e.subMul(o,m),i-=h*u.cross(this.m_rA,m),r.addMul(s,m),n+=l*u.cross(this.m_rB,m),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=n},f.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=d;var n=i(7),o=i(21),s=i(19),a=i(4),u=i(3),c=(i(29),i(28)),h=(i(33),i(12)),l=(i(27),i(14)),p=(i(31),i(32),i(30));d.TYPE="mouse-joint",d._super=p,d.prototype=s(d._super.prototype);var f={maxForce:0,frequencyHz:5,dampingRatio:.7};function d(t,e,i,s){if(!(this instanceof d))return new d(t,e,i,s);t=o(t,f),p.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=d.TYPE,r&&n.assert(a.isFinite(t.maxForce)&&t.maxForce>=0),r&&n.assert(a.isFinite(t.frequencyHz)&&t.frequencyHz>=0),r&&n.assert(a.isFinite(t.dampingRatio)&&t.dampingRatio>=0),this.m_targetA=s?u.clone(s):t.target||u.zero(),this.m_localAnchorB=l.mulTVec2(i.getTransform(),this.m_targetA),this.m_maxForce=t.maxForce,this.m_impulse=u.zero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0,this.m_rB=u.zero(),this.m_localCenterB=u.zero(),this.m_invMassB=0,this.m_invIB=0,this.mass=new c,this.m_C=u.zero()}d.prototype.setTarget=function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_targetA=u.clone(t)},d.prototype.getTarget=function(){return this.m_targetA},d.prototype.setMaxForce=function(t){this.m_maxForce=t},d.getMaxForce=function(){return this.m_maxForce},d.prototype.setFrequency=function(t){this.m_frequencyHz=t},d.prototype.getFrequency=function(){return this.m_frequencyHz},d.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},d.prototype.getDampingRatio=function(){return this.m_dampingRatio},d.prototype.getAnchorA=function(){return u.clone(this.m_targetA)},d.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},d.prototype.getReactionForce=function(t){return u.mul(t,this.m_impulse)},d.prototype.getReactionTorque=function(t){return 0*t},d.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},d.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,i=this.m_bodyB.c_velocity,o=e.c,s=e.a,l=i.v,p=i.w,f=h.neo(s),d=this.m_bodyB.getMass(),m=2*a.PI*this.m_frequencyHz,y=2*d*this.m_dampingRatio*m,v=d*(m*m),_=t.dt;r&&n.assert(y+_*v>a.EPSILON),this.m_gamma=_*(y+_*v),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=_*v*this.m_gamma,this.m_rB=h.mulVec2(f,u.sub(this.m_localAnchorB,this.m_localCenterB));var b=new c;b.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,b.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,b.ey.x=b.ex.y,b.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=b.getInverse(),this.m_C.set(o),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),p*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),l.addMul(this.m_invMassB,this.m_impulse),p+=this.m_invIB*u.cross(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),i.v.set(l),i.w=p},d.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,i=u.clone(e.v),r=e.w,n=u.cross(r,this.m_rB);n.add(i),n.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),n.neg();var o=c.mulVec2(this.m_mass,n),s=u.clone(this.m_impulse);this.m_impulse.add(o);var a=t.dt*this.m_maxForce;this.m_impulse.clamp(a),o=u.sub(this.m_impulse,s),i.addMul(this.m_invMassB,o),r+=this.m_invIB*u.cross(this.m_rB,o),e.v.set(i),e.w=r},d.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG;var r="undefined"!==typeof ASSERT&&ASSERT;t.exports=f;var n=i(7),o=i(21),s=i(19),a=i(13),u=i(4),c=i(3),h=(i(29),i(28),i(33),i(12)),l=(i(27),i(14),i(31),i(32),i(30));f.TYPE="pulley-joint",f.MIN_PULLEY_LENGTH=2,f._super=l,f.prototype=s(f._super.prototype);var p={collideConnected:!0};function f(t,e,i,s,a,h,d,m){if(!(this instanceof f))return new f(t,e,i,s,a,h,d,m);t=o(t,p),l.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=f.TYPE,this.m_groundAnchorA=s||(t.groundAnchorA||c.neo(-1,1)),this.m_groundAnchorB=a||(t.groundAnchorB||c.neo(1,1)),this.m_localAnchorA=h?e.getLocalPoint(h):t.localAnchorA||c.neo(-1,0),this.m_localAnchorB=d?i.getLocalPoint(d):t.localAnchorB||c.neo(1,0),this.m_lengthA=u.isFinite(t.lengthA)?t.lengthA:c.distance(h,s),this.m_lengthB=u.isFinite(t.lengthB)?t.lengthB:c.distance(d,a),this.m_ratio=u.isFinite(m)?m:t.ratio,r&&n.assert(m>u.EPSILON),this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0,this.m_uA,this.m_uB,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}f.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},f.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},f.prototype.getLengthA=function(){return this.m_lengthA},f.prototype.getLengthB=function(){return this.m_lengthB},f.prototype.getRatio=function(){return this.m_ratio},f.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return c.distance(t,e)},f.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return c.distance(t,e)},f.prototype.shiftOrigin=function(t){this.m_groundAnchorA.sub(t),this.m_groundAnchorB.sub(t)},f.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},f.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},f.prototype.getReactionForce=function(t){return c.mul(this.m_impulse,this.m_uB).mul(t)},f.prototype.getReactionTorque=function(t){return 0},f.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,p=h.neo(i),f=h.neo(s);this.m_rA=h.mulVec2(p,c.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=h.mulVec2(f,c.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=c.sub(c.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=c.sub(c.add(o,this.m_rB),this.m_groundAnchorB);var d=this.m_uA.length(),m=this.m_uB.length();d>10*a.linearSlop?this.m_uA.mul(1/d):this.m_uA.setZero(),m>10*a.linearSlop?this.m_uB.mul(1/m):this.m_uB.setZero();var y=c.cross(this.m_rA,this.m_uA),v=c.cross(this.m_rB,this.m_uB),_=this.m_invMassA+this.m_invIA*y*y,b=this.m_invMassB+this.m_invIB*v*v;if(this.m_mass=_+this.m_ratio*this.m_ratio*b,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var g=c.mul(-this.m_impulse,this.m_uA),x=c.mul(-this.m_ratio*this.m_impulse,this.m_uB);r.addMul(this.m_invMassA,g),n+=this.m_invIA*c.cross(this.m_rA,g),u.addMul(this.m_invMassB,x),l+=this.m_invIB*c.cross(this.m_rB,x)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=r,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=u,this.m_bodyB.c_velocity.w=l},f.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_velocity.v,n=this.m_bodyB.c_velocity.w,o=c.add(e,c.cross(i,this.m_rA)),s=c.add(r,c.cross(n,this.m_rB)),a=-c.dot(this.m_uA,o)-this.m_ratio*c.dot(this.m_uB,s),u=-this.m_mass*a;this.m_impulse+=u;var h=c.mul(-u,this.m_uA),l=c.mul(-this.m_ratio*u,this.m_uB);e.addMul(this.m_invMassA,h),i+=this.m_invIA*c.cross(this.m_rA,h),r.addMul(this.m_invMassB,l),n+=this.m_invIB*c.cross(this.m_rB,l),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=n},f.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,n=this.m_bodyB.c_position.a,o=h.neo(i),s=h.neo(n),l=h.mulVec2(o,c.sub(this.m_localAnchorA,this.m_localCenterA)),p=h.mulVec2(s,c.sub(this.m_localAnchorB,this.m_localCenterB)),f=c.sub(c.add(e,this.m_rA),this.m_groundAnchorA),d=c.sub(c.add(r,this.m_rB),this.m_groundAnchorB),m=f.length(),y=d.length();m>10*a.linearSlop?f.mul(1/m):f.setZero(),y>10*a.linearSlop?d.mul(1/y):d.setZero();var v=c.cross(l,f),_=c.cross(p,d),b=this.m_invMassA+this.m_invIA*v*v,g=this.m_invMassB+this.m_invIB*_*_,x=b+this.m_ratio*this.m_ratio*g;x>0&&(x=1/x);var w=this.m_constant-m-this.m_ratio*y,S=u.abs(w),T=-x*w,A=c.mul(-T,f),E=c.mul(-this.m_ratio*T,d);return e.addMul(this.m_invMassA,A),i+=this.m_invIA*c.cross(l,A),r.addMul(this.m_invMassB,E),n+=this.m_invIB*c.cross(p,E),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=r,this.m_bodyB.c_position.a=n,S<a.linearSlop}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=l;var r=i(21),n=i(19),o=i(13),s=i(4),a=i(3),u=(i(29),i(28),i(33),i(12)),c=(i(27),i(14),i(31),i(32),i(30));l.TYPE="rope-joint",l._super=c,l.prototype=n(l._super.prototype);var h={maxLength:0};function l(t,e,i,n){if(!(this instanceof l))return new l(t,e,i,n);t=r(t,h),c.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=l.TYPE,this.m_localAnchorA=n?e.getLocalPoint(n):t.localAnchorA||a.neo(-1,0),this.m_localAnchorB=n?i.getLocalPoint(n):t.localAnchorB||a.neo(1,0),this.m_maxLength=t.maxLength,this.m_mass=0,this.m_impulse=0,this.m_length=0,this.m_state=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}l.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},l.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},l.prototype.setMaxLength=function(t){this.m_maxLength=t},l.prototype.getMaxLength=function(){return this.m_maxLength},l.prototype.getLimitState=function(){return this.m_state},l.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},l.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},l.prototype.getReactionForce=function(t){return a.mul(this.m_impulse,this.m_u).mul(t)},l.prototype.getReactionTorque=function(t){return 0},l.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,h=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,p=u.neo(i),f=u.neo(c);this.m_rA=u.mulSub(p,this.m_localAnchorA,this.m_localCenterA),this.m_rB=u.mulSub(f,this.m_localAnchorB,this.m_localCenterB),this.m_u=a.zero(),this.m_u.addCombine(1,s,1,this.m_rB),this.m_u.subCombine(1,e,1,this.m_rA),this.m_length=this.m_u.length();var d=this.m_length-this.m_maxLength;if(this.m_state=d>0?2:0,!(this.m_length>o.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var m=a.cross(this.m_rA,this.m_u),y=a.cross(this.m_rB,this.m_u),v=this.m_invMassA+this.m_invIA*m*m+this.m_invMassB+this.m_invIB*y*y;if(this.m_mass=0!=v?1/v:0,t.warmStarting){this.m_impulse*=t.dtRatio;var _=a.mul(this.m_impulse,this.m_u);r.subMul(this.m_invMassA,_),n-=this.m_invIA*a.cross(this.m_rA,_),h.addMul(this.m_invMassB,_),l+=this.m_invIB*a.cross(this.m_rB,_)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(r),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=l},l.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_velocity.v,n=this.m_bodyB.c_velocity.w,o=a.addCross(e,i,this.m_rA),u=a.addCross(r,n,this.m_rB),c=this.m_length-this.m_maxLength,h=a.dot(this.m_u,a.sub(u,o));c<0&&(h+=t.inv_dt*c);var l=-this.m_mass*h,p=this.m_impulse;this.m_impulse=s.min(0,this.m_impulse+l),l=this.m_impulse-p;var f=a.mul(l,this.m_u);e.subMul(this.m_invMassA,f),i-=this.m_invIA*a.cross(this.m_rA,f),r.addMul(this.m_invMassB,f),n+=this.m_invIB*a.cross(this.m_rB,f),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=n},l.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,n=this.m_bodyB.c_position.a,c=u.neo(i),h=u.neo(n),l=u.mulSub(c,this.m_localAnchorA,this.m_localCenterA),p=u.mulSub(h,this.m_localAnchorB,this.m_localCenterB),f=a.zero();f.addCombine(1,r,1,p),f.subCombine(1,e,1,l);var d=f.normalize(),m=d-this.m_maxLength;m=s.clamp(m,0,o.maxLinearCorrection);var y=-this.m_mass*m,v=a.mul(y,f);return e.subMul(this.m_invMassA,v),i-=this.m_invIA*a.cross(l,v),r.addMul(this.m_invMassB,v),n+=this.m_invIB*a.cross(p,v),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(r),this.m_bodyB.c_position.a=n,d-this.m_maxLength<o.linearSlop}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=f;var r=i(21),n=i(19),o=i(13),s=i(4),a=i(3),u=i(29),c=(i(28),i(33)),h=i(12),l=(i(27),i(14),i(31),i(32),i(30));f.TYPE="weld-joint",f._super=l,f.prototype=n(f._super.prototype);var p={frequencyHz:0,dampingRatio:0};function f(t,e,i,n){if(!(this instanceof f))return new f(t,e,i,n);t=r(t,p),l.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=f.TYPE,this.m_localAnchorA=n?e.getLocalPoint(n):t.localAnchorA||a.zero(),this.m_localAnchorB=n?i.getLocalPoint(n):t.localAnchorB||a.zero(),this.m_referenceAngle=s.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=u(),this.m_bias=0,this.m_gamma=0,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new c}f.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},f.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},f.prototype.getReferenceAngle=function(){return this.m_referenceAngle},f.prototype.setFrequency=function(t){this.m_frequencyHz=t},f.prototype.getFrequency=function(){return this.m_frequencyHz},f.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},f.prototype.getDampingRatio=function(){return this.m_dampingRatio},f.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},f.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},f.prototype.getReactionForce=function(t){return a.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},f.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},f.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,u=this.m_bodyB.c_velocity.w,l=h.neo(e),p=h.neo(n);this.m_rA=h.mulVec2(l,a.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=h.mulVec2(p,a.sub(this.m_localAnchorB,this.m_localCenterB));var f=this.m_invMassA,d=this.m_invMassB,m=this.m_invIA,y=this.m_invIB,v=new c;if(v.ex.x=f+d+this.m_rA.y*this.m_rA.y*m+this.m_rB.y*this.m_rB.y*y,v.ey.x=-this.m_rA.y*this.m_rA.x*m-this.m_rB.y*this.m_rB.x*y,v.ez.x=-this.m_rA.y*m-this.m_rB.y*y,v.ex.y=v.ey.x,v.ey.y=f+d+this.m_rA.x*this.m_rA.x*m+this.m_rB.x*this.m_rB.x*y,v.ez.y=this.m_rA.x*m+this.m_rB.x*y,v.ex.z=v.ez.x,v.ey.z=v.ez.y,v.ez.z=m+y,this.m_frequencyHz>0){v.getInverse22(this.m_mass);var _=m+y,b=_>0?1/_:0,g=n-e-this.m_referenceAngle,x=2*s.PI*this.m_frequencyHz,w=2*b*this.m_dampingRatio*x,S=b*x*x,T=t.dt;this.m_gamma=T*(w+T*S),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=g*T*S*this.m_gamma,_+=this.m_gamma,this.m_mass.ez.z=0!=_?1/_:0}else 0==v.ez.z?(v.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(v.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var A=a.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(f,A),r-=m*(a.cross(this.m_rA,A)+this.m_impulse.z),o.addMul(d,A),u+=y*(a.cross(this.m_rB,A)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=u},f.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_velocity.v,n=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,h=this.m_invIA,l=this.m_invIB;if(this.m_frequencyHz>0){var p=n-i,f=-this.m_mass.ez.z*(p+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=f,i-=h*f,n+=l*f,(y=a.zero()).addCombine(1,r,1,a.cross(n,this.m_rB)),y.subCombine(1,e,1,a.cross(i,this.m_rA));var d=a.neg(c.mulVec2(this.m_mass,y));this.m_impulse.x+=d.x,this.m_impulse.y+=d.y;var m=a.clone(d);e.subMul(o,m),i-=h*a.cross(this.m_rA,m),r.addMul(s,m),n+=l*a.cross(this.m_rB,m)}else{var y;(y=a.zero()).addCombine(1,r,1,a.cross(n,this.m_rB)),y.subCombine(1,e,1,a.cross(i,this.m_rA));p=n-i;var v=u(y.x,y.y,p),_=u.neg(c.mulVec3(this.m_mass,v));this.m_impulse.add(_);m=a.neo(_.x,_.y);e.subMul(o,m),i-=h*(a.cross(this.m_rA,m)+_.z),r.addMul(s,m),n+=l*(a.cross(this.m_rB,m)+_.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=n},f.prototype.solvePositionConstraints=function(t){var e,i,r=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,l=this.m_bodyB.c_position.c,p=this.m_bodyB.c_position.a,f=h.neo(n),d=h.neo(p),m=this.m_invMassA,y=this.m_invMassB,v=this.m_invIA,_=this.m_invIB,b=h.mulVec2(f,a.sub(this.m_localAnchorA,this.m_localCenterA)),g=h.mulVec2(d,a.sub(this.m_localAnchorB,this.m_localCenterB)),x=new c;if(x.ex.x=m+y+b.y*b.y*v+g.y*g.y*_,x.ey.x=-b.y*b.x*v-g.y*g.x*_,x.ez.x=-b.y*v-g.y*_,x.ex.y=x.ey.x,x.ey.y=m+y+b.x*b.x*v+g.x*g.x*_,x.ez.y=b.x*v+g.x*_,x.ex.z=x.ez.x,x.ey.z=x.ez.y,x.ez.z=v+_,this.m_frequencyHz>0){(S=a.zero()).addCombine(1,l,1,g),S.subCombine(1,r,1,b),e=S.length(),i=0;var w=a.neg(x.solve22(S));r.subMul(m,w),n-=v*a.cross(b,w),l.addMul(y,w),p+=_*a.cross(g,w)}else{var S;(S=a.zero()).addCombine(1,l,1,g),S.subCombine(1,r,1,b);var T=p-n-this.m_referenceAngle;e=S.length(),i=s.abs(T);var A=u(S.x,S.y,T),E=u();if(x.ez.z>0)E=u.neg(x.solve33(A));else{var I=a.neg(x.solve22(S));E.set(I.x,I.y,0)}w=a.neo(E.x,E.y);r.subMul(m,w),n-=v*(a.cross(b,w)+E.z),l.addMul(y,w),p+=_*(a.cross(g,w)+E.z)}return this.m_bodyA.c_position.c=r,this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c=l,this.m_bodyB.c_position.a=p,e<=o.linearSlop&&i<=o.angularSlop}},function(t,e,i){"undefined"!==typeof DEBUG&&DEBUG,"undefined"!==typeof ASSERT&&ASSERT;t.exports=l;var r=i(21),n=i(19),o=i(13),s=i(4),a=i(3),u=(i(29),i(28),i(33),i(12)),c=(i(27),i(14),i(31),i(32),i(30));l.TYPE="wheel-joint",l._super=c,l.prototype=n(l._super.prototype);var h={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7};function l(t,e,i,n,o){if(!(this instanceof l))return new l(t,e,i,n,o);t=r(t,h),c.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=l.TYPE,this.m_localAnchorA=n?e.getLocalPoint(n):t.localAnchorA||a.zero(),this.m_localAnchorB=n?i.getLocalPoint(n):t.localAnchorB||a.zero(),this.m_localAxis=o?e.getLocalVector(o):t.localAxisA||a.neo(1,0),this.m_localXAxisA=this.m_localAxis,this.m_localYAxisA=a.cross(1,this.m_localXAxisA),this.m_mass=0,this.m_impulse=0,this.m_motorMass=0,this.m_motorImpulse=0,this.m_springMass=0,this.m_springImpulse=0,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=0,this.m_gamma=0,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_ax=a.zero(),this.m_ay=a.zero(),this.m_sAx,this.m_sBx,this.m_sAy,this.m_sBy}l.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},l.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},l.prototype.getLocalAxisA=function(){return this.m_localXAxisA},l.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.getWorldPoint(this.m_localAnchorA),r=e.getWorldPoint(this.m_localAnchorB),n=a.sub(r,i),o=t.getWorldVector(this.m_localXAxisA);return a.dot(n,o)},l.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},l.prototype.isMotorEnabled=function(){return this.m_enableMotor},l.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},l.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},l.prototype.getMotorSpeed=function(){return this.m_motorSpeed},l.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},l.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},l.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},l.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},l.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},l.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},l.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},l.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},l.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},l.prototype.getReactionForce=function(t){return a.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(t)},l.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},l.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,i=this.m_invMassB,r=this.m_invIA,n=this.m_invIB,o=this.m_bodyA.c_position.c,c=this.m_bodyA.c_position.a,h=this.m_bodyA.c_velocity.v,l=this.m_bodyA.c_velocity.w,p=this.m_bodyB.c_position.c,f=this.m_bodyB.c_position.a,d=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,y=u.neo(c),v=u.neo(f),_=u.mulVec2(y,a.sub(this.m_localAnchorA,this.m_localCenterA)),b=u.mulVec2(v,a.sub(this.m_localAnchorB,this.m_localCenterB));if((S=a.zero()).addCombine(1,p,1,b),S.subCombine(1,o,1,_),this.m_ay=u.mulVec2(y,this.m_localYAxisA),this.m_sAy=a.cross(a.add(S,_),this.m_ay),this.m_sBy=a.cross(b,this.m_ay),this.m_mass=e+i+r*this.m_sAy*this.m_sAy+n*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=u.mulVec2(y,this.m_localXAxisA),this.m_sAx=a.cross(a.add(S,_),this.m_ax),this.m_sBx=a.cross(b,this.m_ax);var g=e+i+r*this.m_sAx*this.m_sAx+n*this.m_sBx*this.m_sBx;if(g>0){this.m_springMass=1/g;var x=a.dot(S,this.m_ax),w=2*s.PI*this.m_frequencyHz,S=2*this.m_springMass*this.m_dampingRatio*w,T=this.m_springMass*w*w,A=t.dt;this.m_gamma=A*(S+A*T),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=x*A*T*this.m_gamma,this.m_springMass=g+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=r+n,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var E=a.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),I=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,O=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;h.subMul(this.m_invMassA,E),l-=this.m_invIA*I,d.addMul(this.m_invMassB,E),m+=this.m_invIB*O}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(h),this.m_bodyA.c_velocity.w=l,this.m_bodyB.c_velocity.v.set(d),this.m_bodyB.c_velocity.w=m},l.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,i=this.m_invMassB,r=this.m_invIA,n=this.m_invIB,o=this.m_bodyA.c_velocity.v,u=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_velocity.v,h=this.m_bodyB.c_velocity.w,l=a.dot(this.m_ax,c)-a.dot(this.m_ax,o)+this.m_sBx*h-this.m_sAx*u,p=-this.m_springMass*(l+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=p;var f=a.mul(p,this.m_ax),d=p*this.m_sAx,m=p*this.m_sBx;o.subMul(e,f),u-=r*d,c.addMul(i,f);l=(h+=n*m)-u-this.m_motorSpeed,p=-this.m_motorMass*l;var y=this.m_motorImpulse,v=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=s.clamp(this.m_motorImpulse+p,-v,v),u-=r*(p=this.m_motorImpulse-y),h+=n*p;l=a.dot(this.m_ay,c)-a.dot(this.m_ay,o)+this.m_sBy*h-this.m_sAy*u,p=-this.m_mass*l;this.m_impulse+=p;f=a.mul(p,this.m_ay),d=p*this.m_sAy,m=p*this.m_sBy;o.subMul(e,f),u-=r*d,c.addMul(i,f),h+=n*m,this.m_bodyA.c_velocity.v.set(o),this.m_bodyA.c_velocity.w=u,this.m_bodyB.c_velocity.v.set(c),this.m_bodyB.c_velocity.w=h},l.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,n=this.m_bodyB.c_position.a,c=u.neo(i),h=u.neo(n),l=u.mulVec2(c,a.sub(this.m_localAnchorA,this.m_localCenterA)),p=u.mulVec2(h,a.sub(this.m_localAnchorB,this.m_localCenterB)),f=a.zero();f.addCombine(1,r,1,p),f.subCombine(1,e,1,l);var d,m=u.mulVec2(c,this.m_localYAxisA),y=a.cross(a.add(f,l),m),v=a.cross(p,m),_=a.dot(f,m),b=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;d=0!=b?-_/b:0;var g=a.mul(d,m),x=d*y,w=d*v;return e.subMul(this.m_invMassA,g),i-=this.m_invIA*x,r.addMul(this.m_invMassB,g),n+=this.m_invIB*w,this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(r),this.m_bodyB.c_position.a=n,s.abs(_)<=o.linearSlop}},function(t,e,i){var r=i(11);function n(t,e,i,n,o,s){var a=r.Texture.from(e),u=new r.TilingSprite(a,t.screen.width,t.screen.height);return t.stage.addChild(u),u.position.x=0,u.position.y=i,u.tilePosition.x=0,u.tilePosition.y=0,u}function o(t){var e=r.Texture.from("../img/cloud"+s(1,4)+".png"),i=new r.Sprite(e);return t.stage.addChild(i),i.position.x=t.screen.width+100,i.position.y=s(50,250),i}function s(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function a(t,e){return Math.random()*(e-t)+t}t.exports=function(t){var e={delta:0},i=n(t,"../img/bg_layer4.png",-100,null,null,e),u=n(t,"../img/bg_layer3.png",-65,null,null,e),c=n(t,"../img/bg_layer2.png",-33,null,null,e),h=n(t,"../img/bg_layer1.png",0,null,null,e),l=o(t),p=o(t),f=a(.1,.5),d=a(.1,.5),m=0;t.ticker.add((function(){h.tilePosition.x-=1.28,c.tilePosition.x-=.64,u.tilePosition.x-=.32,i.tilePosition.x-=.16,m+=.1,e.delta=.5*Math.sin(m),l.position.x-=f,p.position.x-=d,l.position.x<-100&&(l.texture=r.Texture.from("../img/cloud"+s(1,4)+".png"),l.position.x=t.screen.width+100,l.position.y=s(50,250),f=a(.1,.5)),p.position.x<-100&&(p.texture=r.Texture.from("../img/cloud"+s(1,4)+".png"),p.position.x=t.screen.width+100,p.position.y=s(50,250),d=a(.1,.5))}))}},function(t,e,i){"use strict";i.r(e),function(t){i.d(e,"Plugin",(function(){return d})),i.d(e,"Viewport",(function(){return z}));var r=i(18),n=i(105),o=i(15),s=i(10),a=i(16),u=i(8),c=i(9),h=i(11),l=function(){function t(e){Object(u.a)(this,t),this.viewport=e,this.touches=[],this.addListeners()}return Object(c.a)(t,[{key:"addListeners",value:function(){var t=this;this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new h.Rectangle(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.on("pointerout",this.up,this),this.wheelFunction=function(e){return t.handleWheel(e)},this.viewport.options.divWheel.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}},{key:"destroy",value:function(){this.viewport.options.divWheel.removeEventListener("wheel",this.wheelFunction)}},{key:"down",value:function(t){if(!this.viewport.pause&&this.viewport.worldVisible){if("mouse"===t.data.pointerType?this.isMouseDown=!0:this.get(t.data.pointerId)||this.touches.push({id:t.data.pointerId,last:null}),1===this.count()){this.last=t.data.global.clone();var e=this.viewport.plugins.get("decelerate"),i=this.viewport.plugins.get("bounce");e&&e.isActive()||i&&i.isActive()?this.clickedAvailable=!1:this.clickedAvailable=!0}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}}},{key:"checkThreshold",value:function(t){return Math.abs(t)>=this.viewport.threshold}},{key:"move",value:function(t){if(!this.viewport.pause&&this.viewport.worldVisible){var e=this.viewport.plugins.move(t);if(this.clickedAvailable){var i=t.data.global.x-this.last.x,r=t.data.global.y-this.last.y;(this.checkThreshold(i)||this.checkThreshold(r))&&(this.clickedAvailable=!1)}e&&this.viewport.options.stopPropagation&&t.stopPropagation()}}},{key:"up",value:function(t){if(!this.viewport.pause&&this.viewport.worldVisible){"mouse"===t.data.pointerType&&(this.isMouseDown=!1),"mouse"!==t.data.pointerType&&this.remove(t.data.pointerId);var e=this.viewport.plugins.up(t);this.clickedAvailable&&0===this.count()&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this}),this.clickedAvailable=!1),e&&this.viewport.options.stopPropagation&&t.stopPropagation()}}},{key:"getPointerPosition",value:function(t){var e=new h.Point;return this.viewport.options.interaction?this.viewport.options.interaction.mapPositionToPoint(e,t.clientX,t.clientY):(e.x=t.clientX,e.y=t.clientY),e}},{key:"handleWheel",value:function(t){if(!this.viewport.pause&&this.viewport.worldVisible){var e=this.viewport.toLocal(this.getPointerPosition(t));if(this.viewport.left<=e.x&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom)this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}}},{key:"pause",value:function(){this.touches=[],this.isMouseDown=!1}},{key:"get",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this.touches[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;if(s.id===t)return s}}catch(a){i=!0,r=a}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}return null}},{key:"remove",value:function(t){for(var e=0;e<this.touches.length;e++)if(this.touches[e].id===t)return void this.touches.splice(e,1)}},{key:"count",value:function(){return(this.isMouseDown?1:0)+this.touches.length}}]),t}(),p=["drag","pinch","wheel","follow","mouse-edges","decelerate","bounce","snap-zoom","clamp-zoom","snap","clamp"],f=function(){function t(e){Object(u.a)(this,t),this.viewport=e,this.list=[],this.plugins={}}return Object(c.a)(t,[{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.length;this.plugins[t]=e;var r=p.indexOf(t);-1!==r&&p.splice(r,1),p.splice(i,0,t),this.sort()}},{key:"get",value:function(t){return this.plugins[t]}},{key:"update",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this.list[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.update(t)}}catch(s){i=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"resize",value:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=this.list[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){r.value.resize()}}catch(o){e=!0,i=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}}},{key:"reset",value:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=this.list[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){r.value.reset()}}catch(o){e=!0,i=o}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}}},{key:"remove",value:function(t){this.plugins[t]&&(this.plugins[t]=null,this.viewport.emit(t+"-remove"),this.sort())}},{key:"pause",value:function(t){this.plugins[t]&&this.plugins[t].pause()}},{key:"resume",value:function(t){this.plugins[t]&&this.plugins[t].resume()}},{key:"sort",value:function(){this.list=[];var t=!0,e=!1,i=void 0;try{for(var r,n=p[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;this.plugins[o]&&this.list.push(this.plugins[o])}}catch(s){e=!0,i=s}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}}},{key:"down",value:function(t){var e=!1,i=!0,r=!1,n=void 0;try{for(var o,s=this.list[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.down(t)&&(e=!0)}}catch(a){r=!0,n=a}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return e}},{key:"move",value:function(t){var e=!1,i=!0,r=!1,n=void 0;try{for(var o,s=this.viewport.plugins.list[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.move(t)&&(e=!0)}}catch(a){r=!0,n=a}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return e}},{key:"up",value:function(t){var e=!1,i=!0,r=!1,n=void 0;try{for(var o,s=this.list[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.up(t)&&(e=!0)}}catch(a){r=!0,n=a}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return e}},{key:"wheel",value:function(t){var e=!1,i=!0,r=!1,n=void 0;try{for(var o,s=this.list[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.wheel(t)&&(e=!0)}}catch(a){r=!0,n=a}finally{try{i||null==s.return||s.return()}finally{if(r)throw n}}return e}}]),t}(),d=function(){function t(e){Object(u.a)(this,t),this.parent=e,this.paused=!1}return Object(c.a)(t,[{key:"destroy",value:function(){}},{key:"down",value:function(){return!1}},{key:"move",value:function(){return!1}},{key:"up",value:function(){return!1}},{key:"wheel",value:function(){return!1}},{key:"update",value:function(){}},{key:"resize",value:function(){}},{key:"reset",value:function(){}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}}]),t}(),m={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1},y=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),(i=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},m,r),i.moved=!1,i.reverse=i.options.reverse?1:-1,i.xDirection=!i.options.direction||"all"===i.options.direction||"x"===i.options.direction,i.yDirection=!i.options.direction||"all"===i.options.direction||"y"===i.options.direction,i.keyIsPressed=!1,i.parseUnderflow(),i.mouseButtons(i.options.mouseButtons),i.options.keyToPress&&i.handleKeyPresses(i.options.keyToPress),i}return Object(a.a)(e,t),Object(c.a)(e,[{key:"handleKeyPresses",value:function(t){var e=this;parent.addEventListener("keydown",(function(i){t.includes(i.code)&&(e.keyIsPressed=!0)})),parent.addEventListener("keyup",(function(i){t.includes(i.code)&&(e.keyIsPressed=!1)}))}},{key:"mouseButtons",value:function(t){this.mouse=t&&"all"!==t?[-1!==t.indexOf("left"),-1!==t.indexOf("middle"),-1!==t.indexOf("right")]:[!0,!0,!0]}},{key:"parseUnderflow",value:function(){var t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0)}},{key:"checkButtons",value:function(t){var e="mouse"===t.data.pointerType,i=this.parent.input.count();return!(!(1===i||i>1&&!this.parent.plugins.get("pinch"))||e&&!this.mouse[t.data.button])}},{key:"checkKeyPress",value:function(t){return!!(!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&"touch"===t.data.pointerType)}},{key:"down",value:function(t){if(!this.paused&&this.options.pressDrag)return this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.data.global.x,y:t.data.global.y},this.current=t.data.pointerId,!0):void(this.last=null)}},{key:"move",value:function(t){if(!this.paused&&this.options.pressDrag&&this.last&&this.current===t.data.pointerId){var e=t.data.global.x,i=t.data.global.y,r=this.parent.input.count();if(1===r||r>1&&!this.parent.plugins.get("pinch")){var n=e-this.last.x,o=i-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(n)||this.yDirection&&this.parent.input.checkThreshold(o)){var s={x:e,y:i};return this.xDirection&&(this.parent.x+=(s.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(s.y-this.last.y)*this.options.factor),this.last=s,this.moved||this.parent.emit("drag-start",{event:t,screen:new h.Point(this.last.x,this.last.y),world:this.parent.toWorld(new h.Point(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}}},{key:"up",value:function(t){if(!this.paused){var e=this.parent.input.touches;if(1===e.length){var i=e[0];return i.last&&(this.last={x:i.last.x,y:i.last.y},this.current=i.id),this.moved=!1,!0}if(this.last&&this.moved){var r=new h.Point(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:t,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}}}},{key:"wheel",value:function(t){if(!this.paused&&this.options.wheel){var e=this.parent.plugins.get("wheel");if(!e)return this.xDirection&&(this.parent.x+=t.deltaX*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=t.deltaY*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),!0}}},{key:"resume",value:function(){this.last=null,this.paused=!1}},{key:"clamp",value:function(){var t=this.parent.plugins.get("decelerate")||{};if("y"!==this.options.clampWheel)if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if("x"!==this.options.clampWheel)if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}},{key:"active",get:function(){return this.moved}}]),e}(d),v={noDrag:!1,percent:1,center:null},_=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),(i=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},v,r),i}return Object(a.a)(e,t),Object(c.a)(e,[{key:"down",value:function(){if(this.parent.input.count()>=2)return this.active=!0,!0}},{key:"move",value:function(t){if(!this.paused&&this.active){var e=t.data.global.x,i=t.data.global.y,r=this.parent.input.touches;if(r.length>=2){var n=r[0],o=r[1],s=n.last&&o.last?Math.sqrt(Math.pow(o.last.x-n.last.x,2)+Math.pow(o.last.y-n.last.y,2)):null;if(n.id===t.data.pointerId?n.last={x:e,y:i,data:t.data}:o.id===t.data.pointerId&&(o.last={x:e,y:i,data:t.data}),s){var a,u={x:n.last.x+(o.last.x-n.last.x)/2,y:n.last.y+(o.last.y-n.last.y)/2};this.options.center||(a=this.parent.toLocal(u));var c=Math.sqrt(Math.pow(o.last.x-n.last.x,2)+Math.pow(o.last.y-n.last.y,2)),h=(1-s/(c=0===c?c=1e-10:c))*this.options.percent*this.parent.scale.x;this.parent.scale.x+=h,this.parent.scale.y+=h,this.parent.emit("zoomed",{viewport:this.parent,type:"pinch"});var l=this.parent.plugins.get("clamp-zoom");if(l&&l.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{var p=this.parent.toGlobal(a);this.parent.x+=u.x-p.x,this.parent.y+=u.y-p.y,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=u.x-this.lastCenter.x,this.parent.y+=u.y-this.lastCenter.y,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=u,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}}}},{key:"up",value:function(){if(this.pinching&&this.parent.input.touches.length<=1)return this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0}}]),e}(d),b={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"},g=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),(i=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},b,r),i.options.direction&&(i.options.left="x"===i.options.direction||"all"===i.options.direction||null,i.options.right="x"===i.options.direction||"all"===i.options.direction||null,i.options.top="y"===i.options.direction||"all"===i.options.direction||null,i.options.bottom="y"===i.options.direction||"all"===i.options.direction||null),i.parseUnderflow(),i.last={x:null,y:null,scaleX:null,scaleY:null},i.update(),i}return Object(a.a)(e,t),Object(c.a)(e,[{key:"parseUnderflow",value:function(){var t=this.options.underflow.toLowerCase();"none"===t?this.noUnderflow=!0:"center"===t?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0,this.noUnderflow=!1)}},{key:"move",value:function(){return this.update(),!1}},{key:"update",value:function(){if(!this.paused&&(this.parent.x!==this.last.x||this.parent.y!==this.last.y||this.parent.scale.x!==this.last.scaleX||this.parent.scale.y!==this.last.scaleY)){var t={x:this.parent.x,y:this.parent.y},e=this.parent.plugins.decelerate||{};if(null!==this.options.left||null!==this.options.right){var i=!1;if(this.parent.screenWorldWidth<this.parent.screenWidth){if(!this.noUnderflow)switch(this.underflowX){case-1:0!==this.parent.x&&(this.parent.x=0,i=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,i=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,i=!0)}}else null!==this.options.left&&this.parent.left<(!0===this.options.left?0:this.options.left)&&(this.parent.x=-(!0===this.options.left?0:this.options.left)*this.parent.scale.x,e.x=0,i=!0),null!==this.options.right&&this.parent.right>(!0===this.options.right?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(!0===this.options.right?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,e.x=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(null!==this.options.top||null!==this.options.bottom){var r=!1;if(this.parent.screenWorldHeight<this.parent.screenHeight){if(!this.noUnderflow)switch(this.underflowY){case-1:0!==this.parent.y&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}}else null!==this.options.top&&this.parent.top<(!0===this.options.top?0:this.options.top)&&(this.parent.y=-(!0===this.options.top?0:this.options.top)*this.parent.scale.y,e.y=0,r=!0),null!==this.options.bottom&&this.parent.bottom>(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,e.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}}},{key:"reset",value:function(){this.update()}}]),e}(d),x={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null},w=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),(i=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},x,r),i.clamp(),i}return Object(a.a)(e,t),Object(c.a)(e,[{key:"resize",value:function(){this.clamp()}},{key:"clamp",value:function(){if(!this.paused)if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){var t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;if(null!==this.options.minWidth&&t<this.options.minWidth){var i=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxWidth&&t>this.options.maxWidth){var r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.minHeight&&e<this.options.minHeight){var n=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/n,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxHeight&&e>this.options.maxHeight){var o=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/o,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else{var s=this.parent.scale.x;null!==this.options.minScale&&s<this.options.minScale&&(s=this.options.minScale),null!==this.options.maxScale&&s>this.options.maxScale&&(s=this.options.maxScale),s!==this.parent.scale.x&&(this.parent.scale.set(s),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}},{key:"reset",value:function(){this.clamp()}}]),e}(d),S={friction:.95,bounce:.8,minSpeed:.01},T=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),(i=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},S,r),i.saved=[],i.reset(),i.parent.on("moved",(function(t){return i.moved(t)})),i}return Object(a.a)(e,t),Object(c.a)(e,[{key:"destroy",value:function(){this.parent}},{key:"down",value:function(){this.saved=[],this.x=this.y=!1}},{key:"isActive",value:function(){return this.x||this.y}},{key:"move",value:function(){if(!this.paused){var t=this.parent.input.count();(1===t||t>1&&!this.parent.plugins.get("pinch"))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30))}}},{key:"moved",value:function(t){if(this.saved.length){var e=this.saved[this.saved.length-1];"clamp-x"===t.type?e.x===t.original.x&&(e.x=this.parent.x):"clamp-y"===t.type&&e.y===t.original.y&&(e.y=this.parent.y)}}},{key:"up",value:function(){if(0===this.parent.input.count()&&this.saved.length){var t=performance.now(),e=!0,i=!1,r=void 0;try{for(var n,o=this.saved[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;if(s.time>=t-100){var a=t-s.time;this.x=(this.parent.x-s.x)/a,this.y=(this.parent.y-s.y)/a,this.percentChangeX=this.percentChangeY=this.options.friction;break}}}catch(u){i=!0,r=u}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}}}},{key:"activate",value:function(t){"undefined"!==typeof(t=t||{}).x&&(this.x=t.x,this.percentChangeX=this.options.friction),"undefined"!==typeof t.y&&(this.y=t.y,this.percentChangeY=this.options.friction)}},{key:"update",value:function(t){var e;this.paused||(this.x&&(this.parent.x+=this.x*t,this.x*=this.percentChangeX,Math.abs(this.x)<this.options.minSpeed&&(this.x=0),e=!0),this.y&&(this.parent.y+=this.y*t,this.y*=this.percentChangeY,Math.abs(this.y)<this.options.minSpeed&&(this.y=0),e=!0),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"}))}},{key:"reset",value:function(){this.x=this.y=null}}]),e}(d),A="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};var E=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){(function(){var e;(function(e){t.exports=e})(e={linear:function(t,e,i,r){return i*t/r+e},easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,r){var n,o,s;return s=1.70158,0===t||(t/=r),(o=0)||(o=.3*r),(n=i)<Math.abs(i)?(n=i,s=o/4):s=o/(2*Math.PI)*Math.asin(i/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)+e},easeOutElastic:function(t,e,i,r){var n,o,s;return s=1.70158,0===t||(t/=r),(o=0)||(o=.3*r),(n=i)<Math.abs(i)?(n=i,s=o/4):s=o/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*r-s)*(2*Math.PI)/o)+i+e},easeInOutElastic:function(t,e,i,r){var n,o,s;return s=1.70158,0===t||(t/=r/2),(o=0)||(o=r*(.3*1.5)),(n=i)<Math.abs(i)?(n=i,s=o/4):s=o/(2*Math.PI)*Math.asin(i/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)*.5+i+e},easeInBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*(t/=r)*t*((n+1)*t-n)+e},easeOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},easeInOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:function(t,i,r,n){return r-e.easeOutBounce(n-t,0,r,n)+i},easeOutBounce:function(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,i,r,n){return t<n/2?.5*e.easeInBounce(2*t,0,r,n)+i:.5*e.easeOutBounce(2*t-n,0,r,n)+.5*r+i}})}).call(A)}));function I(t,e){return t?"function"===typeof t?t:"string"===typeof t?E[t]:void 0:E[e]}var O={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null},C=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),(i=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},O,r),i.ease=I(i.options.ease,"easeInOutSine"),i.options.sides&&("all"===i.options.sides?i.top=i.bottom=i.left=i.right=!0:"horizontal"===i.options.sides?i.right=i.left=!0:"vertical"===i.options.sides?i.top=i.bottom=!0:(i.top=-1!==i.options.sides.indexOf("top"),i.bottom=-1!==i.options.sides.indexOf("bottom"),i.left=-1!==i.options.sides.indexOf("left"),i.right=-1!==i.options.sides.indexOf("right"))),i.parseUnderflow(),i.last={},i.reset(),i}return Object(a.a)(e,t),Object(c.a)(e,[{key:"parseUnderflow",value:function(){var t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0)}},{key:"isActive",value:function(){return null!==this.toX||null!==this.toY}},{key:"down",value:function(){this.toX=this.toY=null}},{key:"up",value:function(){this.bounce()}},{key:"update",value:function(t){if(!this.paused){if(this.bounce(),this.toX){var e=this.toX;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)}if(this.toY){var i=this.toY;i.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),i.time>=this.options.time?(this.parent.y=i.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(i.time,i.start,i.delta,this.options.time)}}}},{key:"calcUnderflowX",value:function(){var t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}},{key:"calcUnderflowY",value:function(){var t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}},{key:"oob",value:function(){var t=this.options.bounceBox;if(t){var e="undefined"===typeof t.x?0:t.x,i="undefined"===typeof t.y?0:t.y,r="undefined"===typeof t.width?this.parent.worldWidth:t.width,n="undefined"===typeof t.height?this.parent.worldHeight:t.height;return{left:this.parent.left<e,right:this.parent.right>r,top:this.parent.top<i,bottom:this.parent.bottom>n,topLeft:new h.Point(e*this.parent.scale.x,i*this.parent.scale.y),bottomRight:new h.Point(r*this.parent.scale.x-this.parent.screenWidth,n*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new h.Point(0,0),bottomRight:new h.Point(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}},{key:"bounce",value:function(){if(!this.paused){var t,e=this.parent.plugins.get("decelerate");e&&(e.x||e.y)&&(e.x&&e.percentChangeX===e.options.friction||e.y&&e.percentChangeY===e.options.friction)&&(((t=this.oob()).left&&this.left||t.right&&this.right)&&(e.percentChangeX=this.options.friction),(t.top&&this.top||t.bottom&&this.bottom)&&(e.percentChangeY=this.options.friction));var i=this.parent.plugins.get("drag")||{},r=this.parent.plugins.get("pinch")||{};if(e=e||{},!i.active&&!r.active&&(!this.toX||!this.toY)&&(!e.x||!e.y)){var n=(t=t||this.oob()).topLeft,o=t.bottomRight;if(!this.toX&&!e.x){var s=null;t.left&&this.left?s=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-n.x:t.right&&this.right&&(s=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-o.x),null!==s&&this.parent.x!==s&&(this.toX={time:0,start:this.parent.x,delta:s-this.parent.x,end:s},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!e.y){var a=null;t.top&&this.top?a=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-n.y:t.bottom&&this.bottom&&(a=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-o.y),null!==a&&this.parent.y!==a&&(this.toY={time:0,start:this.parent.y,delta:a-this.parent.y,end:a},this.parent.emit("bounce-y-start",this.parent))}}}}},{key:"reset",value:function(){this.toX=this.toY=null,this.bounce()}}]),e}(d),P={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1},B=function(t){function e(t,i,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(u.a)(this,e),(n=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},P,a),n.ease=I(a.ease,"easeInOutSine"),n.x=i,n.y=r,n.options.forceStart&&n.snapStart(),n}return Object(a.a)(e,t),Object(c.a)(e,[{key:"snapStart",value:function(){this.percent=0,this.snapping={time:0};var t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}},{key:"wheel",value:function(){this.options.removeOnInterrupt&&this.parent.plugins.remove("snap")}},{key:"down",value:function(){this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null)}},{key:"up",value:function(){if(0===this.parent.input.count()){var t=this.parent.plugins.get("decelerate");t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}}},{key:"update",value:function(t){if(!this.paused&&(!this.options.interrupt||0===this.parent.input.count()))if(this.snapping){var e,i,r,n=this.snapping;if(n.time+=t,n.time>this.options.time)e=!0,i=this.startX+this.deltaX,r=this.startY+this.deltaY;else{var o=this.ease(n.time,0,1,this.options.time);i=this.startX+this.deltaX*o,r=this.startY+this.deltaY*o}this.options.topLeft?this.parent.moveCorner(i,r):this.parent.moveCenter(i,r),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),e&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{var s=this.options.topLeft?this.parent.corner:this.parent.center;s.x===this.x&&s.y===this.y||this.snapStart()}}}]),e}(d),M={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupts:!1,forceStart:!1,noMove:!1},k=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),(i=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},M,r),i.ease=I(i.options.ease),i.options.width>0&&(i.xScale=t.screenWidth/i.options.width),i.options.height>0&&(i.yScale=t.screenHeight/i.options.height),i.xIndependent=!!i.xScale,i.yIndependent=!!i.yScale,i.xScale=i.xIndependent?i.xScale:i.yScale,i.yScale=i.yIndependent?i.yScale:i.xScale,0===i.options.time?(t.container.scale.x=i.xScale,t.container.scale.y=i.yScale,i.options.removeOnComplete&&i.parent.plugins.remove("snap-zoom")):r.forceStart&&i.createSnapping(),i}return Object(a.a)(e,t),Object(c.a)(e,[{key:"createSnapping",value:function(){var t=this.parent.scale;this.snapping={time:0,startX:t.x,startY:t.y,deltaX:this.xScale-t.x,deltaY:this.yScale-t.y},this.parent.emit("snap-zoom-start",this.parent)}},{key:"resize",value:function(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}},{key:"wheel",value:function(){this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom")}},{key:"down",value:function(){this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null)}},{key:"update",value:function(t){var e;if(!this.paused&&(!this.options.interrupt||0===this.parent.input.count()))if(this.options.center||this.options.noMove||(e=this.parent.center),this.snapping){if(this.snapping){var i=this.snapping;if(i.time+=t,i.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{var r=this.snapping;this.parent.scale.x=this.ease(r.time,r.startX,r.deltaX,this.options.time),this.parent.scale.y=this.ease(r.time,r.startY,r.deltaY,this.options.time)}var n=this.parent.plugins.get("clamp-zoom");n&&n.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(e))}}else this.parent.scale.x===this.xScale&&this.parent.scale.y===this.yScale||this.createSnapping()}},{key:"resume",value:function(){this.snapping=null,Object(n.a)(Object(s.a)(e.prototype),"resume",this).call(this)}}]),e}(d),R={speed:0,acceleration:null,radius:null},D=function(t){function e(t,i){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(u.a)(this,e),(r=Object(o.a)(this,Object(s.a)(e).call(this,t))).target=i,r.options=Object.assign({},R,n),r.velocity={x:0,y:0},r}return Object(a.a)(e,t),Object(c.a)(e,[{key:"update",value:function(t){if(!this.paused){var e=this.parent.center,i=this.target.x,r=this.target.y;if(this.options.radius){if(!(Math.sqrt(Math.pow(this.target.y-e.y,2)+Math.pow(this.target.x-e.x,2))>this.options.radius))return;var n=Math.atan2(this.target.y-e.y,this.target.x-e.x);i=this.target.x-Math.cos(n)*this.options.radius,r=this.target.y-Math.sin(n)*this.options.radius}var o=i-e.x,s=r-e.y;if(o||s)if(this.options.speed)if(this.options.acceleration){var a=Math.atan2(r-e.y,i-e.x),u=Math.sqrt(Math.pow(o,2)+Math.pow(s,2));if(u){var c=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);this.velocity=u>c?{x:Math.min(this.velocity.x+this.options.acceleration*t,this.options.speed),y:Math.min(this.velocity.y+this.options.acceleration*t,this.options.speed)}:{x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};var h=Math.cos(a)*this.velocity.x,l=Math.sin(a)*this.velocity.y,p=Math.abs(h)>Math.abs(o)?i:e.x+h,f=Math.abs(l)>Math.abs(s)?r:e.y+l;this.parent.moveCenter(p,f),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{var d=Math.atan2(r-e.y,i-e.x),m=Math.cos(d)*this.options.speed,y=Math.sin(d)*this.options.speed,v=Math.abs(m)>Math.abs(o)?i:e.x+m,_=Math.abs(y)>Math.abs(s)?r:e.y+y;this.parent.moveCenter(v,_),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(i,r),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}}]),e}(d),F={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null},N=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),(i=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},F,r),i}return Object(a.a)(e,t),Object(c.a)(e,[{key:"down",value:function(){this.options.interrupt&&(this.smoothing=null)}},{key:"update",value:function(){if(this.smoothing){var t,e=this.smoothingCenter,i=this.smoothing;this.options.center||(t=this.parent.toLocal(e)),this.parent.scale.x+=i.x,this.parent.scale.y+=i.y,this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});var r=this.parent.plugins.get("clamp-zoom");if(r&&r.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{var n=this.parent.toGlobal(t);this.parent.x+=e.x-n.x,this.parent.y+=e.y-n.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}},{key:"wheel",value:function(t){if(!this.paused){var e=this.parent.input.getPointerPosition(t),i=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?120:1)/500,r=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){var n={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+n.x)*r-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+n.y)*r-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{var o;this.options.center||(o=this.parent.toLocal(e)),this.parent.scale.x*=r,this.parent.scale.y*=r,this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});var s=this.parent.plugins.get("clamp-zoom");if(s&&s.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{var a=this.parent.toGlobal(o);this.parent.x+=e.x-a.x,this.parent.y+=e.y-a.y}}return this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:t.deltaX,dy:t.deltaY,dz:t.deltaZ},event:t,viewport:this.parent}),!this.parent.options.passiveWheel||void 0}}}]),e}(d),L={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1},j=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),(i=Object(o.a)(this,Object(s.a)(e).call(this,t))).options=Object.assign({},L,r),i.reverse=i.options.reverse?1:-1,i.radiusSquared=Math.pow(i.options.radius,2),i.resize(),i}return Object(a.a)(e,t),Object(c.a)(e,[{key:"resize",value:function(){var t=this.options.distance;null!==t?(this.left=t,this.top=t,this.right=this.parent.worldScreenWidth-t,this.bottom=this.parent.worldScreenHeight-t):this.radius||(this.left=this.options.left,this.top=this.options.top,this.right=null===this.options.right?null:this.parent.worldScreenWidth-this.options.right,this.bottom=null===this.options.bottom?null:this.parent.worldScreenHeight-this.options.bottom)}},{key:"down",value:function(){this.options.allowButtons||(this.horizontal=this.vertical=null)}},{key:"move",value:function(t){if(!("mouse"!==t.data.pointerType&&1!==t.data.identifier||!this.options.allowButtons&&0!==t.data.buttons)){var e=t.data.global.x,i=t.data.global.y;if(this.radiusSquared){var r=this.parent.toScreen(this.parent.center);if(Math.pow(r.x-e,2)+Math.pow(r.y-i,2)>=this.radiusSquared){var n=Math.atan2(r.y-i,r.x-e);this.options.linear?(this.horizontal=Math.round(Math.cos(n))*this.options.speed*this.reverse*.06,this.vertical=Math.round(Math.sin(n))*this.options.speed*this.reverse*.06):(this.horizontal=Math.cos(n)*this.options.speed*this.reverse*.06,this.vertical=Math.sin(n)*this.options.speed*this.reverse*.06)}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else null!==this.left&&e<this.left?this.horizontal=1*this.reverse*this.options.speed*.06:null!==this.right&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*.06:(this.decelerateHorizontal(),this.horizontal=0),null!==this.top&&i<this.top?this.vertical=1*this.reverse*this.options.speed*.06:null!==this.bottom&&i>this.bottom?this.vertical=-1*this.reverse*this.options.speed*.06:(this.decelerateVertical(),this.vertical=0)}}},{key:"decelerateHorizontal",value:function(){var t=this.parent.plugins.get("decelerate");this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}},{key:"decelerateVertical",value:function(){var t=this.parent.plugins.get("decelerate");this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}},{key:"up",value:function(){this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null}},{key:"update",value:function(){if(!this.paused&&(this.horizontal||this.vertical)){var t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}]),e}(d),U={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,interaction:null,disableOnContextMenu:!1},z=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.a)(this,e),(t=Object(o.a)(this,Object(s.a)(e).call(this))).options=Object.assign({},U,i),i.ticker)t.options.ticker=i.ticker;else{var n,a=h;n=parseInt(/^(\d+)\./.exec(h.VERSION)[1])<5?a.ticker.shared:a.Ticker.shared,t.options.ticker=i.ticker||n}return t.screenWidth=t.options.screenWidth,t.screenHeight=t.options.screenHeight,t._worldWidth=t.options.worldWidth,t._worldHeight=t.options.worldHeight,t.forceHitArea=t.options.forceHitArea,t.threshold=t.options.threshold,t.options.divWheel=t.options.divWheel||document.body,t.options.disableOnContextMenu&&(t.options.divWheel.oncontextmenu=function(t){return t.preventDefault()}),t.options.noTicker||(t.tickerFunction=function(){return t.update(t.options.ticker.elapsedMS)},t.options.ticker.add(t.tickerFunction)),t.input=new l(Object(r.a)(t)),t.plugins=new f(Object(r.a)(t)),t}return Object(a.a)(e,t),Object(c.a)(e,[{key:"destroy",value:function(t){this.options.noTicker||this.options.ticker.remove(this.tickerFunction),this.input.destroy(),Object(n.a)(Object(s.a)(e.prototype),"destroy",this).call(this,t)}},{key:"update",value:function(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new h.Rectangle(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerHeight,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.screenWidth=t,this.screenHeight=e,"undefined"!==typeof i&&(this._worldWidth=i),"undefined"!==typeof r&&(this._worldHeight=r),this.plugins.resize()}},{key:"getVisibleBounds",value:function(){return new h.Rectangle(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}},{key:"toWorld",value:function(t,e){return 2===arguments.length?this.toLocal(new h.Point(t,e)):this.toLocal(t)}},{key:"toScreen",value:function(t,e){return 2===arguments.length?this.toGlobal(new h.Point(t,e)):this.toGlobal(t)}},{key:"moveCenter",value:function(){var t,e;return isNaN(arguments[0])?(t=arguments[0].x,e=arguments[0].y):(t=arguments[0],e=arguments[1]),this.position.set((this.worldScreenWidth/2-t)*this.scale.x,(this.worldScreenHeight/2-e)*this.scale.y),this.plugins.reset(),this.dirty=!0,this}},{key:"moveCorner",value:function(t,e){return 1===arguments.length?this.position.set(-t.x*this.scale.x,-t.y*this.scale.y):this.position.set(-t*this.scale.x,-e*this.scale.y),this.plugins.reset(),this}},{key:"fitWidth",value:function(t,e){var i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;e&&(i=this.center),this.scale.x=this.screenWidth/t,r&&(this.scale.y=this.scale.x);var o=this.plugins.get("clamp-zoom");return!n&&o&&o.clamp(),e&&this.moveCenter(i),this}},{key:"fitHeight",value:function(t,e){var i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;e&&(i=this.center),this.scale.y=this.screenHeight/t,r&&(this.scale.x=this.scale.y);var o=this.plugins.get("clamp-zoom");return!n&&o&&o.clamp(),e&&this.moveCenter(i),this}},{key:"fitWorld",value:function(t){var e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;var i=this.plugins.get("clamp-zoom");return i&&i.clamp(),t&&this.moveCenter(e),this}},{key:"fit",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.worldWidth,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldHeight;t&&(e=this.center),this.scale.x=this.screenWidth/i,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;var n=this.plugins.get("clamp-zoom");return n&&n.clamp(),t&&this.moveCenter(e),this}},{key:"setZoom",value:function(t,e){var i;e&&(i=this.center),this.scale.set(t);var r=this.plugins.get("clamp-zoom");return r&&r.clamp(),e&&this.moveCenter(i),this}},{key:"zoomPercent",value:function(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}},{key:"zoom",value:function(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}},{key:"snapZoom",value:function(t){return this.plugins.add("snap-zoom",new k(this,t)),this}},{key:"OOB",value:function(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this._worldHeight,cornerPoint:new h.Point(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}},{key:"drag",value:function(t){return this.plugins.add("drag",new y(this,t)),this}},{key:"clamp",value:function(t){return this.plugins.add("clamp",new g(this,t)),this}},{key:"decelerate",value:function(t){return this.plugins.add("decelerate",new T(this,t)),this}},{key:"bounce",value:function(t){return this.plugins.add("bounce",new C(this,t)),this}},{key:"pinch",value:function(t){return this.plugins.add("pinch",new _(this,t)),this}},{key:"snap",value:function(t,e,i){return this.plugins.add("snap",new B(this,t,e,i)),this}},{key:"follow",value:function(t,e){return this.plugins.add("follow",new D(this,t,e)),this}},{key:"wheel",value:function(t){return this.plugins.add("wheel",new N(this,t)),this}},{key:"clampZoom",value:function(t){return this.plugins.add("clamp-zoom",new w(this,t)),this}},{key:"mouseEdges",value:function(t){return this.plugins.add("mouse-edges",new j(this,t)),this}},{key:"ensureVisible",value:function(t,e,i,r,n){n&&(i>this.worldScreenWidth||r>this.worldScreenHeight)&&(this.fit(!0,i,r),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));var o=!1;t<this.left?(this.left=t,o=!0):t+i>this.right&&(this.right=t+i,o=!0),e<this.top?(this.top=e,o=!0):e+r>this.bottom&&(this.bottom=e+r,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}},{key:"worldWidth",get:function(){return this._worldWidth?this._worldWidth:this.width/this.scale.x},set:function(t){this._worldWidth=t,this.plugins.resize()}},{key:"worldHeight",get:function(){return this._worldHeight?this._worldHeight:this.height/this.scale.y},set:function(t){this._worldHeight=t,this.plugins.resize()}},{key:"worldScreenWidth",get:function(){return this.screenWidth/this.scale.x}},{key:"worldScreenHeight",get:function(){return this.screenHeight/this.scale.y}},{key:"screenWorldWidth",get:function(){return this.worldWidth*this.scale.x}},{key:"screenWorldHeight",get:function(){return this.worldHeight*this.scale.y}},{key:"center",get:function(){return new h.Point(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)},set:function(t){this.moveCenter(t)}},{key:"corner",get:function(){return new h.Point(-this.x/this.scale.x,-this.y/this.scale.y)},set:function(t){this.moveCorner(t)}},{key:"scaled",set:function(t){this.setZoom(t,!0)},get:function(){return this.scale.x}},{key:"right",get:function(){return-this.x/this.scale.x+this.worldScreenWidth},set:function(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}},{key:"left",get:function(){return-this.x/this.scale.x},set:function(t){this.x=-t*this.scale.x,this.plugins.reset()}},{key:"top",get:function(){return-this.y/this.scale.y},set:function(t){this.y=-t*this.scale.y,this.plugins.reset()}},{key:"bottom",get:function(){return-this.y/this.scale.y+this.worldScreenHeight},set:function(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}},{key:"dirty",get:function(){return this._dirty},set:function(t){this._dirty=t}},{key:"forceHitArea",get:function(){return this._forceHitArea},set:function(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new h.Rectangle(0,0,this.worldWidth,this.worldHeight))}},{key:"pause",get:function(){return this._pause},set:function(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}}]),e}(h.Container)}.call(this,i(44))},function(t,e,i){var r=i(11),n=i(60).Vec2;t.exports=function(t,e){for(var i,o,s=n(-10,0),a=t.track.duration,u=e.time_signature,c=[],h=(new r.Graphics,[]),l=0;l<t.sections.length;l+=1){var p,f,d=void 0,m=void 0,y=t.sections[l];y.start;g(y);console.log("Section time: "+y.duration),o=x(y,i=s,o=n(i.x+y.duration,i.y+(50+y.loudness)),e.tempo),p=n(i.x-100*e.valence,i.y+50*e.energy);var v=((f=n(o.x+100*e.valence,o.y-50*e.energy)).x-p.x)/u;d=n(p.x+v,f.y+y.key),m=n(f.x-v*(u/2),p.y-y.key),h.push(i,d,m,o),c.push(h),s=o,h=[],l===t.sections.length-1&&((d=i=o).x+=200,m=d,(o=i).x+=1e3,h.push(i,d,m,o),c.push(h),s=o,h=[])}function _(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function b(t){return 180*t/Math.PI}function g(t){return t.duration/a*100}function x(t,e,i,r){var n=b(_(e,i)),o=(g(t),i.x-e.x),s=i.y-e.y;return console.log("Initial curve X len: "+o+" Y len: "+s+" Angle: "+n),n>0&&n<=10?(i.x+=o*(r/1.6),i.y+=s*(r/1.6)/3):n>10&&n<=20?(i.x+=o*(r/1.62),i.y+=s*(r/1.62)/3):n>20&&n<=30?(i.x+=o*(r/1.64),i.y+=s*(r/1.64)/3):n>30&&n<=40?(i.x+=o*(r/1.66),i.y+=s*(r/1.66)/3):n>40&&n<=50?(i.x+=o*(r/1.7),i.y+=s*(r/1.7)/3):n>50&&n<=60?(i.x+=o*(r/1.75),i.y+=s*(r/1.72)/3):n>60&&n<=70?(i.x+=o*(r/1.75),i.y+=s*(r/1.75)/3):n>70&&n<=80?(i.x+=o*(r/1.7),i.y+=s*(r/1.7)/3):n>80&&n<=90&&(i.x+=o*(r/1.7),i.y+=s*(r/1.7)/3),console.log("Final curve X len: "+(i.x-e.x)+" Y len: "+(i.y-e.y)+" Angle: "+b(_(e,i))),i}return c}},function(t,e,i){var r=i(11),n=(i(103),i(60).Vec2,i(80));t.exports=function(t,e,i,o){for(var s,a,u=new n,c=0,h=[],l=[],p=0,f=r.Texture.from("../img/tree2_snowy.png"),d=0;d<t.sections.length;d+=1){p=0,a=b(l.length),l=_(s=t.sections[d]);for(var m=0;m<l.length;m+=1){var y=new r.Sprite(f);if(c>=e.length)break;y.scale.x=.5,y.scale.y=.5,y.anchor.x=.5,y.anchor.y=1,y.position.x=e[c].x,y.position.y=e[c].y;var v=u.create({name:"Tree",position:y.position,sprite:y,scale:y.size});h.push(v),i.addChild(y),c+=a,(p+=1)>s.time_signature&&(p=0)}}function _(e){for(var i,r,n=[],o=e.start+e.duration,s=0;s<t.beats.length;s+=1)r=(i=t.beats[s]).start+i.duration,i.start>=e.start&&r<=o&&n.push(i);return n}function b(i){var r=e.length/t.sections.length;return i>0?Math.ceil(r/i):1}return h}},function(t,e,i){i(11),i(103),i(80);t.exports=function(t,e,i,r,n){var o=0,s=!0;function a(t){t.scale.x-=.004,t.scale.y-=.004}t.ticker.add((function(){var t,i,u=n.tempo/2;0===o?s=!0:o>=u&&(s=!1);for(var c=0;c<r.length;c++){t=r[c].sprite,e.getVisibleBounds().contains(t.position.x,t.position.y)&&(s?((i=t).scale.x+=.004,i.scale.y+=.004):a(t))}s?o++:o--}))}},function(t,e,i){var r=i(36),n=(r.InputManager,r.GameStateController,r.GameStateEnums);t.exports=function t(e){var i=0;return t.prototype.updateScore=function(t){var r=i+t;return e.notify(n.SCORE_CHANGED,r),i=r,r},t.prototype.getScore=function(){return i},i}},,function(t,e,i){"use strict";var r=i(1),n=i(81),o=i(581);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var a=null,u={};function c(){if(a)for(var t in u){var e=u[t],i=a.indexOf(t);if(!(-1<i))throw Error(s(96,t));if(!l[i]){if(!e.extractEvents)throw Error(s(97,t));for(var r in l[i]=e,i=e.eventTypes){var n=void 0,o=i[r],c=e,f=r;if(p.hasOwnProperty(f))throw Error(s(99,f));p[f]=o;var d=o.phasedRegistrationNames;if(d){for(n in d)d.hasOwnProperty(n)&&h(d[n],c,f);n=!0}else o.registrationName?(h(o.registrationName,c,f),n=!0):n=!1;if(!n)throw Error(s(98,r,t))}}}}function h(t,e,i){if(f[t])throw Error(s(100,t));f[t]=e,d[t]=e.eventTypes[i].dependencies}var l=[],p={},f={},d={};function m(t,e,i,r,n,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(i,c)}catch(h){this.onError(h)}}var y=!1,v=null,_=!1,b=null,g={onError:function(t){y=!0,v=t}};function x(t,e,i,r,n,o,s,a,u){y=!1,v=null,m.apply(g,arguments)}var w=null,S=null,T=null;function A(t,e,i){var r=t.type||"unknown-event";t.currentTarget=T(i),function(t,e,i,r,n,o,a,u,c){if(x.apply(this,arguments),y){if(!y)throw Error(s(198));var h=v;y=!1,v=null,_||(_=!0,b=h)}}(r,e,void 0,t),t.currentTarget=null}function E(t,e){if(null==e)throw Error(s(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function I(t,e,i){Array.isArray(t)?t.forEach(e,i):t&&e.call(i,t)}var O=null;function C(t){if(t){var e=t._dispatchListeners,i=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)A(t,e[r],i[r]);else e&&A(t,e,i);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function P(t){if(null!==t&&(O=E(O,t)),t=O,O=null,t){if(I(t,C),O)throw Error(s(95));if(_)throw t=b,_=!1,b=null,t}}var B={injectEventPluginOrder:function(t){if(a)throw Error(s(101));a=Array.prototype.slice.call(t),c()},injectEventPluginsByName:function(t){var e,i=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!u.hasOwnProperty(e)||u[e]!==r){if(u[e])throw Error(s(102,e));u[e]=r,i=!0}}i&&c()}};function M(t,e){var i=t.stateNode;if(!i)return null;var r=w(i);if(!r)return null;i=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(i&&"function"!==typeof i)throw Error(s(231,e,typeof i));return i}var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;k.hasOwnProperty("ReactCurrentDispatcher")||(k.ReactCurrentDispatcher={current:null}),k.hasOwnProperty("ReactCurrentBatchConfig")||(k.ReactCurrentBatchConfig={suspense:null});var R=/^(.*)[\\\/]/,D="function"===typeof Symbol&&Symbol.for,F=D?Symbol.for("react.element"):60103,N=D?Symbol.for("react.portal"):60106,L=D?Symbol.for("react.fragment"):60107,j=D?Symbol.for("react.strict_mode"):60108,U=D?Symbol.for("react.profiler"):60114,z=D?Symbol.for("react.provider"):60109,V=D?Symbol.for("react.context"):60110,W=D?Symbol.for("react.concurrent_mode"):60111,X=D?Symbol.for("react.forward_ref"):60112,H=D?Symbol.for("react.suspense"):60113,G=D?Symbol.for("react.suspense_list"):60120,q=D?Symbol.for("react.memo"):60115,Y=D?Symbol.for("react.lazy"):60116;D&&Symbol.for("react.fundamental"),D&&Symbol.for("react.responder"),D&&Symbol.for("react.scope");var K="function"===typeof Symbol&&Symbol.iterator;function J(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=K&&t[K]||t["@@iterator"])?t:null}function Z(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case L:return"Fragment";case N:return"Portal";case U:return"Profiler";case j:return"StrictMode";case H:return"Suspense";case G:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case V:return"Context.Consumer";case z:return"Context.Provider";case X:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case q:return Z(t.type);case Y:if(t=1===t._status?t._result:null)return Z(t)}return null}function Q(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break t;default:var r=t._debugOwner,n=t._debugSource,o=Z(t.type);i=null,r&&(i=Z(r.type)),r=o,o="",n?o=" (at "+n.fileName.replace(R,"")+":"+n.lineNumber+")":i&&(o=" (created by "+i+")"),i="\n    in "+(r||"Unknown")+o}e+=i,t=t.return}while(t);return e}var $=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),tt=null,et=null,it=null;function rt(t){if(t=S(t)){if("function"!==typeof tt)throw Error(s(280));var e=w(t.stateNode);tt(t.stateNode,t.type,e)}}function nt(t){et?it?it.push(t):it=[t]:et=t}function ot(){if(et){var t=et,e=it;if(it=et=null,rt(t),e)for(t=0;t<e.length;t++)rt(e[t])}}function st(t,e){return t(e)}function at(t,e,i,r){return t(e,i,r)}function ut(){}var ct=st,ht=!1,lt=!1;function pt(){null===et&&null===it||(ut(),ot())}new Map;var ft=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dt=Object.prototype.hasOwnProperty,mt={},yt={};function vt(t,e,i,r,n,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=o}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){_t[t]=new vt(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];_t[e]=new vt(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){_t[t]=new vt(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){_t[t]=new vt(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){_t[t]=new vt(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){_t[t]=new vt(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){_t[t]=new vt(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){_t[t]=new vt(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){_t[t]=new vt(t,5,!1,t.toLowerCase(),null,!1)}));var bt=/[\-:]([a-z])/g;function gt(t){return t[1].toUpperCase()}function xt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function wt(t,e,i,r){var n=_t.hasOwnProperty(e)?_t[e]:null;(null!==n?0===n.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,i,r){if(null===e||"undefined"===typeof e||function(t,e,i,r){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,i,r))return!0;if(r)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,i,n,r)&&(i=null),r||null===n?function(t){return!!dt.call(yt,t)||!dt.call(mt,t)&&(ft.test(t)?yt[t]=!0:(mt[t]=!0,!1))}(e)&&(null===i?t.removeAttribute(e):t.setAttribute(e,""+i)):n.mustUseProperty?t[n.propertyName]=null===i?3!==n.type&&"":i:(e=n.attributeName,r=n.attributeNamespace,null===i?t.removeAttribute(e):(i=3===(n=n.type)||4===n&&!0===i?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}function St(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Tt(t){t._valueTracker||(t._valueTracker=function(t){var e=St(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var n=i.get,o=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function At(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=St(t)?t.checked?"true":"false":t.value),(t=r)!==i&&(e.setValue(t),!0)}function Et(t,e){var i=e.checked;return n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function It(t,e){var i=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;i=xt(null!=e.value?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Ot(t,e){null!=(e=e.checked)&&wt(t,"checked",e,!1)}function Ct(t,e){Ot(t,e);var i=xt(e.value),r=e.type;if(null!=i)"number"===r?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Bt(t,e.type,i):e.hasOwnProperty("defaultValue")&&Bt(t,e.type,xt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Pt(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}""!==(i=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function Bt(t,e,i){"number"===e&&t.ownerDocument.activeElement===t||(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}function Mt(t,e){return t=n({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function kt(t,e,i,r){if(t=t.options,e){e={};for(var n=0;n<i.length;n++)e["$"+i[n]]=!0;for(i=0;i<t.length;i++)n=e.hasOwnProperty("$"+t[i].value),t[i].selected!==n&&(t[i].selected=n),n&&r&&(t[i].defaultSelected=!0)}else{for(i=""+xt(i),e=null,n=0;n<t.length;n++){if(t[n].value===i)return t[n].selected=!0,void(r&&(t[n].defaultSelected=!0));null!==e||t[n].disabled||(e=t[n])}null!==e&&(e.selected=!0)}}function Rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return n({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dt(t,e){var i=e.value;if(null==i){if(i=e.defaultValue,null!=(e=e.children)){if(null!=i)throw Error(s(92));if(Array.isArray(e)){if(!(1>=e.length))throw Error(s(93));e=e[0]}i=e}null==i&&(i="")}t._wrapperState={initialValue:xt(i)}}function Ft(t,e){var i=xt(e.value),r=xt(e.defaultValue);null!=i&&((i=""+i)!==t.value&&(t.value=i),null==e.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=r&&(t.defaultValue=""+r)}function Nt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(bt,gt);_t[e]=new vt(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(bt,gt);_t[e]=new vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(bt,gt);_t[e]=new vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){_t[t]=new vt(t,1,!1,t.toLowerCase(),null,!1)})),_t.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){_t[t]=new vt(t,1,!1,t.toLowerCase(),null,!0)}));var Lt="http://www.w3.org/1999/xhtml",jt="http://www.w3.org/2000/svg";function Ut(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Ut(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Vt,Wt=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,i,r,n){MSApp.execUnsafeLocalFunction((function(){return t(e,i)}))}:t}((function(t,e){if(t.namespaceURI!==jt||"innerHTML"in t)t.innerHTML=e;else{for((Vt=Vt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Xt(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}function Ht(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Gt={animationend:Ht("Animation","AnimationEnd"),animationiteration:Ht("Animation","AnimationIteration"),animationstart:Ht("Animation","AnimationStart"),transitionend:Ht("Transition","TransitionEnd")},qt={},Yt={};function Kt(t){if(qt[t])return qt[t];if(!Gt[t])return t;var e,i=Gt[t];for(e in i)if(i.hasOwnProperty(e)&&e in Yt)return qt[t]=i[e];return t}$&&(Yt=document.createElement("div").style,"AnimationEvent"in window||(delete Gt.animationend.animation,delete Gt.animationiteration.animation,delete Gt.animationstart.animation),"TransitionEvent"in window||delete Gt.transitionend.transition);var Jt=Kt("animationend"),Zt=Kt("animationiteration"),Qt=Kt("animationstart"),$t=Kt("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function ee(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).effectTag)&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function ie(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function re(t){if(ee(t)!==t)throw Error(s(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=ee(t)))throw Error(s(188));return e!==t?null:t}for(var i=t,r=e;;){var n=i.return;if(null===n)break;var o=n.alternate;if(null===o){if(null!==(r=n.return)){i=r;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===i)return re(n),t;if(o===r)return re(n),e;o=o.sibling}throw Error(s(188))}if(i.return!==r.return)i=n,r=o;else{for(var a=!1,u=n.child;u;){if(u===i){a=!0,i=n,r=o;break}if(u===r){a=!0,r=n,i=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===i){a=!0,i=o,r=n;break}if(u===r){a=!0,r=o,i=n;break}u=u.sibling}if(!a)throw Error(s(189))}}if(i.alternate!==r)throw Error(s(190))}if(3!==i.tag)throw Error(s(188));return i.stateNode.current===i?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var oe,se,ae,ue=!1,ce=[],he=null,le=null,pe=null,fe=new Map,de=new Map,me=[],ye="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),ve="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function _e(t,e,i,r){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|i,nativeEvent:r}}function be(t,e){switch(t){case"focus":case"blur":he=null;break;case"dragenter":case"dragleave":le=null;break;case"mouseover":case"mouseout":pe=null;break;case"pointerover":case"pointerout":fe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":de.delete(e.pointerId)}}function ge(t,e,i,r,n){return null===t||t.nativeEvent!==n?(t=_e(e,i,r,n),null!==e&&(null!==(e=ur(e))&&se(e)),t):(t.eventSystemFlags|=r,t)}function xe(t){var e=ar(t.target);if(null!==e){var i=ee(e);if(null!==i)if(13===(e=i.tag)){if(null!==(e=ie(i)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){ae(i)}))}else if(3===e&&i.stateNode.hydrate)return void(t.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}t.blockedOn=null}function we(t){if(null!==t.blockedOn)return!1;var e=Pi(t.topLevelType,t.eventSystemFlags,t.nativeEvent);if(null!==e){var i=ur(e);return null!==i&&se(i),t.blockedOn=e,!1}return!0}function Se(t,e,i){we(t)&&i.delete(e)}function Te(){for(ue=!1;0<ce.length;){var t=ce[0];if(null!==t.blockedOn){null!==(t=ur(t.blockedOn))&&oe(t);break}var e=Pi(t.topLevelType,t.eventSystemFlags,t.nativeEvent);null!==e?t.blockedOn=e:ce.shift()}null!==he&&we(he)&&(he=null),null!==le&&we(le)&&(le=null),null!==pe&&we(pe)&&(pe=null),fe.forEach(Se),de.forEach(Se)}function Ae(t,e){t.blockedOn===e&&(t.blockedOn=null,ue||(ue=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Te)))}function Ee(t){function e(e){return Ae(e,t)}if(0<ce.length){Ae(ce[0],t);for(var i=1;i<ce.length;i++){var r=ce[i];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==he&&Ae(he,t),null!==le&&Ae(le,t),null!==pe&&Ae(pe,t),fe.forEach(e),de.forEach(e),i=0;i<me.length;i++)(r=me[i]).blockedOn===t&&(r.blockedOn=null);for(;0<me.length&&null===(i=me[0]).blockedOn;)xe(i),null===i.blockedOn&&me.shift()}function Ie(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Oe(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Ce(t,e,i){(e=M(t,i.dispatchConfig.phasedRegistrationNames[e]))&&(i._dispatchListeners=E(i._dispatchListeners,e),i._dispatchInstances=E(i._dispatchInstances,t))}function Pe(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,i=[];e;)i.push(e),e=Oe(e);for(e=i.length;0<e--;)Ce(i[e],"captured",t);for(e=0;e<i.length;e++)Ce(i[e],"bubbled",t)}}function Be(t,e,i){t&&i&&i.dispatchConfig.registrationName&&(e=M(t,i.dispatchConfig.registrationName))&&(i._dispatchListeners=E(i._dispatchListeners,e),i._dispatchInstances=E(i._dispatchInstances,t))}function Me(t){t&&t.dispatchConfig.registrationName&&Be(t._targetInst,null,t)}function ke(t){I(t,Pe)}function Re(){return!0}function De(){return!1}function Fe(t,e,i,r){for(var n in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=i,t=this.constructor.Interface)t.hasOwnProperty(n)&&((e=t[n])?this[n]=e(i):"target"===n?this.target=r:this[n]=i[n]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Re:De,this.isPropagationStopped=De,this}function Ne(t,e,i,r){if(this.eventPool.length){var n=this.eventPool.pop();return this.call(n,t,e,i,r),n}return new this(t,e,i,r)}function Le(t){if(!(t instanceof this))throw Error(s(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function je(t){t.eventPool=[],t.getPooled=Ne,t.release=Le}n(Fe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Re)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Re)},persist:function(){this.isPersistent=Re},isPersistent:De,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=De,this._dispatchInstances=this._dispatchListeners=null}}),Fe.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Fe.extend=function(t){function e(){}function i(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return n(o,i.prototype),i.prototype=o,i.prototype.constructor=i,i.Interface=n({},r.Interface,t),i.extend=r.extend,je(i),i},je(Fe);var Ue=Fe.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ze=Fe.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ve=Fe.extend({view:null,detail:null}),We=Ve.extend({relatedTarget:null});function Xe(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var He={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ye(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=qe[t])&&!!e[t]}function Ke(){return Ye}for(var Je=Ve.extend({key:function(t){if(t.key){var e=He[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Xe(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Ge[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ke,charCode:function(t){return"keypress"===t.type?Xe(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Xe(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Ze=0,Qe=0,$e=!1,ti=!1,ei=Ve.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ke,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Ze;return Ze=t.screenX,$e?"mousemove"===t.type?t.screenX-e:0:($e=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Qe;return Qe=t.screenY,ti?"mousemove"===t.type?t.screenY-e:0:(ti=!0,0)}}),ii=ei.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),ri=ei.extend({dataTransfer:null}),ni=Ve.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ke}),oi=Fe.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),si=ei.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),ai=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Jt,"animationEnd",2],[Zt,"animationIteration",2],[Qt,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[$t,"transitionEnd",2],["waiting","waiting",2]],ui={},ci={},hi=0;hi<ai.length;hi++){var li=ai[hi],pi=li[0],fi=li[1],di=li[2],mi="on"+(fi[0].toUpperCase()+fi.slice(1)),yi={phasedRegistrationNames:{bubbled:mi,captured:mi+"Capture"},dependencies:[pi],eventPriority:di};ui[fi]=yi,ci[pi]=yi}var vi={eventTypes:ui,getEventPriority:function(t){return void 0!==(t=ci[t])?t.eventPriority:2},extractEvents:function(t,e,i,r){var n=ci[t];if(!n)return null;switch(t){case"keypress":if(0===Xe(i))return null;case"keydown":case"keyup":t=Je;break;case"blur":case"focus":t=We;break;case"click":if(2===i.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ri;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Jt:case Zt:case Qt:t=Ue;break;case $t:t=oi;break;case"scroll":t=Ve;break;case"wheel":t=si;break;case"copy":case"cut":case"paste":t=ze;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=ii;break;default:t=Fe}return ke(e=t.getPooled(n,e,i,r)),e}},_i=o.unstable_UserBlockingPriority,bi=o.unstable_runWithPriority,gi=vi.getEventPriority,xi=[];function wi(t){var e=t.targetInst,i=e;do{if(!i){t.ancestors.push(i);break}var r=i;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=i.tag)&&6!==e||t.ancestors.push(i),i=ar(r)}while(i);for(i=0;i<t.ancestors.length;i++){e=t.ancestors[i];var n=Ie(t.nativeEvent);r=t.topLevelType;for(var o=t.nativeEvent,s=t.eventSystemFlags,a=null,u=0;u<l.length;u++){var c=l[u];c&&(c=c.extractEvents(r,e,o,n,s))&&(a=E(a,c))}P(a)}}var Si=!0;function Ti(t,e){Ai(e,t,!1)}function Ai(t,e,i){switch(gi(e)){case 0:var r=Ei.bind(null,e,1);break;case 1:r=Ii.bind(null,e,1);break;default:r=Ci.bind(null,e,1)}i?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ei(t,e,i){ht||ut();var r=Ci,n=ht;ht=!0;try{at(r,t,e,i)}finally{(ht=n)||pt()}}function Ii(t,e,i){bi(_i,Ci.bind(null,t,e,i))}function Oi(t,e,i,r){if(xi.length){var n=xi.pop();n.topLevelType=t,n.eventSystemFlags=e,n.nativeEvent=i,n.targetInst=r,t=n}else t={topLevelType:t,eventSystemFlags:e,nativeEvent:i,targetInst:r,ancestors:[]};try{if(e=wi,i=t,lt)e(i,void 0);else{lt=!0;try{ct(e,i,void 0)}finally{lt=!1,pt()}}}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,xi.length<10&&xi.push(t)}}function Ci(t,e,i){if(Si)if(0<ce.length&&-1<ye.indexOf(t))t=_e(null,t,e,i),ce.push(t);else{var r=Pi(t,e,i);null===r?be(t,i):-1<ye.indexOf(t)?(t=_e(r,t,e,i),ce.push(t)):function(t,e,i,r){switch(e){case"focus":return he=ge(he,t,e,i,r),!0;case"dragenter":return le=ge(le,t,e,i,r),!0;case"mouseover":return pe=ge(pe,t,e,i,r),!0;case"pointerover":var n=r.pointerId;return fe.set(n,ge(fe.get(n)||null,t,e,i,r)),!0;case"gotpointercapture":return n=r.pointerId,de.set(n,ge(de.get(n)||null,t,e,i,r)),!0}return!1}(r,t,e,i)||(be(t,i),Oi(t,e,i,null))}}function Pi(t,e,i){var r=Ie(i);if(null!==(r=ar(r))){var n=ee(r);if(null===n)r=null;else{var o=n.tag;if(13===o){if(null!==(r=ie(n)))return r;r=null}else if(3===o){if(n.stateNode.hydrate)return 3===n.tag?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null)}}return Oi(t,e,i,r),null}function Bi(t){if(!$)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}var Mi=new("function"===typeof WeakMap?WeakMap:Map);function ki(t){var e=Mi.get(t);return void 0===e&&(e=new Set,Mi.set(t,e)),e}function Ri(t,e,i){if(!i.has(t)){switch(t){case"scroll":Ai(e,"scroll",!0);break;case"focus":case"blur":Ai(e,"focus",!0),Ai(e,"blur",!0),i.add("blur"),i.add("focus");break;case"cancel":case"close":Bi(t)&&Ai(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(t)&&Ti(t,e)}i.add(t)}}var Di={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fi=["Webkit","ms","Moz","O"];function Ni(t,e,i){return null==e||"boolean"===typeof e||""===e?"":i||"number"!==typeof e||0===e||Di.hasOwnProperty(t)&&Di[t]?(""+e).trim():e+"px"}function Li(t,e){for(var i in t=t.style,e)if(e.hasOwnProperty(i)){var r=0===i.indexOf("--"),n=Ni(i,e[i],r);"float"===i&&(i="cssFloat"),r?t.setProperty(i,n):t[i]=n}}Object.keys(Di).forEach((function(t){Fi.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Di[e]=Di[t]}))}));var ji=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ui(t,e){if(e){if(ji[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if(!("object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62,""))}}function zi(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Vi(t,e){var i=ki(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=d[e];for(var r=0;r<e.length;r++)Ri(e[r],t,i)}function Wi(){}function Xi(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Hi(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gi(t,e){var i,r=Hi(t);for(t=0;r;){if(3===r.nodeType){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Hi(r)}}function qi(){for(var t=window,e=Xi();e instanceof t.HTMLIFrameElement;){try{var i="string"===typeof e.contentWindow.location.href}catch(r){i=!1}if(!i)break;e=Xi((t=e.contentWindow).document)}return e}function Yi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Ki=null,Ji=null;function Zi(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Qi(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var $i="function"===typeof setTimeout?setTimeout:void 0,tr="function"===typeof clearTimeout?clearTimeout:void 0;function er(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function ir(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if("$"===i||"$!"===i||"$?"===i){if(0===e)return t;e--}else"/$"===i&&e++}t=t.previousSibling}return null}var rr=Math.random().toString(36).slice(2),nr="__reactInternalInstance$"+rr,or="__reactEventHandlers$"+rr,sr="__reactContainere$"+rr;function ar(t){var e=t[nr];if(e)return e;for(var i=t.parentNode;i;){if(e=i[sr]||i[nr]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=ir(t);null!==t;){if(i=t[nr])return i;t=ir(t)}return e}i=(t=i).parentNode}return null}function ur(t){return!(t=t[nr]||t[sr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function cr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function hr(t){return t[or]||null}var lr=null,pr=null,fr=null;function dr(){if(fr)return fr;var t,e,i=pr,r=i.length,n="value"in lr?lr.value:lr.textContent,o=n.length;for(t=0;t<r&&i[t]===n[t];t++);var s=r-t;for(e=1;e<=s&&i[r-e]===n[o-e];e++);return fr=n.slice(t,1<e?1-e:void 0)}var mr=Fe.extend({data:null}),yr=Fe.extend({data:null}),vr=[9,13,27,32],_r=$&&"CompositionEvent"in window,br=null;$&&"documentMode"in document&&(br=document.documentMode);var gr=$&&"TextEvent"in window&&!br,xr=$&&(!_r||br&&8<br&&11>=br),wr=String.fromCharCode(32),Sr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Tr=!1;function Ar(t,e){switch(t){case"keyup":return-1!==vr.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Er(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Ir=!1;var Or={eventTypes:Sr,extractEvents:function(t,e,i,r){var n;if(_r)t:{switch(t){case"compositionstart":var o=Sr.compositionStart;break t;case"compositionend":o=Sr.compositionEnd;break t;case"compositionupdate":o=Sr.compositionUpdate;break t}o=void 0}else Ir?Ar(t,i)&&(o=Sr.compositionEnd):"keydown"===t&&229===i.keyCode&&(o=Sr.compositionStart);return o?(xr&&"ko"!==i.locale&&(Ir||o!==Sr.compositionStart?o===Sr.compositionEnd&&Ir&&(n=dr()):(pr="value"in(lr=r)?lr.value:lr.textContent,Ir=!0)),o=mr.getPooled(o,e,i,r),n?o.data=n:null!==(n=Er(i))&&(o.data=n),ke(o),n=o):n=null,(t=gr?function(t,e){switch(t){case"compositionend":return Er(e);case"keypress":return 32!==e.which?null:(Tr=!0,wr);case"textInput":return(t=e.data)===wr&&Tr?null:t;default:return null}}(t,i):function(t,e){if(Ir)return"compositionend"===t||!_r&&Ar(t,e)?(t=dr(),fr=pr=lr=null,Ir=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xr&&"ko"!==e.locale?null:e.data;default:return null}}(t,i))?((e=yr.getPooled(Sr.beforeInput,e,i,r)).data=t,ke(e)):e=null,null===n?e:null===e?n:[n,e]}},Cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Cr[t.type]:"textarea"===e}var Br={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Mr(t,e,i){return(t=Fe.getPooled(Br.change,t,e,i)).type="change",nt(i),ke(t),t}var kr=null,Rr=null;function Dr(t){P(t)}function Fr(t){if(At(cr(t)))return t}function Nr(t,e){if("change"===t)return e}var Lr=!1;function jr(){kr&&(kr.detachEvent("onpropertychange",Ur),Rr=kr=null)}function Ur(t){if("value"===t.propertyName&&Fr(Rr))if(t=Mr(Rr,t,Ie(t)),ht)P(t);else{ht=!0;try{st(Dr,t)}finally{ht=!1,pt()}}}function zr(t,e,i){"focus"===t?(jr(),Rr=i,(kr=e).attachEvent("onpropertychange",Ur)):"blur"===t&&jr()}function Vr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Fr(Rr)}function Wr(t,e){if("click"===t)return Fr(e)}function Xr(t,e){if("input"===t||"change"===t)return Fr(e)}$&&(Lr=Bi("input")&&(!document.documentMode||9<document.documentMode));var Hr,Gr={eventTypes:Br,_isInputEventSupported:Lr,extractEvents:function(t,e,i,r){var n=e?cr(e):window,o=n.nodeName&&n.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===n.type)var s=Nr;else if(Pr(n))if(Lr)s=Xr;else{s=Vr;var a=zr}else(o=n.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===n.type||"radio"===n.type)&&(s=Wr);if(s&&(s=s(t,e)))return Mr(s,i,r);a&&a(t,n,e),"blur"===t&&(t=n._wrapperState)&&t.controlled&&"number"===n.type&&Bt(n,"number",n.value)}},qr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Yr={eventTypes:qr,extractEvents:function(t,e,i,r,n){var o="mouseover"===t||"pointerover"===t,s="mouseout"===t||"pointerout"===t;if(o&&0===(32&n)&&(i.relatedTarget||i.fromElement)||!s&&!o)return null;if(n=r.window===r?r:(n=r.ownerDocument)?n.defaultView||n.parentWindow:window,s?(s=e,null!==(e=(e=i.relatedTarget||i.toElement)?ar(e):null)&&(e!==(o=ee(e))||5!==e.tag&&6!==e.tag)&&(e=null)):s=null,s===e)return null;if("mouseout"===t||"mouseover"===t)var a=ei,u=qr.mouseLeave,c=qr.mouseEnter,h="mouse";else"pointerout"!==t&&"pointerover"!==t||(a=ii,u=qr.pointerLeave,c=qr.pointerEnter,h="pointer");if(t=null==s?n:cr(s),n=null==e?n:cr(e),(u=a.getPooled(u,s,i,r)).type=h+"leave",u.target=t,u.relatedTarget=n,(r=a.getPooled(c,e,i,r)).type=h+"enter",r.target=n,r.relatedTarget=t,h=e,(a=s)&&h)t:{for(t=h,s=0,e=c=a;e;e=Oe(e))s++;for(e=0,n=t;n;n=Oe(n))e++;for(;0<s-e;)c=Oe(c),s--;for(;0<e-s;)t=Oe(t),e--;for(;s--;){if(c===t||c===t.alternate)break t;c=Oe(c),t=Oe(t)}c=null}else c=null;for(t=c,c=[];a&&a!==t&&(null===(s=a.alternate)||s!==t);)c.push(a),a=Oe(a);for(a=[];h&&h!==t&&(null===(s=h.alternate)||s!==t);)a.push(h),h=Oe(h);for(h=0;h<c.length;h++)Be(c[h],"bubbled",u);for(h=a.length;0<h--;)Be(a[h],"captured",r);return i===Hr?(Hr=null,[u]):(Hr=i,[u,r])}};var Kr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},Jr=Object.prototype.hasOwnProperty;function Zr(t,e){if(Kr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++)if(!Jr.call(e,i[r])||!Kr(t[i[r]],e[i[r]]))return!1;return!0}var Qr=$&&"documentMode"in document&&11>=document.documentMode,$r={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},tn=null,en=null,rn=null,nn=!1;function on(t,e){var i=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return nn||null==tn||tn!==Xi(i)?null:("selectionStart"in(i=tn)&&Yi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},rn&&Zr(rn,i)?null:(rn=i,(t=Fe.getPooled($r.select,en,t,e)).type="select",t.target=tn,ke(t),t))}var sn={eventTypes:$r,extractEvents:function(t,e,i,r){var n,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(n=!o)){t:{o=ki(o),n=d.onSelect;for(var s=0;s<n.length;s++)if(!o.has(n[s])){o=!1;break t}o=!0}n=!o}if(n)return null;switch(o=e?cr(e):window,t){case"focus":(Pr(o)||"true"===o.contentEditable)&&(tn=o,en=e,rn=null);break;case"blur":rn=en=tn=null;break;case"mousedown":nn=!0;break;case"contextmenu":case"mouseup":case"dragend":return nn=!1,on(i,r);case"selectionchange":if(Qr)break;case"keydown":case"keyup":return on(i,r)}return null}};B.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=hr,S=ur,T=cr,B.injectEventPluginsByName({SimpleEventPlugin:vi,EnterLeaveEventPlugin:Yr,ChangeEventPlugin:Gr,SelectEventPlugin:sn,BeforeInputEventPlugin:Or}),new Set;var an=[],un=-1;function cn(t){0>un||(t.current=an[un],an[un]=null,un--)}function hn(t,e){un++,an[un]=t.current,t.current=e}var ln={},pn={current:ln},fn={current:!1},dn=ln;function mn(t,e){var i=t.type.contextTypes;if(!i)return ln;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var n,o={};for(n in i)o[n]=e[n];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function yn(t){return null!==(t=t.childContextTypes)&&void 0!==t}function vn(t){cn(fn),cn(pn)}function _n(t){cn(fn),cn(pn)}function bn(t,e,i){if(pn.current!==ln)throw Error(s(168));hn(pn,e),hn(fn,i)}function gn(t,e,i){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return i;for(var o in r=r.getChildContext())if(!(o in t))throw Error(s(108,Z(e)||"Unknown",o));return n({},i,{},r)}function xn(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||ln,dn=pn.current,hn(pn,e),hn(fn,fn.current),!0}function wn(t,e,i){var r=t.stateNode;if(!r)throw Error(s(169));i?(e=gn(t,e,dn),r.__reactInternalMemoizedMergedChildContext=e,cn(fn),cn(pn),hn(pn,e)):cn(fn),hn(fn,i)}var Sn=o.unstable_runWithPriority,Tn=o.unstable_scheduleCallback,An=o.unstable_cancelCallback,En=o.unstable_shouldYield,In=o.unstable_requestPaint,On=o.unstable_now,Cn=o.unstable_getCurrentPriorityLevel,Pn=o.unstable_ImmediatePriority,Bn=o.unstable_UserBlockingPriority,Mn=o.unstable_NormalPriority,kn=o.unstable_LowPriority,Rn=o.unstable_IdlePriority,Dn={},Fn=void 0!==In?In:function(){},Nn=null,Ln=null,jn=!1,Un=On(),zn=1e4>Un?On:function(){return On()-Un};function Vn(){switch(Cn()){case Pn:return 99;case Bn:return 98;case Mn:return 97;case kn:return 96;case Rn:return 95;default:throw Error(s(332))}}function Wn(t){switch(t){case 99:return Pn;case 98:return Bn;case 97:return Mn;case 96:return kn;case 95:return Rn;default:throw Error(s(332))}}function Xn(t,e){return t=Wn(t),Sn(t,e)}function Hn(t,e,i){return t=Wn(t),Tn(t,e,i)}function Gn(t){return null===Nn?(Nn=[t],Ln=Tn(Pn,Yn)):Nn.push(t),Dn}function qn(){if(null!==Ln){var t=Ln;Ln=null,An(t)}Yn()}function Yn(){if(!jn&&null!==Nn){jn=!0;var t=0;try{var e=Nn;Xn(99,(function(){for(;t<e.length;t++){var i=e[t];do{i=i(!0)}while(null!==i)}})),Nn=null}catch(i){throw null!==Nn&&(Nn=Nn.slice(t+1)),Tn(Pn,qn),i}finally{jn=!1}}}var Kn=3;function Jn(t,e,i){return 1073741821-(1+((1073741821-t+e/10)/(i/=10)|0))*i}function Zn(t,e){if(t&&t.defaultProps)for(var i in e=n({},e),t=t.defaultProps)void 0===e[i]&&(e[i]=t[i]);return e}var Qn={current:null},$n=null,to=null,eo=null;function io(){eo=to=$n=null}function ro(t,e){var i=t.type._context;hn(Qn,i._currentValue),i._currentValue=e}function no(t){var e=Qn.current;cn(Qn),t.type._context._currentValue=e}function oo(t,e){for(;null!==t;){var i=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==i&&i.childExpirationTime<e&&(i.childExpirationTime=e);else{if(!(null!==i&&i.childExpirationTime<e))break;i.childExpirationTime=e}t=t.return}}function so(t,e){$n=t,eo=to=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(zs=!0),t.firstContext=null)}function ao(t,e){if(eo!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(eo=t,e=1073741823),e={context:t,observedBits:e,next:null},null===to){if(null===$n)throw Error(s(308));to=e,$n.dependencies={expirationTime:0,firstContext:e,responders:null}}else to=to.next=e;return t._currentValue}var uo=!1;function co(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ho(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function lo(t,e){return{expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function po(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function fo(t,e){var i=t.alternate;if(null===i){var r=t.updateQueue,n=null;null===r&&(r=t.updateQueue=co(t.memoizedState))}else r=t.updateQueue,n=i.updateQueue,null===r?null===n?(r=t.updateQueue=co(t.memoizedState),n=i.updateQueue=co(i.memoizedState)):r=t.updateQueue=ho(n):null===n&&(n=i.updateQueue=ho(r));null===n||r===n?po(r,e):null===r.lastUpdate||null===n.lastUpdate?(po(r,e),po(n,e)):(po(r,e),n.lastUpdate=e)}function mo(t,e){var i=t.updateQueue;null===(i=null===i?t.updateQueue=co(t.memoizedState):yo(t,i)).lastCapturedUpdate?i.firstCapturedUpdate=i.lastCapturedUpdate=e:(i.lastCapturedUpdate.next=e,i.lastCapturedUpdate=e)}function yo(t,e){var i=t.alternate;return null!==i&&e===i.updateQueue&&(e=t.updateQueue=ho(e)),e}function vo(t,e,i,r,o,s){switch(i.tag){case 1:return"function"===typeof(t=i.payload)?t.call(s,r,o):t;case 3:t.effectTag=-4097&t.effectTag|64;case 0:if(null===(o="function"===typeof(t=i.payload)?t.call(s,r,o):t)||void 0===o)break;return n({},r,o);case 2:uo=!0}return r}function _o(t,e,i,r,n){uo=!1;for(var o=(e=yo(t,e)).baseState,s=null,a=0,u=e.firstUpdate,c=o;null!==u;){var h=u.expirationTime;h<n?(null===s&&(s=u,o=c),a<h&&(a=h)):(lu(h,u.suspenseConfig),c=vo(t,0,u,c,i,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(h=null,u=e.firstCapturedUpdate;null!==u;){var l=u.expirationTime;l<n?(null===h&&(h=u,null===s&&(o=c)),a<l&&(a=l)):(c=vo(t,0,u,c,i,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===s&&(e.lastUpdate=null),null===h?e.lastCapturedUpdate=null:t.effectTag|=32,null===s&&null===h&&(o=c),e.baseState=o,e.firstUpdate=s,e.firstCapturedUpdate=h,pu(a),t.expirationTime=a,t.memoizedState=c}function bo(t,e,i){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),go(e.firstEffect,i),e.firstEffect=e.lastEffect=null,go(e.firstCapturedEffect,i),e.firstCapturedEffect=e.lastCapturedEffect=null}function go(t,e){for(;null!==t;){var i=t.callback;if(null!==i){t.callback=null;var r=e;if("function"!==typeof i)throw Error(s(191,i));i.call(r)}t=t.nextEffect}}var xo=k.ReactCurrentBatchConfig,wo=(new r.Component).refs;function So(t,e,i,r){i=null===(i=i(r,e=t.memoizedState))||void 0===i?e:n({},e,i),t.memoizedState=i,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=i)}var To={isMounted:function(t){return!!(t=t._reactInternalFiber)&&ee(t)===t},enqueueSetState:function(t,e,i){t=t._reactInternalFiber;var r=Qa(),n=xo.suspense;(n=lo(r=$a(r,t,n),n)).payload=e,void 0!==i&&null!==i&&(n.callback=i),fo(t,n),tu(t,r)},enqueueReplaceState:function(t,e,i){t=t._reactInternalFiber;var r=Qa(),n=xo.suspense;(n=lo(r=$a(r,t,n),n)).tag=1,n.payload=e,void 0!==i&&null!==i&&(n.callback=i),fo(t,n),tu(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var i=Qa(),r=xo.suspense;(r=lo(i=$a(i,t,r),r)).tag=2,void 0!==e&&null!==e&&(r.callback=e),fo(t,r),tu(t,i)}};function Ao(t,e,i,r,n,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!Zr(i,r)||!Zr(n,o))}function Eo(t,e,i){var r=!1,n=ln,o=e.contextType;return"object"===typeof o&&null!==o?o=ao(o):(n=yn(e)?dn:pn.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?mn(t,n):ln),e=new e(i,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=To,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=o),e}function Io(t,e,i,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&To.enqueueReplaceState(e,e.state,null)}function Oo(t,e,i,r){var n=t.stateNode;n.props=i,n.state=t.memoizedState,n.refs=wo;var o=e.contextType;"object"===typeof o&&null!==o?n.context=ao(o):(o=yn(e)?dn:pn.current,n.context=mn(t,o)),null!==(o=t.updateQueue)&&(_o(t,o,i,n,r),n.state=t.memoizedState),"function"===typeof(o=e.getDerivedStateFromProps)&&(So(t,e,o,i),n.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(e=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),e!==n.state&&To.enqueueReplaceState(n,n.state,null),null!==(o=t.updateQueue)&&(_o(t,o,i,n,r),n.state=t.memoizedState)),"function"===typeof n.componentDidMount&&(t.effectTag|=4)}var Co=Array.isArray;function Po(t,e,i){if(null!==(t=i.ref)&&"function"!==typeof t&&"object"!==typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(s(309));var r=i.stateNode}if(!r)throw Error(s(147,t));var n=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===n?e.ref:((e=function(t){var e=r.refs;e===wo&&(e=r.refs={}),null===t?delete e[n]:e[n]=t})._stringRef=n,e)}if("string"!==typeof t)throw Error(s(284));if(!i._owner)throw Error(s(290,t))}return t}function Bo(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Mo(t){function e(e,i){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i,i.nextEffect=null,i.effectTag=8}}function i(i,r){if(!t)return null;for(;null!==r;)e(i,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(t,e,i){return(t=Mu(t,e)).index=0,t.sibling=null,t}function o(e,i,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<i?(e.effectTag=2,i):r:(e.effectTag=2,i):i}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,i,r){return null===e||6!==e.tag?((e=Du(i,t.mode,r)).return=t,e):((e=n(e,i)).return=t,e)}function c(t,e,i,r){return null!==e&&e.elementType===i.type?((r=n(e,i.props)).ref=Po(t,e,i),r.return=t,r):((r=ku(i.type,i.key,i.props,null,t.mode,r)).ref=Po(t,e,i),r.return=t,r)}function h(t,e,i,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?((e=Fu(i,t.mode,r)).return=t,e):((e=n(e,i.children||[])).return=t,e)}function l(t,e,i,r,o){return null===e||7!==e.tag?((e=Ru(i,t.mode,r,o)).return=t,e):((e=n(e,i)).return=t,e)}function p(t,e,i){if("string"===typeof e||"number"===typeof e)return(e=Du(""+e,t.mode,i)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case F:return(i=ku(e.type,e.key,e.props,null,t.mode,i)).ref=Po(t,null,e),i.return=t,i;case N:return(e=Fu(e,t.mode,i)).return=t,e}if(Co(e)||J(e))return(e=Ru(e,t.mode,i,null)).return=t,e;Bo(t,e)}return null}function f(t,e,i,r){var n=null!==e?e.key:null;if("string"===typeof i||"number"===typeof i)return null!==n?null:u(t,e,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case F:return i.key===n?i.type===L?l(t,e,i.props.children,r,n):c(t,e,i,r):null;case N:return i.key===n?h(t,e,i,r):null}if(Co(i)||J(i))return null!==n?null:l(t,e,i,r,null);Bo(t,i)}return null}function d(t,e,i,r,n){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(i)||null,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case F:return t=t.get(null===r.key?i:r.key)||null,r.type===L?l(e,t,r.props.children,n,r.key):c(e,t,r,n);case N:return h(e,t=t.get(null===r.key?i:r.key)||null,r,n)}if(Co(r)||J(r))return l(e,t=t.get(i)||null,r,n,null);Bo(e,r)}return null}function m(n,s,a,u){for(var c=null,h=null,l=s,m=s=0,y=null;null!==l&&m<a.length;m++){l.index>m?(y=l,l=null):y=l.sibling;var v=f(n,l,a[m],u);if(null===v){null===l&&(l=y);break}t&&l&&null===v.alternate&&e(n,l),s=o(v,s,m),null===h?c=v:h.sibling=v,h=v,l=y}if(m===a.length)return i(n,l),c;if(null===l){for(;m<a.length;m++)null!==(l=p(n,a[m],u))&&(s=o(l,s,m),null===h?c=l:h.sibling=l,h=l);return c}for(l=r(n,l);m<a.length;m++)null!==(y=d(l,n,m,a[m],u))&&(t&&null!==y.alternate&&l.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return t&&l.forEach((function(t){return e(n,t)})),c}function y(n,a,u,c){var h=J(u);if("function"!==typeof h)throw Error(s(150));if(null==(u=h.call(u)))throw Error(s(151));for(var l=h=null,m=a,y=a=0,v=null,_=u.next();null!==m&&!_.done;y++,_=u.next()){m.index>y?(v=m,m=null):v=m.sibling;var b=f(n,m,_.value,c);if(null===b){null===m&&(m=v);break}t&&m&&null===b.alternate&&e(n,m),a=o(b,a,y),null===l?h=b:l.sibling=b,l=b,m=v}if(_.done)return i(n,m),h;if(null===m){for(;!_.done;y++,_=u.next())null!==(_=p(n,_.value,c))&&(a=o(_,a,y),null===l?h=_:l.sibling=_,l=_);return h}for(m=r(n,m);!_.done;y++,_=u.next())null!==(_=d(m,n,y,_.value,c))&&(t&&null!==_.alternate&&m.delete(null===_.key?y:_.key),a=o(_,a,y),null===l?h=_:l.sibling=_,l=_);return t&&m.forEach((function(t){return e(n,t)})),h}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===L&&null===o.key;c&&(o=o.props.children);var h="object"===typeof o&&null!==o;if(h)switch(o.$$typeof){case F:t:{for(h=o.key,c=r;null!==c;){if(c.key===h){if(7===c.tag?o.type===L:c.elementType===o.type){i(t,c.sibling),(r=n(c,o.type===L?o.props.children:o.props)).ref=Po(t,c,o),r.return=t,t=r;break t}i(t,c);break}e(t,c),c=c.sibling}o.type===L?((r=Ru(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=ku(o.type,o.key,o.props,null,t.mode,u)).ref=Po(t,r,o),u.return=t,t=u)}return a(t);case N:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){i(t,r.sibling),(r=n(r,o.children||[])).return=t,t=r;break t}i(t,r);break}e(t,r),r=r.sibling}(r=Fu(o,t.mode,u)).return=t,t=r}return a(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(i(t,r.sibling),(r=n(r,o)).return=t,t=r):(i(t,r),(r=Du(o,t.mode,u)).return=t,t=r),a(t);if(Co(o))return m(t,r,o,u);if(J(o))return y(t,r,o,u);if(h&&Bo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(s(152,t.displayName||t.name||"Component"))}return i(t,r)}}var ko=Mo(!0),Ro=Mo(!1),Do={},Fo={current:Do},No={current:Do},Lo={current:Do};function jo(t){if(t===Do)throw Error(s(174));return t}function Uo(t,e){hn(Lo,e),hn(No,t),hn(Fo,Do);var i=e.nodeType;switch(i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zt(null,"");break;default:e=zt(e=(i=8===i?e.parentNode:e).namespaceURI||null,i=i.tagName)}cn(Fo),hn(Fo,e)}function zo(t){cn(Fo),cn(No),cn(Lo)}function Vo(t){jo(Lo.current);var e=jo(Fo.current),i=zt(e,t.type);e!==i&&(hn(No,t),hn(Fo,i))}function Wo(t){No.current===t&&(cn(Fo),cn(No))}var Xo={current:0};function Ho(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Go(t,e){return{responder:t,props:e}}var qo=k.ReactCurrentDispatcher,Yo=k.ReactCurrentBatchConfig,Ko=0,Jo=null,Zo=null,Qo=null,$o=null,ts=null,es=null,is=0,rs=null,ns=0,os=!1,ss=null,as=0;function us(){throw Error(s(321))}function cs(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Kr(t[i],e[i]))return!1;return!0}function hs(t,e,i,r,n,o){if(Ko=o,Jo=e,Qo=null!==t?t.memoizedState:null,qo.current=null===Qo?Cs:Ps,e=i(r,n),os){do{os=!1,as+=1,Qo=null!==t?t.memoizedState:null,es=$o,rs=ts=Zo=null,qo.current=Ps,e=i(r,n)}while(os);ss=null,as=0}if(qo.current=Os,(t=Jo).memoizedState=$o,t.expirationTime=is,t.updateQueue=rs,t.effectTag|=ns,t=null!==Zo&&null!==Zo.next,Ko=0,es=ts=$o=Qo=Zo=Jo=null,is=0,rs=null,ns=0,t)throw Error(s(300));return e}function ls(){qo.current=Os,Ko=0,es=ts=$o=Qo=Zo=Jo=null,is=0,rs=null,ns=0,os=!1,ss=null,as=0}function ps(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===ts?$o=ts=t:ts=ts.next=t,ts}function fs(){if(null!==es)es=(ts=es).next,Qo=null!==(Zo=Qo)?Zo.next:null;else{if(null===Qo)throw Error(s(310));var t={memoizedState:(Zo=Qo).memoizedState,baseState:Zo.baseState,queue:Zo.queue,baseUpdate:Zo.baseUpdate,next:null};ts=null===ts?$o=t:ts.next=t,Qo=Zo.next}return ts}function ds(t,e){return"function"===typeof e?e(t):e}function ms(t){var e=fs(),i=e.queue;if(null===i)throw Error(s(311));if(i.lastRenderedReducer=t,0<as){var r=i.dispatch;if(null!==ss){var n=ss.get(i);if(void 0!==n){ss.delete(i);var o=e.memoizedState;do{o=t(o,n.action),n=n.next}while(null!==n);return Kr(o,e.memoizedState)||(zs=!0),e.memoizedState=o,e.baseUpdate===i.last&&(e.baseState=o),i.lastRenderedState=o,[o,r]}}return[e.memoizedState,r]}r=i.last;var a=e.baseUpdate;if(o=e.baseState,null!==a?(null!==r&&(r.next=null),r=a.next):r=null!==r?r.next:null,null!==r){var u=n=null,c=r,h=!1;do{var l=c.expirationTime;l<Ko?(h||(h=!0,u=a,n=o),l>is&&pu(is=l)):(lu(l,c.suspenseConfig),o=c.eagerReducer===t?c.eagerState:t(o,c.action)),a=c,c=c.next}while(null!==c&&c!==r);h||(u=a,n=o),Kr(o,e.memoizedState)||(zs=!0),e.memoizedState=o,e.baseUpdate=u,e.baseState=n,i.lastRenderedState=o}return[e.memoizedState,i.dispatch]}function ys(t){var e=ps();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:ds,lastRenderedState:t}).dispatch=Is.bind(null,Jo,t),[e.memoizedState,t]}function vs(t){return ms(ds)}function _s(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},null===rs?(rs={lastEffect:null}).lastEffect=t.next=t:null===(e=rs.lastEffect)?rs.lastEffect=t.next=t:(i=e.next,e.next=t,t.next=i,rs.lastEffect=t),t}function bs(t,e,i,r){var n=ps();ns|=t,n.memoizedState=_s(e,i,void 0,void 0===r?null:r)}function gs(t,e,i,r){var n=fs();r=void 0===r?null:r;var o=void 0;if(null!==Zo){var s=Zo.memoizedState;if(o=s.destroy,null!==r&&cs(r,s.deps))return void _s(0,i,o,r)}ns|=t,n.memoizedState=_s(e,i,o,r)}function xs(t,e){return bs(516,192,t,e)}function ws(t,e){return gs(516,192,t,e)}function Ss(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ts(){}function As(t,e){return ps().memoizedState=[t,void 0===e?null:e],t}function Es(t,e){var i=fs();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&cs(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function Is(t,e,i){if(!(25>as))throw Error(s(301));var r=t.alternate;if(t===Jo||null!==r&&r===Jo)if(os=!0,t={expirationTime:Ko,suspenseConfig:null,action:i,eagerReducer:null,eagerState:null,next:null},null===ss&&(ss=new Map),void 0===(i=ss.get(e)))ss.set(e,t);else{for(e=i;null!==e.next;)e=e.next;e.next=t}else{var n=Qa(),o=xo.suspense;o={expirationTime:n=$a(n,t,o),suspenseConfig:o,action:i,eagerReducer:null,eagerState:null,next:null};var a=e.last;if(null===a)o.next=o;else{var u=a.next;null!==u&&(o.next=u),a.next=o}if(e.last=o,0===t.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=e.lastRenderedReducer))try{var c=e.lastRenderedState,h=r(c,i);if(o.eagerReducer=r,o.eagerState=h,Kr(h,c))return}catch(l){}tu(t,n)}}var Os={readContext:ao,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useLayoutEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useResponder:us,useDeferredValue:us,useTransition:us},Cs={readContext:ao,useCallback:As,useContext:ao,useEffect:xs,useImperativeHandle:function(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,bs(4,36,Ss.bind(null,e,t),i)},useLayoutEffect:function(t,e){return bs(4,36,t,e)},useMemo:function(t,e){var i=ps();return e=void 0===e?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=ps();return e=void 0!==i?i(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Is.bind(null,Jo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},ps().memoizedState=t},useState:ys,useDebugValue:Ts,useResponder:Go,useDeferredValue:function(t,e){var i=ys(t),r=i[0],n=i[1];return xs((function(){o.unstable_next((function(){var i=Yo.suspense;Yo.suspense=void 0===e?null:e;try{n(t)}finally{Yo.suspense=i}}))}),[t,e]),r},useTransition:function(t){var e=ys(!1),i=e[0],r=e[1];return[As((function(e){r(!0),o.unstable_next((function(){var i=Yo.suspense;Yo.suspense=void 0===t?null:t;try{r(!1),e()}finally{Yo.suspense=i}}))}),[t,i]),i]}},Ps={readContext:ao,useCallback:Es,useContext:ao,useEffect:ws,useImperativeHandle:function(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,gs(4,36,Ss.bind(null,e,t),i)},useLayoutEffect:function(t,e){return gs(4,36,t,e)},useMemo:function(t,e){var i=fs();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&cs(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)},useReducer:ms,useRef:function(){return fs().memoizedState},useState:vs,useDebugValue:Ts,useResponder:Go,useDeferredValue:function(t,e){var i=vs(),r=i[0],n=i[1];return ws((function(){o.unstable_next((function(){var i=Yo.suspense;Yo.suspense=void 0===e?null:e;try{n(t)}finally{Yo.suspense=i}}))}),[t,e]),r},useTransition:function(t){var e=vs(),i=e[0],r=e[1];return[Es((function(e){r(!0),o.unstable_next((function(){var i=Yo.suspense;Yo.suspense=void 0===t?null:t;try{r(!1),e()}finally{Yo.suspense=i}}))}),[t,i]),i]}},Bs=null,Ms=null,ks=!1;function Rs(t,e){var i=Pu(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=e,i.return=t,i.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i}function Ds(t,e){switch(t.tag){case 5:var i=t.type;return null!==(e=1!==e.nodeType||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Fs(t){if(ks){var e=Ms;if(e){var i=e;if(!Ds(t,e)){if(!(e=er(i.nextSibling))||!Ds(t,e))return t.effectTag=-1025&t.effectTag|2,ks=!1,void(Bs=t);Rs(Bs,i)}Bs=t,Ms=er(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,ks=!1,Bs=t}}function Ns(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Bs=t}function Ls(t){if(t!==Bs)return!1;if(!ks)return Ns(t),ks=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Qi(e,t.memoizedProps))for(e=Ms;e;)Rs(t,e),e=er(e.nextSibling);if(Ns(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var i=t.data;if("/$"===i){if(0===e){Ms=er(t.nextSibling);break t}e--}else"$"!==i&&"$!"!==i&&"$?"!==i||e++}t=t.nextSibling}Ms=null}}else Ms=Bs?er(t.stateNode.nextSibling):null;return!0}function js(){Ms=Bs=null,ks=!1}var Us=k.ReactCurrentOwner,zs=!1;function Vs(t,e,i,r){e.child=null===t?Ro(e,null,i,r):ko(e,t.child,i,r)}function Ws(t,e,i,r,n){i=i.render;var o=e.ref;return so(e,n),r=hs(t,e,i,r,o,n),null===t||zs?(e.effectTag|=1,Vs(t,e,r,n),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=n&&(t.expirationTime=0),oa(t,e,n))}function Xs(t,e,i,r,n,o){if(null===t){var s=i.type;return"function"!==typeof s||Bu(s)||void 0!==s.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=ku(i.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Hs(t,e,s,r,n,o))}return s=t.child,n<o&&(n=s.memoizedProps,(i=null!==(i=i.compare)?i:Zr)(n,r)&&t.ref===e.ref)?oa(t,e,o):(e.effectTag|=1,(t=Mu(s,r)).ref=e.ref,t.return=e,e.child=t)}function Hs(t,e,i,r,n,o){return null!==t&&Zr(t.memoizedProps,r)&&t.ref===e.ref&&(zs=!1,n<o)?oa(t,e,o):qs(t,e,i,r,o)}function Gs(t,e){var i=e.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(e.effectTag|=128)}function qs(t,e,i,r,n){var o=yn(i)?dn:pn.current;return o=mn(e,o),so(e,n),i=hs(t,e,i,r,o,n),null===t||zs?(e.effectTag|=1,Vs(t,e,i,n),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=n&&(t.expirationTime=0),oa(t,e,n))}function Ys(t,e,i,r,n){if(yn(i)){var o=!0;xn(e)}else o=!1;if(so(e,n),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Eo(e,i,r),Oo(e,i,r,n),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,c=i.contextType;"object"===typeof c&&null!==c?c=ao(c):c=mn(e,c=yn(i)?dn:pn.current);var h=i.getDerivedStateFromProps,l="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate;l||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==c)&&Io(e,s,r,c),uo=!1;var p=e.memoizedState;u=s.state=p;var f=e.updateQueue;null!==f&&(_o(e,f,r,s,n),u=e.memoizedState),a!==r||p!==u||fn.current||uo?("function"===typeof h&&(So(e,i,h,r),u=e.memoizedState),(a=uo||Ao(e,i,a,r,p,u,c))?(l||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.effectTag|=4)):("function"===typeof s.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):("function"===typeof s.componentDidMount&&(e.effectTag|=4),r=!1)}else s=e.stateNode,a=e.memoizedProps,s.props=e.type===e.elementType?a:Zn(e.type,a),u=s.context,"object"===typeof(c=i.contextType)&&null!==c?c=ao(c):c=mn(e,c=yn(i)?dn:pn.current),(l="function"===typeof(h=i.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==c)&&Io(e,s,r,c),uo=!1,u=e.memoizedState,p=s.state=u,null!==(f=e.updateQueue)&&(_o(e,f,r,s,n),p=e.memoizedState),a!==r||u!==p||fn.current||uo?("function"===typeof h&&(So(e,i,h,r),p=e.memoizedState),(h=uo||Ao(e,i,a,r,u,p,c))?(l||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof s.componentDidUpdate&&(e.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=c,r=h):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return Ks(t,e,i,r,o,n)}function Ks(t,e,i,r,n,o){Gs(t,e);var s=0!==(64&e.effectTag);if(!r&&!s)return n&&wn(e,i,!1),oa(t,e,o);r=e.stateNode,Us.current=e;var a=s&&"function"!==typeof i.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&s?(e.child=ko(e,t.child,null,o),e.child=ko(e,null,a,o)):Vs(t,e,a,o),e.memoizedState=r.state,n&&wn(e,i,!0),e.child}function Js(t){var e=t.stateNode;e.pendingContext?bn(0,e.pendingContext,e.pendingContext!==e.context):e.context&&bn(0,e.context,!1),Uo(t,e.containerInfo)}var Zs,Qs,$s,ta={dehydrated:null,retryTime:0};function ea(t,e,i){var r,n=e.mode,o=e.pendingProps,s=Xo.current,a=!1;if((r=0!==(64&e.effectTag))||(r=0!==(2&s)&&(null===t||null!==t.memoizedState)),r?(a=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),hn(Xo,1&s),null===t){if(void 0!==o.fallback&&Fs(e),a){if(a=o.fallback,(o=Ru(null,n,0,null)).return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(i=Ru(a,n,i,null)).return=e,o.sibling=i,e.memoizedState=ta,e.child=o,i}return n=o.children,e.memoizedState=null,e.child=Ro(e,null,n,i)}if(null!==t.memoizedState){if(n=(t=t.child).sibling,a){if(o=o.fallback,(i=Mu(t,t.pendingProps)).return=e,0===(2&e.mode)&&(a=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(i.child=a;null!==a;)a.return=i,a=a.sibling;return(n=Mu(n,o,n.expirationTime)).return=e,i.sibling=n,i.childExpirationTime=0,e.memoizedState=ta,e.child=i,n}return i=ko(e,t.child,o.children,i),e.memoizedState=null,e.child=i}if(t=t.child,a){if(a=o.fallback,(o=Ru(null,n,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(i=Ru(a,n,i,null)).return=e,o.sibling=i,i.effectTag|=2,o.childExpirationTime=0,e.memoizedState=ta,e.child=o,i}return e.memoizedState=null,e.child=ko(e,t,o.children,i)}function ia(t,e){t.expirationTime<e&&(t.expirationTime=e);var i=t.alternate;null!==i&&i.expirationTime<e&&(i.expirationTime=e),oo(t.return,e)}function ra(t,e,i,r,n,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,last:r,tail:i,tailExpiration:0,tailMode:n,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.last=r,s.tail=i,s.tailExpiration=0,s.tailMode=n,s.lastEffect=o)}function na(t,e,i){var r=e.pendingProps,n=r.revealOrder,o=r.tail;if(Vs(t,e,r.children,i),0!==(2&(r=Xo.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ia(t,i);else if(19===t.tag)ia(t,i);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(hn(Xo,r),0===(2&e.mode))e.memoizedState=null;else switch(n){case"forwards":for(i=e.child,n=null;null!==i;)null!==(t=i.alternate)&&null===Ho(t)&&(n=i),i=i.sibling;null===(i=n)?(n=e.child,e.child=null):(n=i.sibling,i.sibling=null),ra(e,!1,n,i,o,e.lastEffect);break;case"backwards":for(i=null,n=e.child,e.child=null;null!==n;){if(null!==(t=n.alternate)&&null===Ho(t)){e.child=n;break}t=n.sibling,n.sibling=i,i=n,n=t}ra(e,!0,i,null,o,e.lastEffect);break;case"together":ra(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function oa(t,e,i){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&pu(r),e.childExpirationTime<i)return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(i=Mu(t=e.child,t.pendingProps,t.expirationTime),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,(i=i.sibling=Mu(t,t.pendingProps,t.expirationTime)).return=e;i.sibling=null}return e.child}function sa(t){t.effectTag|=4}function aa(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ua(t){switch(t.tag){case 1:yn(t.type)&&vn();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(zo(),_n(),0!==(64&(e=t.effectTag)))throw Error(s(285));return t.effectTag=-4097&e|64,t;case 5:return Wo(t),null;case 13:return cn(Xo),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return cn(Xo),null;case 4:return zo(),null;case 10:return no(t),null;default:return null}}function ca(t,e){return{value:t,source:e,stack:Q(e)}}Zs=function(t,e){for(var i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Qs=function(t,e,i,r,o){var s=t.memoizedProps;if(s!==r){var a,u,c=e.stateNode;switch(jo(Fo.current),t=null,i){case"input":s=Et(c,s),r=Et(c,r),t=[];break;case"option":s=Mt(c,s),r=Mt(c,r),t=[];break;case"select":s=n({},s,{value:void 0}),r=n({},r,{value:void 0}),t=[];break;case"textarea":s=Rt(c,s),r=Rt(c,r),t=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(c.onclick=Wi)}for(a in Ui(i,r),i=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(u in c=s[a])c.hasOwnProperty(u)&&(i||(i={}),i[u]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(f.hasOwnProperty(a)?t||(t=[]):(t=t||[]).push(a,null));for(a in r){var h=r[a];if(c=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&h!==c&&(null!=h||null!=c))if("style"===a)if(c){for(u in c)!c.hasOwnProperty(u)||h&&h.hasOwnProperty(u)||(i||(i={}),i[u]="");for(u in h)h.hasOwnProperty(u)&&c[u]!==h[u]&&(i||(i={}),i[u]=h[u])}else i||(t||(t=[]),t.push(a,i)),i=h;else"dangerouslySetInnerHTML"===a?(h=h?h.__html:void 0,c=c?c.__html:void 0,null!=h&&c!==h&&(t=t||[]).push(a,""+h)):"children"===a?c===h||"string"!==typeof h&&"number"!==typeof h||(t=t||[]).push(a,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(f.hasOwnProperty(a)?(null!=h&&Vi(o,a),t||c===h||(t=[])):(t=t||[]).push(a,h))}i&&(t=t||[]).push("style",i),o=t,(e.updateQueue=o)&&sa(e)}},$s=function(t,e,i,r){i!==r&&sa(e)};var ha="function"===typeof WeakSet?WeakSet:Set;function la(t,e){var i=e.source,r=e.stack;null===r&&null!==i&&(r=Q(i)),null!==i&&Z(i.type),e=e.value,null!==t&&1===t.tag&&Z(t.type);try{console.error(e)}catch(n){setTimeout((function(){throw n}))}}function pa(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(i){Tu(t,i)}else e.current=null}function fa(t,e){switch(e.tag){case 0:case 11:case 15:da(2,0,e);break;case 1:if(256&e.effectTag&&null!==t){var i=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?i:Zn(e.type,i),r),t.__reactInternalSnapshotBeforeUpdate=e}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}function da(t,e,i){if(null!==(i=null!==(i=i.updateQueue)?i.lastEffect:null)){var r=i=i.next;do{if(0!==(r.tag&t)){var n=r.destroy;r.destroy=void 0,void 0!==n&&n()}0!==(r.tag&e)&&(n=r.create,r.destroy=n()),r=r.next}while(r!==i)}}function ma(t,e,i){switch("function"===typeof Ou&&Ou(e),e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Xn(97<i?97:i,(function(){var t=r;do{var i=t.destroy;if(void 0!==i){var n=e;try{i()}catch(o){Tu(n,o)}}t=t.next}while(t!==r)}))}break;case 1:pa(e),"function"===typeof(i=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Tu(t,i)}}(e,i);break;case 5:pa(e);break;case 4:ba(t,e,i)}}function ya(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,null!==e&&ya(e)}function va(t){return 5===t.tag||3===t.tag||4===t.tag}function _a(t){t:{for(var e=t.return;null!==e;){if(va(e)){var i=e;break t}e=e.return}throw Error(s(160))}switch(e=i.stateNode,i.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(s(161))}16&i.effectTag&&(Xt(e,""),i.effectTag&=-17);t:e:for(i=t;;){for(;null===i.sibling;){if(null===i.return||va(i.return)){i=null;break t}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.effectTag)continue e;if(null===i.child||4===i.tag)continue e;i.child.return=i,i=i.child}if(!(2&i.effectTag)){i=i.stateNode;break t}}for(var n=t;;){var o=5===n.tag||6===n.tag;if(o){var a=o?n.stateNode:n.stateNode.instance;if(i)if(r){var u=a;a=i,8===(o=e).nodeType?o.parentNode.insertBefore(u,a):o.insertBefore(u,a)}else e.insertBefore(a,i);else r?(8===(u=e).nodeType?(o=u.parentNode).insertBefore(a,u):(o=u).appendChild(a),null!==(u=u._reactRootContainer)&&void 0!==u||null!==o.onclick||(o.onclick=Wi)):e.appendChild(a)}else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ba(t,e,i){for(var r,n,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:n=!1;break t;case 3:case 4:r=r.containerInfo,n=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,h=i,l=c;;)if(ma(u,l,h),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===c)break;for(;null===l.sibling;){if(null===l.return||l.return===c)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}n?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,n=!0,o.child.return=o,o=o.child;continue}}else if(ma(t,o,i),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ga(t,e){switch(e.tag){case 0:case 11:case 14:case 15:da(4,8,e);break;case 1:break;case 5:var i=e.stateNode;if(null!=i){var r=e.memoizedProps,n=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(i[or]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Ot(i,r),zi(t,n),e=zi(t,r),n=0;n<o.length;n+=2){var a=o[n],u=o[n+1];"style"===a?Li(i,u):"dangerouslySetInnerHTML"===a?Wt(i,u):"children"===a?Xt(i,u):wt(i,a,u,e)}switch(t){case"input":Ct(i,r);break;case"textarea":Ft(i,r);break;case"select":e=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?kt(i,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?kt(i,!!r.multiple,r.defaultValue,!0):kt(i,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===e.stateNode)throw Error(s(162));e.stateNode.nodeValue=e.memoizedProps;break;case 3:(e=e.stateNode).hydrate&&(e.hydrate=!1,Ee(e.containerInfo));break;case 12:break;case 13:if(i=e,null===e.memoizedState?r=!1:(r=!0,i=e.child,Ua=zn()),null!==i)t:for(t=i;;){if(5===t.tag)o=t.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,n=void 0!==(n=t.memoizedProps.style)&&null!==n&&n.hasOwnProperty("display")?n.display:null,o.style.display=Ni("display",n));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===i)break t;for(;null===t.sibling;){if(null===t.return||t.return===i)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}xa(e);break;case 19:xa(e);break;case 17:case 20:case 21:break;default:throw Error(s(163))}}function xa(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new ha),e.forEach((function(e){var r=Eu.bind(null,t,e);i.has(e)||(i.add(e),e.then(r,r))}))}}var wa="function"===typeof WeakMap?WeakMap:Map;function Sa(t,e,i){(i=lo(i,null)).tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){Va||(Va=!0,Wa=r),la(t,e)},i}function Ta(t,e,i){(i=lo(i,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var n=e.value;i.payload=function(){return la(t,e),r(n)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){"function"!==typeof r&&(null===Xa?Xa=new Set([this]):Xa.add(this),la(t,e));var i=e.stack;this.componentDidCatch(e.value,{componentStack:null!==i?i:""})}),i}var Aa,Ea=Math.ceil,Ia=k.ReactCurrentDispatcher,Oa=k.ReactCurrentOwner,Ca=0,Pa=null,Ba=null,Ma=0,ka=0,Ra=null,Da=1073741823,Fa=1073741823,Na=null,La=0,ja=!1,Ua=0,za=null,Va=!1,Wa=null,Xa=null,Ha=!1,Ga=null,qa=90,Ya=null,Ka=0,Ja=null,Za=0;function Qa(){return 0!==(48&Ca)?1073741821-(zn()/10|0):0!==Za?Za:Za=1073741821-(zn()/10|0)}function $a(t,e,i){if(0===(2&(e=e.mode)))return 1073741823;var r=Vn();if(0===(4&e))return 99===r?1073741823:1073741822;if(0!==(16&Ca))return Ma;if(null!==i)t=Jn(t,0|i.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Jn(t,150,100);break;case 97:case 96:t=Jn(t,5e3,250);break;case 95:t=2;break;default:throw Error(s(326))}return null!==Pa&&t===Ma&&--t,t}function tu(t,e){if(50<Ka)throw Ka=0,Ja=null,Error(s(185));if(null!==(t=eu(t,e))){var i=Vn();1073741823===e?0!==(8&Ca)&&0===(48&Ca)?ou(t):(ru(t),0===Ca&&qn()):ru(t),0===(4&Ca)||98!==i&&99!==i||(null===Ya?Ya=new Map([[t,e]]):(void 0===(i=Ya.get(t))||i>e)&&Ya.set(t,e))}}function eu(t,e){t.expirationTime<e&&(t.expirationTime=e);var i=t.alternate;null!==i&&i.expirationTime<e&&(i.expirationTime=e);var r=t.return,n=null;if(null===r&&3===t.tag)n=t.stateNode;else for(;null!==r;){if(i=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==i&&i.childExpirationTime<e&&(i.childExpirationTime=e),null===r.return&&3===r.tag){n=r.stateNode;break}r=r.return}return null!==n&&(Pa===n&&(pu(e),4===ka&&ju(n,Ma)),Uu(n,e)),n}function iu(t){var e=t.lastExpiredTime;return 0!==e?e:Lu(t,e=t.firstPendingTime)?(e=t.lastPingedTime)>(t=t.nextKnownPendingLevel)?e:t:e}function ru(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Gn(ou.bind(null,t));else{var e=iu(t),i=t.callbackNode;if(0===e)null!==i&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Qa();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==i){var n=t.callbackPriority;if(t.callbackExpirationTime===e&&n>=r)return;i!==Dn&&An(i)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Gn(ou.bind(null,t)):Hn(r,nu.bind(null,t),{timeout:10*(1073741821-e)-zn()}),t.callbackNode=e}}}function nu(t,e){if(Za=0,e)return zu(t,e=Qa()),ru(t),null;var i=iu(t);if(0!==i){if(e=t.callbackNode,0!==(48&Ca))throw Error(s(327));if(xu(),t===Pa&&i===Ma||uu(t,i),null!==Ba){var r=Ca;Ca|=16;for(var n=hu();;)try{du();break}catch(u){cu(t,u)}if(io(),Ca=r,Ia.current=n,1===ka)throw e=Ra,uu(t,i),ju(t,i),ru(t),e;if(null===Ba)switch(n=t.finishedWork=t.current.alternate,t.finishedExpirationTime=i,r=ka,Pa=null,r){case 0:case 1:throw Error(s(345));case 2:zu(t,2<i?2:i);break;case 3:if(ju(t,i),i===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=vu(n)),1073741823===Da&&10<(n=Ua+500-zn())){if(ja){var o=t.lastPingedTime;if(0===o||o>=i){t.lastPingedTime=i,uu(t,i);break}}if(0!==(o=iu(t))&&o!==i)break;if(0!==r&&r!==i){t.lastPingedTime=r;break}t.timeoutHandle=$i(_u.bind(null,t),n);break}_u(t);break;case 4:if(ju(t,i),i===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=vu(n)),ja&&(0===(n=t.lastPingedTime)||n>=i)){t.lastPingedTime=i,uu(t,i);break}if(0!==(n=iu(t))&&n!==i)break;if(0!==r&&r!==i){t.lastPingedTime=r;break}if(1073741823!==Fa?r=10*(1073741821-Fa)-zn():1073741823===Da?r=0:(r=10*(1073741821-Da)-5e3,0>(r=(n=zn())-r)&&(r=0),(i=10*(1073741821-i)-n)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ea(r/1960))-r)&&(r=i)),10<r){t.timeoutHandle=$i(_u.bind(null,t),r);break}_u(t);break;case 5:if(1073741823!==Da&&null!==Na){o=Da;var a=Na;if(0>=(r=0|a.busyMinDurationMs)?r=0:(n=0|a.busyDelayMs,r=(o=zn()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=n?0:n+r-o),10<r){ju(t,i),t.timeoutHandle=$i(_u.bind(null,t),r);break}}_u(t);break;default:throw Error(s(329))}if(ru(t),t.callbackNode===e)return nu.bind(null,t)}}return null}function ou(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,t.finishedExpirationTime===e)_u(t);else{if(0!==(48&Ca))throw Error(s(327));if(xu(),t===Pa&&e===Ma||uu(t,e),null!==Ba){var i=Ca;Ca|=16;for(var r=hu();;)try{fu();break}catch(n){cu(t,n)}if(io(),Ca=i,Ia.current=r,1===ka)throw i=Ra,uu(t,e),ju(t,e),ru(t),i;if(null!==Ba)throw Error(s(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Pa=null,_u(t),ru(t)}}return null}function su(t,e){var i=Ca;Ca|=1;try{return t(e)}finally{0===(Ca=i)&&qn()}}function au(t,e){var i=Ca;Ca&=-2,Ca|=8;try{return t(e)}finally{0===(Ca=i)&&qn()}}function uu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,tr(i)),null!==Ba)for(i=Ba.return;null!==i;){var r=i;switch(r.tag){case 1:var n=r.type.childContextTypes;null!==n&&void 0!==n&&vn();break;case 3:zo(),_n();break;case 5:Wo(r);break;case 4:zo();break;case 13:case 19:cn(Xo);break;case 10:no(r)}i=i.return}Pa=t,Ba=Mu(t.current,null),Ma=e,ka=0,Ra=null,Fa=Da=1073741823,Na=null,La=0,ja=!1}function cu(t,e){for(;;){try{if(io(),ls(),null===Ba||null===Ba.return)return ka=1,Ra=e,null;t:{var i=t,r=Ba.return,n=Ba,o=e;if(e=Ma,n.effectTag|=2048,n.firstEffect=n.lastEffect=null,null!==o&&"object"===typeof o&&"function"===typeof o.then){var s=o,a=0!==(1&Xo.current),u=r;do{var c;if(c=13===u.tag){var h=u.memoizedState;if(null!==h)c=null!==h.dehydrated;else{var l=u.memoizedProps;c=void 0!==l.fallback&&(!0!==l.unstable_avoidThisFallback||!a)}}if(c){var p=u.updateQueue;if(null===p){var f=new Set;f.add(s),u.updateQueue=f}else p.add(s);if(0===(2&u.mode)){if(u.effectTag|=64,n.effectTag&=-2981,1===n.tag)if(null===n.alternate)n.tag=17;else{var d=lo(1073741823,null);d.tag=2,fo(n,d)}n.expirationTime=1073741823;break t}o=void 0,n=e;var m=i.pingCache;if(null===m?(m=i.pingCache=new wa,o=new Set,m.set(s,o)):void 0===(o=m.get(s))&&(o=new Set,m.set(s,o)),!o.has(n)){o.add(n);var y=Au.bind(null,i,s,n);s.then(y,y)}u.effectTag|=4096,u.expirationTime=e;break t}u=u.return}while(null!==u);o=Error((Z(n.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Q(n))}5!==ka&&(ka=2),o=ca(o,n),u=r;do{switch(u.tag){case 3:s=o,u.effectTag|=4096,u.expirationTime=e,mo(u,Sa(u,s,e));break t;case 1:s=o;var v=u.type,_=u.stateNode;if(0===(64&u.effectTag)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Xa||!Xa.has(_)))){u.effectTag|=4096,u.expirationTime=e,mo(u,Ta(u,s,e));break t}}u=u.return}while(null!==u)}Ba=yu(Ba)}catch(b){e=b;continue}break}}function hu(){var t=Ia.current;return Ia.current=Os,null===t?Os:t}function lu(t,e){t<Da&&2<t&&(Da=t),null!==e&&t<Fa&&2<t&&(Fa=t,Na=e)}function pu(t){t>La&&(La=t)}function fu(){for(;null!==Ba;)Ba=mu(Ba)}function du(){for(;null!==Ba&&!En();)Ba=mu(Ba)}function mu(t){var e=Aa(t.alternate,t,Ma);return t.memoizedProps=t.pendingProps,null===e&&(e=yu(t)),Oa.current=null,e}function yu(t){Ba=t;do{var e=Ba.alternate;if(t=Ba.return,0===(2048&Ba.effectTag)){t:{var i=e,r=Ma,o=(e=Ba).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:yn(e.type)&&vn();break;case 3:zo(),_n(),(o=e.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(null===i||null===i.child)&&Ls(e)&&sa(e);break;case 5:Wo(e),r=jo(Lo.current);var a=e.type;if(null!==i&&null!=e.stateNode)Qs(i,e,a,o,r),i.ref!==e.ref&&(e.effectTag|=128);else if(o){var u=jo(Fo.current);if(Ls(e)){var c=(o=e).stateNode;i=o.type;var h=o.memoizedProps,l=r;switch(c[nr]=o,c[or]=h,a=void 0,r=c,i){case"iframe":case"object":case"embed":Ti("load",r);break;case"video":case"audio":for(c=0;c<te.length;c++)Ti(te[c],r);break;case"source":Ti("error",r);break;case"img":case"image":case"link":Ti("error",r),Ti("load",r);break;case"form":Ti("reset",r),Ti("submit",r);break;case"details":Ti("toggle",r);break;case"input":It(r,h),Ti("invalid",r),Vi(l,"onChange");break;case"select":r._wrapperState={wasMultiple:!!h.multiple},Ti("invalid",r),Vi(l,"onChange");break;case"textarea":Dt(r,h),Ti("invalid",r),Vi(l,"onChange")}for(a in Ui(i,h),c=null,h)h.hasOwnProperty(a)&&(u=h[a],"children"===a?"string"===typeof u?r.textContent!==u&&(c=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(c=["children",""+u]):f.hasOwnProperty(a)&&null!=u&&Vi(l,a));switch(i){case"input":Tt(r),Pt(r,h,!0);break;case"textarea":Tt(r),Nt(r);break;case"select":case"option":break;default:"function"===typeof h.onClick&&(r.onclick=Wi)}a=c,o.updateQueue=a,(o=null!==a)&&sa(e)}else{i=e,l=a,h=o,c=9===r.nodeType?r:r.ownerDocument,u===Lt&&(u=Ut(l)),u===Lt?"script"===l?((h=c.createElement("div")).innerHTML="<script><\/script>",c=h.removeChild(h.firstChild)):"string"===typeof h.is?c=c.createElement(l,{is:h.is}):(c=c.createElement(l),"select"===l&&(l=c,h.multiple?l.multiple=!0:h.size&&(l.size=h.size))):c=c.createElementNS(u,l),(h=c)[nr]=i,h[or]=o,Zs(h,e),e.stateNode=h;var p=r,d=zi(l=a,i=o);switch(l){case"iframe":case"object":case"embed":Ti("load",h),r=i;break;case"video":case"audio":for(r=0;r<te.length;r++)Ti(te[r],h);r=i;break;case"source":Ti("error",h),r=i;break;case"img":case"image":case"link":Ti("error",h),Ti("load",h),r=i;break;case"form":Ti("reset",h),Ti("submit",h),r=i;break;case"details":Ti("toggle",h),r=i;break;case"input":It(h,i),r=Et(h,i),Ti("invalid",h),Vi(p,"onChange");break;case"option":r=Mt(h,i);break;case"select":h._wrapperState={wasMultiple:!!i.multiple},r=n({},i,{value:void 0}),Ti("invalid",h),Vi(p,"onChange");break;case"textarea":Dt(h,i),r=Rt(h,i),Ti("invalid",h),Vi(p,"onChange");break;default:r=i}Ui(l,r),c=void 0,u=l;var m=h,y=r;for(c in y)if(y.hasOwnProperty(c)){var v=y[c];"style"===c?Li(m,v):"dangerouslySetInnerHTML"===c?null!=(v=v?v.__html:void 0)&&Wt(m,v):"children"===c?"string"===typeof v?("textarea"!==u||""!==v)&&Xt(m,v):"number"===typeof v&&Xt(m,""+v):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(f.hasOwnProperty(c)?null!=v&&Vi(p,c):null!=v&&wt(m,c,v,d))}switch(l){case"input":Tt(h),Pt(h,i,!1);break;case"textarea":Tt(h),Nt(h);break;case"option":null!=i.value&&h.setAttribute("value",""+xt(i.value));break;case"select":(r=h).multiple=!!i.multiple,null!=(h=i.value)?kt(r,!!i.multiple,h,!1):null!=i.defaultValue&&kt(r,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(h.onclick=Wi)}(o=Zi(a,o))&&sa(e)}null!==e.ref&&(e.effectTag|=128)}else if(null===e.stateNode)throw Error(s(166));break;case 6:if(i&&null!=e.stateNode)$s(0,e,i.memoizedProps,o);else{if("string"!==typeof o&&null===e.stateNode)throw Error(s(166));r=jo(Lo.current),jo(Fo.current),Ls(e)?(a=(o=e).stateNode,r=o.memoizedProps,a[nr]=o,(o=a.nodeValue!==r)&&sa(e)):(a=e,(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[nr]=a,e.stateNode=o)}break;case 11:break;case 13:if(cn(Xo),o=e.memoizedState,0!==(64&e.effectTag)){e.expirationTime=r;break t}o=null!==o,a=!1,null===i?void 0!==e.memoizedProps.fallback&&Ls(e):(a=null!==(r=i.memoizedState),o||null===r||null!==(r=i.child.sibling)&&(null!==(h=e.firstEffect)?(e.firstEffect=r,r.nextEffect=h):(e.firstEffect=e.lastEffect=r,r.nextEffect=null),r.effectTag=8)),o&&!a&&0!==(2&e.mode)&&(null===i&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Xo.current)?0===ka&&(ka=3):(0!==ka&&3!==ka||(ka=4),0!==La&&null!==Pa&&(ju(Pa,Ma),Uu(Pa,La)))),(o||a)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:zo();break;case 10:no(e);break;case 9:case 14:break;case 17:yn(e.type)&&vn();break;case 19:if(cn(Xo),null===(o=e.memoizedState))break;if(a=0!==(64&e.effectTag),null===(h=o.rendering)){if(a)aa(o,!1);else if(0!==ka||null!==i&&0!==(64&i.effectTag))for(i=e.child;null!==i;){if(null!==(h=Ho(i))){for(e.effectTag|=64,aa(o,!1),null!==(a=h.updateQueue)&&(e.updateQueue=a,e.effectTag|=4),null===o.lastEffect&&(e.firstEffect=null),e.lastEffect=o.lastEffect,o=r,a=e.child;null!==a;)i=o,(r=a).effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,null===(h=r.alternate)?(r.childExpirationTime=0,r.expirationTime=i,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=h.childExpirationTime,r.expirationTime=h.expirationTime,r.child=h.child,r.memoizedProps=h.memoizedProps,r.memoizedState=h.memoizedState,r.updateQueue=h.updateQueue,i=h.dependencies,r.dependencies=null===i?null:{expirationTime:i.expirationTime,firstContext:i.firstContext,responders:i.responders}),a=a.sibling;hn(Xo,1&Xo.current|2),e=e.child;break t}i=i.sibling}}else{if(!a)if(null!==(i=Ho(h))){if(e.effectTag|=64,a=!0,null!==(r=i.updateQueue)&&(e.updateQueue=r,e.effectTag|=4),aa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!h.alternate){null!==(e=e.lastEffect=o.lastEffect)&&(e.nextEffect=null);break}}else zn()>o.tailExpiration&&1<r&&(e.effectTag|=64,a=!0,aa(o,!1),e.expirationTime=e.childExpirationTime=r-1);o.isBackwards?(h.sibling=e.child,e.child=h):(null!==(r=o.last)?r.sibling=h:e.child=h,o.last=h)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=zn()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=e.lastEffect,r.sibling=null,o=Xo.current,hn(Xo,o=a?1&o|2:1&o),e=r;break t}break;case 20:case 21:break;default:throw Error(s(156,e.tag))}e=null}if(o=Ba,1===Ma||1!==o.childExpirationTime){for(a=0,r=o.child;null!==r;)(i=r.expirationTime)>a&&(a=i),(h=r.childExpirationTime)>a&&(a=h),r=r.sibling;o.childExpirationTime=a}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Ba.firstEffect),null!==Ba.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Ba.firstEffect),t.lastEffect=Ba.lastEffect),1<Ba.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Ba:t.firstEffect=Ba,t.lastEffect=Ba))}else{if(null!==(e=ua(Ba)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Ba.sibling))return e;Ba=t}while(null!==Ba);return 0===ka&&(ka=5),null}function vu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function _u(t){var e=Vn();return Xn(99,bu.bind(null,t,e)),null}function bu(t,e){do{xu()}while(null!==Ga);if(0!==(48&Ca))throw Error(s(327));var i=t.finishedWork,r=t.finishedExpirationTime;if(null===i)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,i===t.current)throw Error(s(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var n=vu(i);if(t.firstPendingTime=n,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Pa&&(Ba=Pa=null,Ma=0),1<i.effectTag?null!==i.lastEffect?(i.lastEffect.nextEffect=i,n=i.firstEffect):n=i:n=i.firstEffect,null!==n){var o=Ca;Ca|=32,Oa.current=null,Ki=Si;var a=qi();if(Yi(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else t:{var c=(u=(u=a.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var h=c.anchorOffset,l=c.focusNode;c=c.focusOffset;try{u.nodeType,l.nodeType}catch(D){u=null;break t}var p=0,f=-1,d=-1,m=0,y=0,v=a,_=null;e:for(;;){for(var b;v!==u||0!==h&&3!==v.nodeType||(f=p+h),v!==l||0!==c&&3!==v.nodeType||(d=p+c),3===v.nodeType&&(p+=v.nodeValue.length),null!==(b=v.firstChild);)_=v,v=b;for(;;){if(v===a)break e;if(_===u&&++m===h&&(f=p),_===l&&++y===c&&(d=p),null!==(b=v.nextSibling))break;_=(v=_).parentNode}v=b}u=-1===f||-1===d?null:{start:f,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;Ji={focusedElem:a,selectionRange:u},Si=!1,za=n;do{try{gu()}catch(D){if(null===za)throw Error(s(330));Tu(za,D),za=za.nextEffect}}while(null!==za);za=n;do{try{for(a=t,u=e;null!==za;){var g=za.effectTag;if(16&g&&Xt(za.stateNode,""),128&g){var x=za.alternate;if(null!==x){var w=x.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&g){case 2:_a(za),za.effectTag&=-3;break;case 6:_a(za),za.effectTag&=-3,ga(za.alternate,za);break;case 1024:za.effectTag&=-1025;break;case 1028:za.effectTag&=-1025,ga(za.alternate,za);break;case 4:ga(za.alternate,za);break;case 8:ba(a,h=za,u),ya(h)}za=za.nextEffect}}catch(D){if(null===za)throw Error(s(330));Tu(za,D),za=za.nextEffect}}while(null!==za);if(w=Ji,x=qi(),g=w.focusedElem,u=w.selectionRange,x!==g&&g&&g.ownerDocument&&function t(e,i){return!(!e||!i)&&(e===i||(!e||3!==e.nodeType)&&(i&&3===i.nodeType?t(e,i.parentNode):"contains"in e?e.contains(i):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(i))))}(g.ownerDocument.documentElement,g)){null!==u&&Yi(g)&&(x=u.start,void 0===(w=u.end)&&(w=x),"selectionStart"in g?(g.selectionStart=x,g.selectionEnd=Math.min(w,g.value.length)):(w=(x=g.ownerDocument||document)&&x.defaultView||window).getSelection&&(w=w.getSelection(),h=g.textContent.length,a=Math.min(u.start,h),u=void 0===u.end?a:Math.min(u.end,h),!w.extend&&a>u&&(h=u,u=a,a=h),h=Gi(g,a),l=Gi(g,u),h&&l&&(1!==w.rangeCount||w.anchorNode!==h.node||w.anchorOffset!==h.offset||w.focusNode!==l.node||w.focusOffset!==l.offset)&&((x=x.createRange()).setStart(h.node,h.offset),w.removeAllRanges(),a>u?(w.addRange(x),w.extend(l.node,l.offset)):(x.setEnd(l.node,l.offset),w.addRange(x))))),x=[];for(w=g;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof g.focus&&g.focus(),g=0;g<x.length;g++)(w=x[g]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Ji=null,Si=!!Ki,Ki=null,t.current=i,za=n;do{try{for(g=r;null!==za;){var S=za.effectTag;if(36&S){var T=za.alternate;switch(w=g,(x=za).tag){case 0:case 11:case 15:da(16,32,x);break;case 1:var A=x.stateNode;if(4&x.effectTag)if(null===T)A.componentDidMount();else{var E=x.elementType===x.type?T.memoizedProps:Zn(x.type,T.memoizedProps);A.componentDidUpdate(E,T.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var I=x.updateQueue;null!==I&&bo(0,I,A);break;case 3:var O=x.updateQueue;if(null!==O){if(a=null,null!==x.child)switch(x.child.tag){case 5:a=x.child.stateNode;break;case 1:a=x.child.stateNode}bo(0,O,a)}break;case 5:var C=x.stateNode;null===T&&4&x.effectTag&&Zi(x.type,x.memoizedProps)&&C.focus();break;case 6:case 4:case 12:break;case 13:if(null===x.memoizedState){var P=x.alternate;if(null!==P){var B=P.memoizedState;if(null!==B){var M=B.dehydrated;null!==M&&Ee(M)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(s(163))}}if(128&S){x=void 0;var k=za.ref;if(null!==k){var R=za.stateNode;switch(za.tag){case 5:x=R;break;default:x=R}"function"===typeof k?k(x):k.current=x}}za=za.nextEffect}}catch(D){if(null===za)throw Error(s(330));Tu(za,D),za=za.nextEffect}}while(null!==za);za=null,Fn(),Ca=o}else t.current=i;if(Ha)Ha=!1,Ga=t,qa=e;else for(za=n;null!==za;)e=za.nextEffect,za.nextEffect=null,za=e;if(0===(e=t.firstPendingTime)&&(Xa=null),1073741823===e?t===Ja?Ka++:(Ka=0,Ja=t):Ka=0,"function"===typeof Iu&&Iu(i.stateNode,r),ru(t),Va)throw Va=!1,t=Wa,Wa=null,t;return 0!==(8&Ca)?null:(qn(),null)}function gu(){for(;null!==za;){var t=za.effectTag;0!==(256&t)&&fa(za.alternate,za),0===(512&t)||Ha||(Ha=!0,Hn(97,(function(){return xu(),null}))),za=za.nextEffect}}function xu(){if(90!==qa){var t=97<qa?97:qa;return qa=90,Xn(t,wu)}}function wu(){if(null===Ga)return!1;var t=Ga;if(Ga=null,0!==(48&Ca))throw Error(s(331));var e=Ca;for(Ca|=32,t=t.current.firstEffect;null!==t;){try{var i=t;if(0!==(512&i.effectTag))switch(i.tag){case 0:case 11:case 15:da(128,0,i),da(0,64,i)}}catch(r){if(null===t)throw Error(s(330));Tu(t,r)}i=t.nextEffect,t.nextEffect=null,t=i}return Ca=e,qn(),!0}function Su(t,e,i){fo(t,e=Sa(t,e=ca(i,e),1073741823)),null!==(t=eu(t,1073741823))&&ru(t)}function Tu(t,e){if(3===t.tag)Su(t,t,e);else for(var i=t.return;null!==i;){if(3===i.tag){Su(i,t,e);break}if(1===i.tag){var r=i.stateNode;if("function"===typeof i.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xa||!Xa.has(r))){fo(i,t=Ta(i,t=ca(e,t),1073741823)),null!==(i=eu(i,1073741823))&&ru(i);break}}i=i.return}}function Au(t,e,i){var r=t.pingCache;null!==r&&r.delete(e),Pa===t&&Ma===i?4===ka||3===ka&&1073741823===Da&&zn()-Ua<500?uu(t,Ma):ja=!0:Lu(t,i)&&(0!==(e=t.lastPingedTime)&&e<i||(t.lastPingedTime=i,t.finishedExpirationTime===i&&(t.finishedExpirationTime=0,t.finishedWork=null),ru(t)))}function Eu(t,e){var i=t.stateNode;null!==i&&i.delete(e),0===(e=0)&&(e=$a(e=Qa(),t,null)),null!==(t=eu(t,e))&&ru(t)}Aa=function(t,e,i){var r=e.expirationTime;if(null!==t){var n=e.pendingProps;if(t.memoizedProps!==n||fn.current)zs=!0;else{if(r<i){switch(zs=!1,e.tag){case 3:Js(e),js();break;case 5:if(Vo(e),4&e.mode&&1!==i&&n.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:yn(e.type)&&xn(e);break;case 4:Uo(e,e.stateNode.containerInfo);break;case 10:ro(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=i?ea(t,e,i):(hn(Xo,1&Xo.current),null!==(e=oa(t,e,i))?e.sibling:null);hn(Xo,1&Xo.current);break;case 19:if(r=e.childExpirationTime>=i,0!==(64&t.effectTag)){if(r)return na(t,e,i);e.effectTag|=64}if(null!==(n=e.memoizedState)&&(n.rendering=null,n.tail=null),hn(Xo,Xo.current),!r)return null}return oa(t,e,i)}zs=!1}}else zs=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,n=mn(e,pn.current),so(e,i),n=hs(null,e,r,t,n,i),e.effectTag|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof){if(e.tag=1,ls(),yn(r)){var o=!0;xn(e)}else o=!1;e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null;var a=r.getDerivedStateFromProps;"function"===typeof a&&So(e,r,a,t),n.updater=To,e.stateNode=n,n._reactInternalFiber=e,Oo(e,r,t,i),e=Ks(null,e,r,!0,o,i)}else e.tag=0,Vs(null,e,n,i),e=e.child;return e;case 16:if(n=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(n),1!==n._status)throw n._result;switch(n=n._result,e.type=n,o=e.tag=function(t){if("function"===typeof t)return Bu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===X)return 11;if(t===q)return 14}return 2}(n),t=Zn(n,t),o){case 0:e=qs(null,e,n,t,i);break;case 1:e=Ys(null,e,n,t,i);break;case 11:e=Ws(null,e,n,t,i);break;case 14:e=Xs(null,e,n,Zn(n.type,t),r,i);break;default:throw Error(s(306,n,""))}return e;case 0:return r=e.type,n=e.pendingProps,qs(t,e,r,n=e.elementType===r?n:Zn(r,n),i);case 1:return r=e.type,n=e.pendingProps,Ys(t,e,r,n=e.elementType===r?n:Zn(r,n),i);case 3:if(Js(e),null===(r=e.updateQueue))throw Error(s(282));if(n=null!==(n=e.memoizedState)?n.element:null,_o(e,r,e.pendingProps,null,i),(r=e.memoizedState.element)===n)js(),e=oa(t,e,i);else{if((n=e.stateNode.hydrate)&&(Ms=er(e.stateNode.containerInfo.firstChild),Bs=e,n=ks=!0),n)for(i=Ro(e,null,r,i),e.child=i;i;)i.effectTag=-3&i.effectTag|1024,i=i.sibling;else Vs(t,e,r,i),js();e=e.child}return e;case 5:return Vo(e),null===t&&Fs(e),r=e.type,n=e.pendingProps,o=null!==t?t.memoizedProps:null,a=n.children,Qi(r,n)?a=null:null!==o&&Qi(r,o)&&(e.effectTag|=16),Gs(t,e),4&e.mode&&1!==i&&n.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Vs(t,e,a,i),e=e.child),e;case 6:return null===t&&Fs(e),null;case 13:return ea(t,e,i);case 4:return Uo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=ko(e,null,r,i):Vs(t,e,r,i),e.child;case 11:return r=e.type,n=e.pendingProps,Ws(t,e,r,n=e.elementType===r?n:Zn(r,n),i);case 7:return Vs(t,e,e.pendingProps,i),e.child;case 8:case 12:return Vs(t,e,e.pendingProps.children,i),e.child;case 10:t:{if(r=e.type._context,n=e.pendingProps,a=e.memoizedProps,ro(e,o=n.value),null!==a){var u=a.value;if(0===(o=Kr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===n.children&&!fn.current){e=oa(t,e,i);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){a=u.child;for(var h=c.firstContext;null!==h;){if(h.context===r&&0!==(h.observedBits&o)){1===u.tag&&((h=lo(i,null)).tag=2,fo(u,h)),u.expirationTime<i&&(u.expirationTime=i),null!==(h=u.alternate)&&h.expirationTime<i&&(h.expirationTime=i),oo(u.return,i),c.expirationTime<i&&(c.expirationTime=i);break}h=h.next}}else a=10===u.tag&&u.type===e.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===e){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}}Vs(t,e,n.children,i),e=e.child}return e;case 9:return n=e.type,r=(o=e.pendingProps).children,so(e,i),r=r(n=ao(n,o.unstable_observedBits)),e.effectTag|=1,Vs(t,e,r,i),e.child;case 14:return o=Zn(n=e.type,e.pendingProps),Xs(t,e,n,o=Zn(n.type,o),r,i);case 15:return Hs(t,e,e.type,e.pendingProps,r,i);case 17:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Zn(r,n),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,yn(r)?(t=!0,xn(e)):t=!1,so(e,i),Eo(e,r,n),Oo(e,r,n,i),Ks(null,e,r,!0,t,i);case 19:return na(t,e,i)}throw Error(s(156,e.tag))};var Iu=null,Ou=null;function Cu(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Pu(t,e,i,r){return new Cu(t,e,i,r)}function Bu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Mu(t,e){var i=t.alternate;return null===i?((i=Pu(t.tag,e,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=t.childExpirationTime,i.expirationTime=t.expirationTime,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function ku(t,e,i,r,n,o){var a=2;if(r=t,"function"===typeof t)Bu(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case L:return Ru(i.children,n,o,e);case W:a=8,n|=7;break;case j:a=8,n|=1;break;case U:return(t=Pu(12,i,e,8|n)).elementType=U,t.type=U,t.expirationTime=o,t;case H:return(t=Pu(13,i,e,n)).type=H,t.elementType=H,t.expirationTime=o,t;case G:return(t=Pu(19,i,e,n)).elementType=G,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case z:a=10;break t;case V:a=9;break t;case X:a=11;break t;case q:a=14;break t;case Y:a=16,r=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Pu(a,i,e,n)).elementType=t,e.type=r,e.expirationTime=o,e}function Ru(t,e,i,r){return(t=Pu(7,t,r,e)).expirationTime=i,t}function Du(t,e,i){return(t=Pu(6,t,null,e)).expirationTime=i,t}function Fu(t,e,i){return(e=Pu(4,null!==t.children?t.children:[],t.key,e)).expirationTime=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nu(t,e,i){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Lu(t,e){var i=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==i&&i>=e&&t<=e}function ju(t,e){var i=t.firstSuspendedTime,r=t.lastSuspendedTime;i<e&&(t.firstSuspendedTime=e),(r>e||0===i)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Uu(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var i=t.firstSuspendedTime;0!==i&&(e>=i?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function zu(t,e){var i=t.lastExpiredTime;(0===i||i>e)&&(t.lastExpiredTime=e)}function Vu(t,e,i,r){var n=e.current,o=Qa(),a=xo.suspense;o=$a(o,n,a);t:if(i){e:{if(ee(i=i._reactInternalFiber)!==i||1!==i.tag)throw Error(s(170));var u=i;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(yn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(s(171))}if(1===i.tag){var c=i.type;if(yn(c)){i=gn(i,c,u);break t}}i=u}else i=ln;return null===e.context?e.context=i:e.pendingContext=i,(e=lo(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),fo(n,e),tu(n,o),o}function Wu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Xu(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Hu(t,e){Xu(t,e),(t=t.alternate)&&Xu(t,e)}function Gu(t,e,i){var r=new Nu(t,e,i=null!=i&&!0===i.hydrate),n=Pu(3,null,null,2===e?7:1===e?3:0);r.current=n,n.stateNode=r,t[sr]=r.current,i&&0!==e&&function(t){var e=ki(t);ye.forEach((function(i){Ri(i,t,e)})),ve.forEach((function(i){Ri(i,t,e)}))}(9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Yu(t,e,i,r,n){var o=i._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof n){var a=n;n=function(){var t=Wu(s);a.call(t)}}Vu(e,s,t,n)}else{if(o=i._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var i;i=t.lastChild;)t.removeChild(i);return new Gu(t,0,e?{hydrate:!0}:void 0)}(i,r),s=o._internalRoot,"function"===typeof n){var u=n;n=function(){var t=Wu(s);u.call(t)}}au((function(){Vu(e,s,t,n)}))}return Wu(s)}function Ku(t,e,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:t,containerInfo:e,implementation:i}}function Ju(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qu(e))throw Error(s(200));return Ku(t,e,null,i)}Gu.prototype.render=function(t,e){Vu(t,this._internalRoot,null,void 0===e?null:e)},Gu.prototype.unmount=function(t){var e=this._internalRoot,i=void 0===t?null:t,r=e.containerInfo;Vu(null,e,null,(function(){r[sr]=null,null!==i&&i()}))},oe=function(t){if(13===t.tag){var e=Jn(Qa(),150,100);tu(t,e),Hu(t,e)}},se=function(t){if(13===t.tag){Qa();var e=Kn++;tu(t,e),Hu(t,e)}},ae=function(t){if(13===t.tag){var e=Qa();tu(t,e=$a(e,t,null)),Hu(t,e)}},tt=function(t,e,i){switch(e){case"input":if(Ct(t,i),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var n=hr(r);if(!n)throw Error(s(90));At(r),Ct(r,n)}}}break;case"textarea":Ft(t,i);break;case"select":null!=(e=i.value)&&kt(t,!!i.multiple,e,!1)}},st=su,at=function(t,e,i,r){var n=Ca;Ca|=4;try{return Xn(98,t.bind(null,e,i,r))}finally{0===(Ca=n)&&qn()}},ut=function(){0===(49&Ca)&&(function(){if(null!==Ya){var t=Ya;Ya=null,t.forEach((function(t,e){zu(e,t),ru(e)})),qn()}}(),xu())},ct=function(t,e){var i=Ca;Ca|=2;try{return t(e)}finally{0===(Ca=i)&&qn()}};var Zu={createPortal:Ju,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},hydrate:function(t,e,i){if(!qu(e))throw Error(s(200));return Yu(null,t,e,!0,i)},render:function(t,e,i){if(!qu(e))throw Error(s(200));return Yu(null,t,e,!1,i)},unstable_renderSubtreeIntoContainer:function(t,e,i,r){if(!qu(i))throw Error(s(200));if(null==t||void 0===t._reactInternalFiber)throw Error(s(38));return Yu(t,e,i,!1,r)},unmountComponentAtNode:function(t){if(!qu(t))throw Error(s(40));return!!t._reactRootContainer&&(au((function(){Yu(null,null,t,!1,(function(){t._reactRootContainer=null,t[sr]=null}))})),!0)},unstable_createPortal:function(){return Ju.apply(void 0,arguments)},unstable_batchedUpdates:su,flushSync:function(t,e){if(0!==(48&Ca))throw Error(s(187));var i=Ca;Ca|=1;try{return Xn(99,t.bind(null,e))}finally{Ca=i,qn()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[ur,cr,hr,B.injectEventPluginsByName,p,ke,function(t){I(t,Me)},nt,ot,Ci,P,xu,{current:!1}]}};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var i=e.inject(t);Iu=function(t){try{e.onCommitFiberRoot(i,t,void 0,64===(64&t.current.effectTag))}catch(r){}},Ou=function(t){try{e.onCommitFiberUnmount(i,t)}catch(r){}}}catch(r){}})(n({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:ar,bundleType:0,version:"16.12.0",rendererPackageName:"react-dom"});var Qu={default:Zu},$u=Qu&&Zu||Qu;t.exports=$u.default||$u},function(t,e,i){"use strict";t.exports=i(582)},function(t,e,i){"use strict";var r,n,o,s,a;if(Object.defineProperty(e,"__esModule",{value:!0}),"undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,h=function t(){if(null!==u)try{var i=e.unstable_now();u(!0,i),u=null}catch(r){throw setTimeout(t,0),r}},l=Date.now();e.unstable_now=function(){return Date.now()-l},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(h,0))},n=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},s=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var p=window.performance,f=window.Date,d=window.setTimeout,m=window.clearTimeout;if("undefined"!==typeof console){var y=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof p&&"function"===typeof p.now)e.unstable_now=function(){return p.now()};else{var v=f.now();e.unstable_now=function(){return f.now()-v}}var _=!1,b=null,g=-1,x=5,w=0;s=function(){return e.unstable_now()>=w},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<t?Math.floor(1e3/t):5};var S=new MessageChannel,T=S.port2;S.port1.onmessage=function(){if(null!==b){var t=e.unstable_now();w=t+x;try{b(!0,t)?T.postMessage(null):(_=!1,b=null)}catch(i){throw T.postMessage(null),i}}else _=!1},r=function(t){b=t,_||(_=!0,T.postMessage(null))},n=function(t,i){g=d((function(){t(e.unstable_now())}),i)},o=function(){m(g),g=-1}}function A(t,e){var i=t.length;t.push(e);t:for(;;){var r=Math.floor((i-1)/2),n=t[r];if(!(void 0!==n&&0<O(n,e)))break t;t[r]=e,t[i]=n,i=r}}function E(t){return void 0===(t=t[0])?null:t}function I(t){var e=t[0];if(void 0!==e){var i=t.pop();if(i!==e){t[0]=i;t:for(var r=0,n=t.length;r<n;){var o=2*(r+1)-1,s=t[o],a=o+1,u=t[a];if(void 0!==s&&0>O(s,i))void 0!==u&&0>O(u,s)?(t[r]=u,t[a]=i,r=a):(t[r]=s,t[o]=i,r=o);else{if(!(void 0!==u&&0>O(u,i)))break t;t[r]=u,t[a]=i,r=a}}}return e}return null}function O(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}var C=[],P=[],B=1,M=null,k=3,R=!1,D=!1,F=!1;function N(t){for(var e=E(P);null!==e;){if(null===e.callback)I(P);else{if(!(e.startTime<=t))break;I(P),e.sortIndex=e.expirationTime,A(C,e)}e=E(P)}}function L(t){if(F=!1,N(t),!D)if(null!==E(C))D=!0,r(j);else{var e=E(P);null!==e&&n(L,e.startTime-t)}}function j(t,i){D=!1,F&&(F=!1,o()),R=!0;var r=k;try{for(N(i),M=E(C);null!==M&&(!(M.expirationTime>i)||t&&!s());){var a=M.callback;if(null!==a){M.callback=null,k=M.priorityLevel;var u=a(M.expirationTime<=i);i=e.unstable_now(),"function"===typeof u?M.callback=u:M===E(C)&&I(C),N(i)}else I(C);M=E(C)}if(null!==M)var c=!0;else{var h=E(P);null!==h&&n(L,h.startTime-i),c=!1}return c}finally{M=null,k=r,R=!1}}function U(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var z=a;e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=k;k=t;try{return e()}finally{k=i}},e.unstable_next=function(t){switch(k){case 1:case 2:case 3:var e=3;break;default:e=k}var i=k;k=e;try{return t()}finally{k=i}},e.unstable_scheduleCallback=function(t,i,s){var a=e.unstable_now();if("object"===typeof s&&null!==s){var u=s.delay;u="number"===typeof u&&0<u?a+u:a,s="number"===typeof s.timeout?s.timeout:U(t)}else s=U(t),u=a;return t={id:B++,callback:i,priorityLevel:t,startTime:u,expirationTime:s=u+s,sortIndex:-1},u>a?(t.sortIndex=u,A(P,t),null===E(C)&&t===E(P)&&(F?o():F=!0,n(L,u-a))):(t.sortIndex=s,A(C,t),D||R||(D=!0,r(j))),t},e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_wrapCallback=function(t){var e=k;return function(){var i=k;k=e;try{return t.apply(this,arguments)}finally{k=i}}},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_shouldYield=function(){var t=e.unstable_now();N(t);var i=E(C);return i!==M&&null!==M&&null!==i&&null!==i.callback&&i.startTime<=t&&i.expirationTime<M.expirationTime||s()},e.unstable_requestPaint=z,e.unstable_continueExecution=function(){D||R||(D=!0,r(j))},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return E(C)},e.unstable_Profiling=null}]]);
//# sourceMappingURL=2.3b4cb731.chunk.js.map