(this["webpackJsonptune-mountain-client"]=this["webpackJsonptune-mountain-client"]||[]).push([[0],{208:function(e,t,n){},220:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAQAAABpN6lAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkAgYVAzrpZhRiAAACH0lEQVR42u2dOU7DYBgFX5yC0LMVHIfAKUBwC8RFAFGwiDIsB4jSQEBCwBWIWJQAUY5gU1gI0WHH/obijWvrzT9ylPKXctZ0oZFSZRU+E/W0qaamoakt9TSp1CvVSOda/Rlp6bTSgd9PX4ulj7+k2xrNTjSTz9R5/EyZ7tUqdfxZPdZsdpx//PWOZMq0XSrAToBZW7oMmBmoUfj4DT0HmJ019K6F0r/Rv7Ost8JvvAR4jRLNBcyoROT5GK9ESchQ8ZUgr5iZf4wD0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtABNojRkp/hKkFeiz5Chj8JvBHklugmYGRS+c1Z61VOA2XWivYCZ3VJvHQSY7UvSSc2XG9+Vvnr7oWazw3xoptYEV1Nc7Lyofo1mR9+Xr0tSWx0NlVY6MFZX61P+0Ta1oa7GlXqlGqqjlXzgC6j1AcnsGbLmAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTAyLTA2VDIxOjAzOjU4KzAwOjAwh3nvzwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wMi0wNlQyMTowMzo1OCswMDowMPYkV3MAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},221:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAQAAABpN6lAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkAgYVAyFjA92OAAAERElEQVR42uWdT4hWVRjGfzVZmA4zpQsZ3UQGgqCFLSKiVFQU+kctLOkPLpJ0kYsINxFBGLUIdDkuJ3QxLhRBrURF0bTZiKHTJv+MWKNCTo7lODZ+b4u7iDK95/u+e8/z3nuesz13eJ/fvBfu893LeyBUnaxjPxcZ51cG+IqlTAq+tgZaxgXsP+sCH9GtLiyOlnLzDvvZusp6OtTlla0ert3FfraOM1ddYrnqu6d9wxjjQ+5Xl1mWpjGeC8AwvucJdanlaF2QfcMY5T3uU5dbvLYGAzCMb5ipLrhoDTYFwPiNN9QlF6vrTQIwjH6mq8suSh00WgBgXOJldenFqKsl+9naQqe6/PbV3QYA4zyL1Aa0AIwGvTysNqEEYBiDPK22oQVg/MUXPKi2ogRgGCeZrzajBWCMsaF60blIAIZxlNlqS1oAxihrqhSZigdgVCoylQPAGOFttTUtAMPoZ5ranhaAcYmX1Aa1AAyjz3dkKh+AcY6FaptaAK4jUxwAhnGaBWqzWgBZZHL3vjEmAMMYYI7ashZAFpkcvWWKD8AwjviJTBoAxjXWqK1rARjGXnrU9rUAjBHeShuAIY9MegDGsDIyeQBgGH1MTRuAcY4X0gZgNNjMQykDMIxTsSOTNwDRI5M/AIbxQ7zI5BNAxMjkFYBhHOHxtAFEiUy+ARjGnnIjk38AxhVeSxuAYfTzaNoAjGFebMWgo1/f2tQMdtFbfGSqTgdk6yzPN2ewPh2Q6TEO8EmRrqrWAdnaG34r1K0DMi1nH10pA4Bn2Bn2ZWJdAcBCPgvZlve9Vjcjaict6zbPMpC3qb4dAB1szN9UZwCwhHlpA4A3UweQ+1xYdwDJ3wJT894k1B0AWNoARrmVNoCTeRvqDuBw6gC2pQ1gD4MpA5jg4/xNdQbwOSfa/yPV/EnMMHbzQIjBunbAIVYykS6AHazgj7Ct9QMwwQZeZyx0e9B9UiGd4V2ONnNBnTrA2ML85uzXqQOGWM3B5i+rSwds56lW7OerCs8Bl3mlPLL+AWwvd2aRbwC/p/2R1LfMKtu+XwB/sj7OGAafACLOLvQHIPIoFm8AfuTJeOa9AZCMY/ID4Geei23eD4AGvUxR2PcB4DyLNeZ9AOjnEZ19NYBSY45/ACXHHN8AIsQczwCixByvAG7Eijk+Abgb0R4TwE2PEyfjAYgeczwBcDx1NgYAUczxAUAYczwAkMYcPQBxzNECuMyramtKAC5ijgqAm5ijAfCdn5gTH4CzmBMbgLuYExPALT71F3PiAXAac+IAcBxzYgA44znmhKmrZfMNNjFZXX77avWorSH/MSdUrR22VoGYE6qfmjQvHYBZhpo7cLFCMSdU4UduXmWVutgyFHroauViTri+zjV/nferF3PC1cPoPe0fjDHXT6u7H709zDt1/t//oyUM/c+D7geqcccKdbKWfVxknF84xpcsqmrA/bf+BrbynChoRDjLAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTAyLTA2VDIxOjAzOjMzKzAwOjAwQxGysgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wMi0wNlQyMTowMzozMyswMDowMDJMCg4AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},225:function(e,t,n){e.exports=n(584)},530:function(e,t,n){},531:function(e,t,n){},532:function(e,t,n){},533:function(e,t,n){},534:function(e,t,n){},535:function(e,t,n){},536:function(e,t,n){},537:function(e,t,n){},538:function(e,t,n){},539:function(e,t,n){},540:function(e,t,n){},541:function(e,t,n){},579:function(e,t,n){},583:function(e,t,n){},584:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(8),i=n(9),s=n(15),c=n(10),l=n(16),u=n(219),h=n.n(u),d=n(22),p=n.n(d),m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o={source:"SpotifyService",state:e,body:t,message:n};a?a.next(o):console.log(o)},f=function(){var e=new URLSearchParams(window.location.search),t=e.get("accessToken"),n=e.get("refreshToken");return window.history.replaceState(null,"","/"),{accessToken:t,refreshToken:n}},g=function(){function e(t){var n=this;Object(r.a)(this,e);var a=new p.a.BehaviorSubject(!1),o=new p.a.BehaviorSubject(!1),i=new p.a.BehaviorSubject(!1),s=new p.a.ReplaySubject;a.combineLatest(o,i,(function(e,t,n){return e&&t&&n})).filter((function(e){return e})).subscribe((function(){m("LOGGED_IN",null,"User has logged in.",s),function(){if(!n.player){var e=window.Spotify.Player;n.player=new e({name:"tune mountain",getOAuthToken:function(e){return e(n.accessToken)},volume:.5}),n.player.connect(),n.player.addListener("ready",(function(e){var t=e.device_id;m("PLAYER_READY","Spotify player ready to stream songs on ".concat(t),s)})),n.player.addListener("player_state_changed",(function(e){return m("PLAYER_STATE_CHANGED",e,"Spotify player state changed!",s)}))}}()})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=f(),a=null,o=null;if(n.accessToken&&n.refreshToken)a=n.accessToken,o=n.refreshToken,m("ACCESS_TOKEN_ACQUIRED",{accessToken:a,refreshToken:o},"Using tokens from query returned from server!",t),localStorage.setItem("spotify-refresh-token",n.refreshToken);else{m("LOADING_TOKEN_FROM_LOCAL_STORAGE",null,"Spotify tokens not found in query. Looking in local storage...",t);var r=localStorage.getItem("spotify-refresh-token");r?(m("REFRESHING_TOKEN",null,"Spotify refresh token found in localStorage. Fetching new accessToken from server...",t),e(r).then((function(e){m("ACCESS_TOKEN_ACQUIRED",{accessToken:e.accessToken,refreshToken:r},"Spotify access token fetched.",t)}))):m("NO_ACCESS_TOKEN",null,"No tokens found or refreshed. User must log in.",t)}}(this.getNewAccessToken,s),s.filter((function(e){return"ACCESS_TOKEN_ACQUIRED"===e.state})).subscribe((function(e){var t=e.body,a=t.accessToken,o=t.refreshToken;n.accessToken=a,n.refreshToken=o,a&&o?i.next(!0):i.next(!1)})),this.name=t,this.player=null,this.spotifyStateNotifier=s,h()(["https://sdk.scdn.co/spotify-player.js"]).then((function(){a.next(!0)})),window.onSpotifyWebPlaybackSDKReady=function(){return o.next(!0)},this.spotifyStateNotifier=s,this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.toggle=this.toggle.bind(this)}return Object(i.a)(e,[{key:"activate",value:function(){return this.player?this.player.connect():null}},{key:"deactivate",value:function(){this.player&&this.player.disconnect()}},{key:"getNewAccessToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||this.refreshToken;return fetch("".concat("","/spotify-service/refresh-token/").concat(t)).then((function(e){return e.json()})).catch((function(e){console.error(e)}))}},{key:"pause",value:function(){return this.player?this.player.pause():null}},{key:"toggle",value:function(){return this.player?this.player.togglePlay():null}},{key:"resume",value:function(){return this.player?this.player.resume():null}},{key:"play",value:function(e){var t="spotify:track:".concat(e);if(!this.player)throw new Error("Player not initialized.");var n=function(e){var t=e.spotifyURI,n=e.playerInstance._options,a=n.getOAuthToken,o=n.id;a((function(e){var n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}};t&&(n.body=JSON.stringify({uris:[t]})),fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(o),n).then((function(){return console.log("Success: Playing uri: ".concat(t))}))}))};n({playerInstance:this.player,spotifyURI:t})}},{key:"login",value:function(){console.log("Redirecting to Spotify for authorization..."),window.location="".concat("","/spotify-service/login")}},{key:"search",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n="q=",a=0;a<(arguments.length<=1?0:arguments.length-1);a++)n+=a+1<1||arguments.length<=a+1?void 0:arguments[a+1],n+=a+1===(arguments.length<=1?0:arguments.length-1)?"":"&20";var o="type=track",r="limit=8",i="https://api.spotify.com/v1/search?".concat(n,"&").concat(o,"&").concat(r),s={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.accessToken)}};fetch(i,s).then((function(e){return e.json()})).then((function(n){m("TRACKS_FETCHED",n,"Choose any of these songs...",e.spotifyStateNotifier),t&&t(n)})).catch((function(e){throw new Error(e)}))}},{key:"getAudioAnalysisAndFeatures",value:function(e,t){var n=this,a="https://api.spotify.com/v1/audio-analysis/".concat(e),o="https://api.spotify.com/v1/audio-features/".concat(e),r={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.accessToken)}},i=null,s=null;fetch(a,r).then((function(e){return e.json()})).then((function(e){return i=e,fetch(o,r)})).then((function(e){return e.json()})).then((function(e){s=e,t&&t({features:s,analysis:i}),m("METADATA_FECHED",{audioFeatures:s,audioAnalysis:i},"Metadata available.",n.spotifyStateNotifier)})).catch((function(e){return console.error(e)}))}},{key:"getUserInfo",value:function(){var e=this;return new Promise((function(t,n){var a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)}};return fetch("https://api.spotify.com/v1/me",a).then((function(e){return e.json()})).then((function(e){return t({spotifyID:e.id,displayName:e.display_name,imageUrl:e.images[0].url})})).catch((function(e){return n(e)}))}))}},{key:"stateNotifier",get:function(){return this.spotifyStateNotifier}},{key:"playerState",get:function(){return this.player?this.player.getCurrentState():null}}]),e}(),A=n(49),y=n(83),v=n(18),b=n(36),S=n(35),E=n.n(S),k=(n(530),Object.freeze({SMALL:"SMALL",LARGE:"LARGE",RETURN:"RETURN",ENTER:"ENTER",SPOTIFY:"SPOTIFY"})),O=Object.freeze({SMALL:"hud-button-small",LARGE:"hud-button-large",RETURN:"hud-button-return",ENTER:"hud-button-enter",SPOTIFY:"hud-button-small spotify-button"}),C=Object.freeze({SMALL:{borderBottom:"solid 4px",borderLeft:"solid 4px",marginTop:"1.5vw",height:"5vw"},RETURN:{width:"7.8vh",height:"7vh",borderBottom:"solid 4px",borderLeft:"solid 4px"},ENTER:{height:"3vw",borderBottom:"solid 4px",borderLeft:"solid 4px"},SPOTIFY:{borderBottom:"solid 4px",borderLeft:"solid 4px",marginTop:"1.5vw",height:"5vw"}}),T=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={isHovering:!1},n.btnRef=o.a.createRef(),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.text,r=t.onClick,i=t.style,s=t.children,c=t.className,l=this.state.isHovering,u=Boolean(k[n])?O[n]:O.SMALL;return o.a.createElement("div",{onMouseEnter:function(){return e.setState({isHovering:!0})},onMouseLeave:function(){return e.setState({isHovering:!1})},className:"button-wrapper ".concat(c),style:i},o.a.createElement("button",{ref:this.btnRef,style:l?C[n]:null,className:"hud-button ".concat(u),onClick:function(t){e.btnRef.current.blur(),t.buttonType=u,r(t)}},a||s))}}]),t}(a.Component);T.defaultProps={type:k.SMALL,text:"Button Text Not Set",onClick:function(){return console.error("Click handler not set for this button.")},onHover:function(){return console.error("Hover handler not set for this button.")},onHoverEnd:function(){return console.error("End Hover handler not set for this button.")},className:"",isHovering:!1};var j=T,w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:26;if(e.length<=t)return e;var n=e.substring(0,t);return"".concat(n,"...")},N=(n(208),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={value:""},n.lastSubmittedValue=null,n.autoSearchTimer=null,n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.autoSearchTimer&&clearTimeout(this.autoSearchTimer),this.autoSearchTimer=setTimeout(this.handleSubmit,this.props.submissionTimeoutDelay),this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(){""!==this.state.value&&this.state.value!==this.lastSubmittedValue&&(this.props.searchSongsWithQuery(function(e){var t=e.trim().match(/[A-Za-z0-1 ]/g),n=[],a="";return t.forEach((function(e,o){" "===e?(a.length>0&&n.push(a),a=""):(a+=e,o+1===t.length&&n.push(a))})),n}(this.state.value)),this.lastSubmittedValue=this.state.value)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-bar-container",onKeyUp:function(t){13===t.keyCode&&e.handleSubmit()}},o.a.createElement("input",{className:"text-box",placeholder:this.props.placeholder,type:"text",value:this.state.value,onChange:this.handleChange}),o.a.createElement(j,{type:k.ENTER,text:"Search",onClick:this.handleSubmit}))}}]),t}(a.Component));N.defaultProps={searchSongsWithQuery:function(e){throw new Error("Unable to search song with query ".concat(e,". No handler passed."))},placeholder:"Type the name of a song...",submissionTimeoutDelay:2e3};var I=N,R=(n(531),Object.freeze({small:"song-container-small",large:"song-container-large",mini:"song-container-mini"})),L=function(e){var t=e.name,n=e.id,a=e.imgURL,r=e.artist,i=e.duration,s=e.handleClick,c=e.size;return o.a.createElement("div",{className:"".concat(R[c]," song-container"),onClick:function(){return s({name:t,id:n,imgURL:a,artist:r,duration:i})}},o.a.createElement("img",{className:"song-image",src:a,alt:"Album cover for song ".concat(t," by artist ").concat(r)}),o.a.createElement("div",{className:"song-data-container"},o.a.createElement("h1",{className:"song-name"},w(t)),o.a.createElement("h2",{className:"song-artist"},w(function(e){var t="";return e.forEach((function(n,a){t+=n,t+=a+1===e.length?"":", "})),t}(r)))))};L.defaultProps={name:"No Song Name Assigned",id:"No ID Passed",imgURL:"No image URL passed",artist:"No Artist",duration:-1,handleClick:function(){console.log("Song clicked!")},size:"small"};var M=L,q=function(e){function t(e){var n;if(Object(r.a)(this,t),n=Object(s.a)(this,Object(c.a)(t).call(this,e)),!e.spotifyService)throw new Error("HUDSearchMenu requires a reference to an instance of SpotifyService!");return n.spotifyService=e.spotifyService,n.state={songList:[],hasSearched:!1},n.filterReceivedJSON=n.filterReceivedJSON.bind(Object(v.a)(n)),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"filterReceivedJSON",value:function(e){var t=E.a.get(e,"tracks.items");if(!t)throw new Error("No items found in search response!");var n=t.map((function(e){return function(e,t,n,a,o){return{name:t,artist:n,img:a,id:e,duration:o}}(e.id,e.name,E.a.get(e,"artists").map((function(e){return e.name})),E.a.get(e,"album.images")[0].url,E.a.get(e,"duration_ms"))}));this.setState({songList:n})}},{key:"renderSongList",value:function(){var e=this,t=this.state,n=t.songList,a=t.hasSearched;return 0===n.length&&a?o.a.createElement("h3",{className:"message"},"No songs found. Try something else."):n.map((function(t){return o.a.createElement(M,{name:t.name,artist:t.artist,imgURL:t.img,duration:t.duration,id:t.id,key:t.id,handleClick:function(){return e.props.selectSong(t)}})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"hud-song-search-outer-container"},o.a.createElement("div",{className:"hud-song-search-inner-container"},o.a.createElement(I,{searchSongsWithQuery:function(t){return e.spotifyService.search(e.filterReceivedJSON,t)}}),o.a.createElement("div",{className:"song-list-container"},this.renderSongList()),o.a.createElement(j,{text:"<",type:k.RETURN,onClick:this.props.onReturn})))}}]),t}(a.Component);q.defaultProps={spotifyService:null,selectSong:function(e){console.error("Couldn't select song. No handler passed",e)},onReturn:function(){console.error("No return button handler passed.")}};var P=q,x=(n(532),function(e){var t=e.hasLoggedIn,n=e.onSongSelectRequest,a=e.onLoginRequest,r=e.onAboutPageRequest,i=e.onLeaderboardsPageRequest,s=o.a.createElement(j,{text:"Spotify Login",onClick:a,type:k.SPOTIFY}),c=o.a.createElement(j,{text:"Select Song",onClick:n,type:k.SPOTIFY}),l=(o.a.createElement(j,{text:"About",onClick:r}),o.a.createElement(j,{text:"Leaderboards",onClick:i}),t?c:s);return o.a.createElement("div",{className:"hud-main-menu-outer-container"},o.a.createElement("div",{className:"hud-main-menu-button-container"},l,null,null))});x.defaultProps={hasLoggedIn:!1,onSongSelectRequest:function(){throw new Error("No handler passed.")},onLoginRequest:function(){throw new Error("No handler passed.")},onAboutPageRequest:function(){throw new Error("No handler passed.")},onLeaderboardsPageRequest:function(){throw new Error("No handler passed.")}};var Q=x,D=(n(533),n(534),function(e){return o.a.createElement("div",{className:"score-container"},o.a.createElement("h2",null,"Score: "),o.a.createElement("h1",null,e.score))}),U=function(e){var t=e.songObject,n=e.positionInMilliseconds,a=e.shouldDisplay,r=e.score;if(!t)return null;var i=t.name,s=t.id,c=t.img,l=t.artist,u=t.duration,h={width:"".concat(n/u*100,"%")},d={display:a?"block":"none"};return o.a.createElement("div",{className:"song-progress-bar-container",style:d},o.a.createElement("div",{id:"bar-wrapper"},o.a.createElement("div",{id:"progress-bar",style:h})),o.a.createElement("div",{className:"progress-bar-song-icon"},o.a.createElement(M,{name:i,artist:l,imgURL:c,id:s,size:"mini"}),o.a.createElement(D,{score:r||0})))},B="IN",z="OUT",G=function(e){e?e.next({position:B}):console.error("Invalid subject!")},F=function(e){e?e.next({position:z}):console.error("Invalid subject!")},Y=(n(535),function(e){function t(e){var n;Object(r.a)(this,t),n=Object(s.a)(this,Object(c.a)(t).call(this,e));var a=e.IN,o=e.OUT,i=e.transitionRequestObservable;return n.state={position:e.shouldMountIn?B:z,currentStyle:e.shouldMountIn?a:o},i.delay(250).subscribe((function(t){var a=t.position;a===B?(n.handleTransitionStart(a),n.setState({position:a,currentStyle:e.IN})):a===z?(console.log("request received"),n.handleTransitionStart(a),n.setState({position:a,currentStyle:e.OUT})):console.error("Invalid position request. Position passed: ",a)})),n.handleTransitionStart=n.handleTransitionStart.bind(Object(v.a)(n)),n.handleTransitionEnd=n.handleTransitionEnd.bind(Object(v.a)(n)),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.onMount;e&&e()}},{key:"handleTransitionStart",value:function(e){switch(e){case B:if(!this.props.onStartTransitionIn)break;this.props.onStartTransitionIn();break;case z:if(!this.props.onStartTransitionOut)break;this.props.onStartTransitionOut();break;default:console.error("'Position' state not appropriate: ",e)}}},{key:"handleTransitionEnd",value:function(){switch(this.state.position){case B:if(!this.props.onEndTransitionIn)break;this.props.onEndTransitionIn();break;case z:if(!this.props.onEndTransitionOut)break;this.props.onEndTransitionOut();break;default:console.error("'Position' state not appropriate: ",this.state.position)}}},{key:"render",value:function(){return o.a.createElement("div",{className:"transition-wrapper",style:Object(A.a)({},this.state.currentStyle,{zIndex:this.props.zIndex}),onTransitionEnd:this.handleTransitionEnd},this.props.children)}}]),t}(a.Component));Y.defaultProps={onMount:function(){return console.log("Component mounted.")},onStartTransitionIn:null,onStartTransitionOut:null,onEndTransitionIn:null,onEndTransitionOut:null,shouldMountIn:!1,zIndex:0};var Z=Y,W=function(e){var t=e.shouldMountIn,n=e.onStartTransitionIn,a=e.onStartTransitionOut,r=e.onEndTransitionIn,i=e.onEndTransitionOut,s=e.transitionRequestObservable,c=e.onMount,l=e.zIndex,u=c||function(){return G(s)};return o.a.createElement(Z,{zIndex:l,OUT:{opacity:0},IN:{opacity:1},shouldMountIn:t,transitionRequestObservable:s,onMount:u,onEndTransitionIn:r,onEndTransitionOut:i,onStartTransitionIn:n,onStartTransitionOut:a},e.children)};W.defaultProps={shouldMountIn:!1,zIndex:0};var H=W,V=function(e){var t=e.shouldMountIn,n=e.onStartTransitionIn,a=e.onStartTransitionOut,r=e.onEndTransitionIn,i=e.onEndTransitionOut,s=e.transitionRequestObservable,c=e.onMount,l=e.zIndex,u=c||function(){return G(s)};return o.a.createElement(Z,{zIndex:l,OUT:{left:"100%"},IN:{left:"0"},shouldMountIn:t,transitionRequestObservable:s,onMount:u,onEndTransitionIn:r,onEndTransitionOut:i,onStartTransitionIn:n,onStartTransitionOut:a},e.children)};V.defaultProps={shouldMountIn:!1};var J=V,K=(n(536),function(e){var t=e.songObject,n=e.onConfirmation,a=t.name,r=t.id,i=t.img,s=t.artist;return o.a.createElement("div",{className:"hud-song-select-outer-container"},o.a.createElement(M,{size:"large",name:a,id:r,imgURL:i,artist:s}),o.a.createElement(j,{text:"Generate Level",onClick:n,style:{width:"auto"}}),o.a.createElement(j,{text:"<",type:k.RETURN,onClick:e.onReturn}))}),X=(n(537),["Very Poorly","Poorly","Somewhat Poorly","Somewhat Well","Well","Very Well"]),_=["Too Slow","Just Right","Too Fast"],$="What elements did you particularly enjoy?",ee="What elements did you dislike/have problems with?",te="Did you feel that this experience helped enhance the music you were listening to?",ne="To what degree did you feel the elements in the level were in sync with the music you were listening to?",ae="To what extent did the moving background help create the feeling of going down a mountain?",oe="How much did the moving background help give you a sense of speed as you went down the mountain? ",re="Did you feel like you were moving at an appropriate speed for the type of song you chose?",ie="To what extent did the background elements positively complement your visual experience?",se="Did being able to choose your own song help enhance your experience over having to select a song from a given playlist?",ce="Select all that describe your experience choosing a song",le="Would you like to see song recommendations based on what you listened to previously?",ue="If there was one thing you could improve about this game what would it be?",he="Do you have a Spotify Premium account?",de="Do you have any other comments about our game?",pe=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={btnText:"Submit!",q1:{speed:!1,tricks:!1,movingBackground:!1,jump:!1,art:!1,character:!1,animations:!1,mountain:!1},q2:{speed:!1,tricks:!1,movingBackground:!1,jump:!1,art:!1,character:!1,animations:!1,mountain:!1},q3:!1,q4:1,q5:1,q6:1,q7:2,q8:1,q9:!1,q10:{easy:!1,overwhelming:!1,couldntChoose:!1,cateredToMe:!1,noChoiceAvailabe:!1,other:!1,otherValue:""},q11:!1,q12:"",q13:!1,q14:""},n.handleChange=n.handleChange.bind(Object(v.a)(n)),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e,t){var n={};n[e]=t,this.setState(n)}},{key:"renderQuestionContainer",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o.a.createElement("div",{className:"question-container",key:n},o.a.createElement("p",null,e),o.a.createElement("div",{className:"input-wrapper"},t,a?o.a.createElement("p",null,o.a.createElement("strong",null,a)):null))}},{key:"renderMultipleChoiceContainer",value:function(e,t,n,a){var r=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this.state[a],c=Object.keys(s);if(i){if(n.length!==c.length-1)return console.error("Labels not compatible with keys.",{labels:n.length,keys:c.length}),null}else if(n.length!==c.length)return console.error("Labels not compatible with keys.",{labels:n.length,keys:c.length}),null;var l=function(e){var t=e.target.value,n=s;n[t]=e.target.checked;var o={};o[a]=n,r.setState(o)},u=function(e){var t=s;t.otherValue=e.target.value;var n={};n[a]=t,r.setState(n)};return o.a.createElement("div",{className:"question-container",key:t},o.a.createElement("p",null,e),o.a.createElement("div",{className:"checkbox-array-container"},n.map((function(e,t){return o.a.createElement("div",{className:"checkbox-div",key:a+t},o.a.createElement("label",null,o.a.createElement("input",{type:"checkbox",checked:s[c[t]],value:c[t],onChange:l})," ",e))})),i?o.a.createElement("input",{type:"text",disabled:!s.other,value:s.otherValue,onChange:u,name:a,id:a}):null))}},{key:"render",value:function(){var e=this,t=new d.Subject,n=[],a=["The speed","The tricks","The moving backgrounds","The jumping","The Artwork","The player character","Animations","Procedurally generated mountain"];return n.push(e.renderMultipleChoiceContainer($,n.length,a,"q1")),n.push(e.renderMultipleChoiceContainer(ee,n.length,a,"q2")),n.push(e.renderQuestionContainer(te,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleChange("q3",t.target.checked)},checked:e.state.q3}),o.a.createElement("span",{className:"slider"})),n.length,e.state.q3?"Yes":"No")),n.push(e.renderQuestionContainer(ne,o.a.createElement("input",{type:"range",step:"1",value:e.state.q4,onChange:function(t){return e.handleChange("q4",parseInt(t.target.value,10))},min:"1",max:"6",name:"q4",id:"q4"}),n.length,X[e.state.q4-1])),n.push(e.renderQuestionContainer(ae,o.a.createElement("input",{type:"range",step:"1",value:e.state.q5,onChange:function(t){return e.handleChange("q5",parseInt(t.target.value,10))},min:"1",max:"6",name:"q5",id:"q5"}),n.length,X[e.state.q5-1])),n.push(e.renderQuestionContainer(oe,o.a.createElement("input",{type:"range",step:"1",value:e.state.q6,onChange:function(t){return e.handleChange("q6",parseInt(t.target.value,10))},min:"1",max:"6",name:"q6",id:"q6"}),n.length,X[e.state.q6-1])),n.push(e.renderQuestionContainer(re,o.a.createElement("input",{style:{width:"20vw"},type:"range",step:"1",value:e.state.q7,onChange:function(t){return e.handleChange("q7",parseInt(t.target.value,10))},min:"1",max:"3",name:"q7",id:"q7"}),n.length,_[e.state.q7-1])),n.push(e.renderQuestionContainer(ie,o.a.createElement("input",{type:"range",step:"1",value:e.state.q8,onChange:function(t){return e.handleChange("q8",parseInt(t.target.value,10))},min:"1",max:"6",name:"q8",id:"q8"}),n.length,X[e.state.q8-1])),n.push(e.renderQuestionContainer(se,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleChange("q9",t.target.checked)},checked:e.state.q9}),o.a.createElement("span",{className:"slider"})),n.length,e.state.q9?"Yes":"No")),n.push(e.renderMultipleChoiceContainer(ce,n.length,["Easy to use","Overwhelming","Couldn\u2019t think of a song","Catered to me","My choice wasn't there","Other"],"q10",!0)),n.push(e.renderQuestionContainer(le,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleChange("q11",t.target.checked)},checked:e.state.q11}),o.a.createElement("span",{className:"slider"})),n.length,e.state.q11?"Yes":"No")),n.push(e.renderQuestionContainer(ue,o.a.createElement("input",{type:"text",value:e.state.q12,onChange:function(t){return e.handleChange("q12",t.target.value)},name:"q12",id:"q12"}),n.length,e.state.q12?"\u221a":"Field required")),n.push(e.renderQuestionContainer(he,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",onChange:function(t){return e.handleChange("q13",t.target.checked)},checked:e.state.q13}),o.a.createElement("span",{className:"slider"})),n.length,e.state.q13?"Yes":"No")),n.push(e.renderQuestionContainer(de,o.a.createElement("input",{type:"text",value:e.state.q14,onChange:function(t){return e.handleChange("q14",t.target.value)},name:"q14",id:"q14"}),n.length,"")),o.a.createElement(J,{zIndex:this.props.zIndex,transitionRequestObservable:t,onMount:function(){return G(t)}},o.a.createElement("div",{className:"form-container"},o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.onSubmit(e.state)}},n,o.a.createElement(j,{onClick:function(){return e.setState({btnText:"Submitting..."})},type:k.SMALL,text:this.state.btnText}))))}}]),t}(a.Component);pe.defaultProps={zIndex:5};var me=pe,fe=n(220),ge=n.n(fe),Ae=n(221),ye=n.n(Ae),ve=(n(538),n(539),function(e){var t=e.controlMap,n=e.highlight,a=e.hide;return o.a.createElement("div",{className:"control-display-wrapper ".concat(n?"highlight bounce animated":""," ").concat(a?"hide":"")},o.a.createElement("h1",null,"Controls:"),Object.keys(t).map((function(e,n){return o.a.createElement("h3",{key:e+n},o.a.createElement("strong",null,e)," \u27f6 ",t[e])})))});ve.defaultProps={controlMap:{Spacebar:"Jump",W:"Trick 1",A:"Trick 2",S:"Trick 3",D:"Trick 4"},highlight:!1};var be=ve,Se=function(e){var t=e.isPlaying,n=e.onPause,a=e.onResume;return o.a.createElement("div",{className:"pause-overlay-container ".concat(t?"":"cover-screen")},o.a.createElement(j,{className:"play-pause-btn ".concat(t?"playing":"paused"),onClick:function(){t&&n(),a()},text:""},o.a.createElement("img",{src:t?ge.a:ye.a,alt:"Play/Pause Icon"})),o.a.createElement(be,{highlight:!t,hide:t}))},Ee=(n(540),function(e){var t=e.buttonText,n=e.onButtonClick,a=e.title,r=e.subtitle,i=e.paragraphs,s=e.children;if(s&&i)return console.error("You can pass either an array of paragraphs or children to be rendered."),null;var c=r?o.a.createElement("h2",null,r):null,l=a?o.a.createElement("h1",null,a):null,u=null;s?u=s:i&&Array.isArray(i)&&(u=i.map((function(e,t){return o.a.createElement("p",{key:t},e)})));var h=new d.Subject;return o.a.createElement(H,{transitionRequestObservable:h,shouldMountIn:!1,zIndex:3,onEndTransitionOut:n},o.a.createElement("div",{className:"message-overlay-outer-container"},o.a.createElement("div",{className:"message-overlay-body-container"},l,c,u,o.a.createElement("br",null),o.a.createElement(j,{type:k.SMALL,text:t,onClick:function(){return F(h)}}))))});Ee.defaultProps={buttonText:"OK",onButtonClick:function(){return console.error("No button click handler.")},title:"Default message:",subtitle:"This is a message."};var ke=Ee,Oe=(n(541),function(e){var t=e.transitionObservable,n=e.onUnmount;return o.a.createElement(H,{transitionRequestObservable:t,shouldMountIn:!1,zIndex:3,onEndTransitionOut:n},o.a.createElement("div",{className:"loading-overlay-container"},o.a.createElement("div",{className:"lds-roller"},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null)),o.a.createElement("h2",{className:"loading-text"},"Generating mountain..."),o.a.createElement(be,null)))}),Ce=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"checkInUser",value:function(e,t,n){return new Promise((function(a,o){fetch("/api/user/".concat(e)).then((function(e){return e.json()})).then((function(r){if("success"===r.status)a(!0);else{if("failure"===r.status&&1===r.errorCode)return function(){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spotifyID:e,displayName:t,imageUrl:n})};return fetch("/api/users",a)}();o()}})).then((function(e){return e.json()})).then((function(e){"success"===e.status?a(!1):o()})).catch((function(){return o()}))}))}},{key:"saveGameSession",value:function(e,t){var n=this;return new Promise((function(a,o){n.saveGameSessionOnly(e).then((function(e){return n.saveInputArrayOnly(t,e)})).then((function(e){return a(e)})).catch((function(e){return o(e)}))}))}},{key:"saveGameSessionOnly",value:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return new Promise((function(e,n){fetch("/api/sessions",t).then((function(e){return e.json()})).then((function(t){var a=E.a.get(t,"sessions");return"success"===t.status?e(a[a.length-1].sessionID):n(t)})).catch((function(e){return n(e)}))}))}},{key:"saveInputArrayOnly",value:function(e,t){var n=e.map((function(e){return Object(A.a)({},e,{sessionID:t})})),a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inputs:n})};return new Promise((function(n,o){"number"!==typeof t&&o({status:"failure",reason:"something is wrong",thing:{inputArray:e,sessionID:t}}),fetch("/api/inputs",a).then((function(e){return e.json()})).then((function(e){return"success"===e.status?n():o(e)})).catch((function(e){return o(e)}))}))}},{key:"fetchLeaderboard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="/api/leaderboard".concat(e?"/".concat(e):""),n=function(e,n){fetch(t).then((function(e){return e.json()})).then((function(t){return"success"===t.status?e(t):n(t)})).catch((function(e){return n(e)}))};return new Promise(n)}},{key:"fetchInputs",value:function(e){var t="/api/session/".concat(e);return new Promise((function(e,n){fetch(t).then((function(e){return e.json()})).then((function(t){return"success"===t.status?e(t):n(t)})).catch((function(e){return n(e)}))}))}},{key:"submitFeedback",value:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/submit-feedback",t).then((function(e){return e.json()}))}}]),e}(),Te=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={selectedSong:null,playing:!1,playbackPosition:0,score:0,displayCompletionForm:!1,displayPauseOverlay:!1,displayLoadingOverlay:!1,mountLoadingOverlay:!1,displayWelcomeOverlay:!1,displayNewPlayerOverlay:!1,displayError:!1,menuStack:[]},n.mainMenuTransitionController=null,e.gameStateController.onNotificationOf(b.GameStateEnums.PLAY,(function(){n.state.selectedSong&&(n.props.spotifyService.play(n.state.selectedSong.id),n.setState({playing:!0,displayLoadingOverlay:!1,displayPauseOverlay:!0}))})),e.gameStateController.onNotificationOf(b.GameStateEnums.SCORE_CHANGED,(function(e){var t=e.body;return n.setState({score:t})})),e.spotifyService.stateNotifier.filter((function(e){return"PLAYER_STATE_CHANGED"===e.state})).subscribe((function(e){return n.readAndUpdateState(e.body)})),n.playerStateUpdaterIntervalID=null,n.mountSongSearchMenu=n.mountSongSearchMenu.bind(Object(v.a)(n)),n.mountSongSelectMenu=n.mountSongSelectMenu.bind(Object(v.a)(n)),n.popMenu=n.popMenu.bind(Object(v.a)(n)),n.mainMenu=n.mainMenu.bind(Object(v.a)(n)),n.updatePlaybackState=n.updatePlaybackState.bind(Object(v.a)(n)),n.renderOverlay=n.renderOverlay.bind(Object(v.a)(n)),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"readAndUpdateState",value:function(e){var t=E.a.get(e,"track_window.current_track.id"),n=E.a.get(this.state,"selectedSong.id"),a=E.a.get(e,"paused"),o=E.a.get(e,"position");t!==n?this.state.displayCompletionForm||(this.props.gameStateController.request(b.GameStateEnums.IDLE,{reason:"Outside forces changed the song."}),this.mainMenu(),this.setState({playing:!1,displayPauseOverlay:!1}),G(this.mainMenuTransitionController),this.props.spotifyService.deactivate()):a?(0===o?(this.props.gameStateController.request(b.GameStateEnums.IDLE,{reason:"end"}),this.setState({playing:!1,displayPauseOverlay:!1,displayCompletionForm:!0}),this.props.spotifyService.deactivate()):(this.props.gameStateController.request(b.GameStateEnums.PAUSE,{reason:"paused"}),this.setState({playing:!1,playbackPosition:o})),this.terminatePlaybackStateUpdater()):(this.state.playing||this.props.gameStateController.request(b.GameStateEnums.PLAY,{reason:"unpaused"}),this.initPlaybackStateUpdater(),this.setState({playing:!0,playbackPosition:o}))}},{key:"componentDidMount",value:function(){var e=this,t=new d.Subject;this.mainMenuTransitionController=t,this.setState({menuStack:[o.a.createElement(H,{transitionRequestObservable:t,key:0},o.a.createElement(Q,{hasLoggedIn:!0,onSongSelectRequest:function(){F(t),e.mountSongSearchMenu(t)}}))]}),this.props.hasLoggedIn||setTimeout((function(){return e.setState({displayWelcomeOverlay:!0})}),1500)}},{key:"updatePlaybackState",value:function(){var e=this,t=this.props.spotifyService.playerState;t&&t.then((function(t){if(t){var n=t.position,a=t.paused;e.setState({playbackPosition:n,playing:!a})}else console.error("User is not playing music through the Web Playback SDK")}))}},{key:"initPlaybackStateUpdater",value:function(){this.terminatePlaybackStateUpdater(),this.playerStateUpdaterIntervalID=setInterval(this.updatePlaybackState,3e3)}},{key:"terminatePlaybackStateUpdater",value:function(){clearInterval(this.playerStateUpdaterIntervalID)}},{key:"mountSongSearchMenu",value:function(e){var t=this,n=new d.Subject,a=o.a.createElement(J,{transitionRequestObservable:n,key:1},o.a.createElement(P,{spotifyService:this.props.spotifyService,selectSong:function(e){F(n),t.mountSongSelectMenu(e,n)},onReturn:function(){F(n),t.popMenu(),G(e)}}));this.setState((function(e){return{menuStack:[].concat(Object(y.a)(e.menuStack),[a])}}))}},{key:"mountSongSelectMenu",value:function(e,t){var n=this;this.setState({selectedSong:e});var a=new d.Subject,r=o.a.createElement(J,{transitionRequestObservable:a,key:2},o.a.createElement(K,{songObject:e,onConfirmation:function(){n.initPlaybackStateUpdater(),n.setState({displayLoadingOverlay:!0,mountLoadingOverlay:!0}),F(a),n.props.spotifyService.getAudioAnalysisAndFeatures(e.id,(function(e){console.log("Features and analysis: ",e),n.props.gameStateController.request(b.GameStateEnums.GENERATE,e)})),n.props.spotifyService.activate(),n.mainMenu()},onReturn:function(){F(a),n.popMenu(),G(t)}}));this.setState((function(e){return{menuStack:[].concat(Object(y.a)(e.menuStack),[r])}}))}},{key:"popMenu",value:function(){this.setState((function(e){var t=e.menuStack;return t.pop(),{menuStack:Object(y.a)(t)}}))}},{key:"mainMenu",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&G(this.mainMenuTransitionController);this.setState((function(e){return{menuStack:[e.menuStack[0]]}}))}},{key:"renderOverlay",value:function(){var e=this,t=this.state,n=t.displayCompletionForm,a=t.displayPauseOverlay,r=t.displayError,i=t.displayWelcomeOverlay,s=this.props.spotifyService;return r?null:n?o.a.createElement(me,{zIndex:this.state.menuStack.length,onSubmit:function(t){Ce.submitFeedback(Object(A.a)({},t,{songID:E.a.get(e.state,"selectedSong.id")})).then((function(){e.mainMenu(!0),e.setState({displayCompletionForm:!1})})).catch((function(e){return console.error(e)}))}}):a?o.a.createElement(Se,{isPlaying:this.state.playing,onPause:function(){s.toggle().then((function(){return s.toggle()}))},onResume:function(){s.toggle()}}):i?o.a.createElement(ke,{buttonText:"Let's Go!",onButtonClick:function(){return e.setState({displayWelcomeOverlay:!1})},title:"Welcome to Tune Mountain!",subtitle:"An audio-visualizer by L\xe9o, Cem, Jarod, and Peter"},o.a.createElement("p",null,"Welcome to Tune Mountain. To play this game ",o.a.createElement("strong",null,"you need")," a Spotify premium account, so we could play the song of your choosing. After you log in click ",o.a.createElement("strong",null,"Select Song")," to choose any song from Spotify*, and the game will generate a unique mountain experience for you to snowboard down on. "),o.a.createElement("p",null,"Game controls can be viewed on the pause menu."),o.a.createElement("p",null,"*The song has to go through the spotify audio feature analysis, so not every song might be available.")):null}},{key:"renderLoadingOverlay",value:function(){var e=this,t=this.state,n=t.displayLoadingOverlay,a=t.mountLoadingOverlay,r=new d.Subject;return n&&a?o.a.createElement(Oe,{transitionObservable:r,onUnmount:function(){return e.setState({mountLoadingOverlay:!1})}}):null}},{key:"render",value:function(){var e=this,t=o.a.createElement(U,{songObject:this.state.selectedSong,positionInMilliseconds:this.state.playbackPosition,shouldDisplay:this.state.playing,score:this.state.score});return o.a.createElement("div",null,t,this.state.errorComponent,this.renderLoadingOverlay(),this.renderOverlay(),function(){if(!e.props.hasLoggedIn){var t=new d.Subject;return o.a.createElement("div",null,o.a.createElement(H,{transitionRequestObservable:t,onMount:function(){return G(t)}},o.a.createElement(Q,{onLoginRequest:e.props.spotifyService.login,hasLoggedIn:!1})))}return e.state.menuStack}())}}]),t}(a.Component);Te.defaultProps={hasLoggedIn:!1};var je=Te,we=n(222),Ne=n.n(we),Ie=(n(579),function(e){function t(e){var n;Object(r.a)(this,t),n=Object(s.a)(this,Object(c.a)(t).call(this,e));var a=new g("".concat("Tune Mountain"," Web Player"));return a.stateNotifier.subscribe((function(e){return console.log(e)})),a.stateNotifier.filter((function(e){return"LOGGED_IN"===e.state})).subscribe((function(){return n.setState({hasLoggedIn:!0})})),n.spotifyService=a,n.apiService=new Ce,n.canvasReference=o.a.createRef(),n.game=null,n.gameStateController=new b.GameStateController,n.state={hasLoggedIn:!1,currentMenu:null},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.game=new Ne.a(this.gameStateController,this.canvasReference.current)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("canvas",{ref:this.canvasReference,className:"game-viewport",width:window.innerWidth,height:window.innerHeight}),o.a.createElement(je,{spotifyService:this.spotifyService,hasLoggedIn:this.state.hasLoggedIn,gameStateController:this.gameStateController}))}}]),t}(a.Component)),Re=n(224),Le=n.n(Re);n(583);Le.a.render(o.a.createElement(Ie,null),document.getElementById("root"))}},[[225,1,2]]]);
//# sourceMappingURL=main.c5e253fe.chunk.js.map